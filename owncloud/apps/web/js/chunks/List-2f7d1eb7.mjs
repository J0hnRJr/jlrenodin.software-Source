var w=Object.defineProperty;var y=(e,t,a)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var u=(e,t,a)=>(y(e,typeof t!="symbol"?t+"":t,a),a);import{m as q,K as F,d as T,q as D,a as I,M as _,o as j}from"./vendor-2c44cb30.mjs";import{_ as W}from"./eventBus-bf81ca73.mjs";const p=(e,...t)=>{const{href:a}=e.resolve(F(e.currentRoute));return t.map(i=>{const{href:s}=e.resolve({...i});return s==="/"||s==="#/"?!1:a.startsWith(s)}).some(Boolean)},r=(...e)=>(t,...a)=>{if(!a.length)return p(t,...e);const[i,...s]=a.map(c=>{const l=e.find($=>$.name===c);if(!l)throw new Error(`unknown comparative '${c}'`);return l});return p(t,i,...s)};const o=(e,...t)=>q({},{name:e},...t.map(a=>({...a.params&&{params:a.params},...a.query&&{query:a.query}}))),m=(e,t={})=>o(e,t),d=m("files-common-favorites"),v=m("files-common-search"),U=r(d,v),z=e=>[{path:"/search",component:e.App,children:[{name:v.name,path:"list/:page?",component:e.SearchResults,meta:{authContext:"user",title:"Search results",contextQueryItems:["term","provider"]}}]},{path:"/favorites",component:e.App,children:[{name:d.name,path:"",component:e.Favorites,meta:{authContext:"user",title:"Favorite files"}}]}],f=(e,t={})=>o(e,t),S=f("files-spaces-projects"),b=f("files-spaces-generic"),J=r(S,b),N=e=>[{path:"/spaces",component:e.App,children:[{path:"projects",name:S.name,component:e.Spaces.Projects,meta:{authContext:"user",title:"Spaces"}},{path:":driveAliasAndItem(.*)?",name:b.name,component:e.Spaces.DriveResolver,meta:{authContext:"user",patchCleanPath:!0,contextQueryItems:["sort-by","sort-dir"]}}]}],n=(e,t={})=>o(e,t),O=n("files-shares"),h=n("files-shares-with-me"),A=n("files-shares-with-others"),L=n("files-shares-via-link"),X=r(h,A,L),Y=e=>[{name:O.name,path:"/shares",component:e.App,redirect:h,children:[{name:h.name,path:"with-me",component:e.Shares.SharedWithMe,meta:{authContext:"user",title:"Files shared with me"}},{name:A.name,path:"with-others",component:e.Shares.SharedWithOthers,meta:{authContext:"user",title:"Files shared with others"}},{name:L.name,path:"via-link",component:e.Shares.SharedViaLink,meta:{authContext:"user",title:"Files shared via link"}}]}],C=(e,t={})=>o(e,t),k=C("files-public-link"),x=C("files-public-upload"),Z=r(k,x),V=e=>[{path:"/link",component:e.App,meta:{auth:!1},children:[{name:k.name,path:":driveAliasAndItem(.*)?",component:e.Spaces.DriveResolver,meta:{authContext:"publicLink",patchCleanPath:!0}}]},{path:"/upload",component:e.App,meta:{auth:!1},children:[{name:x.name,path:":token?",component:e.FilesDrop,meta:{authContext:"publicLink",title:"Public file upload"}}]}],g=(e,t={})=>o(e,t),P=g("files-trash-generic"),R=g("files-trash-overview"),ee=r(P,R),te=e=>[{path:"/trash",component:e.App,children:[{path:"overview",name:R.name,component:e.Trash.Overview,meta:{authContext:"user",title:"Trash overview"}},{name:P.name,path:":driveAliasAndItem(.*)?",component:e.Spaces.DriveResolver,meta:{authContext:"user",patchCleanPath:!0}}]}];class B{constructor(){u(this,"providers");this.providers=[]}addProvider(t){this.providers.push(t)}get availableProviders(){return this.providers.filter(t=>t.available)}}const M=new B,G=T({data(){const{provider:e}=this.$route.query,{listSearch:t}=M.availableProviders.find(a=>a.id===e);return{loading:!1,debouncedSearch:void 0,searchResult:{values:[],totalResults:null},listSearch:t}},watch:{"$route.query":{handler:function(e,t){(e==null?void 0:e.term)!==(t==null?void 0:t.term)&&this.$nextTick(()=>{this.debouncedSearch()})},immediate:!0}},created(){this.debouncedSearch=D(this.search,10)},methods:{async search(){this.loading=!0,this.searchResult=await this.listSearch.search(this.$route.query.term||""),this.loading=!1}}});function H(e,t,a,i,s,c){return j(),I(_(e.listSearch.component),{"search-result":e.searchResult,loading:e.loading},null,8,["search-result","loading"])}const ae=W(G,[["render",H]]);export{ae as L,m as a,n as b,f as c,g as d,C as e,z as f,Y as g,V as h,N as i,te as j,b as k,k as l,ee as m,X as n,J as o,Z as p,U as q,h as r,A as s,L as t,x as u,M as v};
