var st=Object.defineProperty;var nt=(o,t,i)=>t in o?st(o,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[t]=i;var e=(o,t,i)=>(nt(o,typeof t!="symbol"?t+"":t,i),i);import{B as N,aB as $,p as G,aT as z,aU as at,v as ot}from"./vendor-2c44cb30.mjs";const Rt=(o,t)=>{const i=o.__vccOpts||o;for(const[r,l]of t)i[r]=l;return i},rt=/^(\w+:\/\/[^/?]+)?(.*?)$/,lt=o=>o.filter(t=>typeof t=="string"||typeof t=="number").map(t=>`${t}`).filter(t=>t),ct=o=>{const t=o.join("/"),[,i="",r=""]=t.match(rt)||[];return{prefix:i,pathname:{parts:r.split("/").filter(l=>l!==""),hasLeading:/^\/+/.test(r),hasTrailing:/\/+$/.test(r)}}},ut=(o,t)=>{const{prefix:i,pathname:r}=o,{parts:l,hasLeading:d,hasTrailing:u}=r,{leadingSlash:g,trailingSlash:U}=t,M=g===!0||g==="keep"&&d,it=U===!0||U==="keep"&&u;let f=i;return l.length>0&&((f||M)&&(f+="/"),f+=l.join("/")),it&&(f+="/"),!f&&M&&(f+="/"),f},dt=(...o)=>{const t=o[o.length-1];let i;t&&typeof t=="object"&&(i=t,o=o.slice(0,-1)),i={leadingSlash:!0,trailingSlash:!1,...i},o=lt(o);const r=ct(o);return ut(r,i)};class ht{constructor(){e(this,"runtimeConfiguration");e(this,"optionsConfiguration");e(this,"oAuth2Configuration");e(this,"oidcConfiguration");this.runtimeConfiguration={serverUrl:""},this.optionsConfiguration={}}initialize(t){var i;this.serverUrl=t.server,this.options=t.options,this.oAuth2Configuration=t.auth?t.auth:null,this.oidcConfiguration=t.openIdConnect?t.openIdConnect:null,this.logoutUrl=(i=t.options)==null?void 0:i.logoutUrl,this.customTranslations=t.customTranslations}set logoutUrl(t){this.optionsConfiguration.logoutUrl=t}get logoutUrl(){return this.optionsConfiguration.logoutUrl}set serverUrl(t){this.runtimeConfiguration.serverUrl=dt(t||window.location.origin,{trailingSlash:!0})}get serverUrl(){return this.runtimeConfiguration.serverUrl}set customTranslations(t){this.runtimeConfiguration.customTranslations=t||[]}get customTranslations(){return this.runtimeConfiguration.customTranslations}get isOAuth2(){return!N(this.oAuth2Configuration)}get oAuth2(){return this.oAuth2Configuration}get isOIDC(){return!N(this.oidcConfiguration)}get oidc(){return this.oidcConfiguration}set options(t){$(this.optionsConfiguration,"routing.idBased",G(t,"routing.idBased",!0)),$(this.optionsConfiguration,"contextHelpersReadMore",G(t,"contextHelpersReadMore",!0))}get options(){return this.optionsConfiguration}}const Ut=new ht,Vt=o=>z().proxy[o]||z().parent.proxy[o];class w{}e(w,"Shared","S"),e(w,"Shareable","R"),e(w,"Mounted","M"),e(w,"Deletable","D"),e(w,"Renameable","N"),e(w,"Moveable","V"),e(w,"Updateable","NV"),e(w,"FileUpdateable","W"),e(w,"FolderCreateable","CK"),e(w,"Deny","Z");class n{}e(n,"Permissions","{http://owncloud.org/ns}permissions"),e(n,"IsFavorite","{http://owncloud.org/ns}favorite"),e(n,"FileId","{http://owncloud.org/ns}fileid"),e(n,"FileParent","{http://owncloud.org/ns}file-parent"),e(n,"Name","{http://owncloud.org/ns}name"),e(n,"OwnerId","{http://owncloud.org/ns}owner-id"),e(n,"OwnerDisplayName","{http://owncloud.org/ns}owner-display-name"),e(n,"PrivateLink","{http://owncloud.org/ns}privatelink"),e(n,"ContentLength","{DAV:}getcontentlength"),e(n,"ContentSize","{http://owncloud.org/ns}size"),e(n,"LastModifiedDate","{DAV:}getlastmodified"),e(n,"Tags","{http://owncloud.org/ns}tags"),e(n,"ETag","{DAV:}getetag"),e(n,"MimeType","{DAV:}getcontenttype"),e(n,"ResourceType","{DAV:}resourcetype"),e(n,"DownloadURL","{http://owncloud.org/ns}downloadURL"),e(n,"ShareId","{http://owncloud.org/ns}shareid"),e(n,"ShareRoot","{http://owncloud.org/ns}shareroot"),e(n,"ShareTypes","{http://owncloud.org/ns}share-types"),e(n,"SharePermissions","{http://open-collaboration-services.org/ns}share-permissions"),e(n,"TrashbinOriginalFilename","{http://owncloud.org/ns}trashbin-original-filename"),e(n,"TrashbinOriginalLocation","{http://owncloud.org/ns}trashbin-original-location"),e(n,"TrashbinDeletedDate","{http://owncloud.org/ns}trashbin-delete-datetime"),e(n,"PublicLinkItemType","{http://owncloud.org/ns}public-link-item-type"),e(n,"PublicLinkPermission","{http://owncloud.org/ns}public-link-permission"),e(n,"PublicLinkExpiration","{http://owncloud.org/ns}public-link-expiration"),e(n,"PublicLinkShareDate","{http://owncloud.org/ns}public-link-share-datetime"),e(n,"PublicLinkShareOwner","{http://owncloud.org/ns}public-link-share-owner");const B=class{};let L=B;e(L,"Default",[n.Permissions,n.IsFavorite,n.FileId,n.FileParent,n.Name,n.OwnerId,n.OwnerDisplayName,n.ShareId,n.ShareRoot,n.ShareTypes,n.PrivateLink,n.ContentLength,n.ContentSize,n.LastModifiedDate,n.ETag,n.MimeType,n.ResourceType,n.DownloadURL,n.Tags]),e(L,"PublicLink",B.Default.concat([n.PublicLinkItemType,n.PublicLinkPermission,n.PublicLinkExpiration,n.PublicLinkShareDate,n.PublicLinkShareOwner])),e(L,"Trashbin",[n.ContentLength,n.ResourceType,n.TrashbinOriginalLocation,n.TrashbinOriginalFilename,n.TrashbinDeletedDate,n.Permissions,n.FileParent]);class p{}e(p,"Internal",0),e(p,"Read",1),e(p,"Update",2),e(p,"Create",4),e(p,"Delete",8),e(p,"Share",16);const b=o=>o;class k{constructor(t,i,r){e(this,"_key");e(this,"_bit");e(this,"_label");this._key=t,this._bit=i,this._label=r}get key(){return this._key}get bit(){return this._bit}get label(){return this._label}enabled(t){return(t&this.bit)>0}}class a{static permissionsToBitmask(t){return(t||[]).reduce((i,r)=>i|r.bit,0)}static bitmaskToPermissions(t){return[this.read,this.update,this.create,this.delete,this.share].reduce((i,r)=>(r.enabled(t)&&i.push(r),i),[])}}e(a,"internal",new k("internal",p.Internal,b("Internal"))),e(a,"read",new k("read",p.Read,b("View"))),e(a,"update",new k("update",p.Update,b("Edit"))),e(a,"create",new k("create",p.Create,b("Create"))),e(a,"delete",new k("delete",p.Delete,b("Delete"))),e(a,"share",new k("share",p.Share,b("Share"))),e(a,"denied",new k("denied",64,b("Deny")));const s=o=>o;class x{constructor(t,i,r,l,d,u,g){e(this,"_name");e(this,"_folder");e(this,"_label");e(this,"_inlineLabel");e(this,"_longLabel");e(this,"_icon");e(this,"_permissions");this._name=t,this._folder=i,this._label=r,this._inlineLabel=l,this._icon=d,this._permissions=u,this._longLabel=g||""}get key(){return`${this._name}-${this._folder?"folder":"file"}`}get name(){return this._name}get folder(){return this._folder}get label(){return this._label}get inlineLabel(){return this._inlineLabel}get longLabel(){return this._longLabel}get hasCustomPermissions(){return!1}get icon(){return this._icon}permissions(t){return this._permissions.filter(i=>i===a.share?t:!0)}bitmask(t){return a.permissionsToBitmask(this.permissions(t))}hasPermission(t,i=!1){return this.permissions(i).filter(r=>r.bit===t.bit).length>0}}class q extends x{get hasCustomPermissions(){return!0}description(t){return s("Set custom permissions")}}class R extends x{description(t){return gt[this.bitmask(t)]}}class y extends x{description(t){switch(this.name){case D.name:return s("View and download.");case S.name:return s("View, download, upload, edit, add and delete.");case P.name:return s("View, download, upload, edit, add, delete, share and manage members.")}}}class m extends x{description(t){return wt[this.bitmask(t)]}}const F=new R("viewer",!1,s("Can view"),s("can view"),"eye",[a.read,a.share]),_=new R("viewer",!0,s("Can view"),s("can view"),"eye",[a.read,a.share]),A=new R("editor",!1,s("Can edit"),s("can edit"),"pencil",[a.read,a.update,a.share]),I=new R("editor",!0,s("Can edit"),s("can edit"),"pencil",[a.read,a.update,a.create,a.delete,a.share]),W=new q("custom",!1,s("Custom permissions"),s("custom permissions"),"settings-3",[a.read,a.update,a.share]),j=new q("custom",!0,s("Custom permissions"),s("custom permissions"),"settings-3",[a.read,a.update,a.create,a.delete,a.share]),E=new R("denied",!0,s("No access"),s("no access"),"user-unfollow",[a.denied]),T=new m("internal",!1,s("Invited People"),s("invited People"),"user",[a.internal],s("Only for invited people")),H=new m("internal",!0,s("Invited people"),s("invited people"),"user",[a.internal],s("Only for invited people")),J=new m("viewer",!1,s("Can view"),s("can view"),"eye",[a.read],s("Anyone with the link can view")),K=new m("viewer",!0,s("Can view"),s("can view"),"eye",[a.read],s("Anyone with the link can view")),Z=new m("contributor",!0,s("Can upload"),s("can upload"),"upload",[a.read,a.create],s("Anyone with the link can upload")),Q=new m("editor",!1,s("Can edit"),s("can edit"),"pencil",[a.read,a.update],s("Anyone with the link can edit")),X=new m("editor",!0,s("Can edit"),s("can edit"),"pencil",[a.read,a.update,a.create,a.delete],s("Anyone with the link can edit")),Y=new m("uploader",!0,s("Secret File Drop"),s("Secret File Drop"),"inbox-unarchive",[a.create]),D=new y("viewer",!1,s("Can view"),s("can view"),"eye",[a.read]),S=new y("editor",!1,s("Can edit"),s("can edit"),"pencil",[a.read,a.update,a.create,a.delete]),P=new y("manager",!1,s("Can manage"),s("can manage"),"user-star",[a.read,a.update,a.create,a.delete,a.share]);class pt{static list(){return this.all}static getByBitmask(t){return this.all.find(i=>i.bitmask(!0)===t)}}e(pt,"all",[D,S,P]);const O=class{static list(t,i=!0,r=!1){return[...i?this.allWithCustom:this.all,...r?[E]:[]].filter(l=>l.folder===t)}static custom(t){return this.allWithCustom.find(i=>i.folder===t&&i.hasCustomPermissions)}static getByBitmask(t,i,r){return[...this.allWithCustom,E].filter(d=>!d.hasCustomPermissions).find(d=>d.folder===i&&d.bitmask(r)===t)||this.custom(i)}static filterByBitmask(t,i,r,l){const d=this.all.filter(u=>u.folder===i&&t===(t|u.bitmask(r)));if(l){const u=[W,j];return[...d,...u.filter(g=>g.folder===i)]}return d}};let V=O;e(V,"all",[F,_,A,I]),e(V,"allWithCustom",[...O.all,W,j]);class tt{static list(t,i=!1,r=!1,l=!1,d=!1,u=!0){return[...l&&!d?[T,H]:[],...u?[J]:[],...u?[K]:[],...u&&r?[Z]:[],...u?[X]:[],...u?[Y]:[],...u&&i?[Q]:[]].filter(g=>g.folder===t)}static getByBitmask(t,i){return this.list(i,!0,!0,!0,!1).find(r=>r.bitmask(!1)===t)}static filterByBitmask(t,i,r=!1,l=!1,d=!1,u=!1,g=!0){return this.list(i,r,l,d,u,g).filter(U=>t===(t|U.bitmask(!1)))}static getByName(t,i,r,l,d){return tt.list(i,r,l,d).find(u=>u.name.toLowerCase()===t.toLowerCase())}}const gt={[F.bitmask(!1)]:s("View and download."),[F.bitmask(!0)]:s("View, download and share."),[_.bitmask(!1)]:s("View and download."),[_.bitmask(!0)]:s("View, download and share."),[A.bitmask(!1)]:s("View, download, and edit."),[A.bitmask(!0)]:s("View, download, edit and share file."),[I.bitmask(!1)]:s("View, download, upload, edit, add and delete."),[I.bitmask(!0)]:s("View, download, upload, edit, add, delete and share."),[E.bitmask(!1)]:s("Deny access")},wt={[T.bitmask(!1)]:s("Link works only for invited people. Login is required."),[H.bitmask(!1)]:s("Link works only for invited people. Login is required."),[J.bitmask(!1)]:s("Anyone with the link can view and download."),[K.bitmask(!1)]:s("Anyone with the link can view and download."),[Z.bitmask(!1)]:s("Anyone with the link can view, download and upload."),[Q.bitmask(!1)]:s("Anyone with the link can view, download and edit."),[X.bitmask(!1)]:s("Anyone with the link can view, download, upload, edit, add and delete."),[Y.bitmask(!1)]:s("Anyone with the link can only upload, existing content is not revealed.")},C=o=>o;class v{constructor(t,i,r,l){e(this,"_key");e(this,"_value");e(this,"_label");e(this,"_icon");this._key=t,this._value=i,this._label=r,this._icon=l}get key(){return this._key}get value(){return this._value}get label(){return this._label}get icon(){return this._icon}}const c=class{static isIndividual(t){return this.individuals.includes(t)}static isCollective(t){return this.collectives.includes(t)}static isUnauthenticated(t){return this.unauthenticated.includes(t)}static isAuthenticated(t){return this.authenticated.includes(t)}static getByValue(t){return this.all.find(i=>i.value===t)}static getValues(t){return t.map(i=>i.value)}static containsAnyValue(t,i){return at(this.getValues(t),i).length>0}};let h=c;e(h,"user",new v("user",0,C("User"),"user")),e(h,"group",new v("group",1,C("Group"),"group")),e(h,"link",new v("link",3,C("Link"),"link")),e(h,"guest",new v("guest",4,C("Guest"),"global")),e(h,"remote",new v("remote",6,C("Federated"),"earth")),e(h,"spaceUser",new v("spaceUser",7,C("User"),"user")),e(h,"spaceGroup",new v("spaceGroup",8,C("Group"),"group")),e(h,"individuals",[c.user,c.guest,c.remote,c.spaceUser]),e(h,"collectives",[c.group,c.spaceGroup]),e(h,"unauthenticated",[c.link]),e(h,"authenticated",[c.user,c.group,c.guest,c.remote,c.spaceUser,c.spaceGroup]),e(h,"all",[c.user,c.group,c.link,c.guest,c.remote,c.spaceUser,c.spaceGroup]);class mt{constructor(t,i){e(this,"value");e(this,"expires");this.value=t,this.expires=i?new Date().getTime()+i:0}get expired(){return this.expires>0&&this.expires<new Date().getTime()}}class et{constructor(t){e(this,"map");e(this,"ttl");e(this,"capacity");this.ttl=t.ttl||0,this.capacity=t.capacity||0,this.map=new Map}set(t,i,r){return this.evict(),this.map.set(t,new mt(i,isNaN(r)?this.ttl:r)),i}get(t){this.evict();const i=this.map.get(t);if(i)return i.value}delete(t){return this.map.delete(t)}clear(){return this.map.clear()}entries(){return this.evict(),[...this.map.entries()].map(t=>[t[0],t[1].value])}keys(){return this.evict(),[...this.map.keys()]}has(t){return this.evict(),this.map.has(t)}values(){return this.evict(),[...this.map.values()].map(t=>t.value)}evict(){if(this.map.forEach((t,i)=>{t.expired&&this.delete(i)}),!!this.capacity)for(const[t]of[...this.map.entries()]){if(this.map.size<=this.capacity)break;this.delete(t)}}}const ft=new et({ttl:10*1e3,capacity:250}),bt=new et({ttl:10*1e3,capacity:250});class kt{get avatarUrl(){return bt}get filePreview(){return ft}}const xt=new kt;class Ct{constructor(){e(this,"topics");this.topics=new Map}subscribe(t,i){const r={token:ot(),callback:i},l=[r,...this.topics.get(t)||[]];return this.topics.set(t,l),r.token}publish(t,i){(this.topics.get(t)||[]).forEach(l=>l.callback(i))}unsubscribe(t,i){this.topics.has(t)&&this.topics.set(t,this.topics.get(t).filter(r=>r.token!==i))}}const Ft=new Ct;export{et as C,L as D,Ct as E,tt as L,V as P,h as S,Rt as _,xt as a,ht as b,Ut as c,n as d,Ft as e,D as f,S as g,p as h,w as i,pt as j,Vt as k,a as l,K as m,H as n,Y as o,T as p,Z as q,X as r,P as s,dt as u};
