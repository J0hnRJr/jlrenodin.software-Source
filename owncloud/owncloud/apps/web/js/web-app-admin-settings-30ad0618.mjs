import{A as vt,u as ot,o as nt,a as we,d as ke,h as Te,e as Qt,l as Ht}from"./chunks/visibility-26d674e6.mjs";import{I as Wt,B as Kt,S as le,C as Oe,a as at,N as rt,P as it,Q as Pe,b as Ct,c as Zt,u as lt,d as ut,e as ct,f as dt,g as St,h as wt,i as pt,A as Yt,j as Jt,k as Xt,l as es,m as ts}from"./chunks/SpaceInfo-efc8f70f.mjs";import{d as j,D as A,G as ce,T as Le,K as s,aY as Ve,c as $,a as D,F as Ae,j as d,k as q,e as l,f,w as ee,b as S,P as ve,r as ye,g,h as ue,o as m,t as w,C as K,E as b,aZ as Ue,ae as Ne,a_ as Xe,a$ as $t,b0 as Ye,I as _e,V as kt,b1 as At,n as mt,i as Be,M as ss,H as Ce,z as os,U as Ut,b2 as ns,b3 as as,L as rs,s as Je,b4 as is,aT as ls}from"./chunks/vendor-2c44cb30.mjs";import{a as us}from"./chunks/useAppDefaults-324f07ea.mjs";import{e as x,_ as O,c as et,s as je,g as tt,f as st,S as cs}from"./chunks/eventBus-bf81ca73.mjs";import{u as se}from"./chunks/useStore-acb4016c.mjs";import{u as de,c as Fe,b as gt}from"./chunks/useAuthService-746ac4ed.mjs";import{c as ds,a as $e}from"./chunks/useSort-c2385dd4.mjs";import{B as ps,X as ht,a5 as ge,t as he,_ as Ge,n as Nt,v as _t,A as ms,d as gs}from"./chunks/useDriveResolver-f387970c.mjs";import{u as hs}from"./chunks/useLoadingService-9d293e70.mjs";const fs={Actions:"إجراءات",Cancel:"إلغاء","Clear selection":"تحديد واضح",Confirm:"تأكيد",Create:"أنشأ",Delete:"حذف",Edit:"يحرر",Email:"بريد إلكتروني",Login:"تسجيل الدخول",Manager:"مدير",Name:"اسم",ownCloud:"ownCloud",Password:"كلمة المرور",Role:"دور",Search:"بحث"},bs={"%{count} groups selected":"%{count} избрани групи","%{count} users selected":"%{count} избрани потребителя","%{groupCount} groups in total":"Общо %{groupCount} групи","%{groupCount} matching groups":"%{groupCount} съвпадащи групи","%{spaceCount} matching spaces":"%{spaceCount} съвпадащи пространства","%{spaceCount} spaces in total":"%{spaceCount} пространства общо","%{userCount} matching users":"%{userCount} съвпадащи потребителя","%{userCount} users in total":"Общо %{userCount} потребителя",Actions:"Действия","Add to groups":"Добавяне към групи","Administration Settings":"Административни настройки",Allowed:"Разрешено",Appearance:"Изглед",Cancel:"Отказ","Clear selection":"Изчистване на селекцията","Close sidebar to hide details":"Затворете страничната лента, за да скриете подробностите",Confirm:"Потвърждаване",Create:"Създаване","Create group":"Създаване на група","Create user":"Създаване на потребител",Delete:"Изтриване",Details:"Подробности",Disabled:"Деактивирано",Edit:"Редактиране","Edit group":"Редактиране на група","Edit quota":"Редактиране на квота","Edit user":"Редактиране на потребител",Edition:"Издание",Editors:"Редактори",Email:"Имейл",Enabled:"Активирано","Failed add users to group":"Неуспешно добавяне на потребителите към групата","Failed remove users from group":"Неуспешно премахване на потребителите от групата","Failed to create group":"Неуспех при създаването на група","Failed to create user":"Неуспех при създаването на потребител",'Failed to delete group "%{group}"':'Неуспех при изтриването на групата "%{group}"','Failed to delete user "%{user}"':'Неуспех при изтриването на потребителя "%{user}"',"Failed to edit group":"Неуспешно редактиране на групата","Failed to edit user":"Неуспешно редактиране на потребителя","Failed to reset logo":"Неуспешно възстановяване на логото","Failed to upload logo":"Неуспешно качване на лого","Filter groups":"Филтриране на групи","Filter members":"Филтриране на членове","Filter:":"Филтър:","First and last name":"Име и Фамилия","First and last name cannot be empty":"Името и фамилията не могат да бъдат празни",Forbidden:"Забранено",General:"Общи",'Group "%{group}" was deleted successfully':'Групата "%{group}" беше изтрита успешно','Group "%{groupName}" already exists':"Групата „%{groupName}“ вече съществува","Group details":"Подробности за групата","Group name":"Име на групата","Group name cannot be empty":"Името на групата не може да бъде празно","Group was created successfully":"Групата е създадена успешно",Groups:"Групи",Info:"Информация",Login:"Вход",Logo:"Лого","Logo was reset successfully. Reloading page...":"Логото е възстановено успешно. Презареждане на страницата...","Logo was uploaded successfully":"Логото е качено успешно",Manager:"Мениджър",Managers:"Мениджъри",Members:"Членове",Modified:"Променено",Name:"Име","New group":"Нова група","New user":"Нов потребител","No groups assigned.":"Няма асоциирани групи.","No groups in here":"Тук няма групи","No members found":"Няма намерени членове","No restriction":"Без ограничение","No spaces in here":"Тук няма пространства","No users in here":"Тук няма потребители","Open sidebar to view details":"Отворете страничната лента, за да видите подробности","Overview of the information about the selected group":"Преглед на информацията за избраната група","Overview of the information about the selected user":"Преглед на информацията за избрания потребител",ownCloud:"ownCloud",Password:"Парола","Password cannot be empty":"Паролата не може да бъде празна","Personal quota":"Лична квота","Please enter a valid email":"Моля, въведете валиден имейл адрес",Quota:"Квота","Remaining quota":"Оставаща квота","Remove from groups":"Премахване от групите","Reset logo":"Възстановяване на логото",Role:"Роля",Roles:"Роли",Search:"Търсене","Select %{ group }":"Избор на %{ group }","Select %{ space }":"Избор на %{ space }","Select %{ user }":"Избор на %{ user }","Select a group to view details":"Изберете група, за да видите подробности","Select a user to view details":"Изберете потребител, за да видите подробности","Select all groups":"Избиране на всички групи","Select all spaces":"Избор на всички пространства","Select all users":"Избиране на всички потребители","Show context menu":"Показване на контекстното меню","Show details":"Показване на подробности",Spaces:"Пространства",Status:"Статус","The file type is unsupported":"Типът файл не се поддържа","To see an individual quota, the user needs to have logged in once.":"За да видите индивидуалната квота на потребителя, той трябва да е влязъл поне веднъж в системата.","To set an individual quota, the user needs to have logged in once.":"За да зададете индивидуална квота, потребителят трябва да е влязъл поне веднъж в системата.","Total quota":"Обща квота","Upload logo":"Качване на лого","Used quota":"Използвана квота",'User "%{user}" was deleted successfully':'Потребителят "%{user}" беше изтрит успешно','User "%{userName}" already exists':'Потребителят "%{userName}" вече съществува',"User details":"Данни за потребителя","User name":"Потребителско име","User name cannot be empty":"Потребителското име не може да бъде празно","User name cannot contain white spaces":"Потребителското име не може да съдържа бели полета","User name cannot start with a number":"Потребителското име не може да започва с число","User was created successfully":"Потребителят е създаден успешно",Users:"Потребители","Users were added to groups successfully":"Потребителите бяха успешно добавени към групите","Users were removed from groups successfully":"Потребителите бяха успешно премахнати от групите",Version:"Версия",Viewers:"Преглеждащи","Web client version":"Версия на уеб клиента"},ys={"%{groupCount} groups in total":"%{groupCount} skupin celkově","%{groupCount} matching groups":"%{groupCount} odpovídajících skupin","%{spaceCount} matching spaces":"%{spaceCount} odpovídajících míst","%{spaceCount} spaces in total":"%{spaceCount} míst celkem","%{userCount} matching users":"%{userCount} odpovídajících uživatelů","%{userCount} users in total":"%{userCount} uživatelů celkem",Actions:"Akce","Administration Settings":"Administrativní nastavení",Cancel:"Zrušit","Clear selection":"Vymazat výběr","Close sidebar to hide details":"Skryjte detaily zavřením postranního panelu",Confirm:"Potvrdit",Create:"Vytvořit","Create group":"Vytvořit skupinu","Create user":"Vytvořit uživatele",Delete:"Odstranit",Details:"Detaily",Disabled:"Zakázáno",Edit:"Upravit","Edit group":"Upravit skupinu","Edit quota":"Změnit kvótu","Edit user":"Editovat uživatele",Email:"Email",Enabled:"Povoleno","Failed to create group":"Nezdařilo se vytvořit skupinu","Failed to create user":"Nezdařilo se vytvořit uživatele","Failed to edit group":"Nezdařilo se upravit skupinu","Failed to edit user":"Nezdařilo se upravit uživatele","Filter groups":"Filtrovat skupiny","First and last name":"Jméno a příjmení",'Group "%{groupName}" already exists':'Skupina "%{groupName}" již existuje',"Group details":"Detaily skupiny","Group name":"Název skupiny","Group name cannot be empty":"Název skupiny nesmí být prázdný","Group was created successfully":"Skupina byla úspěšně vytvořena",Groups:"Skupiny",Login:"Přihlásit",Manager:"Manažer",Members:"Členové",Modified:"Změněno",Name:"Název","New group":"Nová skupina","New user":"Nový uživatel","No groups in here":"Zde nejsou žádné skupiny","No restriction":"Žádná omezení","No spaces in here":"Zde nejsou žádná místa","No users in here":"Zde nejsou žádní uživatelé","Open sidebar to view details":"Zobrazit detaily otevřením postranního panelu",ownCloud:"ownCloud",Password:"Heslo","Password cannot be empty":"Heslo nesmí být prázdné","Personal quota":"Osobní kvóta","Please enter a valid email":"Prosím zadejte validní email",Quota:"Kvóta","Remaining quota":"Zbývající kvóta",Role:"Role",Search:"Hledat","Select %{ group }":"Vyber %{ group }","Select %{ space }":"Vyber %{ space }","Select %{ user }":"Vyber %{ user }","Select a group to view details":"Vyberte skupinu pro zobrazení detailů","Select a user to view details":"Pro zobrazení detailů vyberte uživatele","Select all groups":"Vyber všechny skupiny","Select all spaces":"Vyber všechna místa","Select all users":"Vybrat všechny uživatele","Show context menu":"Ukázat kontextovou nabídku","Show details":"Zobrazit detaily",Spaces:"Místa",Status:"Stav","To set an individual quota, the user needs to have logged in once.":"Uživatel se musí alespoň jednou přihlásit, aby bylo možné nastavit individuální kvótu.","Total quota":"Celková kvóta","Used quota":"Využitá kvóta",'User "%{user}" was deleted successfully':"%{userCount} uživatel smazán",'User "%{userName}" already exists':'Uživatel "%{userName}" již existuje',"User details":"Detaily uživatele","User name":"Uživatelské jméno","User name cannot be empty":"Uživatelské jméno nesmí být prázdné","User name cannot contain white spaces":"Uživatelské jméno nesmí obsahovat mezery","User name cannot start with a number":"Uživatelské jméno nesmí začínat číslem","User was created successfully":"Uživatel byl úspěšně vytvořen",Users:"Uživatelé"},vs={"%{count} groups selected":"%{count} Gruppen ausgewählt","%{count} users selected":"%{count} Personen ausgewählt","%{groupCount} group was deleted successfully":["Gruppe %{groupCount} wurde erfolgreich gelöscht.","%{groupCount} Gruppen wurden erfolgreich gelöscht."],"%{groupCount} groups in total":"%{groupCount} Gruppen gesamt","%{groupCount} matching groups":"%{groupCount} Suchergebnisse","%{groupCount} member":["%{groupCount} Mitglied","%{groupCount} Mitglieder"],"%{spaceCount} matching spaces":"%{spaceCount} Suchergebnisse","%{spaceCount} spaces in total":"%{spaceCount} Spaces insgesamt","%{userCount} matching users":"%{userCount} Suchergebnisse","%{userCount} user was deleted successfully":["%{userCount} Benutzerkonto wurde erfolgreich gelöscht.","%{userCount} Personen wurden erfolgreich gelöscht."],"%{userCount} users in total":"%{userCount} Personen gesamt",Actions:"Aktionen","Add to groups":"Zu Gruppe(n) hinzufügen",'Add user "%{user}" to groups':['"%{user}" zu Gruppe(n) hinzufügen',"%{userCount} Personen zu Gruppe(n) hinzufügen"],"Administration Settings":"Administrationseinstellungen",Allowed:"Ja",Appearance:"Erscheinungsbild","Are you sure you want to delete this group?":["Sind Sie sicher, dass Sie diese Gruppe löschen wollen?","Sind Sie sicher, dass Sie die ausgewählten %{groupCount} Gruppen löschen möchten?"],"Are you sure you want to delete this user?":["Sind Sie sicher, dass Sie dieses Benutzerkonto löschen möchten?","Sind Sie sicher, dass Sie die ausgewählten %{userCount} Personen löschen möchten?"],Cancel:"Abbrechen","Clear selection":"Auswahl aufheben","Close sidebar to hide details":"Seitenleiste schließen, um Details zu verbergen",Confirm:"Bestätigen",Create:"Erstellen","Create group":"Gruppe erstellen","Create user":"Person anlegen",Delete:"Löschen",'Delete group "%{group}"?':['Gruppe "%{group}" löschen?',"%{groupCount} Gruppen löschen?"],'Delete user "%{user}"?':['"%{user}" löschen?',"%{userCount} Personen löschen?"],Details:"Details",Disabled:"Deaktiviert",Edit:"Bearbeiten","Edit group":"Gruppe bearbeiten","Edit login":"Anmeldung bearbeiten",'Edit login for "%{user}"':['Anmeldung für "%{user}" ändern',"Anmeldung für %{userCount} Personen ändern"],"Edit quota":"Quota ändern","Edit user":"Benutzer/-in bearbeiten",Edition:"Edition",Editors:"Bearbeiter/-innen",Email:"E-Mail",Enabled:"Aktiviert","Failed add users to group":"Hinzufügen von Benutzer/-innen zur Gruppe fehlgeschlagen","Failed remove users from group":"Entfernen von Benutzer/-innen aus der Gruppe fehlgeschlagen","Failed to create group":"Fehler beim Erstellen der Gruppe","Failed to create user":"Fehler beim Erstellen des Benutzers/der Benutzerin","Failed to delete %{groupCount} group":['Fehler beim Löschen von "%{groupCount}" Gruppe',"Fehler beim Löschen von %{groupCount} Gruppen"],"Failed to delete %{userCount} user":["Fehler beim Löschen von %{userCount} Benutzer/-in","Fehler beim Löschen von %{userCount} Benutzern/-innen"],'Failed to delete group "%{group}"':'Fehler beim Löschen der Gruppe "%{group}"','Failed to delete user "%{user}"':'Fehler beim Löschen des Benutzers/der Benutzerin "%{user}"',"Failed to edit group":"Fehler beim Bearbeiten der Gruppe","Failed to edit login":"Ändern der Anmeldung fehlgeschlagen.","Failed to edit user":"Fehler beim Bearbeiten des Benutzers/der Benutzerin","Failed to reset logo":"Logo konnte nicht zurückgesetzt werden.","Failed to upload logo":"Logo konnte nicht hochgeladen werden.","Filter groups":"Gruppen filtern","Filter members":"Mitglieder filtern","Filter roles":"Rollen filtern","Filter:":"Filter:","First and last name":"Vor- und Nachname","First and last name cannot be empty":"Vor- und Nachname darf nicht leer sein.","First and last name cannot cannot exceed 255 characters":"Vor- und Nachname dürfen nicht länger als 255 Zeichen sein.","First and last name cannot exceed 255 characters":"Vor- und Nachname dürfen nicht länger als 255 Zeichen sein.",Forbidden:"Nein",General:"Allgemein",'Group "%{group}" was deleted successfully':'Gruppe "%{group}" wurde gelöscht','Group "%{groupName}" already exists':'Gruppe "%{groupName}" existiert bereits.',"Group details":"Gruppen-Details","Group name":"Gruppenname","Group name cannot be empty":"Gruppenname darf nicht leer sein.","Group name cannot exceed 255 characters":"Der Gruppenname darf nicht länger als 255 Zeichen sein.","Group was created successfully":"Gruppe wurde erfolgreich erstellt.",Groups:"Gruppen",Info:"Info",Login:"Anmeldung erlaubt?","Login was edited successfully":"Anmeldung wurde erfolgreich geändert.",Logo:"Logo","Logo was reset successfully. Reloading page...":"Logo wurde erfolgreich zurückgesetzt. Seite wird neu geladen ...","Logo was uploaded successfully":"Logo wurde erfolgreich hochgeladen.",Manager:"Manager/-in",Managers:"Manager/-innen",Members:"Mitglieder",Modified:"Bearbeitet",Name:"Name","New group":"Neue Gruppe","New user":"Person anlegen","No groups assigned.":"Keine Gruppen zugewiesen","No groups in here":"Keine Gruppen vorhanden","No members found":"Keine Mitglieder gefunden","No restriction":"Unbegrenzt","No spaces in here":"Keine Spaces vorhanden","No users in here":"Keine Personen vorhanden","Open sidebar to view details":"Seitenleiste öffnen, um Details anzuzeigen","Overview of the information about the selected group":"Informationen zur ausgewählten Gruppe","Overview of the information about the selected user":"Informationen zur ausgewählten Person",ownCloud:"ownCloud",Password:"Passwort","Password cannot be empty":"Passwort darf nicht leer sein.","Personal quota":"Persönliche Quota","Please enter a valid email":"Bitte geben Sie eine gültige E-Mail-Adresse ein",Quota:"Quota","Quota will only be applied to users who logged in at least once.":"Quota wird nur auf Personen angewendet, die sich bereits einmal angemeldet haben.","Remaining quota":"Verbleibende Quota","Remove from groups":"Aus Gruppen entfernen",'Remove user "%{user}" from groups':['Entferne "%{user}" von Gruppen',"%{userCount} Personen aus Gruppen entfernen"],"Reset logo":"Logo zurücksetzen",Role:"Rolle",Roles:"Rollen",Search:"Suchen","Select %{ group }":"%{ group } auswählen","Select %{ space }":"%{ space } auswählen","Select %{ user }":"%{ user } auswählen","Select a group to view details":"Wählen Sie eine Gruppe aus der Liste, um hier Details anzuzeigen","Select a user to view details":"Wählen Sie eine Person aus der Liste, um hier Details anzuzeigen","Select all groups":"Alle Gruppen auswählen","Select all spaces":"Alle Spaces auswählen","Select all users":"Alle Personen auswählen","Select...":"Auswählen ...","Show context menu":"Kontextmenü anzeigen","Show details":"Details anzeigen",Spaces:"Spaces",Status:"Status","The file type is unsupported":"Dieser Dateityp wird nicht unterstützt.","This group is read-only and can't be edited":"Diese Gruppe ist schreibgeschützt.","To see an individual quota, the user needs to have logged in once.":"Um eine individuelle Quota sehen zu können, muss die Person einmal angemeldet gewesen sein.","To set an individual quota, the user needs to have logged in once.":"Um eine individuelle Quota setzen zu können, muss die Person einmal angemeldet gewesen sein.","Total quota":"Gesamtquota","Unaffected users":"Nicht betroffene Personen","Upload logo":"Logo hochladen","Used quota":"Benutzte Quota",'User "%{user}" was deleted successfully':'Person "%{user}" wurde gelöscht','User "%{userName}" already exists':'Person "%{userName}" existiert bereits.',"User details":"Details","User name":"Anmeldename","User name cannot be empty":"Anmeldename darf nicht leer sein.","User name cannot contain white spaces":"Der Anmeldename darf keine Leerzeichen enthalten.","User name cannot exceed 255 characters":"Der Anmeldename darf nicht länger als 255 Zeichen sein.","User name cannot start with a number":"Der Anmeldename darf nicht mit einer Nummer anfangen.","User was created successfully":"Person wurde erfolgreich erstellt.",Users:"Personen","Users were added to groups successfully":"Markierte Personen wurden erfolgreich zu den gewählten Gruppen hinzugefügt ","Users were removed from groups successfully":"Markierte Personen wurden erfolgreich aus den Gruppe(n) entfernt.",Version:"Version",Viewers:"Betrachter/-innen","Web client version":"Web-Client-Version","Your own login status will remain unchanged.":"Ihr eigener Anmeldestatus bleibt unverändert."},Cs={"%{groupCount} groups in total":"%{groupCount} grupos en total","%{groupCount} matching groups":"%{groupCount} grupos coincidentes","%{spaceCount} matching spaces":"%{spaceCount} espacios coincidentes","%{spaceCount} spaces in total":"%{spaceCount} espacios en total","%{userCount} matching users":"%{userCount} usuarios coincidentes","%{userCount} users in total":"%{userCount} usuarios en total",Actions:"Acciones","Add to groups":"Agregar a grupos","Administration Settings":"Configuración de administración",Allowed:"Permitido",Appearance:"Apariencia",Cancel:"Cancelar","Clear selection":"Limpiar selección","Close sidebar to hide details":"Cerrar el menú lateral para ocultar los detalles",Confirm:"Confirmar",Create:"Crear","Create group":"Crear grupo","Create user":"Crear usuario",Delete:"Eliminar",Details:"Detalles",Disabled:"Deshabilitado",Edit:"Editar","Edit group":"Editar grupo","Edit login":"Editar sesión","Edit quota":"Editar cuota","Edit user":"Editar usuario",Edition:"Edición",Editors:"Editores",Email:"Correo electrónico",Enabled:"Habilitado","Failed add users to group":"Error al agregar usuario al grupo","Failed remove users from group":"Error al eliminar un usuario del grupo","Failed to create group":"Fallo al crear grupo","Failed to create user":"Fallo al crear usuario",'Failed to delete group "%{group}"':'Fallo al eliminar el grupo "%{group}"','Failed to delete user "%{user}"':'Fallo al eliminar el usuario "%{user}"',"Failed to edit group":"Fallo al editar grupo","Failed to edit login":"Error al editar la sesión","Failed to edit user":"Fallo al editar usuario","Failed to upload logo":"Error al subir el logo","Filter groups":"Filtrar grupos","Filter members":"Filtrar miebros","Filter:":"Filtrar:","First and last name":"Nombre y apellido","First and last name cannot cannot exceed 255 characters":"Nombre y apellidos no pueden exceder de los 255 caracteres.","First and last name cannot exceed 255 characters":"Nombre y apellidos no pueden exceder de los 255 caracteres.",Forbidden:"Prohibido",General:"General",'Group "%{group}" was deleted successfully':'El grupo "%{group}" fue eliminado exitosamente','Group "%{groupName}" already exists':'El grupo "%{groupName}" ya existe',"Group details":"Detalles del grupo","Group name":"Nombre del grupo","Group name cannot be empty":"El nombre del grupo no puede estar vacío","Group name cannot exceed 255 characters":"El nombre del grupo no puedo exceder de los 255 caracteres","Group was created successfully":"El grupo fue creado exitosamente",Groups:"Grupos",Info:"Info",Login:"Iniciar sesión",Logo:"Logo",Manager:"Gestor",Managers:"Gestores",Members:"Miembros",Modified:"Modificado",Name:"Nombre","New group":"Nuevo grupo","New user":"Nuevo usuario","No groups assigned.":"No hay grupos asignados","No groups in here":"No hay grupos","No members found":"No se han encontrado miembros","No restriction":"Sin restricciones","No spaces in here":"No hay spaces","No users in here":"No hay usuarios","Open sidebar to view details":"Abrir el menú lateral para ver los detalles","Overview of the information about the selected group":"Resumen de la información del grupo seleccionado","Overview of the information about the selected user":"Resumen de la información del usuario seleccionado",ownCloud:"ownCloud",Password:"Contraseña","Password cannot be empty":"La contraseña no puede estar vacía","Personal quota":"Cuota personal","Please enter a valid email":"Por favor, introduce un correo electrónico válido",Quota:"Cuota","Remaining quota":"Cuota restante","Remove from groups":"Remover de los grupos",Role:"Rol",Search:"Buscar","Select %{ group }":"Seleccionar %{ group }","Select %{ space }":"Seleccionar %{ space }","Select %{ user }":"Seleccionar %{ user }","Select a group to view details":"Seleccionar un grupo para ver detalles","Select a user to view details":"Seleccionar un usuario para ver detalles","Select all groups":"Seleccionar todos los grupos","Select all spaces":"Seleccionar todos los spaces","Select all users":"Seleccionar todos los usuarios","Select...":"Seleccionar...","Show details":"Mostrar detalles",Spaces:"Spaces",Status:"Estado","To set an individual quota, the user needs to have logged in once.":"Para establecer una cuota individual, el usuario tiene que haber iniciado sesión al menos una vez.","Total quota":"Cuota total","Upload logo":"Subir logo","Used quota":"Cuota utilizada",'User "%{user}" was deleted successfully':'El usuario "%{user}" fue eliminado exitosamente','User "%{userName}" already exists':'El usuario "%{userName}" ya existe',"User details":"Detalles del usuario","User name":"Nombre del usuario","User name cannot be empty":"El nombre del usuario no puede estar vacío","User name cannot contain white spaces":"El nombre de usuario no puede contener espacios","User name cannot exceed 255 characters":"El nombre de usuario no puede exceder de 255 caracteres","User name cannot start with a number":"El nombre de usuario no puede empezar con un número","User was created successfully":"El usuario fue creado exitosamente",Users:"Usuarios",Version:"Versión",Viewers:"Espectadores"},Ss={"%{count} groups selected":"%{count} groupes sélectionnés","%{count} users selected":"%{count} utilisateurs sélectionnés","%{groupCount} groups in total":"%{groupCount} groupes en tout","%{groupCount} matching groups":"%{groupCount} groupes correspondants","%{spaceCount} matching spaces":"%{spaceCount} espaces correspondants","%{spaceCount} spaces in total":"%{spaceCount} espaces en tout","%{userCount} matching users":"%{spaceCount} utilisateurs correspondant","%{userCount} users in total":"%{userCount} utilisateurs en tout",Actions:"Actions","Administration Settings":"Paramètres d'administration",Cancel:"Annuler","Clear selection":"Annuler la sélection","Close sidebar to hide details":"Fermer le panneau latéral pour cacher les détails",Confirm:"Confirmer",Create:"Créer","Create group":"Créer un groupe","Create user":"Créer un utilisateur",Delete:"Supprimer",Details:"Détails",Disabled:"Désactivé",Edit:"Editer","Edit group":"Modifier le groupe","Edit quota":"Modifier le quota","Edit user":"Modifier l'utilisateur",Edition:"Edition",Editors:"Editeurs",Email:"Email",Enabled:"Activé","Failed to create group":"Impossible de créer le groupe","Failed to create user":"Impossible de créer l'utilisateur",'Failed to delete group "%{group}"':'Impossible de supprimer le groupe "%{group}"','Failed to delete user "%{user}"':`Impossible de supprimer l'utilisateur "%{user}"`,"Failed to edit group":"Échec de la modification du groupe","Failed to edit user":"Échec de la modification de l'utilisateur","Filter groups":"Filtrer les groupes","Filter members":"Filtrer les membres","First and last name":"Prénom et nom",General:"Général",'Group "%{group}" was deleted successfully':'Le groupe "%{group}" a été supprimé avec succès','Group "%{groupName}" already exists':'Le groupe "%{groupName}" existe déjà',"Group details":"Détails du groupe","Group name":"Nom du groupe","Group name cannot be empty":"Le nom du groupe ne peut pas être vide","Group was created successfully":"Le groupe a été créé avec succès",Groups:"Groupes",Info:"Info",Login:"Se connecter",Manager:"Gestionnaire",Managers:"Gestionnaires",Members:"Membres",Modified:"Modifié",Name:"Nom","New group":"Nouveau groupe","New user":"Nouvel utilisateur","No groups assigned.":"Aucun groupes assignés","No groups in here":"Aucun groupe","No members found":"Aucun membre trouvé","No restriction":"Aucune restriction","No spaces in here":"Aucun espace ici","No users in here":"Aucun utilisateur","Open sidebar to view details":"Ouvrir le panneau latéral pour voir les détails","Overview of the information about the selected group":"Aperçu des informations sur le groupe sélectionné","Overview of the information about the selected user":"Aperçu des informations sur l'utilisateur sélectionné",ownCloud:"ownCloud",Password:"Mot de passe","Password cannot be empty":"Le mot de passe ne peut pas être vide","Personal quota":"Quota personnel","Please enter a valid email":"Veuillez renseigner une adresse email valide",Quota:"Quota","Remaining quota":"Quota restant",Role:"Rôle",Search:"Recherche","Select %{ group }":"Sélectionner %{ group }","Select %{ space }":"Sélectionner %{ space }","Select %{ user }":"Sélectionner %{ user }","Select a group to view details":"Sélectionnez un groupe pour voir les détails","Select a user to view details":"Sélectionnez un utilistaue pour voir les détails","Select all groups":"Sélectionner tous les groupes","Select all spaces":"Sélectionner tous les espaces","Select all users":"Sélectionner tous les utilisateurs","Show details":"Afficher les détails",Spaces:"Espaces",Status:"État","The file type is unsupported":"Type de fichier non supporté","To set an individual quota, the user needs to have logged in once.":"Afin de paramétrer un quota individuel, l'utilisateur doit s'être connecté au moins une fois.","Total quota":"Quota total","Used quota":"Quota utilisateur",'User "%{user}" was deleted successfully':"%{userCount} utilisateur a été supprimé avec succès",'User "%{userName}" already exists':`L'utilisateur "%{userName}" existe déjà`,"User details":"Détails de l'utilisateur","User name":"Identifiant utilisateur","User name cannot be empty":"L'identifiant utilisateur ne peut pas être vide","User name cannot contain white spaces":"L'identifiant d'utilisateur ne peut pas contenir d'espace","User name cannot start with a number":"Le nom d'utilisateur ne peut pas commencer par un chiffre","User was created successfully":"L'utilisateur a été créé avec succès",Users:"Utilisateurs",Version:"Version","Web client version":"Version du client web"},ws={Actions:"Accións",Cancel:"Cancelar","Clear selection":"Limpar a selección",Confirm:"Confirmar",Create:"Crear",Delete:"Eliminar",Edit:"Editar",Groups:"Grupos",Login:"Acceso",Name:"Nome",ownCloud:"ownCloud",Password:"Contrasinal",Role:"Rol",Search:"Buscar",Status:"Estado",Users:"Usuarios"},$s={"%{count} groups selected":"נבחרו %{count} קבוצות","%{count} users selected":"נבחרו %{count} משתמשים","%{groupCount} groups in total":"%{groupCount} קבוצות סך הכול","%{groupCount} matching groups":"%{groupCount} קבוצות תואמות","%{groupCount} member":["חבר/ה בודד/ה %{groupCount}","%{groupCount} חברים","%{groupCount} חברים","%{groupCount} חברים"],"%{userCount} users in total":"%{userCount} משתמשים סך הכול",Actions:"פעולות","Add to groups":"הוספה לקבוצות","Administration Settings":"הגדרות ניהול",Appearance:"מראה",Cancel:"ביטול","Clear selection":"איפוס בחירה","Close sidebar to hide details":"סגירת הלוח תסתיר את הפרטים",Confirm:"אישור",Create:"יצירה","Create group":"יצירת קבוצה","Create user":"יצירת משתמש",Delete:"מחיקה",Details:"פרטים",Disabled:"מושבת",Edit:"עריכה","Edit group":"עריכת קבוצה","Edit login":"עריכת פרטי כניסה","Edit quota":"עריכת מיכסה","Edit user":"עריכת משתמש",Editors:"עורכים",Email:"דוא״ל",Enabled:"פעיל","Failed add users to group":"הוספת משתמשים לקבוצה נכשלה","Failed remove users from group":"הסרת משתמשים מקבוצה נכשלה","Failed to create group":"יצירת קבוצה נכשלה","Failed to create user":"יצירת משתמש נכשלה",'Failed to delete group "%{group}"':"מחיקת הקבוצה „%{group}” נכשלה",'Failed to delete user "%{user}"':"מחיקת המשתמש „%{user}” נכשלה","Failed to edit group":"עריכת הקבוצה נכשלה","Failed to edit user":"עריכת המשתמש נכשלה","Failed to reset logo":"איפוס הלוגו נכשל","Failed to upload logo":"העלאת לוגו נכשלה","Filter groups":"סינון קבוצות","Filter members":"סינון חברים","Filter roles":"סינון תפקידים","Filter:":"מסנן:","First and last name":"שם פרטי ומשפחה","First and last name cannot be empty":"השם הפרטי והמשפחה לא יכולים להישאר ריקים",'Group "%{group}" was deleted successfully':"הקבוצה „%{group}” נמחקה בהצלחה",'Group "%{groupName}" already exists':"הקבוצה „%{groupName}” כבר קיימת","Group details":"פרטי הקבוצה","Group name":"שם הקבוצה","Group name cannot be empty":"שם הקבוצה לא יכול להישאר ריק","Group was created successfully":"הקבוצה נוצרה בהצלחה",Groups:"קבוצות",Info:"מידע",Login:"כניסה","Login was edited successfully":"פרטי הכניסה נערכו בהצלחה",Logo:"לוגו","Logo was reset successfully. Reloading page...":"הלוגו התאפס בהצלחה. העמוד מתרענן…","Logo was uploaded successfully":"הלוגו הועלה בהצלחה",Manager:"הנהלה",Managers:"מנהלים",Members:"חברים",Modified:"שינוי",Name:"שם","New group":"קבוצה חדשה","New user":"משתמש חדש","No groups assigned.":"לא הוקצו קבוצות.","No groups in here":"אין כאן קבוצות","No members found":"לא נמצאו חברים","No restriction":"אין מגבלה","No spaces in here":"אין כאן מתחמים","No users in here":"אין כאן משתמשים","Open sidebar to view details":"פתיחת סרגל צד כדי להציג פרטים","Overview of the information about the selected group":"סקירת המידע על הקבוצה הנבחרת","Overview of the information about the selected user":"סקירת המידע על המשתמש הנבחר",ownCloud:"ownCloud",Password:"סיסמה:","Password cannot be empty":"הסיסמה לא יכולה להישאר ריקה","Personal quota":"מכסה אישית","Please enter a valid email":"נא למלא כתובת דוא״ל תקנית",Quota:"מיכסה","Remaining quota":"מכסה פנויה","Remove from groups":"הסרה מקבוצות","Reset logo":"איפוס לוגו",Role:"תפקיד",Roles:"תפקידים",Search:"חיפוש","Select %{ group }":"בחירת %{ group }","Select %{ space }":"בחירת %{ space }","Select %{ user }":"בחירת %{ user }","Select a group to view details":"נא לבחור בקבוצה כדי לצפות בפרטים","Select a user to view details":"נא לבחור במשתמש כדי לצפות בפרטים","Select all groups":"בחירת כל הקבוצות","Select all users":"בחירת כל המשתמשים","Select...":"בחירה…","Show context menu":"הצגת תפריט הקשר","Show details":"הצגת פרטים",Spaces:"מרחבים",Status:"מצב","The file type is unsupported":"סוג הקובץ לא נתמך","Total quota":"מכסה כוללת","Upload logo":"העלאת לוגו","Used quota":"מכסה מנוצלת",'User "%{user}" was deleted successfully':"המשתמש „%{user}” נמחק בהצלחה",'User "%{userName}" already exists':"המשתמש „%{userName}” כבר קיים","User details":"פרטי משתמש","User name":"שם משתמש","User name cannot be empty":"שם המשתמש לא יכול להישאר ריק","User name cannot contain white spaces":"שם המשתמש לא יכול להכיל רווחים","User name cannot exceed 255 characters":"שם המשתמש לא יכול לחרוג מ־255 תווים","User name cannot start with a number":"שם המשתמש לא יכול להתחיל במספר","User was created successfully":"המשתמש נוצר בהצלחה",Users:"משתמשים","Users were added to groups successfully":"משתמשים נוספו לקבוצות בהצלחה","Users were removed from groups successfully":"משתמשים הוסרו מהקבוצות בהצלחה",Version:"גרסה",Viewers:"צופים","Web client version":"גרסת לקוח דפדפן","Your own login status will remain unchanged.":"מצב הכניסה שלך יישאר ללא שינוי."},ks={"%{groupCount} group was deleted successfully":["%{groupCount} gruppo eliminato con successo","%{groupCount} gruppi eliminati con successo","%{groupCount} gruppi eliminati con successo"],"%{groupCount} groups in total":"%{groupCount} grouppi totali","%{groupCount} member":["%{groupCount} membro","%{groupCount} membri","%{groupCount} membri"],"%{userCount} user was deleted successfully":["%{userCount} utente eliminato con successo","%{userCount} utenti eliminati con successo","%{userCount} utenti eliminati con successo"],"%{userCount} users in total":"%{userCount} utenti in totale",Actions:"Azioni","Add to groups":"Aggiungi ai gruppi",'Add user "%{user}" to groups':['Aggiungi "%{user}" ai gruppi',"Aggiungi %{userCount} utenti ai gruppi","Aggiungi %{userCount} utenti ai gruppi"],"Administration Settings":"Impostazioni di amministrazione",Appearance:"Aspetto","Are you sure you want to delete this group?":["Si è sicuri di voler eliminare questo gruppo?","Si è sicuri di voler eliminare i %{groupCount} gruppi selezionati?","Si è sicuri di voler eliminare i %{groupCount} gruppi selezionati?"],"Are you sure you want to delete this user?":["Si è sicuri di voler eliminare questo utente?","Si è sicuri di voler eliminare i %{userCount} utenti selezionati?","Si è sicuri di voler eliminare i %{userCount} utenti selezionati?"],Cancel:"Cancella","Clear selection":"Cancella selezione","Close sidebar to hide details":"Chiudere la barra laterale per nascondere i dettagli",Confirm:"Conferma",Create:"Crea","Create group":"Crea gruppo","Create user":"Crea utente",Delete:"Elimina",'Delete group "%{group}"?':['Eliminare il gruppo "%{group}"?',"Eliminare %{groupCount} gruppi?","Eliminare %{groupCount} gruppi?"],'Delete user "%{user}"?':[`Eliminare l'utente "%{user}"?`,"Eliminare %{userCount} utenti?","Eliminare %{userCount} utenti?"],Details:"Dettagli",Disabled:"Disabilitato",Edit:"Modifica","Edit group":"Modifica gruppo","Edit login":"Modifica dati di accesso",'Edit login for "%{user}"':['Modifica dati di accesso per "%{user}"',"Modifica dati di accesso per %{userCount} utenti","Modifica dati di accesso per %{userCount} utenti"],"Edit user":"Modifica utente",Edition:"Edizione",Editors:"Editori",Email:"Email",Enabled:"Abilitato","Filter:":"Filtra:","First and last name":"Nome e cognome","First and last name cannot be empty":"Nome e cognome non possono essere lasciati vuoti","First and last name cannot exceed 255 characters":"Il nome e il cognome non possono eccedere 255 caratteri di lunghezza",Forbidden:"Vietato",General:"Generale",'Group "%{group}" was deleted successfully':'Gruppo "%{group}" eliminato con successo','Group "%{groupName}" already exists':'Il gruppo "%{groupName}" esiste già',"Group details":"Dettagli gruppo","Group name":"Nome del gruppo","Group name cannot be empty":"Nome del gruppo non può essere lasciato vuoto","Group name cannot exceed 255 characters":"Nome del gruppo non può eccedere 255 caratteri di lunghezza","Group was created successfully":"Gruppo creato con successo",Groups:"Gruppi",Info:"Info",Login:"Login","Login was edited successfully":"Dati di accesso modificati con successo",Logo:"Logo","Logo was reset successfully. Reloading page...":"Logo resettato con successo. Aggiorno la pagina...","Logo was uploaded successfully":"Logo aggiornato con successo",Manager:"Manager",Managers:"Gestori",Members:"Membri",Modified:"Modificato",Name:"Nome","New group":"Nuovo gruppo","New user":"Nuovo utente","No groups assigned.":"Nessun gruppo assegnato","No groups in here":"Nessun gruppo presente","No members found":"Nessun membro trovato","No restriction":"Nessuna restrizione","No spaces in here":"Nessuno spazio qui","No users in here":"Nessun utente qui","Open sidebar to view details":"Apri la barra laterale per visualizzare i dettagli",ownCloud:"ownCloud",Password:"Password","Password cannot be empty":"Il campo password non può essere lasciato vuoto","Please enter a valid email":"Si prega di inserire un indirizzo email valido","Remove from groups":"Rimuovi dai gruppi",'Remove user "%{user}" from groups':['Rimuovere "%{user}" dai gruppi',"Rimuovere %{userCount} utenti dai gruppi","Rimuovere %{userCount} utenti dai gruppi"],"Reset logo":"Reset del logo",Role:"Ruolo",Roles:"Ruoli",Search:"Cerca","Select %{ group }":"Seleziona %{ group }","Select %{ space }":"Seleziona %{ space }","Select %{ user }":"Seleziona %{ user }","Select a group to view details":"Seleziona un gruppo per visualizzare i dettagli","Select a user to view details":"Seleziona un utente per visualizzare i dettagli","Select all groups":"Seleziona tutti i gruppi","Select all spaces":"Seleziona tutti gli spazi","Select all users":"Seleziona tutti gli utenti","Select...":"Seleziona...","Show context menu":"Visualizza menu contestuale","Show details":"Visualizza dettagli",Spaces:"Spazi",Status:"Stato","The file type is unsupported":"Il tipo di file non è supportato","This group is read-only and can't be edited":"Questo gruppo è di sola lettura e non può essere modificato"},As={"%{count} groups selected":"Wybrano %{count} grup","%{count} users selected":"Wybrano %{count} użytkowników","%{groupCount} group was deleted successfully":["%{groupCount} grupa została usunięta","%{groupCount} grup zostało usuniętych","%{groupCount} grup zostało usuniętych","%{groupCount} grup zostało pomyślnie usuniętych"],"%{groupCount} groups in total":"%{groupCount} grup łącznie","%{groupCount} matching groups":"Dopasowano %{groupCount} grup","%{groupCount} member":["%{groupCount} członek","%{groupCount} członków","%{groupCount} członków","%{groupCount} członków"],"%{spaceCount} matching spaces":"Dopasowano %{spaceCount} przestrzeni","%{spaceCount} spaces in total":"%{spaceCount} przestrzeni całkowitej","%{userCount} matching users":"Dopasowano %{userCount} użytkowników","%{userCount} user was deleted successfully":["%{userCount} użytkownik został pomyślnie usunięty","%{userCount} użytkowników zostało pomyślnie usuniętych","%{userCount} użytkowników zostało pomyślnie usuniętych","%{userCount} użytkowników zostało pomyślnie usuniętych"],"%{userCount} users in total":"%{userCount} użytkowników łącznie",Actions:"Akcje","Add to groups":"Dodaj do grup",'Add user "%{user}" to groups':["Dodaj %{userCount} użytkownika do grup","Dodaj %{userCount} użytkowników do grup","Dodaj %{userCount} użytkowników do grup","Dodaj %{userCount} użytkowników do grup"],"Administration Settings":"Ustawienia administracyjne",Allowed:"Dozwolony",Appearance:"Wygląd",Cancel:"Anuluj","Clear selection":"Wyczyść zaznaczenie","Close sidebar to hide details":"Zamknij panel boczny by ukryć szczegóły",Confirm:"Potwierdź",Create:"Utwórz","Create group":"Utwórz grupę","Create user":"Utwórz użytkownika",Delete:"Usuń",Details:"Szczegóły",Disabled:"Wyłączone",Edit:"Edycja","Edit group":"Edytuj grupę","Edit user":"Edytuj użytkownika",Editors:"Edytorzy",Email:"Email",Enabled:"Włączone","Failed to create group":"Nie udało się utworzyć grupy","Failed to create user":"Nie udało się utworzyć użytkownika","First and last name":"Imię i nazwisko","Group details":"Szczegóły grupy","Group name":"Nazwa grupy","Group name cannot be empty":"Nazwa grupy nie może być pusta","Group was created successfully":"Utworzenie grupy powiodło się",Groups:"Grupy",Login:"Logowanie",Manager:"Zarządca",Managers:"Zarządcy",Members:"Członkowie",Name:"Nazwa","New group":"Nowa grupa","New user":"Nowy użytkownik",Password:"Hasło","Password cannot be empty":"Hasło nie może być puste","Please enter a valid email":"Wpisz poprawny adres email",Role:"Rola",Search:"Szukaj","Show details":"Pokaż szczegóły",Status:"Status",'User "%{user}" was deleted successfully':'Użytkownik "%{user}" został usunięty','User "%{userName}" already exists':'Użytkownik "%{userName}" już istnieje',"User details":"Szczegóły użytkownika","User name":"Nazwa użytkownika","User name cannot be empty":"Nazwa użytkownika nie może być pusta","User name cannot contain white spaces":"Nazwa użytkownika nie może zawierać spacji","User name cannot start with a number":"Nazwa użytkownika nie może zaczynać się od cyfry","User was created successfully":"Użytkownik został utworzony",Users:"Użytkownicy",Viewers:"Oglądający"},Us={"%{count} groups selected":"%{count} групп выбрано","%{count} users selected":"%{count} пользователей выбрано","%{groupCount} groups in total":"%{groupCount} групп всего","%{groupCount} matching groups":"%{groupCount} соответствующих групп","%{spaceCount} matching spaces":"%{spaceCount} соответствующих пространств","%{spaceCount} spaces in total":"%{spaceCount} пространств всего","%{userCount} matching users":"%{userCount} соответствующих пользователей","%{userCount} users in total":"%{userCount} пользователей всего",Actions:"Действия","Add to groups":"Добавить в группы","Administration Settings":"Настройки администрирования",Allowed:"Разрешено",Appearance:"Оформление",Cancel:"Отменить","Clear selection":"Очистить выбор","Close sidebar to hide details":"Закрыть боковую панель, чтобы скрыть детали",Confirm:"Подтвердить",Create:"создать","Create group":"Создать группу","Create user":"Создать пользователя",Delete:"удалить",Details:"Подробности",Disabled:"Отключено",Edit:"редактирование","Edit group":"Редактировать группу","Edit login":"Редактировать логин","Edit user":"Редактировать пользователя",Editors:"Редакторы",Email:"Электронная почта",Enabled:"Включено","Failed add users to group":"Не удалось добавить пользователей в группу","Failed remove users from group":"Не удалось удалить пользователей из группы","Failed to create group":"Не удалось создать группу","Failed to create user":"Не удалось создать пользователя",'Failed to delete group "%{group}"':'Не удалось удалить группу "%{group}"','Failed to delete user "%{user}"':'Не удалось удалить пользователя "%{user}"',"Failed to edit group":"Не удалось отредактировать группу","Failed to edit login":"Не удалось отредактировать логин","Failed to edit user":"Не удалось отредактировать пользователя","Failed to reset logo":"Не удалось сбросить логотип","Failed to upload logo":"Не удалось загрузить логотип","Filter groups":"Фильтр групп","Filter members":"Фильтр пользователей","Filter roles":"Фильтр ролей","Filter:":"Фильтр:","First and last name":"Имя и фамилия","First and last name cannot be empty":"Имя и фамилия не могут быть пустыми","First and last name cannot cannot exceed 255 characters":"Имя и фамилия не могут превышать 255 символов","First and last name cannot exceed 255 characters":"Имя и фамилия не могут превышать 255 символов",Forbidden:"Запрещено",General:"Общий",'Group "%{group}" was deleted successfully':'Группа "%{group}" была успешно удалена','Group "%{groupName}" already exists':'Группа "%{group}" уже существует',Login:"Вход в систему",Manager:"Менеджер","No restriction":"Без ограничений",Password:"Пароль","Password cannot be empty":"Пароль не может быть пустым","Personal quota":"Персональная квота","Please enter a valid email":"Пожалуйста введите корректный адрес электронной почты",Role:"Роль",Search:"Найти"},Ns={"%{groupCount} groups in total":"%{groupCount} skupín celkom","%{userCount} users in total":"%{userCount} používateľov celkom",Actions:"Akcie",Cancel:"Zrušiť","Clear selection":"Zrušiť výber",Create:"Vytvoriť","Create group":"Vytvoriť skupinu","Create user":"Vytvoriť používateľa",Delete:"Odstrániť",Details:"Podrobnosti",Edit:"Upraviť","Edit group":"Upraviť skupinu","Edit user":"Upraviť používateľa",Email:"Email","Failed to create group":"Nepodarilo sa vytvoriť skupinu","Failed to create user":"Nepodarilo sa vytvoriť používateľa",'Failed to delete group "%{group}"':"Nepodarilo sa odstrániť skupinuy %{group}.",'Failed to delete user "%{user}"':"Nepodarilo sa odstrániť používateľa %{user}.","Failed to edit group":"Nepodarilo sa upraviť skupinu","Failed to edit user":"Nepodarilo sa upraviť používateľa","First and last name":"Meno a priezvisko",'Group "%{group}" was deleted successfully':'Skupina "%{group}" je odstránená','Group "%{groupName}" already exists':'Skupina "%{groupName}" už existuje',"Group details":"Podrobnosti skupiny","Group name":"Názov skupiny","Group name cannot be empty":"Názov skupiny nemôže byť prázdny","Group was created successfully":"Skupina úšpešne vytvorená",Groups:"Skupiny",Login:"Prihlásiť","New group":"Nová skupina","New user":"Nový používateľ","No groups in here":"Žiadne skupiny tu nie sú","No users in here":"Žiadny používatelia tu nie sú","Overview of the information about the selected group":"Prehľad informácií o vybratých skupinách","Overview of the information about the selected user":"Prehľad informácií o vybratých používateľoch",Password:"Heslo","Password cannot be empty":"Heslo nemôže byť prázdne","Please enter a valid email":"Prosím zadajte platný email",Role:"Rola","Select all groups":"Vybrať všetky skupiny","Select all users":"Vybrať všetkých používateľov",'User "%{user}" was deleted successfully':"Používateľ %{user} je úspešne odstránený",'User "%{userName}" already exists':'Používateľ "%{userName}" už existuje',"User details":"Podrobnosti používateľa","User name":"Používateľské meno","User name cannot be empty":"Používateľské meno nemôže byť prázdne","User name cannot contain white spaces":"Používateľské meno nemôže obsahovať medzery","User name cannot start with a number":"Používateľské meno nemôže začínať číslicou","User was created successfully":"Používateľ je úspešne vytvorený",Users:"Používatelia"},_s={"%{count} groups selected":"%{count} grupe të përzgjedhur","%{count} users selected":"%{count} përdorues të përzgjedhur","%{groupCount} group was deleted successfully":["U fshi me sukses %{groupCount} grup","U fshinë me sukses %{groupCount} grupe"],"%{groupCount} groups in total":"%{groupCount} grupe gjithsej","%{groupCount} matching groups":"%{groupCount} grupe me përkim","%{groupCount} member":["%{groupCount} anëtar","%{groupCount} anëtarë"],"%{spaceCount} matching spaces":"%{spaceCount} hapësira me përkim","%{spaceCount} spaces in total":"%{spaceCount} hapësira gjithsej","%{userCount} matching users":"%{userCount} përdorues me përkim","%{userCount} user was deleted successfully":["U fshi me sukses %{userCount} përdorues","U fshinë me sukses %{userCount} përdorues"],"%{userCount} users in total":"%{userCount} përdorues gjithsej",Actions:"Veprime","Add to groups":"Shtoje te grupet",'Add user "%{user}" to groups':["Shto përdoruesin “%{user}” te grupet","Shto %{userCount} përdorues te grupet"],"Administration Settings":"Rregullime Administrimi",Allowed:"E lejuar",Appearance:"Dukje","Are you sure you want to delete this group?":["Jeni i sigurt se doni të fshihet ky grup?","Jeni i sigurt se doni të fshihen %{groupCount} grupet e përzgjedhur?"],"Are you sure you want to delete this user?":["Jeni i sigurt se doni të fshihet ky përdorues?","Jeni i sigurt se doni të fshihen %{userCount} përdoruesit e përzgjedhur?"],Cancel:"Anuloje","Clear selection":"Spastro përzgjedhjen","Close sidebar to hide details":"Që të fshihen hollësitë, mbyllni anështyllën",Confirm:"Ripohojeni",Create:"Krijoje","Create group":"Krijo grup","Create user":"Krijoni përdorues",Delete:"Fshije",'Delete group "%{group}"?':["Të fshihet grupi “%{group}”?","Të fshihen %{groupCount} grupe?"],'Delete user "%{user}"?':["Të fshihet përdoruesi “%{user}”?","Të fshihen %{userCount} përdorues?"],Details:"Hollësi",Disabled:"E çaktivizuar",Edit:"Përpunoni","Edit group":"Përpunoni grup","Edit login":"Përpunoni kredenciale hyrjeje",'Edit login for "%{user}"':["Përpunoni kredenciale hyrjeje për “%{user}”","Përpunoni kredenciale hyrjeje për %{userCount} përdorues"],"Edit quota":"Përpunoni kuotë","Edit user":"Përpunoni përdorues",Edition:"Edicion",Editors:"Përpunues",Email:"Email",Enabled:"E aktivizuar","Failed add users to group":"S’u arrit të shtohen përdoruesit te grupi","Failed remove users from group":"S’u arrit të hiqen përdorues nga grupi","Failed to create group":"S’u arrit të krijohej grup","Failed to create user":"S’u arrit të krijohej përdorues","Failed to delete %{groupCount} group":["S’u arrit të fshihet %{groupCount} grup","S’u arrit të fshihen %{groupCount} grupe"],"Failed to delete %{userCount} user":["S’u arrit të fshihet %{userCount} përdorues","S’u arrit të fshihen %{userCount} përdorues"],'Failed to delete group "%{group}"':"S’u arrit të fshihej grupi “%{group}”",'Failed to delete user "%{user}"':"S’u arrit të fshihej përdoruesi “%{user}”","Failed to edit group":"S’u arrit të përpunohej grup","Failed to edit login":"S’u arrit të përpunohen kredenciale hyrjeje","Failed to edit user":"S’u arrit të përpunohej përdorues","Failed to reset logo":"S’u arrit të riujdisej stemë","Failed to upload logo":"S’u arrit të ngarkohej stemë","Filter groups":"Filtroni grupe","Filter members":"Filtroni anëtarë","Filter roles":"Filtroni role","Filter:":"Filtroji sipas:","First and last name":"Emër dhe mbiemër","First and last name cannot be empty":"Emri dhe mbiemri s’mund të jenë të zbrazët","First and last name cannot cannot exceed 255 characters":"Emri dhe mbiemri s’mund të tejkalojnë 255 shenja","First and last name cannot exceed 255 characters":"Emri dhe mbiemri s’mund të tejkalojnë 255 shenja",Forbidden:"E ndaluar",General:"Të përgjithshme",'Group "%{group}" was deleted successfully':"Grupi “%{group}” u fshi me sukses",'Group "%{groupName}" already exists':"Grupi “%{groupName}” ekziston tashmë","Group details":"Hollësi grupi","Group name":"Emër grupi","Group name cannot be empty":"Emri i grupit s’mund të jetë i zbrazët","Group name cannot exceed 255 characters":"Emri i grupit s’mund të tejkalojë 255 shenja","Group was created successfully":"Grupi u krijua me sukses",Groups:"Grupe",Info:"Hollësi",Login:"Hyni","Login was edited successfully":"Kredencialet e hyrjes u përpunuan me sukses",Logo:"Stemë","Logo was reset successfully. Reloading page...":"Stema u riujdis me sukses. Po ringarkohet faqja…","Logo was uploaded successfully":"Stema u ngarkua me sukses",Manager:"Përgjegjës",Managers:"Përgjegjës",Members:"Anëtarë",Modified:"E ndryshuar",Name:"Emër","New group":"Grup i ri","New user":"Përdorues i ri","No groups assigned.":"Pa caktim grupesh.","No groups in here":"S’ka grupe këtu","No members found":"S’u gjetën anëtarë","No restriction":"Pa kufizim","No spaces in here":"S’ka hapësira këtu","No users in here":"S’ka përdorues këtu","Open sidebar to view details":"Që të shihni hollësitë, hapni anështyllën","Overview of the information about the selected group":"Përmbledhje e hollësive rreth grupit të përzgjedhur","Overview of the information about the selected user":"Përmbledhje e hollësive rreth përdoruesit të përzgjedhur",ownCloud:"ownCloud",Password:"Fjalëkalim","Password cannot be empty":"Fjalëkalimi s’mund të jetë i zbrazët","Personal quota":"Kuota personale","Please enter a valid email":"Ju lutemi, jepni një email të vlefshëm",Quota:"Kuotë","Quota will only be applied to users who logged in at least once.":"Kuota do të aplikohen vetëm mbi përdorues që kanë bërë hyrjen të paktën një herë.","Remaining quota":"Kuota të mbetura","Remove from groups":"Hiqe prej grupesh",'Remove user "%{user}" from groups':["Hiqe përdoruesin “%{user}” nga grupet","Hiqi %{userCount} përdoruesit nga grupet"],"Reset logo":"Riujdisni stemë",Role:"Rol",Roles:"Role",Search:"Kërko","Select %{ group }":"Përzgjidhni %{ group }","Select %{ space }":"Përzgjidhni %{ space }","Select %{ user }":"Përzgjidhni %{ user }","Select a group to view details":"Përzgjidhni një grup për t’i parë hollësitë","Select a user to view details":"Përzgjidhni një grup për t’i parë hollësitë","Select all groups":"Përzgjidhi krejt grupet","Select all spaces":"Përzgjidhni krejt hapësirat","Select all users":"Përzgjidhni krejt përdoruesit","Select...":"Përzgjidhni…","Show context menu":"Shfaq menu konteksti","Show details":"Shfaqi hollësitë",Spaces:"Hapësira",Status:"Gjendje","The file type is unsupported":"Lloji i kartelës nuk mbulohet","This group is read-only and can't be edited":"Ky grup është vetëm-lexim dhe s’mund të përpunohet ","To see an individual quota, the user needs to have logged in once.":"Që të shohë kuota individuale, përdoruesit duhet të ketë bërë hyrjen.","To set an individual quota, the user needs to have logged in once.":"Për të caktuar një kuotë individuale, përdoruesi lypset të ketë bërë hyrjen një herë.","Total quota":"Kuota gjithsej","Unaffected users":"Përdorues të paprekur","Upload logo":"Ngarkoni stemë","Used quota":"Kuota të përdorura",'User "%{user}" was deleted successfully':"Përdoruesi “%{user}” u fshi me sukses",'User "%{userName}" already exists':"Ka tashmë një përdorues “%{userName}”","User details":"Hollësi përdoruesi","User name":"Emër përdoruesi","User name cannot be empty":"Emri i përdoruesit s’mund të jetë i zbrazët","User name cannot contain white spaces":"Emri i përdoruesit s’mund të përmbajë hapësira","User name cannot exceed 255 characters":"Emri i përdoruesit s’mund të tejkalojë 255 shenja","User name cannot start with a number":"Emri i përdoruesit s’mund të fillojë me një numër","User was created successfully":"Përdoruesi u krijua me sukses",Users:"Përdorues","Users were added to groups successfully":"Përdoruesit u shtuan me sukses te grupet","Users were removed from groups successfully":"Përdoruesit u hoqën me sukses prej grupeve",Version:"Version",Viewers:"Shikuer","Web client version":"Version klienti Web","Your own login status will remain unchanged.":"Gjendja e hyrjes për ju do të mbesë e pandryshuar."},Gs={"%{groupCount} groups in total":"Toplamda %{groupCount} grup","%{groupCount} matching groups":"%{groupCount} eşleşen grup","%{userCount} matching users":"%{userCount} eşleşen kullanıcı","%{userCount} users in total":"Toplamda %{userCount} kullanıcı",Actions:"Aksiyonlar",Cancel:"İptal","Clear selection":"Seçimi temizle","Close sidebar to hide details":"Ayrıntıları gizlemek için kenar çubuğunu kapatın",Confirm:"Onayla",Create:"Yarat","Create group":"Grup oluştur","Create user":"Kullanıcı oluştur",Delete:"Sil",Details:"Detaylar",Disabled:"Devre dışı bırakıldı",Edit:"Düzenle","Edit group":"Grubu düzenle","Edit quota":"Kotayı düzenle","Edit user":"Kullanıcıyı düzenle",Email:"E-posta","Failed to create group":"Grup oluşturma başarısız","Failed to create user":"Kullanıcı oluşturma başarısız",'Failed to delete group "%{group}"':'"%{group}" grubu silinemedi','Failed to delete user "%{user}"':'"%{user}" kullanıcısı silinemedi',"Failed to edit group":"Grup düzenleme başarısız","Failed to edit user":"Kullanıcıyı düzenleme başarısız","Filter groups":"Grupları filtrele","Filter members":"Filtre üyeleri","First and last name":"Ad ve soyad",'Group "%{group}" was deleted successfully':'"%{group}" grubu başarıyla silindi','Group "%{groupName}" already exists':'"%{groupName}" grubu zaten mevcut',"Group details":"Grup detayları","Group name":"Grup adı","Group name cannot be empty":"Grup adı boş olamaz","Group was created successfully":"Grup başarıyla oluşturuldu",Groups:"Gruplar",Login:"Oturum Aç",Manager:"Yönetici",Members:"Üyeler",Modified:"Değiştirildi",Name:"İsim","New group":"Yeni grup","New user":"Yeni kullanıcı","No groups in here":"Burada grup yok","No restriction":"Kısıtlama yok","No users in here":"Burada kullanıcı yok","Open sidebar to view details":"Detayları görüntülemek için kenar çubuğunu aç","Overview of the information about the selected group":"Seçilen grup hakkındaki bilgilere genel bakış","Overview of the information about the selected user":"Seçilen kullanıcı hakkındaki bilgilere genel bakış",ownCloud:"ownCloud",Password:"Parola","Password cannot be empty":"Parola boş olamaz","Personal quota":"Kişisel kota","Please enter a valid email":"Lütfen geçerli bir e-posta girin",Quota:"Kota",Role:"Rol",Search:"Ara","Select %{ group }":"Seç: %{ group }","Select %{ user }":"Seç %{ user }","Select a group to view details":"Detayları görüntülemek için bir grup seç","Select a user to view details":"Detayları görüntülemek için bir kullanıcı seç","Select all groups":"Tüm grupları seç","Select all users":"Tüm kullanıcıları seç","Show context menu":"İçerik menüsünü göster","Show details":"Detayları göster",Spaces:"Alanlar",Status:"Durum","The file type is unsupported":"Bu dosya türü desteklenmiyor","To set an individual quota, the user needs to have logged in once.":"Bireysel bir kota belirlemek için kullanıcının bir kez giriş yapmış olması gerekir.",'User "%{user}" was deleted successfully':'"%{user}" kullanıcısı başarıyla silindi','User "%{userName}" already exists':'"%{userName}" kullanıcısı zaten mevcut',"User details":"Kullanıcı detayları","User name":"Kullanıcı adı","User name cannot be empty":"Kullanıcı adı boş olamaz","User name cannot contain white spaces":"Kullanıcı adı beyaz boşluklar içermemeli","User name cannot start with a number":"Kullanıcı adı sayı ile başlayamaz","User was created successfully":"Kullanıcı başarıyla oluşturuldu",Users:"Kullanıcılar"},Ms={ar:fs,bg:bs,cs:ys,de:vs,es:Cs,fr:Ss,gl:ws,he:$s,it:ks,pl:As,ru:Us,sk:Ns,sq:_s,tr:Gs},Es=j({components:{SideBar:Wt,AppLoadingSpinner:vt,BatchActions:Kt},props:{breadcrumbs:{required:!0,type:Array},sideBarOpen:{required:!1,type:Boolean,default:!1},sideBarAvailablePanels:{required:!1,type:Array,default:()=>[]},sideBarActivePanel:{required:!1,type:[String,null],default:null},loading:{required:!1,type:Boolean,default:!1},sideBarLoading:{required:!1,type:Boolean,default:!1},isSideBarHeaderCompact:{required:!1,type:Boolean,default:!1},showBatchActions:{type:Boolean,required:!1,default:!1},batchActionItems:{type:Array,required:!1,default:()=>[]},batchActions:{type:Array,required:!1,default:()=>[]}},setup(e){const t=A(),o=A(!1),c=()=>{o.value=e.sideBarOpen?window.innerWidth<=1600:window.innerWidth<=1200},i=new ResizeObserver(c),u=()=>{x.publish(le.close)},r=()=>{x.publish(le.toggle)},n=a=>{x.publish(le.setActivePanel,a)};return ce(t,a=>{a&&i.observe(s(t))},{immediate:!0}),Le(()=>{s(t)&&i.unobserve(s(t))}),{isMobileWidth:Ve("isMobileWidth"),appBarRef:t,limitedScreenSpace:o,closeSideBar:u,toggleSideBar:r,selectPanel:n,...us({applicationId:"admin-settings"})}},computed:{toggleSidebarButtonLabel(){return this.sideBarOpen?this.$gettext("Close sidebar to hide details"):this.$gettext("Open sidebar to view details")},toggleSidebarButtonIconFillType(){return this.sideBarOpen?"fill":"line"}}});const Ds={class:"oc-flex oc-flex-wrap oc-height-1-1 app-content oc-width-1-1"},Ps={id:"admin-settings-wrapper",class:"oc-width-expand oc-height-1-1 oc-position-relative"},Fs={id:"admin-settings-app-bar",ref:"appBarRef",class:"oc-app-bar oc-py-s"},zs={class:"admin-settings-app-bar-controls oc-flex oc-flex-between oc-flex-middle"},xs={class:"oc-flex oc-flex-middle oc-mt-xs"};function qs(e,t,o,c,i,u){const r=g("app-loading-spinner"),n=g("oc-breadcrumb"),a=g("portal-target"),h=g("oc-icon"),p=g("oc-button"),v=g("batch-actions"),_=g("side-bar"),k=ue("oc-tooltip");return m(),$("main",Ds,[e.loading?(m(),D(r,{key:0})):(m(),$(Ae,{key:1},[d("div",Ps,[d("div",Fs,[d("div",zs,[e.isMobileWidth?q("",!0):(m(),D(n,{key:0,id:"admin-settings-breadcrumb",class:"oc-flex oc-flex-middle",items:e.breadcrumbs},null,8,["items"])),l(),f(a,{name:"app.runtime.mobile.nav"}),l(),d("div",null,[e.sideBarAvailablePanels.length?ee((m(),D(p,{key:0,id:"files-toggle-sidebar","aria-label":e.toggleSidebarButtonLabel,appearance:"raw",class:"oc-my-s oc-p-xs",onClick:ve(e.toggleSideBar,["stop"])},{default:S(()=>[f(h,{name:"side-bar-right","fill-type":e.toggleSidebarButtonIconFillType},null,8,["fill-type"])]),_:1},8,["aria-label","onClick"])),[[k,e.toggleSidebarButtonLabel]]):q("",!0)])]),l(),d("div",xs,[ye(e.$slots,"topbarActions",{class:"oc-flex-1 oc-flex oc-flex-start"}),l(),e.showBatchActions?(m(),D(v,{key:0,class:"oc-ml-s",actions:e.batchActions,"action-options":{resources:e.batchActionItems},"limited-screen-space":e.limitedScreenSpace},null,8,["actions","action-options","limited-screen-space"])):q("",!0)])],512),l(),ye(e.$slots,"mainContent")]),l(),e.sideBarOpen?(m(),D(_,{key:0,"active-panel":e.sideBarActivePanel,"available-panels":e.sideBarAvailablePanels,loading:e.sideBarLoading,open:e.sideBarOpen,"is-header-compact":e.isSideBarHeaderCompact,onSelectPanel:e.selectPanel,onClose:e.closeSideBar},{header:S(()=>[ye(e.$slots,"sideBarHeader")]),_:3},8,["active-panel","available-panels","loading","open","is-header-compact","onSelectPanel","onClose"])):q("",!0)],64))])}const Qe=O(Es,[["render",qs]]),Rs=j({name:"InfoSection",setup(){var r,n;const e=se();let t="",o="",c="",i="";const u=(n=(r=e.getters.capabilities)==null?void 0:r.core)==null?void 0:n.status;return u&&u.versionstring&&(t=u.product||"ownCloud",o=u.productversion||u.versionstring,c=u.edition,i="7.0.3"),{webClientVersion:i,backendProductName:t,backendVersion:o,backendEdition:c}}}),Is=["textContent"],Ts={class:"details-table"},js=["textContent"],Os=["textContent"],Ls=["textContent"],Vs=["textContent"],Bs=["textContent"],Qs=["textContent"],Hs=["textContent"],Ws=["textContent"];function Ks(e,t,o,c,i,u){return m(),$("div",null,[d("h2",{class:"oc-py-s",textContent:w(e.$gettext("Info"))},null,8,Is),l(),d("table",Ts,[d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("ownCloud"))},null,8,js),l(),d("td",{textContent:w(e.backendProductName)},null,8,Os)]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Edition"))},null,8,Ls),l(),d("td",{textContent:w(e.backendEdition)},null,8,Vs)]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Version"))},null,8,Bs),l(),d("td",{textContent:w(e.backendVersion)},null,8,Qs)]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Web client version"))},null,8,Hs),l(),d("td",{textContent:w(e.webClientVersion)},null,8,Ws)])])])}const Zs=O(Rs,[["render",Ks]]),Ys=({store:e})=>{e=e||se();const{$gettext:t}=K(),o=ot(),c=de(),i=Fe(),u=async()=>{try{await c.httpAuthenticated.delete("/branding/logo"),e.dispatch("showMessage",{title:t("Logo was reset successfully. Reloading page...")}),setTimeout(()=>{i.go(0)},1e3)}catch(n){console.error(n),e.dispatch("showMessage",{title:t("Failed to reset logo"),status:"danger"})}};return{actions:b(()=>[{name:"reset-logo",icon:"restart",label:()=>t("Reset logo"),isEnabled:()=>o.can("update-all","Logo"),handler:u,componentType:"button",class:"oc-general-actions-reset-logo-trigger"}])}},Gt=["image/gif","image/jpeg","image/png"],Js=({store:e,imageInput:t})=>{e=e||se();const{$gettext:o}=K(),c=ot(),i=de(),u=Fe(),r=async a=>{const h=a.currentTarget.files[0];if(h){if(!Gt.includes(h.type))return e.dispatch("showMessage",{title:o("The file type is unsupported"),status:"danger"});try{const p=i.httpAuthenticated,v=new FormData;v.append("logo",h),await p.post("/branding/logo",v,{headers:{"Content-Type":"multipart/form-data"}}),e.dispatch("showMessage",{title:o("Logo was uploaded successfully")}),setTimeout(()=>{u.go(0)},1e3)}catch(p){console.error(p),e.dispatch("showMessage",{title:o("Failed to upload logo"),status:"danger"})}}};return{actions:b(()=>[{name:"upload-logo",icon:"image-add",label:()=>o("Upload logo"),isEnabled:()=>c.can("update-all","Logo"),handler:()=>{s(t).click()},componentType:"button",class:"oc-general-actions-upload-logo-trigger"}]),uploadImage:r}},Xs=j({name:"AppearanceSection",components:{ContextActionMenu:Oe},setup(){const e=se(),t=A(null),{actions:o}=Ys({store:e}),{actions:c,uploadImage:i}=Js({imageInput:t}),u=b(()=>[...s(c),...s(o)].filter(p=>p.isEnabled())),r=b(()=>({resources:s(u)})),n=b(()=>e.getters.configuration.currentTheme.logo.topbar),a=b(()=>[{name:"primaryActions",items:s(u)}]),h=Gt.join(",");return{actionOptions:r,logo:n,menuItems:u,menuSections:a,supportedLogoMimeTypesAcceptValue:h,uploadImage:i,logoInput:t}}});const eo=["textContent"],to={class:"oc-flex oc-flex-middle"},so=["textContent"],oo={class:"logo-wrapper"},no=["src"],ao=["accept"];function ro(e,t,o,c,i,u){const r=g("oc-icon"),n=g("oc-button"),a=g("context-action-menu"),h=g("oc-drop"),p=ue("oc-tooltip");return m(),$("div",null,[d("h2",{class:"oc-py-s",textContent:w(e.$gettext("Appearance"))},null,8,eo),l(),d("div",null,[d("div",to,[d("h3",{textContent:w(e.$gettext("Logo"))},null,8,so),l(),e.menuItems.length?ee((m(),D(n,{key:0,id:"logo-context-btn","aria-label":e.$gettext("Show context menu"),appearance:"raw",class:"oc-ml-s"},{default:S(()=>[f(r,{name:"more-2"})]),_:1},8,["aria-label"])),[[p,e.$gettext("Show context menu")]]):q("",!0),l(),f(h,{"drop-id":"space-context-drop",toggle:"#logo-context-btn",mode:"click","close-on-click":"","padding-size":"small"},{default:S(()=>[f(a,{"menu-sections":e.menuSections,"action-options":e.actionOptions},null,8,["menu-sections","action-options"])]),_:1})]),l(),d("div",null,[d("div",oo,[d("img",{alt:"",src:e.logo,class:"oc-p-xs"},null,8,no)]),l(),d("input",{id:"logo-upload-input",ref:"logoInput",type:"file",name:"file",tabindex:"-1",accept:e.supportedLogoMimeTypesAcceptValue,onChange:t[0]||(t[0]=(...v)=>e.uploadImage&&e.uploadImage(...v))},null,40,ao)])])])}const io=O(Xs,[["render",ro],["__scopeId","data-v-4716a660"]]),lo=j({components:{AppearanceSection:io,AppTemplate:Qe,InfoSection:Zs},setup(){return{template:A()}},computed:{breadcrumbs(){return[{text:this.$gettext("Administration Settings"),to:{path:"/admin-settings"}},{text:this.$gettext("General")}]}}}),uo={class:"oc-px-m"};function co(e,t,o,c,i,u){const r=g("InfoSection"),n=g("AppearanceSection"),a=g("app-template");return m(),$("div",null,[f(a,{ref:"template",breadcrumbs:e.breadcrumbs},{mainContent:S(()=>[d("div",uo,[f(r),l(),f(n)])]),_:1},8,["breadcrumbs"])])}const po=O(lo,[["render",co]]),Mt=({store:e})=>{e=e||se();const{$gettext:t,$ngettext:o}=K(),c=de(),i=async n=>{const a=c.graphAuthenticated,h=n.map(k=>a.groups.deleteGroup(k.id)),p=await Promise.allSettled(h),v=p.filter(k=>k.status==="fulfilled");if(v.length){const k=v.length===1&&n.length===1?t('Group "%{group}" was deleted successfully',{group:n[0].displayName}):o("%{groupCount} group was deleted successfully","%{groupCount} groups were deleted successfully",v.length,{groupCount:v.length.toString()},!0);e.dispatch("showMessage",{title:k})}const _=p.filter(k=>k.status==="rejected");if(_.length){_.forEach(console.error);const k=_.length===1&&n.length===1?t('Failed to delete group "%{group}"',{group:n[0].displayName}):o("Failed to delete %{groupCount} group","Failed to delete %{groupCount} groups",_.length,{groupCount:_.length.toString()},!0);e.dispatch("showMessage",{title:k,status:"danger"})}e.dispatch("hideModal"),x.publish("app.admin-settings.list.load")},u=({resources:n})=>{if(!n.length)return;const a={variation:"danger",title:o('Delete group "%{group}"?',"Delete %{groupCount} groups?",n.length,{group:n[0].displayName,groupCount:n.length.toString()}),cancelText:t("Cancel"),confirmText:t("Delete"),message:o("Are you sure you want to delete this group?","Are you sure you want to delete the %{groupCount} selected groups?",n.length,{groupCount:n.length.toString()}),hasInput:!1,onCancel:()=>e.dispatch("hideModal"),onConfirm:()=>i(n)};e.dispatch("createModal",a)};return{actions:b(()=>[{name:"delete",icon:"delete-bin",label:()=>t("Delete"),handler:u,isEnabled:({resources:n})=>!!n.length&&!n.some(a=>{var h;return(h=a.groupTypes)==null?void 0:h.includes("ReadOnly")}),componentType:"button",class:"oc-groups-actions-delete-trigger"}]),deleteGroups:i}},mo=()=>{const{$gettext:e}=K();return{actions:b(()=>[{name:"edit",icon:"pencil",label:()=>e("Edit"),handler:()=>x.publish(le.openWithPanel,"EditPanel"),isEnabled:({resources:o})=>{var c;return o.length===1&&!((c=o[0].groupTypes)!=null&&c.includes("ReadOnly"))},componentType:"button",class:"oc-groups-actions-edit-trigger"}])}},go=()=>{const{$gettext:e}=K();return{actions:b(()=>[{name:"add-to-groups",icon:"add",componentType:"button",class:"oc-users-actions-add-to-groups-trigger",label:()=>e("Add to groups"),isEnabled:({resources:o})=>o.length>0,handler(){x.publish("app.admin-settings.users.actions.add-to-groups")}}])}},Et=({store:e})=>{e=e||se();const{$gettext:t,$ngettext:o}=K(),c=de(),i=async n=>{const a=c.graphAuthenticated,h=n.map(k=>a.users.deleteUser(k.id)),p=await Promise.allSettled(h),v=p.filter(k=>k.status==="fulfilled");if(v.length){const k=v.length===1&&n.length===1?t('User "%{user}" was deleted successfully',{user:n[0].displayName}):o("%{userCount} user was deleted successfully","%{userCount} users were deleted successfully",v.length,{userCount:v.length.toString()},!0);e.dispatch("showMessage",{title:k})}const _=p.filter(k=>k.status==="rejected");if(_.length){_.forEach(console.error);const k=_.length===1&&n.length===1?t('Failed to delete user "%{user}"',{user:n[0].displayName}):o("Failed to delete %{userCount} user","Failed to delete %{userCount} users",_.length,{userCount:_.length.toString()},!0);e.dispatch("showMessage",{title:k,status:"danger"})}e.dispatch("hideModal"),x.publish("app.admin-settings.list.load")},u=({resources:n})=>{if(!n.length)return;const a={variation:"danger",title:o('Delete user "%{user}"?',"Delete %{userCount} users?",n.length,{user:n[0].displayName,userCount:n.length.toString()}),cancelText:t("Cancel"),confirmText:t("Delete"),message:o("Are you sure you want to delete this user?","Are you sure you want to delete the %{userCount} selected users?",n.length,{userCount:n.length.toString()}),hasInput:!1,onCancel:()=>e.dispatch("hideModal"),onConfirm:()=>i(n)};e.dispatch("createModal",a)};return{actions:b(()=>[{name:"delete",icon:"delete-bin",label:()=>t("Delete"),handler:u,isEnabled:({resources:n})=>!!n.length&&!s(ps()),componentType:"button",class:"oc-users-actions-delete-trigger"}]),deleteUsers:i}},ho=()=>{const{$gettext:e}=K();return{actions:b(()=>[{name:"edit",icon:"pencil",label:()=>e("Edit"),handler:()=>x.publish(le.openWithPanel,"EditPanel"),isEnabled:({resources:o})=>o.length===1,componentType:"button",class:"oc-users-actions-edit-trigger"}])}},fo=()=>{const e=ht(),{$gettext:t}=K();return{actions:b(()=>[{name:"edit-login",icon:"login-circle",componentType:"button",class:"oc-users-actions-edit-login-trigger",label:()=>t("Edit login"),isEnabled:({resources:c})=>s(e).includes("user.accountEnabled")?!1:c.length>0,handler(){x.publish("app.admin-settings.users.actions.edit-login")}}])}},bo=()=>{const{$gettext:e}=K();return{actions:b(()=>[{name:"remove-users-from-groups",icon:"subtract",componentType:"button",class:"oc-users-actions-remove-from-groups-trigger",label:()=>e("Remove from groups"),isEnabled:({resources:o})=>o.length>0,handler(){x.publish("app.admin-settings.users.actions.remove-from-groups")}}])}},Dt=()=>{const{$gettext:e}=K(),t=ot(),o=ht(),c=A(!1),i=()=>{c.value=!1},u=()=>{c.value=!0},r=b(()=>[{name:"editQuota",icon:"cloud",label:()=>e("Edit quota"),handler:u,isEnabled:({resources:n})=>!n||!n.length||s(o).includes("drive.quota")||!n.some(a=>{var h;return(h=a.drive)==null?void 0:h.quota})?!1:t.can("set-quota-all","Drive"),componentType:"button",class:"oc-users-actions-edit-quota-trigger"}]);return{modalOpen:c,closeModal:i,actions:r}},ft=({items:e})=>{const t=ds({name:"admin-settings-items-per-page",defaultValue:"50"}),o=ge("page","1"),c=b(()=>parseInt(he(s(o)))),i=b(()=>parseInt(he(s(t)))),u=b(()=>Math.ceil(s(e).length/s(i))),r=b(()=>{const n=(s(c)-1)*s(i),a=n+s(i);return s(e).slice(n,a)});return{currentPage:c,itemsPerPage:i,paginatedItems:r,paginationPages:u}},yo=j({name:"UsersList",components:{ContextMenuQuickAction:at,NoContentMessage:rt,Pagination:it},props:{users:{type:Array,required:!0},roles:{type:Array,required:!0},selectedUsers:{type:Array,required:!0}},emits:["unSelectAllUsers","selectUsers","toggleSelectUser"],setup(e,{emit:t}){const{$gettext:o}=K(),c=A(void 0),i=A(""),u=A("onPremisesSamAccountName"),r=A($e.Asc),{y:n}=nt("#admin-settings-app-bar"),a=C=>e.selectedUsers.some(M=>M.id===C.id),h=C=>{t("unSelectAllUsers"),t("toggleSelectUser",C)},p=C=>{a(C)||h(C),x.publish(le.open)},v=C=>{a(C)||h(C),x.publish(le.openWithPanel,"EditPanel")},_=C=>{a(C)||h(C),x.publish(le.openWithPanel,"GroupAssignmentsPanel")},k=C=>{const M=C[0];a(M)||h(M)},y=(C,M)=>{const{dropdown:G,event:T}=C;(G==null?void 0:G.tippy)!==void 0&&(a(M)||h(M),we(G.tippy,T,s(c)))},N=(C,M,G)=>{M.preventDefault();const T=C.$el.getElementsByClassName("users-table-btn-action-dropdown")[0];T!==void 0&&(a(G)||h(G),we(T._tippy,M,s(c)))},U=(C,M)=>(M||"").trim()?new Ne(C,{...ke,keys:["displayName","mail","onPremisesSamAccountName","role.displayName"]}).search(M).map(T=>T.item):C,L=C=>{var G;const M=C.appRoleAssignments[0];return o(((G=e.roles.find(T=>T.id===(M==null?void 0:M.appRoleId)))==null?void 0:G.displayName)||"")||"-"},R=(C,M,G)=>[...C].sort((T,oe)=>{let ne,ae;switch(M){case"role":ne=L(T),ae=L(oe);break;case"accountEnabled":ne=("accountEnabled"in T?T.accountEnabled:!0).toString(),ae=("accountEnabled"in oe?oe.accountEnabled:!0).toString();break;default:ne=T[M]||"",ae=oe[M]||""}return G?ae.localeCompare(ne):ne.localeCompare(ae)}),I=b(()=>R(U(e.users,s(i)),s(u),s(r)===$e.Desc)),F=ft({items:I});return ce(F.currentPage,()=>{t("unSelectAllUsers")}),{showDetails:p,showEditPanel:v,showGroupAssigmentPanel:_,isUserSelected:a,rowClicked:k,contextMenuButtonRef:c,showContextMenuOnBtnClick:y,showContextMenuOnRightClick:N,fileListHeaderY:n,getRoleDisplayNameByUser:L,items:I,filterTerm:i,sortBy:u,sortDir:r,...F,filter:U,orderBy:R}},data(){return{markInstance:null}},computed:{allUsersSelected(){return this.paginatedItems.length===this.selectedUsers.length},footerTextTotal(){return this.$gettext("%{userCount} users in total",{userCount:this.users.length.toString()})},footerTextFilter(){return this.$gettext("%{userCount} matching users",{userCount:this.items.length.toString()})},fields(){return[{name:"select",title:"",type:"slot",width:"shrink",headerType:"slot"},{name:"avatar",title:"",type:"slot",width:"shrink"},{name:"onPremisesSamAccountName",title:this.$gettext("User name"),sortable:!0},{name:"displayName",title:this.$gettext("First and last name"),sortable:!0},{name:"mail",title:this.$gettext("Email"),sortable:!0},{name:"role",title:this.$gettext("Role"),type:"slot",sortable:!0},{name:"accountEnabled",title:this.$gettext("Login"),type:"slot",sortable:!0},{name:"actions",title:this.$gettext("Actions"),sortable:!1,type:"slot",alignH:"right"}]},highlighted(){return this.selectedUsers.map(e=>e.id)}},watch:{async filterTerm(){this.$refs.tableRef&&(await this.$router.push({...this.$route,query:{...this.$route.query,page:"1"}}),this.markInstance=new Ue(this.$refs.tableRef.$el),this.markInstance.unmark(),this.markInstance.mark(this.filterTerm,{element:"span",className:"highlight-mark",exclude:["th *","tfoot *"]}))}},methods:{handleSort(e){this.sortBy=e.sortBy,this.sortDir=e.sortDir},getSelectUserLabel(e){return this.$gettext("Select %{ user }",{user:e.displayName},!0)}}});const vo=["textContent"],Co={key:0,class:"oc-flex oc-flex-middle"},So=["textContent"],wo={key:1,class:"oc-flex oc-flex-middle"},$o=["textContent"],ko={class:"oc-text-nowrap oc-text-center oc-width-1-1 oc-my-s"},Ao={class:"oc-text-muted"},Uo={key:0,class:"oc-text-muted"};function No(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("no-content-message"),a=g("oc-checkbox"),h=g("avatar-image"),p=g("oc-icon"),v=g("oc-button"),_=g("context-menu-quick-action"),k=g("pagination"),y=g("oc-table"),N=ue("oc-tooltip");return m(),$("div",null,[f(r,{id:"users-filter",modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=U=>e.filterTerm=U),class:"oc-ml-m oc-my-s",label:e.$gettext("Search"),autocomplete:"off"},null,8,["modelValue","label"]),l(),ye(e.$slots,"filter"),l(),e.users.length?(m(),D(y,{key:1,ref:"tableRef",class:"users-table","sort-by":e.sortBy,"sort-dir":e.sortDir,fields:e.fields,data:e.paginatedItems,highlighted:e.highlighted,sticky:!0,"header-position":e.fileListHeaderY,hover:!0,onSort:e.handleSort,onContextmenuClicked:e.showContextMenuOnRightClick,onHighlight:e.rowClicked},{selectHeader:S(()=>[f(a,{size:"large",class:"oc-ml-s",label:e.$gettext("Select all users"),"model-value":e.allUsersSelected,"hide-label":"","onUpdate:modelValue":t[1]||(t[1]=U=>e.allUsersSelected?e.$emit("unSelectAllUsers"):e.$emit("selectUsers",e.paginatedItems))},null,8,["label","model-value"])]),select:S(({item:U})=>[f(a,{class:"oc-ml-s",size:"large","model-value":e.isUserSelected(U),option:U,label:e.getSelectUserLabel(U),"hide-label":"","onUpdate:modelValue":L=>e.$emit("toggleSelectUser",U),onClick:t[2]||(t[2]=ve(()=>{},["stop"]))},null,8,["model-value","option","label","onUpdate:modelValue"])]),avatar:S(({item:U})=>[f(h,{width:32,userid:U.id,"user-name":U.displayName},null,8,["userid","user-name"])]),role:S(({item:U})=>[U.appRoleAssignments?(m(),$(Ae,{key:0},[l(w(e.getRoleDisplayNameByUser(U)),1)],64)):q("",!0)]),accountEnabled:S(({item:U})=>[U.accountEnabled===!1?(m(),$("span",Co,[f(p,{name:"stop-circle","fill-type":"line",class:"oc-mr-s"}),d("span",{textContent:w(e.$gettext("Forbidden"))},null,8,So)])):(m(),$("span",wo,[f(p,{name:"play-circle","fill-type":"line",class:"oc-mr-s"}),d("span",{textContent:w(e.$gettext("Allowed"))},null,8,$o)]))]),actions:S(({item:U})=>[ee((m(),D(v,{appearance:"raw",class:"oc-mr-xs quick-action-button oc-p-xs users-table-btn-details",onClick:L=>e.showDetails(U)},{default:S(()=>[f(p,{name:"information","fill-type":"line"})]),_:2},1032,["onClick"])),[[N,e.$gettext("Details")]]),ee((m(),D(v,{appearance:"raw",class:"oc-mr-xs quick-action-button oc-p-xs users-table-btn-edit",onClick:L=>e.showEditPanel(U)},{default:S(()=>[f(p,{name:"pencil","fill-type":"line"})]),_:2},1032,["onClick"])),[[N,e.$gettext("Edit")]]),l(),f(_,{ref:"contextMenuButtonRef",item:U,class:"users-table-btn-action-dropdown",onQuickActionClicked:L=>e.showContextMenuOnBtnClick(L,U)},{contextMenu:S(()=>[ye(e.$slots,"contextMenu",{user:U})]),_:2},1032,["item","onQuickActionClicked"])]),footer:S(()=>[f(k,{pages:e.paginationPages,"current-page":e.currentPage},null,8,["pages","current-page"]),l(),d("div",ko,[d("p",Ao,w(e.footerTextTotal),1),l(),e.filterTerm?(m(),$("p",Uo,w(e.footerTextFilter),1)):q("",!0)])]),_:3},8,["sort-by","sort-dir","fields","data","highlighted","header-position","onSort","onContextmenuClicked","onHighlight"])):(m(),D(n,{key:0,icon:"user"},{message:S(()=>[d("span",{textContent:w(e.$gettext("No users in here"))},null,8,vo)]),_:1}))])}const _o=O(yo,[["render",No]]),Go=j({name:"CreateUserModal",emits:["cancel","confirm"],setup(){const e=de(),t=A({userName:{errorMessage:"",valid:!1},displayName:{errorMessage:"",valid:!1},email:{errorMessage:"",valid:!1},password:{errorMessage:"",valid:!1}});return{clientService:e,formData:t}},data:function(){return{user:{onPremisesSamAccountName:"",displayName:"",mail:"",passwordProfile:{password:""}}}},computed:{isFormInvalid(){return Object.keys(this.formData).map(e=>!!this.formData[e].valid).includes(!1)}},methods:{onInputEmail(){Xe(this.user.mail)&&(this.formData.email.errorMessage="",this.formData.email.valid=!0)},async validateUserName(){if(this.formData.userName.valid=!1,this.user.onPremisesSamAccountName.trim()==="")return this.formData.userName.errorMessage=this.$gettext("User name cannot be empty"),!1;if(this.user.onPremisesSamAccountName.includes(" "))return this.formData.userName.errorMessage=this.$gettext("User name cannot contain white spaces"),!1;if(this.user.onPremisesSamAccountName.length>255)return this.formData.userName.errorMessage=this.$gettext("User name cannot exceed 255 characters"),!1;if(this.user.onPremisesSamAccountName.length&&!isNaN(parseInt(this.user.onPremisesSamAccountName[0])))return this.formData.userName.errorMessage=this.$gettext("User name cannot start with a number"),!1;try{return await this.clientService.graphAuthenticated.users.getUser(this.user.onPremisesSamAccountName),this.formData.userName.errorMessage=this.$gettext('User "%{userName}" already exists',{userName:this.user.onPremisesSamAccountName}),!1}catch{}return this.formData.userName.errorMessage="",this.formData.userName.valid=!0,!0},validateDisplayName(){return this.formData.displayName.valid=!1,this.user.displayName.trim()===""?(this.formData.displayName.errorMessage=this.$gettext("First and last name cannot be empty"),!1):this.user.displayName.length>255?(this.formData.displayName.errorMessage=this.$gettext("First and last name cannot cannot exceed 255 characters"),!1):(this.formData.displayName.errorMessage="",this.formData.displayName.valid=!0,!0)},validateEmail(){return this.formData.email.valid=!1,Xe(this.user.mail)?(this.formData.email.errorMessage="",this.formData.email.valid=!0,!0):(this.formData.email.errorMessage=this.$gettext("Please enter a valid email"),!1)},validatePassword(){return this.formData.password.valid=!1,this.user.passwordProfile.password.trim()===""?(this.formData.password.errorMessage=this.$gettext("Password cannot be empty"),!1):(this.formData.password.errorMessage="",this.formData.password.valid=!0,!0)},onFormSubmit(){this.isFormInvalid||this.$emit("confirm",this.user)}}}),Mo=d("input",{type:"submit",class:"oc-hidden"},null,-1);function Eo(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("oc-modal");return m(),D(n,{title:e.$gettext("Create user"),"button-cancel-text":e.$gettext("Cancel"),"button-confirm-text":e.$gettext("Create"),"button-confirm-disabled":e.isFormInvalid,"focus-trap-initial":"#create-user-input-display-name",onCancel:t[5]||(t[5]=a=>e.$emit("cancel")),onConfirm:t[6]||(t[6]=a=>e.$emit("confirm",e.user))},{content:S(()=>[d("form",{autocomplete:"off",onSubmit:t[4]||(t[4]=ve((...a)=>e.onFormSubmit&&e.onFormSubmit(...a),["prevent"]))},[f(r,{id:"create-user-input-user-name",modelValue:e.user.onPremisesSamAccountName,"onUpdate:modelValue":[t[0]||(t[0]=a=>e.user.onPremisesSamAccountName=a),e.validateUserName],class:"oc-mb-s",label:e.$gettext("User name")+"*","error-message":e.formData.userName.errorMessage,"fix-message-line":!0},null,8,["modelValue","label","error-message","onUpdate:modelValue"]),l(),f(r,{id:"create-user-input-display-name",modelValue:e.user.displayName,"onUpdate:modelValue":[t[1]||(t[1]=a=>e.user.displayName=a),e.validateDisplayName],class:"oc-mb-s",label:e.$gettext("First and last name")+"*","error-message":e.formData.displayName.errorMessage,"fix-message-line":!0},null,8,["modelValue","label","error-message","onUpdate:modelValue"]),l(),f(r,{id:"create-user-input-email",modelValue:e.user.mail,"onUpdate:modelValue":[t[2]||(t[2]=a=>e.user.mail=a),e.onInputEmail],class:"oc-mb-s",label:e.$gettext("Email")+"*","error-message":e.formData.email.errorMessage,type:"email","fix-message-line":!0,onChange:e.validateEmail},null,8,["modelValue","label","error-message","onUpdate:modelValue","onChange"]),l(),f(r,{id:"create-user-input-password",modelValue:e.user.passwordProfile.password,"onUpdate:modelValue":[t[3]||(t[3]=a=>e.user.passwordProfile.password=a),e.validatePassword],class:"oc-mb-s",label:e.$gettext("Password")+"*","error-message":e.formData.password.errorMessage,type:"password","fix-message-line":!0},null,8,["modelValue","label","error-message","onUpdate:modelValue"]),l(),Mo],32)]),_:1},8,["title","button-cancel-text","button-confirm-text","button-confirm-disabled"])}const Do=O(Go,[["render",Eo]]),bt=()=>{const{$gettext:e}=K();return{actions:b(()=>[{name:"show-details",icon:"information",label:()=>e("Details"),handler:()=>x.publish(le.open),isEnabled:({resources:o})=>o.length>0,componentType:"button",class:"oc-admin-settings-show-details-trigger"}])}},Po=j({name:"ContextActions",components:{ContextActionMenu:Oe,QuotaModal:Pe},props:{items:{type:Array,required:!0}},setup(e){const t=se(),{$gettext:o}=K(),c=b(()=>({resources:e.items})),i=A([]);ce(()=>e.items,()=>{i.value.splice(0,s(i).length),e.items.forEach(R=>{const I=$t(R.drive);if(I===void 0||I.id===void 0)return;const F={id:I.id,name:R.displayName,spaceQuota:I.quota};i.value.push(F)})},{deep:!0,immediate:!0});const u=b(()=>e.items.filter(({drive:R})=>!Nt(R))),r=b(()=>u.value.length?o("Quota will only be applied to users who logged in at least once."):""),n=b(()=>u.value.length?{title:o("Unaffected users"),text:[...u.value].sort((R,I)=>R.displayName.localeCompare(I.displayName)).map(R=>R.displayName).join(", ")}:{}),{actions:a}=bt(),{actions:h,modalOpen:p,closeModal:v}=Dt(),{actions:_}=ho(),{actions:k}=Et({store:t}),y=b(()=>[...s(_),...s(k)].filter(R=>R.isEnabled(s(c)))),N=b(()=>[...s(h)].filter(R=>R.isEnabled(s(c)))),U=b(()=>[...s(a)].filter(R=>R.isEnabled(s(c)))),L=b(()=>{const R=[];return s(y).length&&R.push({name:"primaryActions",items:s(y)}),s(N).length&&R.push({name:"secondaryActions",items:s(N)}),s(U).length&&R.push({name:"sidebar",items:s(U)}),R});return{maxQuota:Ge(),menuSections:L,quotaModalIsOpen:p,closeQuotaModal:v,selectedPersonalDrives:i,quotaModalWarningMessage:r,quotaWarningMessageContextualHelperData:n}}});function Fo(e,t,o,c,i,u){const r=g("context-action-menu"),n=g("quota-modal");return m(),$("div",null,[f(r,{"menu-sections":e.menuSections,"action-options":{resources:e.items}},null,8,["menu-sections","action-options"]),l(),e.quotaModalIsOpen?(m(),D(n,{key:0,cancel:e.closeQuotaModal,spaces:e.selectedPersonalDrives,"max-quota":e.maxQuota,"warning-message":e.quotaModalWarningMessage,"warning-message-contextual-helper-data":e.quotaWarningMessageContextualHelperData,"resource-type":"user"},null,8,["cancel","spaces","max-quota","warning-message","warning-message-contextual-helper-data"])):q("",!0)])}const zo=O(Po,[["render",Fo]]),xo=j({name:"UserInfoBox",props:{user:{type:Object,required:!0}}});const qo={class:"oc-flex user-info oc-mb-l"},Ro=["textContent"],Io=["textContent"];function To(e,t,o,c,i,u){const r=g("avatar-image");return m(),$("div",qo,[f(r,{class:"oc-mb-m",width:80,userid:e.user.id,"user-name":e.user.displayName},null,8,["userid","user-name"]),l(),d("span",{textContent:w(e.user.onPremisesSamAccountName)},null,8,Ro),l(),d("span",{class:"oc-text-muted user-info-display-name",textContent:w(e.user.displayName)},null,8,Io)])}const Pt=O(xo,[["render",To]]),jo=j({name:"DetailsPanel",components:{UserInfoBox:Pt},props:{user:{type:Object,required:!1,default:null},users:{type:Array,required:!0},roles:{type:Array,required:!0}},setup(e){const{$gettext:t,current:o}=K();return{$gettext:t,currentLanguage:o,_user:b(()=>e.user)}},computed:{noUsers(){return!this.users.length},multipleUsers(){return this.users.length>1},multipleUsersSelectedText(){return this.$gettext("%{count} users selected",{count:this.users.length.toString()})},roleDisplayName(){var t;const e=this.user.appRoleAssignments[0];return this.$gettext(((t=this.roles.find(o=>o.id===(e==null?void 0:e.appRoleId)))==null?void 0:t.displayName)||"")||"-"},groupsDisplayValue(){return this.user.memberOf.map(e=>e.displayName).sort().join(", ")},showUserQuota(){var e;return"total"in(((e=this.user.drive)==null?void 0:e.quota)||{})},quotaDisplayValue(){return this.user.drive.quota.total===0?this.$gettext("No restriction"):Te(this.user.drive.quota.total,this.currentLanguage)},loginDisplayValue(){return this.user.accountEnabled===!1?this.$gettext("Forbidden"):this.$gettext("Allowed")}}});const Oo={class:"oc-mt-xl"},Lo={key:0,class:"oc-flex user-info"},Vo={key:1,class:"oc-flex group-info"},Bo={key:2},Qo=["aria-label"],Ho=["textContent"],Wo=["textContent"],Ko=["textContent"],Zo=["textContent"],Yo=["textContent"],Jo=["textContent"],Xo=["textContent"],en=["textContent"],tn=["textContent"],sn=["textContent"],on=["textContent"],nn=["textContent"],an={key:1},rn=d("span",{class:"oc-mr-xs"},"-",-1),ln=["textContent"],un=["textContent"],cn={key:1},dn=d("span",{class:"oc-mr-xs"},"-",-1);function pn(e,t,o,c,i,u){const r=g("oc-icon"),n=g("UserInfoBox"),a=g("oc-contextual-helper"),h=ue("translate");return m(),$("div",Oo,[e.noUsers?(m(),$("div",Lo,[f(r,{name:"user",size:"xxlarge"}),l(),ee((m(),$("p",null,[l("Select a user to view details")])),[[h]])])):q("",!0),l(),e.multipleUsers?(m(),$("div",Vo,[f(r,{name:"group",size:"xxlarge"}),l(),d("p",null,w(e.multipleUsersSelectedText),1)])):q("",!0),l(),e._user?(m(),$("div",Bo,[f(n,{user:e._user},null,8,["user"]),l(),d("table",{class:"details-table","aria-label":e.$gettext("Overview of the information about the selected user")},[d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("User name"))},null,8,Ho),l(),d("td",{textContent:w(e._user.onPremisesSamAccountName)},null,8,Wo)]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("First and last name"))},null,8,Ko),l(),d("td",{textContent:w(e._user.displayName)},null,8,Zo)]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Email"))},null,8,Yo),l(),d("td",null,[d("span",{textContent:w(e._user.mail)},null,8,Jo)])]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Role"))},null,8,Xo),l(),d("td",null,[e._user.appRoleAssignments?(m(),$("span",{key:0,textContent:w(e.roleDisplayName)},null,8,en)):q("",!0)])]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Login"))},null,8,tn),l(),d("td",null,[d("span",{textContent:w(e.loginDisplayValue)},null,8,sn)])]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Quota"))},null,8,on),l(),d("td",null,[e.showUserQuota?(m(),$("span",{key:0,textContent:w(e.quotaDisplayValue)},null,8,nn)):(m(),$("span",an,[rn,l(),f(a,{text:e.$gettext("To see an individual quota, the user needs to have logged in once.")},null,8,["text"])]))])]),l(),d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Groups"))},null,8,ln),l(),d("td",null,[e._user.memberOf.length?(m(),$("span",{key:0,textContent:w(e.groupsDisplayValue)},null,8,un)):(m(),$("span",cn,[dn,l(),f(a,{text:e.$gettext("No groups assigned.")},null,8,["text"])]))])])],8,Qo)])):q("",!0)])}const mn=O(jo,[["render",pn]]),gn=j({name:"GroupSelect",props:{selectedGroups:{type:Array,required:!0},groupOptions:{type:Array,required:!0}},emits:["selectedOptionChange"],setup(e,{emit:t}){const o=A(),c=u=>{o.value=u,t("selectedOptionChange",s(o))},i=b(()=>e.selectedGroups);return ce(i,()=>{o.value=e.selectedGroups.map(u=>{var r;return{...u,readonly:(r=u.groupTypes)==null?void 0:r.includes("ReadOnly")}}).sort((u,r)=>r.readonly-u.readonly)},{immediate:!0}),{selectedOptions:o,onUpdate:c}}}),hn={id:"user-group-select-form"},fn={class:"oc-flex oc-flex-center"},bn={class:"oc-flex"},yn={class:"oc-flex oc-flex-center"};function vn(e,t,o,c,i,u){const r=g("avatar-image"),n=g("oc-select");return m(),$("div",hn,[f(n,{"model-value":e.selectedOptions,class:"oc-mb-s",multiple:!0,options:e.groupOptions,"option-label":"displayName",label:e.$gettext("Groups"),"fix-message-line":!0,"onUpdate:modelValue":e.onUpdate},{"selected-option":S(({displayName:a,id:h})=>[d("span",fn,[f(r,{class:"oc-flex oc-align-self-center oc-mr-s",width:16.8,userid:h,"user-name":a},null,8,["width","userid","user-name"]),l(),d("span",null,w(a),1)])]),option:S(({displayName:a,id:h})=>[d("div",bn,[d("span",yn,[f(r,{class:"oc-flex oc-align-self-center oc-mr-s",width:16.8,userid:h,"user-name":a},null,8,["width","userid","user-name"]),l(),d("span",null,w(a),1)])])]),_:1},8,["model-value","options","label","onUpdate:modelValue"])])}const Ft=O(gn,[["render",vn]]),Cn=j({name:"EditPanel",components:{UserInfoBox:Pt,CompareSaveDialog:Ct,QuotaSelect:Zt,GroupSelect:Ft},props:{user:{type:Object,required:!1,default:null},roles:{type:Array,required:!0},groups:{type:Array,required:!0}},emits:["confirm"],setup(e){const t=se(),o=de(),c=t.getters.user,i=A({}),u=A({displayName:{errorMessage:"",valid:!0},userName:{errorMessage:"",valid:!0},email:{errorMessage:"",valid:!0}}),r=b(()=>{const{memberOf:p}=s(i);return e.groups.filter(v=>{var _;return!p.some(k=>k.id===v.id)&&!((_=v.groupTypes)!=null&&_.includes("ReadOnly"))})}),n=b(()=>c.uuid===e.user.id),a=ht(),h=p=>s(a).includes(p);return{maxQuota:Ge(),isInputFieldReadOnly:h,isLoginInputDisabled:n,editUser:i,formData:u,groupOptions:r,clientService:o,_user:b(()=>e.user)}},computed:{loginOptions(){return[{label:this.$gettext("Allowed"),value:!0},{label:this.$gettext("Forbidden"),value:!1}]},selectedLoginValue(){return this.loginOptions.find(e=>"accountEnabled"in this.editUser?this.editUser.accountEnabled===e.value:e.value===!1)},translatedRoleOptions(){return this.roles.map(e=>({...e,displayName:this.$gettext(e.displayName)}))},selectedRoleValue(){var t,o;const e=(o=(t=this.editUser)==null?void 0:t.appRoleAssignments)==null?void 0:o[0];return this.translatedRoleOptions.find(c=>c.id===(e==null?void 0:e.appRoleId))},invalidFormData(){return Object.values(this.formData).map(e=>!!e.valid).includes(!1)},showQuota(){var e;return(e=this.editUser.drive)==null?void 0:e.quota},isQuotaInputDisabled(){return typeof this.showQuota>"u"},compareSaveDialogOriginalObject(){return Ye(this.user)}},watch:{user:{handler:function(){this.editUser=Ye(this.user)},deep:!0,immediate:!0},editUser:{handler:function(){this.editUser.accountEnabled===!0&&!("accountEnabled"in this.user)&&delete this.editUser.accountEnabled},deep:!0}},methods:{changeSelectedQuotaOption(e){this.editUser.drive.quota.total=e.value},changeSelectedGroupOption(e){this.editUser.memberOf=e},async validateUserName(){if(this.formData.userName.valid=!1,this.editUser.onPremisesSamAccountName.trim()==="")return this.formData.userName.errorMessage=this.$gettext("User name cannot be empty"),!1;if(this.editUser.onPremisesSamAccountName.includes(" "))return this.formData.userName.errorMessage=this.$gettext("User name cannot contain white spaces"),!1;if(this.editUser.onPremisesSamAccountName.length&&!isNaN(parseInt(this.editUser.onPremisesSamAccountName[0])))return this.formData.userName.errorMessage=this.$gettext("User name cannot start with a number"),!1;if(this.editUser.onPremisesSamAccountName.length>255)return this.formData.userName.errorMessage=this.$gettext("User name cannot exceed 255 characters"),!1;if(this.user.onPremisesSamAccountName!==this.editUser.onPremisesSamAccountName)try{return await this.clientService.graphAuthenticated.users.getUser(this.editUser.onPremisesSamAccountName),this.formData.userName.errorMessage=this.$gettext('User "%{userName}" already exists',{userName:this.editUser.onPremisesSamAccountName}),!1}catch{}return this.formData.userName.errorMessage="",this.formData.userName.valid=!0,!0},validateDisplayName(){return this.formData.displayName.valid=!1,this.editUser.displayName.trim()===""?(this.formData.displayName.errorMessage=this.$gettext("First and last name cannot be empty"),!1):this.editUser.displayName.length>255?(this.formData.displayName.errorMessage=this.$gettext("First and last name cannot exceed 255 characters"),!1):(this.formData.displayName.errorMessage="",this.formData.displayName.valid=!0,!0)},validateEmail(){return this.formData.email.valid=!1,Xe(this.editUser.mail)?(this.formData.email.errorMessage="",this.formData.email.valid=!0,!0):(this.formData.email.errorMessage=this.$gettext("Please enter a valid email"),!1)},revertChanges(){this.editUser=Ye(this.user),Object.values(this.formData).forEach(e=>{e.valid=!0,e.errorMessage=""})},onUpdateRole(e){if(!this.editUser.appRoleAssignments.length){this.editUser.appRoleAssignments.push({appRoleId:e.id});return}this.editUser.appRoleAssignments[0].appRoleId=e.id},onUpdatePassword(e){this.editUser.passwordProfile={password:e}},onUpdateLogin({value:e}){this.editUser.accountEnabled=e}}});const Sn={id:"user-edit-panel",class:"oc-mt-xl"},wn={id:"user-edit-form",class:"oc-background-highlight oc-p-m",autocomplete:"off"},$n={class:"oc-mb-s"},kn=d("div",{class:"oc-text-input-message"},null,-1),An={class:"oc-mb-s"},Un=d("div",{class:"oc-text-input-message"},null,-1);function Nn(e,t,o,c,i,u){var _,k,y;const r=g("UserInfoBox"),n=g("oc-text-input"),a=g("oc-select"),h=g("quota-select"),p=g("group-select"),v=g("compare-save-dialog");return m(),$("div",Sn,[f(r,{user:e.user},null,8,["user"]),l(),d("form",wn,[d("div",null,[f(n,{id:"userName-input",modelValue:e.editUser.onPremisesSamAccountName,"onUpdate:modelValue":[t[0]||(t[0]=N=>e.editUser.onPremisesSamAccountName=N),e.validateUserName],class:"oc-mb-s",label:e.$gettext("User name"),"error-message":e.formData.userName.errorMessage,"fix-message-line":!0,"read-only":e.isInputFieldReadOnly("user.onPremisesSamAccountName")},null,8,["modelValue","label","error-message","read-only","onUpdate:modelValue"]),l(),f(n,{id:"displayName-input",modelValue:e.editUser.displayName,"onUpdate:modelValue":[t[1]||(t[1]=N=>e.editUser.displayName=N),e.validateDisplayName],class:"oc-mb-s",label:e.$gettext("First and last name"),"error-message":e.formData.displayName.errorMessage,"fix-message-line":!0,"read-only":e.isInputFieldReadOnly("user.displayName")},null,8,["modelValue","label","error-message","read-only","onUpdate:modelValue"]),l(),f(n,{id:"email-input",modelValue:e.editUser.mail,"onUpdate:modelValue":t[2]||(t[2]=N=>e.editUser.mail=N),class:"oc-mb-s",label:e.$gettext("Email"),"error-message":e.formData.email.errorMessage,type:"email","fix-message-line":!0,"read-only":e.isInputFieldReadOnly("user.mail"),onChange:e.validateEmail},null,8,["modelValue","label","error-message","read-only","onChange"]),l(),f(n,{id:"password-input","model-value":(_=e.editUser.passwordProfile)==null?void 0:_.password,class:"oc-mb-s",label:e.$gettext("Password"),type:"password","fix-message-line":!0,placeholder:"●●●●●●●●","read-only":e.isInputFieldReadOnly("user.passwordProfile"),"onUpdate:modelValue":e.onUpdatePassword},null,8,["model-value","label","read-only","onUpdate:modelValue"]),l(),d("div",$n,[f(a,{id:"role-input","model-value":e.selectedRoleValue,label:e.$gettext("Role"),"option-label":"displayName",options:e.translatedRoleOptions,clearable:!1,"read-only":e.isInputFieldReadOnly("user.appRoleAssignments"),"onUpdate:modelValue":e.onUpdateRole},null,8,["model-value","label","options","read-only","onUpdate:modelValue"]),l(),kn]),l(),d("div",An,[f(a,{id:"login-input",disabled:e.isLoginInputDisabled,"model-value":e.selectedLoginValue,label:e.$gettext("Login"),options:e.loginOptions,clearable:!1,"read-only":e.isInputFieldReadOnly("user.accountEnabled"),"onUpdate:modelValue":e.onUpdateLogin},null,8,["disabled","model-value","label","options","read-only","onUpdate:modelValue"]),l(),Un]),l(),(m(),D(h,{id:"quota-select-form",key:"quota-select-"+e.user.id,disabled:e.isQuotaInputDisabled,class:"oc-mb-s",label:e.$gettext("Personal quota"),"total-quota":((y=(k=e.editUser.drive)==null?void 0:k.quota)==null?void 0:y.total)||0,"max-quota":e.maxQuota,"fix-message-line":!0,"description-message":e.isQuotaInputDisabled&&!e.isInputFieldReadOnly("drive.quota")?e.$gettext("To set an individual quota, the user needs to have logged in once."):"","read-only":e.isInputFieldReadOnly("drive.quota"),onSelectedOptionChange:e.changeSelectedQuotaOption},null,8,["disabled","label","total-quota","max-quota","description-message","read-only","onSelectedOptionChange"])),l(),f(p,{class:"oc-mb-s","selected-groups":e.editUser.memberOf,"group-options":e.groupOptions,onSelectedOptionChange:e.changeSelectedGroupOption},null,8,["selected-groups","group-options","onSelectedOptionChange"])]),l(),f(v,{class:"edit-compare-save-dialog oc-mb-l","original-object":e.compareSaveDialogOriginalObject,"compare-object":e.editUser,"confirm-button-disabled":e.invalidFormData,onRevert:e.revertChanges,onConfirm:t[3]||(t[3]=N=>e.$emit("confirm",{user:e.user,editUser:e.editUser}))},null,8,["original-object","compare-object","confirm-button-disabled","onRevert"])])])}const _n=O(Cn,[["render",Nn]]),Gn=j({name:"ItemFilter",props:{filterLabel:{type:String,required:!0},filterName:{type:String,required:!0},optionFilterLabel:{type:String,required:!1,default:""},showOptionFilter:{type:Boolean,required:!1,default:!1},items:{type:Array,required:!0},allowMultiple:{type:Boolean,required:!1,default:!1},displayNameAttribute:{type:String,required:!1,default:"name"},filterableAttributes:{type:Array,required:!1,default:()=>[]}},emits:["selectionChange"],setup:function(e,{emit:t}){const o=Fe(),c=gt(),i=A(),u=A([]),r=A(e.items),n=A(null),a=A(null),h=`q_${e.filterName}`,p=ge(h),v=()=>o.push({query:{...At(s(c).query,[h]),...!!s(u).length&&{[h]:s(u).reduce((C,M)=>(C+=`${M.id}+`,C),"").slice(0,-1)}}}),_=C=>!!s(u).find(M=>M.id===C.id),k=C=>e.allowMultiple||!s(u).length||_(C),y=async C=>{k(C)&&(_(C)?u.value=s(u).filter(M=>M.id!==C.id):u.value.push(C),await v(),t("selectionChange",s(u)))},N=C=>{const M=s(u).map(G=>G.id);return C.sort((G,T)=>M.includes(T.id)-M.includes(G.id)||G[e.displayNameAttribute].localeCompare(T[e.displayNameAttribute]))},U=A(),L=(C,M)=>(M||"").trim()?new Ne(C,{...ke,keys:e.filterableAttributes}).search(M).map(T=>T.item):C,R=()=>{u.value=[],t("selectionChange",s(u)),v()},I=C=>{r.value=N(C)},F=async()=>{I(e.items),await kt(),s(i).focus()};return ce(U,()=>{I(L(e.items,s(U))),s(a)&&(n.value=new Ue(s(a)),s(n).unmark(),s(n).mark(s(U),{element:"span",className:"highlight-mark"}))}),_e(()=>{const C=he(s(p));if(C){const M=C.split("+");u.value=e.items.filter(G=>M.includes(G.id))}}),{clearFilter:R,displayedItems:r,filterInputRef:i,filterTerm:U,isItemSelected:_,isSelectionAllowed:k,itemFilterListRef:a,queryParam:h,selectedItems:u,setDisplayedItems:I,showDrop:F,toggleItemSelection:y}}});const Mn={ref:"itemFilterListRef"};function En(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("oc-checkbox"),a=g("oc-list"),h=g("oc-filter-chip");return m(),$("div",{class:mt(["item-filter oc-flex",`item-filter-${e.filterName}`])},[f(h,{"filter-label":e.filterLabel,"selected-item-names":e.selectedItems.map(p=>p[e.displayNameAttribute]),onClearFilter:e.clearFilter,onShowDrop:e.showDrop},{default:S(()=>[e.showOptionFilter&&e.filterableAttributes.length?(m(),D(r,{key:0,ref:"filterInputRef",modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=p=>e.filterTerm=p),class:"item-filter-input oc-mb-m oc-mt-s",autocomplete:"off",label:e.optionFilterLabel===""?e.$gettext("Filter list"):e.optionFilterLabel},null,8,["modelValue","label"])):q("",!0),l(),d("div",Mn,[f(a,{class:"item-filter-list"},{default:S(()=>[(m(!0),$(Ae,null,Be(e.displayedItems,(p,v)=>(m(),$("li",{key:v,class:"oc-my-xs"},[(m(),D(ss(e.isSelectionAllowed(p)?"oc-button":"div"),{class:"item-filter-list-item oc-flex oc-flex-left oc-flex-middle oc-width-1-1 oc-p-xs","justify-content":"left",appearance:"raw","data-test-value":p[e.displayNameAttribute],onClick:_=>e.toggleItemSelection(p)},{default:S(()=>[d("div",null,[f(n,{size:"large",class:"item-filter-checkbox",label:e.$gettext("Toggle selection"),"model-value":e.isItemSelected(p),disabled:!e.isSelectionAllowed(p),"hide-label":"","onUpdate:modelValue":_=>e.toggleItemSelection(p),onClick:t[1]||(t[1]=ve(()=>{},["stop"]))},null,8,["label","model-value","disabled","onUpdate:modelValue"])]),l(),d("div",null,[ye(e.$slots,"image",{item:p})]),l(),d("div",null,[ye(e.$slots,"item",{item:p})])]),_:2},1032,["data-test-value","onClick"]))]))),128))]),_:3})],512)]),_:3},8,["filter-label","selected-item-names","onClearFilter","onShowDrop"])],2)}const Dn=O(Gn,[["render",En]]),Pn=j({name:"GroupsModal",components:{GroupSelect:Ft},props:{title:{type:String,required:!0},groups:{type:Array,required:!0},users:{type:Array,required:!0}},emits:["confirm","cancel"],setup(){const e=A([]);return{selectedOptions:e,changeSelectedGroupOption:o=>{e.value=o}}}});function Fn(e,t,o,c,i,u){const r=g("group-select"),n=g("oc-modal");return m(),D(n,{title:e.title,"button-cancel-text":e.$gettext("Cancel"),"button-confirm-text":e.$gettext("Confirm"),"button-confirm-disabled":!e.selectedOptions.length,onCancel:t[0]||(t[0]=a=>e.$emit("cancel")),onConfirm:t[1]||(t[1]=a=>e.$emit("confirm",{users:e.users,groups:e.selectedOptions}))},{content:S(()=>[f(r,{"selected-groups":e.selectedOptions,"group-options":e.groups,onSelectedOptionChange:e.changeSelectedGroupOption},null,8,["selected-groups","group-options","onSelectedOptionChange"])]),_:1},8,["title","button-cancel-text","button-confirm-text","button-confirm-disabled"])}const zn=O(Pn,[["render",Fn]]),xn=j({name:"LoginModal",props:{users:{type:Array,required:!0}},emits:["confirm","cancel"],setup(e){const t=se(),{$gettext:o,$ngettext:c}=K(),i=A(),u=A([{label:o("Allowed"),value:!0},{label:o("Forbidden"),value:!1}]),r=h=>{i.value=h},n=b(()=>e.users.some(h=>h.id===t.getters.user.uuid)),a=b(()=>c('Edit login for "%{user}"',"Edit login for %{userCount} users",e.users.length,{user:e.users[0].displayName,userCount:e.users.length.toString()}));return _e(()=>{e.users.every(h=>h.accountEnabled!==!1)?i.value=s(u).find(({value:h})=>!!h):e.users.every(h=>h.accountEnabled===!1)&&(i.value=s(u).find(({value:h})=>!h))}),{selectedOption:i,options:u,changeSelectedOption:r,currentUserSelected:n,modalTitle:a}}});function qn(e,t,o,c,i,u){const r=g("oc-select"),n=g("oc-modal");return m(),D(n,{title:e.modalTitle,"button-cancel-text":e.$gettext("Cancel"),"button-confirm-text":e.$gettext("Confirm"),"button-confirm-disabled":!e.selectedOption,onCancel:t[0]||(t[0]=a=>e.$emit("cancel")),onConfirm:t[1]||(t[1]=a=>e.$emit("confirm",{users:e.users,value:e.selectedOption.value}))},{content:S(()=>[f(r,{"model-value":e.selectedOption,label:e.$gettext("Login"),options:e.options,placeholder:e.$gettext("Select..."),"warning-message":e.currentUserSelected?e.$gettext("Your own login status will remain unchanged."):"","onUpdate:modelValue":e.changeSelectedOption},null,8,["model-value","label","options","placeholder","warning-message","onUpdate:modelValue"])]),_:1},8,["title","button-cancel-text","button-confirm-text","button-confirm-disabled"])}const Rn=O(xn,[["render",qn]]),In=j({name:"UsersView",components:{AppLoadingSpinner:vt,AppTemplate:Qe,UsersList:_o,CreateUserModal:Do,ContextActions:zo,ItemFilter:Dn,QuotaModal:Pe,GroupsModal:zn,LoginModal:Rn},setup(){const{$gettext:e,$ngettext:t}=K(),o=Fe(),c=gt(),i=se(),u=_t({store:i}),r=de(),n=hs(),a=ms(),h=ge("page","1"),p=b(()=>parseInt(he(s(h)))),v=ge("admin-settings-items-per-page","1"),_=b(()=>parseInt(he(s(v)))),{actions:k}=Et({store:i}),{actions:y}=bo(),{actions:N}=go(),{actions:U}=fo(),{actions:L,modalOpen:R,closeModal:I}=Dt(),F=A([]),C=A([]),M=A([]),G=A([]),T=A([]),oe=A(),ne=b(()=>s(G).map(z=>z.id)),ae=A(!1),Z=A(!1),pe=A(!1),X=A(!1),fe=A(!1),Se=A();let ze,xe,qe,Re,He;const E=b(()=>t('Add user "%{user}" to groups',"Add %{userCount} users to groups ",s(G).length,{user:s(G)[0].displayName,userCount:s(G).length.toString()})),B=b(()=>t('Remove user "%{user}" from groups',"Remove %{userCount} users from groups ",s(G).length,{user:s(G)[0].displayName,userCount:s(G).length.toString()})),Y={groups:{param:ge("q_groups"),query:"memberOf/any(m:m/id eq '%s')",ids:A([])},roles:{param:ge("q_roles"),query:"appRoleAssignments/any(m:m/appRoleId eq '%s')",ids:A([])}},J=Ce(function*(z){const P=yield r.graphAuthenticated.groups.listGroups("displayName");C.value=P.data.value}),me=Ce(function*(z){const P=yield r.graphAuthenticated.applications.listApplications();M.value=P.data.value[0].appRoles,oe.value=P.data.value[0].id}),re=Ce(function*(z){const P=Object.values(Y).reduce((V,H)=>{const W=s(H.ids).map(te=>is(H.query,te)).join(" or ");return W&&V.push(`(${W})`),V},[]).filter(Boolean).join(" and "),Q=yield r.graphAuthenticated.users.listUsers("displayName",P);F.value=Q.data.value||[]}),ie=Ce(function*(z){yield re.perform(),yield J.perform(),yield me.perform()}),Me=Ce(function*(z,P,Q=!1){if(!Q&&s(T).includes(P.id))return;const{data:V}=yield r.graphAuthenticated.users.getUser(P.id);s(T).push(P.id),Object.assign(P,V)}),yt=()=>o.push({...s(c),query:{...s(c).query,page:"1"}}),xt=z=>(Y.groups.ids.value=z.map(P=>P.id),re.perform(),G.value=[],T.value=[],yt()),qt=z=>(Y.roles.ids.value=z.map(P=>P.id),re.perform(),G.value=[],T.value=[],yt()),Ie=A([]);ce(ne,async()=>{ae.value=!0;const z=s(G).map(V=>Me.perform(V)),Q=(await Promise.allSettled(z)).filter(V=>V.status==="rejected");Q.length>0&&console.debug("Failed to load additional user data",Q),Ie.value.splice(0,s(Ie).length),s(G).forEach(V=>{const H=$t(V.drive);if(H===void 0||H.id===void 0)return;const W={id:H.id,name:V.displayName,spaceQuota:H.quota};Ie.value.push(W)}),ae.value=!1});const Rt=b(()=>[...s(k),...s(L),...s(N),...s(y),...s(U)].filter(z=>z.isEnabled({resources:s(G)}))),It=({spaceId:z,quota:P})=>{const Q=s(F).findIndex(H=>{var W;return((W=H.drive)==null?void 0:W.id)===z});Q&&(s(F)[Q].drive.quota=P);const V=s(G).findIndex(H=>{var W;return((W=H.drive)==null?void 0:W.id)===z});V&&(s(G)[V].drive.quota=P)},We=b(()=>s(G).filter(({drive:z})=>!Nt(z))),Tt=b(()=>We.value.length?e("Quota will only be applied to users who logged in at least once."):""),jt=b(()=>We.value.length?{title:e("Unaffected users"),text:[...We.value].sort((z,P)=>z.displayName.localeCompare(P.displayName)).map(z=>z.displayName).join(", ")}:{});_e(async()=>{var z;for(const P in Y)Y[P].ids.value=((z=he(s(Y[P].param)))==null?void 0:z.split("+"))||[];await ie.perform(),ze=x.subscribe("app.admin-settings.list.load",async()=>{await ie.perform(),G.value=[];const P=Math.ceil(s(F).length/s(_));s(p)>1&&s(p)>P&&(h.value=P.toString())}),xe=x.subscribe("app.admin-settings.users.actions.add-to-groups",()=>{pe.value=!0}),qe=x.subscribe("app.admin-settings.users.actions.remove-from-groups",()=>{X.value=!0}),Re=x.subscribe("app.admin-settings.users.actions.edit-login",()=>{fe.value=!0}),He=x.subscribe("app.admin-settings.users.user.quota.updated",It)}),Le(()=>{x.unsubscribe("app.admin-settings.list.load",ze),x.unsubscribe("app.admin-settings.users.actions.add-to-groups",xe),x.unsubscribe("app.admin-settings.users.actions.remove-from-groups",qe),x.unsubscribe("app.admin-settings.users.actions.edit-login",Re),x.unsubscribe("app.admin-settings.users.user.quota.updated",He)});const Ke=z=>{for(const P of z){const Q=s(F).findIndex(H=>H.id===P.id);s(F)[Q]=P;const V=s(G).findIndex(H=>H.id===P.id);V>=0&&(s(G)[V]=P)}},Ot=async({users:z,groups:P})=>{try{const Q=r.graphAuthenticated,V=[],H=[];P.reduce((te,Ee)=>{for(const be of z)be.memberOf.find(Ze=>Ze.id===Ee.id)||(te.push(Q.groups.addMember(Ee.id,be.id,et.serverUrl)),V.includes(be.id)||V.push(be.id));return te},H);const W=await n.addTask(async()=>(await Promise.all(H),Promise.all(V.map(te=>Q.users.getUser(te)))));Ke(W.map(te=>te.data)),await i.dispatch("showMessage",{title:e("Users were added to groups successfully")}),pe.value=!1}catch(Q){console.error(Q),await i.dispatch("showMessage",{title:e("Failed add users to group"),status:"danger"})}},Lt=async({users:z,groups:P})=>{try{const Q=r.graphAuthenticated,V=[],H=[];P.reduce((te,Ee)=>{for(const be of z)be.memberOf.find(Ze=>Ze.id===Ee.id)&&(te.push(Q.groups.deleteMember(Ee.id,be.id)),V.includes(be.id)||V.push(be.id));return te},H);const W=await n.addTask(async()=>(await Promise.all(H),Promise.all(V.map(te=>Q.users.getUser(te)))));Ke(W.map(te=>te.data)),await i.dispatch("showMessage",{title:e("Users were removed from groups successfully")}),X.value=!1}catch(Q){console.error(Q),await i.dispatch("showMessage",{title:e("Failed remove users from group"),status:"danger"})}},Vt=async({users:z,value:P})=>{try{z=z.filter(({id:W})=>i.getters.user.uuid!==W);const Q=r.graphAuthenticated,V=z.map(W=>Q.users.editUser(W.id,{accountEnabled:P})),H=await n.addTask(async()=>(await Promise.all(V),Promise.all(z.map(W=>Q.users.getUser(W.id)))));Ke(H.map(W=>W.data)),await i.dispatch("showMessage",{title:e("Login was edited successfully")}),fe.value=!1}catch(Q){return console.error(Q),i.dispatch("showMessage",{title:e("Failed to edit login"),status:"danger"})}},Bt=b(()=>s(C).filter(z=>{var P;return!((P=z.groupTypes)!=null&&P.includes("ReadOnly"))}));return{...lt(),maxQuota:Ge(),template:Se,selectedUsers:G,sideBarLoading:ae,users:F,roles:M,groups:C,applicationId:oe,loadResourcesTask:ie,loadAdditionalUserDataTask:Me,clientService:r,accessToken:u,createUserModalOpen:Z,addToGroupsModalTitle:E,addToGroupsModalIsOpen:pe,removeFromGroupsModalTitle:B,removeFromGroupsModalIsOpen:X,editLoginModalIsOpen:fe,editLoginForUsers:Vt,batchActions:Rt,filterGroups:xt,filterRoles:qt,quotaModalIsOpen:R,quotaModalWarningMessage:Tt,quotaWarningMessageContextualHelperData:jt,closeQuotaModal:I,selectedPersonalDrives:Ie,addUsersToGroups:Ot,removeUsersFromGroups:Lt,writableGroups:Bt,createUsersDisabled:a}},computed:{...os({currentUser:"user"}),selectedUsersText(){return this.$gettext("%{count} users selected",{count:this.selectedUsers.length.toString()})},breadcrumbs(){return[{text:this.$gettext("Administration Settings"),to:{path:"/admin-settings"}},{text:this.$gettext("Users"),onClick:()=>x.publish("app.admin-settings.list.load")}]},sideBarAvailablePanels(){return[{app:"DetailsPanel",icon:"user",title:this.$gettext("User details"),component:mn,default:!0,enabled:!0,componentAttrs:{user:this.selectedUsers.length===1?this.selectedUsers[0]:null,users:this.selectedUsers,roles:this.roles}},{app:"EditPanel",icon:"pencil",title:this.$gettext("Edit user"),component:_n,default:!1,enabled:this.selectedUsers.length===1,componentAttrs:{user:this.selectedUsers.length===1?this.selectedUsers[0]:null,roles:this.roles,groups:this.groups,onConfirm:this.editUser}}].filter(e=>e.enabled)}},methods:{...Ut(["showMessage"]),...ns("runtime/spaces",["UPDATE_SPACE_FIELD"]),selectUsers(e){this.selectedUsers=e},toggleSelectUser(e){if(!this.selectedUsers.find(o=>o.id===e.id))return this.selectedUsers.push(this.users.find(o=>o.id===e.id));this.selectedUsers=this.selectedUsers.filter(o=>o.id!==e.id)},unselectAllUsers(){this.selectedUsers=[]},toggleCreateUserModal(){this.createUserModalOpen=!this.createUserModalOpen},async createUser(e){var t;try{const o=this.clientService.graphAuthenticated,{id:c}=(t=await o.users.createUser(e))==null?void 0:t.data,{data:i}=await o.users.getUser(c);this.users.push(i),this.toggleCreateUserModal(),this.showMessage({title:this.$gettext("User was created successfully")})}catch(o){console.error(o),this.showMessage({title:this.$gettext("Failed to create user"),status:"danger"})}},async editUser({user:e,editUser:t}){var o,c,i,u,r,n;try{const a=this.clientService.graphAuthenticated,h=y=>At(y,["drive","appRoleAssignments","memberOf"]),p=as(h(e),h(t));rs(p)||await a.users.editUser(t.id,p),Je((c=(o=e.drive)==null?void 0:o.quota)==null?void 0:c.total,(u=(i=t.drive)==null?void 0:i.quota)==null?void 0:u.total)||await this.updateUserDrive(t),Je(e.memberOf,t.memberOf)||await this.updateUserGroupAssignments(e,t),Je((r=e.appRoleAssignments[0])==null?void 0:r.appRoleId,(n=t.appRoleAssignments[0])==null?void 0:n.appRoleId)||await this.updateUserAppRoleAssignments(e,t);const{data:v}=await a.users.getUser(e.id),_=this.users.findIndex(y=>y.id===v.id);this.users[_]=v;const k=this.selectedUsers.findIndex(y=>y.id===v.id);return k>=0&&(this.selectedUsers[k]=v),x.publish("sidebar.entity.saved"),v}catch(a){console.error(a),this.showMessage({title:this.$gettext("Failed to edit user"),status:"danger"})}},async updateUserDrive(e){const o=await this.clientService.graphAuthenticated.drives.updateDrive(e.drive.id,{quota:{total:e.drive.quota.total}},{});e.id===this.currentUser.uuid&&this.UPDATE_SPACE_FIELD({id:e.drive.id,field:"spaceQuota",value:o.data.quota})},updateUserAppRoleAssignments(e,t){return this.clientService.graphAuthenticated.users.createUserAppRoleAssignment(e.id,{appRoleId:t.appRoleAssignments[0].appRoleId,resourceId:this.applicationId,principalId:t.id})},updateUserGroupAssignments(e,t){const o=this.clientService.graphAuthenticated,c=t.memberOf.filter(r=>!e.memberOf.some(n=>n.id===r.id)),i=e.memberOf.filter(r=>!t.memberOf.some(n=>n.id===r.id)),u=[];for(const r of c)u.push(o.groups.addMember(r.id,e.id,et.serverUrl));for(const r of i)u.push(o.groups.deleteMember(r.id,e.id));return Promise.all(u)}}}),Tn={class:"admin-settings-app-bar-actions"},jn={key:0,class:"oc-flex oc-flex-middle"},On=["textContent"],Ln={key:1},Vn=["textContent"],Bn={key:1},Qn={class:"oc-flex oc-flex-middle oc-ml-m oc-mb-m oc-mt-m"},Hn={class:"oc-mr-m oc-flex oc-flex-middle"},Wn=["textContent"],Kn=["textContent"],Zn=["textContent"];function Yn(e,t,o,c,i,u){const r=g("oc-icon"),n=g("oc-button"),a=g("app-loading-spinner"),h=g("context-actions"),p=g("avatar-image"),v=g("item-filter"),_=g("UsersList"),k=g("app-template"),y=g("groups-modal"),N=g("login-modal"),U=g("create-user-modal"),L=g("quota-modal"),R=ue("oc-tooltip");return m(),$("div",null,[f(k,{ref:"template",breadcrumbs:e.breadcrumbs,"side-bar-active-panel":e.sideBarActivePanel,"side-bar-available-panels":e.sideBarAvailablePanels,"side-bar-open":e.sideBarOpen,"side-bar-loading":e.sideBarLoading,"show-batch-actions":!!e.selectedUsers.length,"batch-actions":e.batchActions,"batch-action-items":e.selectedUsers},{topbarActions:S(()=>[d("div",Tn,[e.selectedUsers.length?(m(),$("div",jn,[d("span",{textContent:w(e.selectedUsersText)},null,8,On),l(),ee((m(),D(n,{id:"users-clear-selection","aria-label":e.$gettext("Clear selection"),class:"oc-ml-m oc-py-s",appearance:"outline",onClick:e.unselectAllUsers},{default:S(()=>[f(r,{name:"close"})]),_:1},8,["aria-label","onClick"])),[[R,e.$gettext("Clear selection")]])])):(m(),$("div",Ln,[e.createUsersDisabled?q("",!0):(m(),D(n,{key:0,variation:"primary",appearance:"filled","data-test-id":"create-user-btn",onClick:e.toggleCreateUserModal},{default:S(()=>[f(r,{name:"add"}),l(),d("span",{textContent:w(e.$gettext("New user"))},null,8,Vn)]),_:1},8,["onClick"]))]))])]),mainContent:S(()=>[e.loadResourcesTask.isRunning||!e.loadResourcesTask.last?(m(),D(a,{key:0})):(m(),$("div",Bn,[f(_,{users:e.users,roles:e.roles,class:mt({"users-table-squashed":e.sideBarOpen}),"selected-users":e.selectedUsers,onToggleSelectUser:e.toggleSelectUser,onSelectUsers:e.selectUsers,onUnSelectAllUsers:e.unselectAllUsers},{contextMenu:S(()=>[f(h,{items:e.selectedUsers},null,8,["items"])]),filter:S(()=>[d("div",Qn,[d("div",Hn,[f(r,{name:"filter-2",class:"oc-mr-xs"}),l(),d("span",{textContent:w(e.$gettext("Filter:"))},null,8,Wn)]),l(),f(v,{"allow-multiple":!0,"filter-label":e.$gettext("Groups"),"filterable-attributes":["displayName"],items:e.groups,"option-filter-label":e.$gettext("Filter groups"),"show-option-filter":!0,class:"oc-mr-s","display-name-attribute":"displayName","filter-name":"groups",onSelectionChange:e.filterGroups},{image:S(({item:I})=>[f(p,{width:32,userid:I.id,"user-name":I.displayName},null,8,["userid","user-name"])]),item:S(({item:I})=>[d("div",{textContent:w(I.displayName)},null,8,Kn)]),_:1},8,["filter-label","items","option-filter-label","onSelectionChange"]),l(),f(v,{"allow-multiple":!0,"filter-label":e.$gettext("Roles"),"filterable-attributes":["displayName"],items:e.roles,"option-filter-label":e.$gettext("Filter roles"),"show-option-filter":!0,"display-name-attribute":"displayName","filter-name":"roles",onSelectionChange:e.filterRoles},{image:S(({item:I})=>[f(p,{width:32,userid:I.id,"user-name":e.$gettext(I.displayName)},null,8,["userid","user-name"])]),item:S(({item:I})=>[d("div",{textContent:w(e.$gettext(I.displayName))},null,8,Zn)]),_:1},8,["filter-label","items","option-filter-label","onSelectionChange"])])]),_:1},8,["users","roles","class","selected-users","onToggleSelectUser","onSelectUsers","onUnSelectAllUsers"])]))]),_:1},8,["breadcrumbs","side-bar-active-panel","side-bar-available-panels","side-bar-open","side-bar-loading","show-batch-actions","batch-actions","batch-action-items"]),l(),e.addToGroupsModalIsOpen?(m(),D(y,{key:0,title:e.addToGroupsModalTitle,groups:e.writableGroups,users:e.selectedUsers,onCancel:t[0]||(t[0]=()=>e.addToGroupsModalIsOpen=!1),onConfirm:e.addUsersToGroups},null,8,["title","groups","users","onConfirm"])):q("",!0),l(),e.removeFromGroupsModalIsOpen?(m(),D(y,{key:1,title:e.removeFromGroupsModalTitle,groups:e.writableGroups,users:e.selectedUsers,onCancel:t[1]||(t[1]=()=>e.removeFromGroupsModalIsOpen=!1),onConfirm:e.removeUsersFromGroups},null,8,["title","groups","users","onConfirm"])):q("",!0),l(),e.editLoginModalIsOpen?(m(),D(N,{key:2,users:e.selectedUsers,onCancel:t[2]||(t[2]=()=>e.editLoginModalIsOpen=!1),onConfirm:e.editLoginForUsers},null,8,["users","onConfirm"])):q("",!0),l(),e.createUserModalOpen?(m(),D(U,{key:3,onCancel:e.toggleCreateUserModal,onConfirm:e.createUser},null,8,["onCancel","onConfirm"])):q("",!0),l(),e.quotaModalIsOpen?(m(),D(L,{key:4,cancel:e.closeQuotaModal,spaces:e.selectedPersonalDrives,"max-quota":e.maxQuota,"warning-message":e.quotaModalWarningMessage,"warning-message-contextual-helper-data":e.quotaWarningMessageContextualHelperData,"resource-type":"user"},null,8,["cancel","spaces","max-quota","warning-message","warning-message-contextual-helper-data"])):q("",!0)])}const Jn=O(In,[["render",Yn]]),Xn=j({name:"GroupsList",components:{ContextMenuQuickAction:at,Pagination:it},props:{groups:{type:Array,required:!0},selectedGroups:{type:Array,required:!0}},emits:["selectGroups","unSelectAllGroups","toggleSelectGroup"],setup(e,{emit:t}){const{$gettext:o}=K(),{y:c}=nt("#admin-settings-app-bar"),i=A(void 0),u=A("displayName"),r=A($e.Asc),n=A(""),a=F=>e.selectedGroups.some(C=>C.id===F.id),h=F=>{t("unSelectAllGroups"),t("toggleSelectGroup",F)},p=F=>{a(F)||h(F),x.publish(le.open)},v=F=>{const C=F[0];a(C)||h(C)},_=(F,C)=>{const{dropdown:M,event:G}=F;(M==null?void 0:M.tippy)!==void 0&&(a(C)||h(C),we(M.tippy,G,s(i)))},k=(F,C,M)=>{C.preventDefault();const G=F.$el.getElementsByClassName("groups-table-btn-action-dropdown")[0];G!==void 0&&(a(M)||h(M),we(G._tippy,C,s(i)))},y=F=>{a(F)||h(F),x.publish(le.openWithPanel,"EditPanel")},N=b(()=>o("This group is read-only and can't be edited")),U=(F,C)=>(C||"").trim()?new Ne(F,{...ke,keys:["displayName"]}).search(C).map(G=>G.item):F,L=(F,C,M)=>[...F].sort((G,T)=>{var oe,ne;return G=((oe=G[C])==null?void 0:oe.toString())||"",T=((ne=T[C])==null?void 0:ne.toString())||"",M?T.localeCompare(G):G.localeCompare(T)}),R=b(()=>L(U(e.groups,s(n)),s(u),s(r)===$e.Desc)),I=ft({items:R});return ce(I.currentPage,()=>{t("unSelectAllGroups")}),{showDetails:p,rowClicked:v,isGroupSelected:a,showContextMenuOnBtnClick:_,showContextMenuOnRightClick:k,fileListHeaderY:c,contextMenuButtonRef:i,showEditPanel:y,readOnlyLabel:N,filterTerm:n,sortBy:u,sortDir:r,items:R,...I,filter:U,orderBy:L}},data(){return{markInstance:null}},computed:{fields(){return[{name:"select",title:"",type:"slot",width:"shrink",headerType:"slot"},{name:"avatar",title:"",type:"slot",width:"shrink"},{name:"displayName",title:this.$gettext("Group name"),type:"slot",sortable:!0},{name:"members",title:this.$gettext("Members"),type:"slot",sortable:!0},{name:"actions",title:this.$gettext("Actions"),sortable:!1,type:"slot",alignH:"right"}]},allGroupsSelected(){return this.paginatedItems.length===this.selectedGroups.length},footerTextTotal(){return this.$gettext("%{groupCount} groups in total",{groupCount:this.groups.length.toString()})},footerTextFilter(){return this.$gettext("%{groupCount} matching groups",{groupCount:this.items.length.toString()})},highlighted(){return this.selectedGroups.map(e=>e.id)}},watch:{async filterTerm(){this.markInstance&&(await this.$router.push({...this.$route,query:{...this.$route.query,page:"1"}}),this.markInstance.unmark(),this.markInstance.mark(this.filterTerm,{element:"span",className:"highlight-mark",exclude:["th *","tfoot *"]}))}},mounted(){this.$nextTick(()=>{this.markInstance=new Ue(this.$refs.tableRef.$el)})},methods:{handleSort(e){this.sortBy=e.sortBy,this.sortDir=e.sortDir},getSelectGroupLabel(e){return this.$gettext("Select %{ group }",{group:e.displayName},!0)}}});const ea={class:"oc-flex oc-flex-middle"},ta={class:"oc-text-nowrap oc-text-center oc-width-1-1 oc-my-s"},sa={class:"oc-text-muted"},oa={key:0,class:"oc-text-muted"};function na(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("oc-checkbox"),a=g("avatar-image"),h=g("oc-icon"),p=g("oc-button"),v=g("context-menu-quick-action"),_=g("pagination"),k=g("oc-table"),y=ue("oc-tooltip");return m(),$("div",null,[f(r,{id:"groups-filter",modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=N=>e.filterTerm=N),class:"oc-ml-m oc-my-s",label:e.$gettext("Search"),autocomplete:"off"},null,8,["modelValue","label"]),l(),f(k,{ref:"tableRef","sort-by":e.sortBy,"sort-dir":e.sortDir,fields:e.fields,data:e.paginatedItems,highlighted:e.highlighted,sticky:!0,"header-position":e.fileListHeaderY,hover:!0,onSort:e.handleSort,onContextmenuClicked:e.showContextMenuOnRightClick,onHighlight:e.rowClicked},{selectHeader:S(()=>[f(n,{size:"large",class:"oc-ml-s",label:e.$gettext("Select all groups"),"model-value":e.allGroupsSelected,"hide-label":"","onUpdate:modelValue":t[1]||(t[1]=N=>e.allGroupsSelected?e.$emit("unSelectAllGroups"):e.$emit("selectGroups",e.paginatedItems))},null,8,["label","model-value"])]),select:S(N=>[f(n,{class:"oc-ml-s",size:"large","model-value":e.isGroupSelected(N.item),option:N.item,label:e.getSelectGroupLabel(N.item),"hide-label":"","onUpdate:modelValue":U=>e.$emit("toggleSelectGroup",N.item),onClick:t[2]||(t[2]=ve(()=>{},["stop"]))},null,8,["model-value","option","label","onUpdate:modelValue"])]),avatar:S(N=>[f(a,{width:32,userid:N.item.id,"user-name":N.item.displayName},null,8,["userid","user-name"])]),displayName:S(N=>{var U;return[d("div",ea,[l(w(N.item.displayName)+" ",1),(U=N.item.groupTypes)!=null&&U.includes("ReadOnly")?ee((m(),D(h,{key:0,name:"lock",size:"small","fill-type":"line",class:"oc-ml-s","accessible-label":e.readOnlyLabel},null,8,["accessible-label"])),[[y,e.readOnlyLabel]]):q("",!0)])]}),members:S(N=>[l(w(N.item.members.length),1)]),actions:S(({item:N})=>{var U;return[ee((m(),D(p,{appearance:"raw",class:"oc-mr-xs groups-table-btn-details oc-p-xs",onClick:L=>e.showDetails(N)},{default:S(()=>[f(h,{name:"information","fill-type":"line"})]),_:2},1032,["onClick"])),[[y,e.$gettext("Details")]]),l(),(U=N.groupTypes)!=null&&U.includes("ReadOnly")?q("",!0):ee((m(),D(p,{key:0,appearance:"raw",class:"oc-mr-xs quick-action-button oc-p-xs groups-table-btn-edit",onClick:L=>e.showEditPanel(N)},{default:S(()=>[f(h,{name:"pencil","fill-type":"line"})]),_:2},1032,["onClick"])),[[y,e.$gettext("Edit")]]),l(),f(v,{ref:"contextMenuButtonRef",item:N,class:"groups-table-btn-action-dropdown",onQuickActionClicked:L=>e.showContextMenuOnBtnClick(L,N)},{contextMenu:S(()=>[ye(e.$slots,"contextMenu",{group:N})]),_:2},1032,["item","onQuickActionClicked"])]}),footer:S(()=>[f(_,{pages:e.paginationPages,"current-page":e.currentPage},null,8,["pages","current-page"]),l(),d("div",ta,[d("p",sa,w(e.footerTextTotal),1),l(),e.filterTerm?(m(),$("p",oa,w(e.footerTextFilter),1)):q("",!0)])]),_:3},8,["sort-by","sort-dir","fields","data","highlighted","header-position","onSort","onContextmenuClicked","onHighlight"])])}const aa=O(Xn,[["render",na]]),ra=j({name:"CreateGroupModal",emits:["cancel","confirm"],setup(){const e=de(),t=A({displayName:""}),o=A({displayName:{errorMessage:"",valid:!1}});return{clientService:e,group:t,formData:o}},computed:{isFormInvalid(){return Object.keys(this.formData).map(e=>!!this.formData[e].valid).includes(!1)}},methods:{async validateDisplayName(){if(this.formData.displayName.valid=!1,this.group.displayName.trim()==="")return this.formData.displayName.errorMessage=this.$gettext("Group name cannot be empty"),!1;if(this.group.displayName.length>255)return this.formData.displayName.errorMessage=this.$gettext("Group name cannot exceed 255 characters"),!1;try{return await this.clientService.graphAuthenticated.groups.getGroup(this.group.displayName),this.formData.displayName.errorMessage=this.$gettext('Group "%{groupName}" already exists',{groupName:this.group.displayName}),!1}catch{}return this.formData.displayName.errorMessage="",this.formData.displayName.valid=!0,!0},onFormSubmit(){this.isFormInvalid||this.$emit("confirm",this.group)}}}),ia=d("input",{type:"submit",class:"oc-hidden"},null,-1);function la(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("oc-modal");return m(),D(n,{title:e.$gettext("Create group"),"button-cancel-text":e.$gettext("Cancel"),"button-confirm-text":e.$gettext("Create"),"button-confirm-disabled":e.isFormInvalid,"focus-trap-initial":"#create-group-input-display-name",onCancel:t[2]||(t[2]=a=>e.$emit("cancel")),onConfirm:t[3]||(t[3]=a=>e.$emit("confirm",e.group))},{content:S(()=>[d("form",{autocomplete:"off",onSubmit:t[1]||(t[1]=ve((...a)=>e.onFormSubmit&&e.onFormSubmit(...a),["prevent"]))},[f(r,{id:"create-group-input-display-name",modelValue:e.group.displayName,"onUpdate:modelValue":[t[0]||(t[0]=a=>e.group.displayName=a),e.validateDisplayName],class:"oc-mb-s",label:e.$gettext("Group name")+"*","error-message":e.formData.displayName.errorMessage,"fix-message-line":!0},null,8,["modelValue","label","error-message","onUpdate:modelValue"]),l(),ia],32)]),_:1},8,["title","button-cancel-text","button-confirm-text","button-confirm-disabled"])}const ua=O(ra,[["render",la]]),ca=j({name:"ContextActions",components:{ContextActionMenu:Oe},props:{actionOptions:{type:Object,required:!0}},setup(e){const t=se(),{actions:o}=bt(),{actions:c}=Mt({store:t}),{actions:i}=mo(),u=b(()=>[...s(i),...s(c)].filter(a=>a.isEnabled(e.actionOptions))),r=b(()=>[...s(o)].filter(a=>a.isEnabled(e.actionOptions)));return{menuSections:b(()=>{const a=[];return s(u).length&&a.push({name:"primaryActions",items:s(u)}),s(r).length&&a.push({name:"sidebar",items:s(r)}),a})}}});function da(e,t,o,c,i,u){const r=g("context-action-menu");return m(),$("div",null,[f(r,{"menu-sections":e.menuSections,"action-options":e.actionOptions},null,8,["menu-sections","action-options"])])}const pa=O(ca,[["render",da]]),ma=j({name:"GroupInfoBox",props:{group:{type:Object,required:!0}},setup(e){const t=b(()=>e.group),{$ngettext:o}=K();return{groupMembersText:b(()=>o("%{groupCount} member","%{groupCount} members",s(t).members.length,{groupCount:s(t).members.length.toString()})),_group:t}}});const ga={class:"oc-flex group-info oc-mb-l"},ha=["textContent"],fa=["textContent"];function ba(e,t,o,c,i,u){const r=g("avatar-image");return m(),$("div",ga,[f(r,{class:"oc-mb-m",width:80,userid:e._group.id,"user-name":e._group.displayName},null,8,["userid","user-name"]),l(),d("span",{class:"oc-text-muted group-info-display-name",textContent:w(e._group.displayName)},null,8,ha),l(),d("span",{class:"oc-text-muted",textContent:w(e.groupMembersText)},null,8,fa)])}const zt=O(ma,[["render",ba]]),ya=j({name:"DetailsPanel",components:{GroupInfoBox:zt},props:{groups:{type:Array,required:!0}},computed:{group(){return this.groups.length===1?this.groups[0]:null},noGroups(){return!this.groups.length},multipleGroups(){return this.groups.length>1},multipleGroupsSelectedText(){return this.$gettext("%{count} groups selected",{count:this.groups.length.toString()})}}});const va={class:"oc-mt-xl"},Ca={key:0,class:"oc-flex group-info"},Sa={key:1,class:"oc-flex group-info"},wa={key:2},$a=["aria-label"],ka=["textContent"],Aa=["textContent"];function Ua(e,t,o,c,i,u){const r=g("oc-icon"),n=g("GroupInfoBox"),a=ue("translate");return m(),$("div",va,[e.noGroups?(m(),$("div",Ca,[f(r,{name:"group-2",size:"xxlarge"}),l(),ee((m(),$("p",null,[l("Select a group to view details")])),[[a]])])):q("",!0),l(),e.multipleGroups?(m(),$("div",Sa,[f(r,{name:"group-2",size:"xxlarge"}),l(),d("p",null,w(e.multipleGroupsSelectedText),1)])):q("",!0),l(),e.group?(m(),$("div",wa,[f(n,{group:e.group},null,8,["group"]),l(),d("table",{class:"details-table","aria-label":e.$gettext("Overview of the information about the selected group")},[d("tr",null,[d("th",{scope:"col",class:"oc-pr-s",textContent:w(e.$gettext("Group name"))},null,8,ka),l(),d("td",{textContent:w(e.group.displayName)},null,8,Aa)])],8,$a)])):q("",!0)])}const Na=O(ya,[["render",Ua]]),_a=j({name:"EditPanel",components:{GroupInfoBox:zt,CompareSaveDialog:Ct},props:{group:{type:Object,required:!0,default:null}},emits:["confirm"],setup(){const e=de(),t=A({}),o=A({displayName:{errorMessage:"",valid:!0}});return{clientService:e,editGroup:t,formData:o}},computed:{invalidFormData(){return Object.values(this.formData).map(e=>!!e.valid).includes(!1)}},watch:{group:{handler:function(){this.editGroup={...this.group}},deep:!0,immediate:!0}},methods:{async validateDisplayName(){if(this.formData.displayName.valid=!1,this.editGroup.displayName.trim()==="")return this.formData.displayName.errorMessage=this.$gettext("Group name cannot be empty"),!1;if(this.editGroup.displayName.length>255)return this.formData.displayName.errorMessage=this.$gettext("Group name cannot exceed 255 characters"),!1;if(this.group.displayName!==this.editGroup.displayName)try{return await this.clientService.graphAuthenticated.groups.getGroup(this.editGroup.displayName),this.formData.displayName.errorMessage=this.$gettext('Group "%{groupName}" already exists',{groupName:this.editGroup.displayName}),!1}catch{}return this.formData.displayName.errorMessage="",this.formData.displayName.valid=!0,!0},revertChanges(){this.editGroup={...this.group},Object.values(this.formData).forEach(e=>{e.valid=!0,e.errorMessage=""})}}});const Ga={id:"group-edit-panel",class:"oc-mt-xl"},Ma={id:"group-edit-form",class:"oc-background-highlight oc-p-m",autocomplete:"off"};function Ea(e,t,o,c,i,u){const r=g("group-info-box"),n=g("oc-text-input"),a=g("compare-save-dialog");return m(),$("div",Ga,[f(r,{group:e.group},null,8,["group"]),l(),d("form",Ma,[f(n,{id:"displayName-input",modelValue:e.editGroup.displayName,"onUpdate:modelValue":[t[0]||(t[0]=h=>e.editGroup.displayName=h),e.validateDisplayName],class:"oc-mb-s",label:e.$gettext("Group name"),"error-message":e.formData.displayName.errorMessage,"fix-message-line":!0},null,8,["modelValue","label","error-message","onUpdate:modelValue"]),l(),f(a,{class:"edit-compare-save-dialog oc-mb-l","original-object":e.group,"compare-object":e.editGroup,"confirm-button-disabled":e.invalidFormData,onRevert:e.revertChanges,onConfirm:t[1]||(t[1]=h=>e.$emit("confirm",e.editGroup))},null,8,["original-object","compare-object","confirm-button-disabled","onRevert"])])])}const Da=O(_a,[["render",Ea]]),Pa=j({name:"MembersRoleSection",props:{groupMembers:{type:Array,required:!1}}}),Fa={class:"oc-list"};function za(e,t,o,c,i,u){const r=g("oc-avatar");return m(),$("ul",Fa,[(m(!0),$(Ae,null,Be(e.groupMembers,(n,a)=>(m(),$("li",{key:a,class:"oc-flex oc-flex-middle oc-mb-s","data-testid":"group-members-list"},[f(r,{"user-name":n.displayName,width:36,class:"oc-mr-s"},null,8,["user-name"]),l(),d("span",null,w(n.displayName),1)]))),128))])}const xa=O(Pa,[["render",za]]),qa=j({name:"GroupsMembersPanel",components:{MembersRoleSection:xa},setup(){const e=Ve("group"),t=A(""),o=A(null),c=A(null),i=(n,a)=>(a||"").trim()?new Ne(n,{...ke,keys:["displayName"]}).search(a).map(p=>p.item):n,u=b(()=>e?s(e).members.sort((n,a)=>n.displayName.localeCompare(a.displayName)):[]),r=b(()=>i(s(u),s(t)));return ce(t,()=>{if(s(c)){o.value=new Ue(s(c)),s(o).unmark();const n=s(t);s(o).mark(n,{element:"span",className:"highlight-mark"})}}),{filterTerm:t,membersListRef:c,members:u,filteredGroupMembers:r}}}),Ra={class:"oc-ml-s"},Ia={ref:"membersListRef","data-testid":"space-members"},Ta={key:0},ja=["textContent"],Oa={key:1,class:"oc-mb-m","data-testid":"group-members"},La=["textContent"];function Va(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("members-role-section");return m(),$("div",Ra,[f(r,{modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTerm=a),class:"oc-text-truncate oc-mr-s oc-mt-m",label:e.$gettext("Filter members")},null,8,["modelValue","label"]),l(),d("div",Ia,[e.filteredGroupMembers.length?q("",!0):(m(),$("div",Ta,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("No members found"))},null,8,ja)])),l(),e.filteredGroupMembers.length?(m(),$("div",Oa,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("Members"))},null,8,La),l(),f(n,{"group-members":e.filteredGroupMembers},null,8,["group-members"])])):q("",!0)],512)])}const Ba=O(qa,[["render",Va]]),Qa=j({components:{AppTemplate:Qe,GroupsList:aa,NoContentMessage:rt,CreateGroupModal:ua,ContextActions:pa},provide(){return{group:b(()=>this.selectedGroups[0])}},setup(){const e=se(),t=A([]);let o;const c=A(),i=A([]),u=A(!1),r=de(),n=ge("page","1"),a=b(()=>parseInt(he(s(n)))),h=ge("admin-settings-items-per-page","1"),p=b(()=>parseInt(he(s(h)))),v=Ce(function*(y){const N=yield r.graphAuthenticated.groups.listGroups("displayName");t.value=N.data.value||[],t.value.forEach(U=>{U.members=U.members||[]})}),{actions:_}=Mt({store:e}),k=b(()=>[...s(_)].filter(y=>y.isEnabled({resources:s(i)})));return _e(async()=>{await v.perform(),o=x.subscribe("app.admin-settings.list.load",async()=>{await v.perform(),i.value=[];const y=Math.ceil(s(t).length/s(p));s(a)>1&&s(a)>y&&(n.value=y.toString())})}),Le(()=>{x.unsubscribe("app.admin-settings.list.load",o)}),{...lt(),groups:t,selectedGroups:i,createGroupModalOpen:u,template:c,loadResourcesTask:v,clientService:r,batchActions:k}},computed:{selectedGroupsText(){return this.$gettext("%{count} groups selected",{count:this.selectedGroups.length.toString()})},breadcrumbs(){return[{text:this.$gettext("Administration Settings"),to:{path:"/admin-settings"}},{text:this.$gettext("Groups"),onClick:()=>x.publish("app.admin-settings.list.load")}]},sideBarAvailablePanels(){var e;return[{app:"DetailsPanel",icon:"group-2",title:this.$gettext("Group details"),component:Na,default:!0,enabled:!0,componentAttrs:{groups:this.selectedGroups}},{app:"EditPanel",icon:"pencil",title:this.$gettext("Edit group"),component:Da,default:!1,enabled:this.selectedGroups.length===1&&!((e=this.selectedGroups[0].groupTypes)!=null&&e.includes("ReadOnly")),componentAttrs:{group:this.selectedGroups.length===1?this.selectedGroups[0]:null,onConfirm:this.editGroup}},{app:"GroupMembers",icon:"group",title:this.$gettext("Members"),component:Ba,default:!1,enabled:this.selectedGroups.length===1}].filter(t=>t.enabled)}},methods:{...Ut(["showMessage"]),selectGroups(e){this.selectedGroups=[...e]},toggleSelectGroup(e){if(!this.selectedGroups.find(o=>o.id===e.id))return this.selectedGroups.push(e);this.selectedGroups=this.selectedGroups.filter(o=>o.id!==e.id)},unselectAllGroups(){this.selectedGroups=[]},toggleCreateGroupModal(){this.createGroupModalOpen=!this.createGroupModalOpen},async createGroup(e){try{const o=await this.clientService.graphAuthenticated.groups.createGroup(e);this.toggleCreateGroupModal(),this.showMessage({title:this.$gettext("Group was created successfully")}),this.groups.push({...o==null?void 0:o.data,members:[]})}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to create group"),status:"danger"})}},async editGroup(e){try{const t=this.clientService.graphAuthenticated;await t.groups.editGroup(e.id,e);const{data:o}=await t.groups.getGroup(e.id),c=this.groups.findIndex(u=>u.id===e.id);this.groups[c]=o;const i=this.selectedGroups.findIndex(u=>u.id===o.id);return i>=0&&(this.selectedGroups[i]=o),x.publish("sidebar.entity.saved"),o}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to edit group"),status:"danger"})}}}}),Ha={class:"admin-settings-app-bar-actions"},Wa={key:0,class:"oc-flex oc-flex-middle"},Ka=["textContent"],Za={key:1},Ya=["textContent"],Ja={key:1};function Xa(e,t,o,c,i,u){const r=g("oc-icon"),n=g("oc-button"),a=g("no-content-message"),h=g("context-actions"),p=g("GroupsList"),v=g("app-template"),_=g("create-group-modal"),k=ue("oc-tooltip"),y=ue("translate");return m(),$("div",null,[f(v,{ref:"template",loading:e.loadResourcesTask.isRunning||!e.loadResourcesTask.last,breadcrumbs:e.breadcrumbs,"side-bar-active-panel":e.sideBarActivePanel,"side-bar-available-panels":e.sideBarAvailablePanels,"side-bar-open":e.sideBarOpen,"show-batch-actions":!!e.selectedGroups.length,"batch-actions":e.batchActions,"batch-action-items":e.selectedGroups},{topbarActions:S(()=>[d("div",Ha,[e.selectedGroups.length?(m(),$("div",Wa,[d("span",{textContent:w(e.selectedGroupsText)},null,8,Ka),l(),ee((m(),D(n,{id:"groups-clear-selection","aria-label":e.$gettext("Clear selection"),class:"oc-ml-m oc-py-s",appearance:"outline",onClick:e.unselectAllGroups},{default:S(()=>[f(r,{name:"close"})]),_:1},8,["aria-label","onClick"])),[[k,e.$gettext("Clear selection")]])])):(m(),$("div",Za,[f(n,{variation:"primary",appearance:"filled",onClick:e.toggleCreateGroupModal},{default:S(()=>[f(r,{name:"add"}),l(),d("span",{textContent:w(e.$gettext("New group"))},null,8,Ya)]),_:1},8,["onClick"])]))])]),mainContent:S(()=>[e.groups.length?(m(),$("div",Ja,[f(p,{groups:e.groups,"selected-groups":e.selectedGroups,onToggleSelectGroup:e.toggleSelectGroup,onSelectGroups:e.selectGroups,onUnSelectAllGroups:e.unselectAllGroups},{contextMenu:S(()=>[f(h,{"action-options":{resources:e.selectedGroups}},null,8,["action-options"])]),_:1},8,["groups","selected-groups","onToggleSelectGroup","onSelectGroups","onUnSelectAllGroups"])])):(m(),D(a,{key:0,id:"admin-settings-groups-empty",class:"files-empty",icon:"user"},{message:S(()=>[ee((m(),$("span",null,[l("No groups in here")])),[[y]])]),_:1}))]),_:1},8,["loading","breadcrumbs","side-bar-active-panel","side-bar-available-panels","side-bar-open","show-batch-actions","batch-actions","batch-action-items"]),l(),e.createGroupModalOpen?(m(),D(_,{key:0,onCancel:e.toggleCreateGroupModal,onConfirm:e.createGroup},null,8,["onCancel","onConfirm"])):q("",!0)])}const er=O(Qa,[["render",Xa]]),tr=j({name:"SpacesList",components:{ContextMenuQuickAction:at,Pagination:it},props:{spaces:{type:Array,required:!0},selectedSpaces:{type:Array,required:!0}},emits:["toggleSelectSpace","selectSpaces","unSelectAllSpaces"],setup:function(e,{emit:t}){const o=Fe(),c=gt(),{$gettext:i,current:u}=K(),{y:r}=nt("#admin-settings-app-bar"),n=A(void 0),a=A("name"),h=A($e.Asc),p=A(""),v=A(void 0),_=A(void 0),k=b(()=>e.selectedSpaces.map(E=>E.id)),y=b(()=>i("%{spaceCount} spaces in total",{spaceCount:e.spaces.length.toString()})),N=b(()=>i("%{spaceCount} matching spaces",{spaceCount:s(L).length.toString()})),U=(E,B,Y)=>[...E].sort((J,me)=>{let re,ie;const Me=["totalQuota","usedQuota","remainingQuota"].includes(B);switch(B){case"members":re=X(J).toString(),ie=X(me).toString();break;case"totalQuota":re=(J.spaceQuota.total||0).toString(),ie=(me.spaceQuota.total||0).toString();break;case"usedQuota":re=(J.spaceQuota.used||0).toString(),ie=(me.spaceQuota.used||0).toString();break;case"remainingQuota":re=(J.spaceQuota.remaining||0).toString(),ie=(me.spaceQuota.remaining||0).toString();break;case"status":re=J.disabled.toString(),ie=me.disabled.toString();break;default:re=J[B]||"",ie=me[B]||""}return Y?ie.localeCompare(re,void 0,{numeric:Me}):re.localeCompare(ie,void 0,{numeric:Me})}),L=b(()=>U(C(e.spaces,s(p)),s(a),s(h)===$e.Desc)),R=ft({items:L});ce(R.currentPage,()=>{t("unSelectAllSpaces")});const I=b(()=>s(R.paginatedItems).length===e.selectedSpaces.length),F=E=>{a.value=E.sortBy,h.value=E.sortDir},C=(E,B)=>(B||"").trim()?new Ne(E,{...ke,keys:["name"]}).search(B).map(J=>J.item):E,M=E=>e.selectedSpaces.some(B=>B.id===E.id),G=b(()=>[{name:"select",title:"",type:"slot",width:"shrink",headerType:"slot"},{name:"icon",title:"",type:"slot",width:"shrink"},{name:"name",title:i("Name"),type:"slot",sortable:!0},{name:"manager",title:i("Manager"),type:"slot"},{name:"members",title:i("Members"),type:"slot",sortable:!0},{name:"totalQuota",title:i("Total quota"),type:"slot",sortable:!0},{name:"usedQuota",title:i("Used quota"),type:"slot",sortable:!0},{name:"remainingQuota",title:i("Remaining quota"),type:"slot",sortable:!0},{name:"mdate",title:i("Modified"),type:"slot",sortable:!0},{name:"status",title:i("Status"),type:"slot",sortable:!0},{name:"actions",title:i("Actions"),sortable:!1,type:"slot",alignH:"right"}]),T=E=>{const B=E.spaceRoles[je.name];let J=(B.length>2?B.slice(0,2):B).map(me=>me.displayName).join(", ");return B.length>2&&(J+=`... +${B.length-2}`),J},oe=E=>Qt(new Date(E),u),ne=E=>Ht(new Date(E),u),ae=E=>Te(E.spaceQuota.total,u),Z=E=>E.spaceQuota.used===void 0?"-":Te(E.spaceQuota.used,u),pe=E=>E.spaceQuota.remaining===void 0?"-":Te(E.spaceQuota.remaining,u),X=E=>E.spaceRoles[je.name].length+E.spaceRoles[tt.name].length+E.spaceRoles[st.name].length,fe=E=>i("Select %{ space }",{space:E.name},!0),Se=E=>{t("unSelectAllSpaces"),t("toggleSelectSpace",E)};_e(()=>{kt(()=>{v.value=new Ue(s(_).$el)})}),ce(p,async()=>{const E=s(v);E&&(await o.push({...s(c),query:{...s(c).query,page:"1"}}),E.unmark(),E.mark(s(p),{element:"span",className:"highlight-mark",exclude:["th *","tfoot *"]}))});const ze=E=>{const B=E[0];M(B)||Se(B)},xe=(E,B)=>{const{dropdown:Y,event:J}=E;(Y==null?void 0:Y.tippy)!==void 0&&(M(B)||Se(B),we(Y.tippy,J,s(n)))},qe=(E,B,Y)=>{B.preventDefault();const J=E.$el.getElementsByClassName("spaces-table-btn-action-dropdown")[0];J!==void 0&&(M(Y)||Se(Y),we(J._tippy,B,s(n)))},Re=b(()=>i("Show details"));return{allSpacesSelected:I,sortBy:a,sortDir:h,filterTerm:p,footerTextTotal:y,footerTextFilter:N,fields:G,highlighted:k,tableRef:_,filter:C,getManagerNames:T,formatDate:oe,formatDateRelative:ne,getTotalQuota:ae,getUsedQuota:Z,getRemainingQuota:pe,getMemberCount:X,getSelectSpaceLabel:fe,handleSort:F,fileClicked:ze,isSpaceSelected:M,contextMenuButtonRef:n,showContextMenuOnBtnClick:xe,showContextMenuOnRightClick:qe,spaceDetailsLabel:Re,showDetailsForSpace:E=>{Se(E),x.publish(le.open)},fileListHeaderY:r,items:L,...R}}});const sr=["data-test-space-name","textContent"],or=["textContent"],nr={key:0,class:"oc-flex oc-flex-middle"},ar=["textContent"],rr={key:1,class:"oc-flex oc-flex-middle"},ir=["textContent"],lr={class:"spaces-list-actions"},ur={class:"oc-text-nowrap oc-text-center oc-width-1-1 oc-my-s"},cr={class:"oc-text-muted"},dr={key:0,class:"oc-text-muted"};function pr(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("oc-checkbox"),a=g("oc-icon"),h=g("oc-button"),p=g("context-menu-quick-action"),v=g("pagination"),_=g("oc-table"),k=ue("oc-tooltip");return m(),$("div",null,[f(r,{id:"spaces-filter",modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=y=>e.filterTerm=y),class:"oc-ml-m oc-my-s",label:e.$gettext("Search"),autocomplete:"off"},null,8,["modelValue","label"]),l(),f(_,{ref:"tableRef",class:"spaces-table","sort-by":e.sortBy,"sort-dir":e.sortDir,fields:e.fields,data:e.paginatedItems,highlighted:e.highlighted,sticky:!0,"header-position":e.fileListHeaderY,hover:!0,onSort:e.handleSort,onContextmenuClicked:e.showContextMenuOnRightClick,onHighlight:e.fileClicked},{selectHeader:S(()=>[f(n,{size:"large",class:"oc-ml-s",label:e.$gettext("Select all spaces"),"model-value":e.allSpacesSelected,"hide-label":"","onUpdate:modelValue":t[1]||(t[1]=y=>e.allSpacesSelected?e.$emit("unSelectAllSpaces"):e.$emit("selectSpaces",e.paginatedItems))},null,8,["label","model-value"])]),select:S(({item:y})=>[f(n,{class:"oc-ml-s",size:"large","model-value":e.isSpaceSelected(y),option:y,label:e.getSelectSpaceLabel(y),"hide-label":"","onUpdate:modelValue":N=>e.$emit("toggleSelectSpace",y),onClick:t[2]||(t[2]=ve(()=>{},["stop"]))},null,8,["model-value","option","label","onUpdate:modelValue"])]),icon:S(()=>[f(a,{name:"layout-grid"})]),name:S(({item:y})=>[d("span",{class:"spaces-table-space-name","data-test-space-name":y.name,textContent:w(y.name)},null,8,sr)]),manager:S(({item:y})=>[l(w(e.getManagerNames(y)),1)]),members:S(({item:y})=>[l(w(e.getMemberCount(y)),1)]),totalQuota:S(({item:y})=>[l(w(e.getTotalQuota(y)),1)]),usedQuota:S(({item:y})=>[l(w(e.getUsedQuota(y)),1)]),remainingQuota:S(({item:y})=>[l(w(e.getRemainingQuota(y)),1)]),mdate:S(({item:y})=>[ee(d("span",{tabindex:"0",textContent:w(e.formatDateRelative(y.mdate))},null,8,or),[[k,e.formatDate(y.mdate)]])]),status:S(({item:y})=>[y.disabled?(m(),$("span",nr,[f(a,{name:"stop-circle","fill-type":"line",class:"oc-mr-s"}),d("span",{textContent:w(e.$gettext("Disabled"))},null,8,ar)])):(m(),$("span",rr,[f(a,{name:"play-circle","fill-type":"line",class:"oc-mr-s"}),d("span",{textContent:w(e.$gettext("Enabled"))},null,8,ir)]))]),actions:S(({item:y})=>[d("div",lr,[ee((m(),D(h,{"aria-label":e.spaceDetailsLabel,appearance:"raw",class:"spaces-table-btn-details",onClick:ve(N=>e.showDetailsForSpace(y),["stop","prevent"])},{default:S(()=>[f(a,{name:"information","fill-type":"line"})]),_:2},1032,["aria-label","onClick"])),[[k,e.spaceDetailsLabel]]),l(),f(p,{ref:"contextMenuButtonRef",item:y,class:"spaces-table-btn-action-dropdown",onQuickActionClicked:N=>e.showContextMenuOnBtnClick(N,y)},{contextMenu:S(()=>[ye(e.$slots,"contextMenu",{space:y})]),_:2},1032,["item","onQuickActionClicked"])])]),footer:S(()=>[f(v,{pages:e.paginationPages,"current-page":e.currentPage},null,8,["pages","current-page"]),l(),d("div",ur,[d("p",cr,w(e.footerTextTotal),1),l(),e.filterTerm?(m(),$("p",dr,w(e.footerTextFilter),1)):q("",!0)])]),_:3},8,["sort-by","sort-dir","fields","data","highlighted","header-position","onSort","onContextmenuClicked","onHighlight"])])}const mr=O(tr,[["render",pr]]),gr=j({name:"ContextActions",components:{ContextActionMenu:Oe,QuotaModal:Pe},props:{items:{type:Array,required:!0}},setup(e){const t=se(),o=b(()=>({resources:e.items})),{actions:c}=ut({store:t}),{actions:i}=ct({store:t}),{actions:u,modalOpen:r,closeModal:n}=dt({store:t}),{actions:a}=St({store:t}),{actions:h}=wt({store:t}),{actions:p}=pt({store:t}),{actions:v}=bt(),_=b(()=>[...s(h),...s(a)].filter(U=>U.isEnabled(s(o)))),k=b(()=>[...s(u),...s(i),...s(p),...s(c)].filter(U=>U.isEnabled(s(o)))),y=b(()=>[...s(v)].filter(U=>U.isEnabled(s(o)))),N=b(()=>{const U=[];return s(_).length&&U.push({name:"primaryActions",items:s(_)}),s(k).length&&U.push({name:"secondaryActions",items:s(k)}),s(y).length&&U.push({name:"sidebar",items:s(y)}),U});return{maxQuota:Ge(),menuSections:N,quotaModalIsOpen:r,closeQuotaModal:n}}});function hr(e,t,o,c,i,u){const r=g("context-action-menu"),n=g("quota-modal");return m(),$("div",null,[f(r,{"menu-sections":e.menuSections,"action-options":{resources:e.items}},null,8,["menu-sections","action-options"]),l(),e.quotaModalIsOpen?(m(),D(n,{key:0,cancel:e.closeQuotaModal,spaces:e.items,"max-quota":e.maxQuota},null,8,["cancel","spaces","max-quota"])):q("",!0)])}const fr=O(gr,[["render",hr]]),br=j({name:"MembersRoleSection",props:{members:{type:Array,required:!0}},setup(){return{groupIcon:b(()=>cs.group.icon)}}}),yr={class:"oc-list"};function vr(e,t,o,c,i,u){const r=g("oc-avatar"),n=g("oc-avatar-item");return m(),$("ul",yr,[(m(!0),$(Ae,null,Be(e.members,(a,h)=>(m(),$("li",{key:h,class:"oc-flex oc-flex-middle oc-mb-s","data-testid":"space-members-list"},[a.kind==="user"?(m(),D(r,{key:0,"user-name":a.displayName,width:36,class:"oc-mr-s"},null,8,["user-name"])):(m(),D(n,{key:1,width:36,"icon-size":"medium",icon:e.groupIcon,name:"group",class:"oc-mr-s"},null,8,["icon"])),l(" "+w(a.displayName),1)]))),128))])}const Cr=O(br,[["render",vr]]),Sr=j({name:"MembersPanel",components:{MembersRoleSection:Cr},setup(){const e=Ve("resource"),t=A(""),o=A(null),c=A(null),i=(p,v)=>(v||"").trim()?new Ne(p,{...ke,keys:["displayName"]}).search(v).map(k=>k.item):p,u=b(()=>[...s(e).spaceRoles.manager.map(p=>({...p,roleType:je.name})),...s(e).spaceRoles.editor.map(p=>({...p,roleType:tt.name})),...s(e).spaceRoles.viewer.map(p=>({...p,roleType:st.name}))].sort((p,v)=>p.displayName.localeCompare(v.displayName))),r=b(()=>i(s(u),s(t))),n=b(()=>s(r).filter(p=>p.roleType===je.name)),a=b(()=>s(r).filter(p=>p.roleType===tt.name)),h=b(()=>s(r).filter(p=>p.roleType===st.name));return ce(t,()=>{s(c)&&(o.value=new Ue(s(c)),s(o).unmark(),s(o).mark(s(t),{element:"span",className:"highlight-mark"}))}),{filterTerm:t,filteredSpaceMembers:r,filteredSpaceManagers:n,filteredSpaceEditors:a,filteredSpaceViewers:h,membersListRef:c}}}),wr={class:"oc-ml-s"},$r={ref:"membersListRef","data-testid":"space-members"},kr={key:0},Ar=["textContent"],Ur={key:1,class:"oc-mb-m","data-testid":"space-members-role-managers"},Nr=["textContent"],_r={key:2,class:"oc-mb-m","data-testid":"space-members-role-editors"},Gr=["textContent"],Mr={key:3,class:"oc-mb-m","data-testid":"space-members-role-viewers"},Er=["textContent"];function Dr(e,t,o,c,i,u){const r=g("oc-text-input"),n=g("members-role-section");return m(),$("div",wr,[f(r,{modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTerm=a),class:"oc-text-truncate oc-mr-s oc-mt-m",label:e.$gettext("Filter members")},null,8,["modelValue","label"]),l(),d("div",$r,[e.filteredSpaceMembers.length?q("",!0):(m(),$("div",kr,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("No members found"))},null,8,Ar)])),l(),e.filteredSpaceManagers.length?(m(),$("div",Ur,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("Managers"))},null,8,Nr),l(),f(n,{members:e.filteredSpaceManagers},null,8,["members"])])):q("",!0),l(),e.filteredSpaceEditors.length?(m(),$("div",_r,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("Editors"))},null,8,Gr),l(),f(n,{members:e.filteredSpaceEditors},null,8,["members"])])):q("",!0),l(),e.filteredSpaceViewers.length?(m(),$("div",Mr,[d("h3",{class:"oc-text-bold oc-text-medium",textContent:w(e.$gettext("Viewers"))},null,8,Er),l(),f(n,{members:e.filteredSpaceViewers},null,8,["members"])])):q("",!0)],512)])}const Pr=O(Sr,[["render",Dr]]),Fr=j({name:"ActionsPanel",components:{ActionMenuItem:Yt,QuotaModal:Pe},setup(){const e=se();ls().proxy;const t=Ve("resource"),o=b(()=>[s(t)]),c=b(()=>({resources:s(o)})),{actions:i}=ut({store:e}),{actions:u}=ct({store:e}),{actions:r}=St({store:e}),{actions:n,modalOpen:a,closeModal:h}=dt({store:e}),{actions:p}=wt({store:e}),{actions:v}=pt({store:e});return{actions:b(()=>[...s(p),...s(r),...s(n),...s(v),...s(i),...s(u)].filter(k=>k.isEnabled(s(c)))),actionOptions:c,maxQuota:Ge(),quotaModalIsOpen:a,closeQuotaModal:h,resources:o}}});function zr(e,t,o,c,i,u){const r=g("quota-modal"),n=g("action-menu-item"),a=g("oc-list");return m(),$("div",null,[e.quotaModalIsOpen?(m(),D(r,{key:0,cancel:e.closeQuotaModal,spaces:e.resources,"max-quota":e.maxQuota},null,8,["cancel","spaces","max-quota"])):q("",!0),l(),f(a,{id:"oc-spaces-actions-sidebar","class-name":"oc-mt-s"},{default:S(()=>[(m(!0),$(Ae,null,Be(e.actions,(h,p)=>(m(),D(n,{key:`action-${p}`,class:"oc-rounded",action:h,"action-options":e.actionOptions},null,8,["action","action-options"]))),128))]),_:1})])}const xr=O(Fr,[["render",zr]]),qr=j({name:"SpacesView",components:{SpacesList:mr,AppTemplate:Qe,NoContentMessage:rt,ContextActions:fr,SpaceInfo:Jt,QuotaModal:Pe},provide(){return{resource:b(()=>this.selectedSpaces[0])}},setup(){const e=se(),t=_t({store:e}),o=A([]),c=de(),{$gettext:i}=K(),{sideBarOpen:u,sideBarActivePanel:r}=lt(),n=A(null);let a;const h=A(null),p=A([]),v=ge("page","1"),_=b(()=>parseInt(he(s(v)))),k=ge("admin-settings-items-per-page","1"),y=b(()=>parseInt(he(s(k)))),N=Ce(function*(Z){const{data:{value:pe}}=yield c.graphAuthenticated.drives.listAllDrives("name asc","driveType eq project"),X=pe.map(fe=>gs({...fe,serverUrl:et.serverUrl}));o.value=X}),U=b(()=>[{text:i("Administration Settings"),to:{path:"/admin-settings"}},{text:i("Spaces"),onClick:()=>x.publish("app.admin-settings.list.load")}]),L=Z=>{p.value=[...Z]},R=Z=>{if(!s(p).find(X=>X.id===Z.id))return p.value.push(Z);p.value=s(p).filter(X=>X.id!==Z.id)},I=()=>{p.value=[]},{actions:F}=ut({store:e}),{actions:C}=ct({store:e}),{actions:M,modalOpen:G,closeModal:T}=dt({store:e}),{actions:oe}=pt({store:e}),ne=b(()=>[...s(M),...s(oe),...s(F),...s(C)].filter(Z=>Z.isEnabled({resources:s(p)}))),ae=b(()=>[{app:"SpaceNoSelection",icon:"layout-grid",title:i("Details"),component:Xt,default:!0,enabled:s(p).length===0},{app:"SpaceDetails",icon:"layout-grid",title:i("Details"),component:es,default:!0,enabled:s(p).length===1,componentAttrs:{showSpaceImage:!1,showShareIndicators:!1}},{app:"SpaceDetailsMultiple",icon:"layout-grid",title:i("Details"),component:ts,default:!0,enabled:s(p).length>1,componentAttrs:{selectedSpaces:s(p)}},{app:"SpaceActions",icon:"slideshow-3",title:i("Actions"),component:xr,default:!1,enabled:s(p).length===1},{app:"SpaceMembers",icon:"group",title:i("Members"),component:Pr,default:!1,enabled:s(p).length===1}].filter(Z=>Z.enabled));return _e(async()=>{await N.perform(),n.value=x.subscribe("app.admin-settings.list.load",async()=>{await N.perform(),p.value=[];const Z=Math.ceil(s(o).length/s(y));s(_)>1&&s(_)>Z&&(v.value=Z.toString())}),a=x.subscribe("app.admin-settings.spaces.space.quota.updated",({spaceId:Z,quota:pe})=>{const X=s(o).find(fe=>fe.id===Z);X&&(X.spaceQuota=pe)})}),Le(()=>{x.unsubscribe("app.admin-settings.list.load",s(n)),x.unsubscribe("app.admin-settings.spaces.space.quota.updated",a)}),{maxQuota:Ge(),sideBarOpen:u,sideBarActivePanel:r,spaces:o,loadResourcesTask:N,accessToken:t,breadcrumbs:U,batchActions:ne,selectedSpaces:p,sideBarAvailablePanels:ae,template:h,selectSpaces:L,toggleSelectSpace:R,unselectAllSpaces:I,quotaModalIsOpen:G,closeQuotaModal:T}}}),Rr={class:"admin-settings-app-bar-actions"},Ir={key:0,class:"oc-flex oc-flex-middle"},Tr={key:2};function jr(e,t,o,c,i,u){const r=g("space-info"),n=g("oc-icon"),a=g("oc-button"),h=g("quota-modal"),p=g("no-content-message"),v=g("context-actions"),_=g("SpacesList"),k=g("app-template"),y=ue("oc-tooltip"),N=ue("translate");return m(),$("div",null,[f(k,{ref:"template",loading:e.loadResourcesTask.isRunning||!e.loadResourcesTask.last,breadcrumbs:e.breadcrumbs,"side-bar-active-panel":e.sideBarActivePanel,"side-bar-available-panels":e.sideBarAvailablePanels,"side-bar-open":e.sideBarOpen,"is-side-bar-header-compact":e.selectedSpaces.length===1,"show-batch-actions":!!e.selectedSpaces.length,"batch-actions":e.batchActions,"batch-action-items":e.selectedSpaces},{sideBarHeader:S(()=>[e.selectedSpaces.length===1?(m(),D(r,{key:0,"space-resource":e.selectedSpaces[0],class:"sidebar-panel__space_info"},null,8,["space-resource"])):q("",!0)]),topbarActions:S(()=>[d("div",Rr,[e.selectedSpaces.length>=1?(m(),$("div",Ir,[ee((m(),D(a,{id:"spaces-clear-selection","aria-label":e.$gettext("Clear selection"),class:"oc-py-s",appearance:"outline",onClick:e.unselectAllSpaces},{default:S(()=>[f(n,{name:"close"})]),_:1},8,["aria-label","onClick"])),[[y,e.$gettext("Clear selection")]])])):q("",!0)])]),mainContent:S(()=>[e.quotaModalIsOpen?(m(),D(h,{key:0,cancel:e.closeQuotaModal,spaces:e.selectedSpaces,"max-quota":e.maxQuota},null,8,["cancel","spaces","max-quota"])):q("",!0),l(),e.spaces.length?(m(),$("div",Tr,[f(_,{spaces:e.spaces,class:mt({"spaces-table-squashed":e.sideBarOpen}),"selected-spaces":e.selectedSpaces,onToggleSelectSpace:e.toggleSelectSpace,onSelectSpaces:e.selectSpaces,onUnSelectAllSpaces:e.unselectAllSpaces},{contextMenu:S(()=>[f(v,{items:e.selectedSpaces},null,8,["items"])]),_:1},8,["spaces","class","selected-spaces","onToggleSelectSpace","onSelectSpaces","onUnSelectAllSpaces"])])):(m(),D(p,{key:1,id:"admin-settings-spaces-empty",class:"spaces-empty",icon:"layout-grid"},{message:S(()=>[ee((m(),$("span",null,[l("No spaces in here")])),[[N]])]),_:1}))]),_:1},8,["loading","breadcrumbs","side-bar-active-panel","side-bar-available-panels","side-bar-open","is-side-bar-header-compact","show-batch-actions","batch-actions","batch-action-items"])])}const Or=O(qr,[["render",jr]]);const De={name:"Administration Settings",id:"admin-settings",icon:"settings-4",isFileEditor:!1},Lr=({$ability:e})=>[{path:"/",redirect:()=>{if(e.can("read-all","Setting"))return{name:"admin-settings-general"};if(e.can("read-all","Account"))return{name:"admin-settings-users"};if(e.can("read-all","Group"))return{name:"admin-settings-groups"};if(e.can("read-all","Drive"))return{name:"admin-settings-spaces"};throw Error("Insufficient permissions")}},{path:"/general",name:"admin-settings-general",component:po,beforeEnter:(t,o,c)=>{e.can("read-all","Setting")||c({path:"/"}),c()},meta:{authContext:"user",title:"General"}},{path:"/users",name:"admin-settings-users",component:Jn,beforeEnter:(t,o,c)=>{e.can("read-all","Account")||c({path:"/"}),c()},meta:{authContext:"user",title:"Users"}},{path:"/groups",name:"admin-settings-groups",component:er,beforeEnter:(t,o,c)=>{e.can("read-all","Group")||c({path:"/"}),c()},meta:{authContext:"user",title:"Groups"}},{path:"/spaces",name:"admin-settings-spaces",component:Or,beforeEnter:(t,o,c)=>{e.can("read-all","Drive")||c({path:"/"}),c()},meta:{authContext:"user",title:"Spaces"}}],Vr=({$ability:e})=>[{name:"General",icon:"settings-4",route:{path:`/${De.id}/general?`},enabled:()=>e.can("read-all","Setting")},{name:"Users",icon:"user",route:{path:`/${De.id}/users?`},enabled:()=>e.can("read-all","Account")},{name:"Groups",icon:"group-2",route:{path:`/${De.id}/groups?`},enabled:()=>e.can("read-all","Group")},{name:"Spaces",icon:"layout-grid",route:{path:`/${De.id}/spaces?`},enabled:()=>e.can("read-all","Drive")}],ti={appInfo:De,routes:Lr,translations:Ms,navItems:Vr};export{ti as default};
