var La=Object.defineProperty;var Pa=(e,t,s)=>t in e?La(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var ie=(e,t,s)=>(Pa(e,typeof t!="symbol"?t+"":t,s),s);import{E as _,C as J,K as r,D as Z,b6 as _s,d as W,G as je,T as wt,g as y,o as d,c as k,k as I,e as b,f as w,ag as at,aX as Ce,b7 as Ke,b8 as xa,b9 as vt,ah as it,A as ja,ba as Na,y as ee,z as De,U as pe,a as $,a1 as Ma,b as A,n as oe,h as ce,r as We,j as C,P as lt,i as fe,M as Ei,S as Be,w as V,t as D,F as X,bb as xt,bc as rs,bd as za,m as Oa,be as Ba,bf as Ti,H as Ue,V as ls,aT as cs,b2 as xe,bg as Ii,aY as de,bh as Ri,bi as Ua,_ as Xt,q as pt,v as ut,I as et,u as qa,bj as Qe,bk as Va,aj as Ha,bl as Ka,bm as Wa,b1 as ts,aZ as Li,ae as Pi,aA as xi,p as ss,aB as Ga,a4 as Ya,bn as Qa,bo as Za,bp as si,bq as Ja,$ as Xa,N as en,O as tn,Q as sn,R as an,ai as nn,br as ii}from"./chunks/vendor-2c44cb30.mjs";import{c as ae,u as ne,b as Ct,a as ji,d as on}from"./chunks/useAuthService-746ac4ed.mjs";import{u as q}from"./chunks/useStore-acb4016c.mjs";import{e as Y,_ as K,u as Ge,S as B,L as yt,l as Fe,P as gt,d as $e,c as Re,m as is,n as As,k as $s,D as Gt,o as Ds,a as ai,C as rn,E as ln,i as cn,p as dn,q as un,r as pn,j as bs,s as ys,g as hn}from"./chunks/eventBus-bf81ca73.mjs";import{d as Kt,c as Oe,a7 as Ee,t as Xe,i as Yt,l as Ni,f as vs,S as mn,h as ds,j as Es,q as St,H as fn,Y as we,W as Ts,o as he,O as Is,M as Ye,Z as jt,a5 as ct,g as Rs,E as Mi,a1 as Ls,p as Vt,D as gn,n as Je,C as bn,u as yn,a8 as vn,a as It,I as Ps,V as Sn,a0 as zi,v as kn,Q as wn,R as Cn,P as Fn,a2 as _n,a3 as An,_ as Oi,a9 as Bi,a4 as $n,$ as Dn,K as Ui,J as qi,L as En,G as Vi,F as Hi,N as xs,m as Tn}from"./chunks/useDriveResolver-f387970c.mjs";import{a as as,e as In,l as Rn,u as Nt,p as Mt,q as Ki,o as js,h as us,V as ht,A as tt,d as Wi,b as Ln,j as Pn,f as Ss,i as Ns,n as $t}from"./chunks/visibility-26d674e6.mjs";import{u as Gi}from"./chunks/useUserContext-8e0854d8.mjs";import{c as Dt,a as ke,d as Ht}from"./chunks/useSort-c2385dd4.mjs";import{S as _e,a as Yi,E as ni,n as qe,o as xn,C as Qi,u as Zi,B as jn,j as Nn,I as Mn,P as zt,N as nt,p as Ot,Q as Ji,d as Xi,e as ea,f as ta,g as sa,h as ia,i as aa,A as na,b as zn,k as On,m as Bn,l as Un}from"./chunks/SpaceInfo-efc8f70f.mjs";import{c as be,a as Ms,b as dt,d as zs,e as Rt,f as qn,g as Vn,h as Hn,i as Kn,j as Wn,l as Gn,k as Yn,m as me,n as ue,o as se,p as Ae,q as Ne,r as ps,s as hs,t as ms,u as Qn,L as Zn}from"./chunks/List-2f7d1eb7.mjs";import{j as Jn,S as ye,a as Xn,d as eo,c as to,R as Ut,e as so,g as io}from"./chunks/error-bf199af9.mjs";import{u as Ve}from"./chunks/useLoadingService-9d293e70.mjs";import{u as oa,t as ao}from"./chunks/useDownloadFile-992d548e.mjs";import{u as no}from"./chunks/useRouteMeta-37d67251.mjs";const ra=()=>_(()=>!!document.getElementById("files-global-search-options")),oo=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s}=J(),i=ne(),n=async({space:a,resources:c})=>{try{const{owncloudSdk:l,graphAuthenticated:u,webdav:p}=i,m=await l.files.getFileContents(c[0].webDavPath);try{await p.getFileInfo(a,{path:".space"})}catch{await p.createFolder(a,{path:".space"})}await l.files.putFileContents(`/spaces/${a.id}/.space/readme.md`,m);const h=await p.getFileInfo(a,{path:".space/readme.md"}),{data:g}=await u.drives.updateDrive(a.id,{special:[{specialFolder:{name:"readme"},id:h.id}]},{});e.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:a.id,field:"spaceReadmeData",value:Kt(g).spaceReadmeData}),e.dispatch("showMessage",{title:s("Space description was set successfully")})}catch(l){console.error(l),e.dispatch("showMessage",{title:s("Failed to set space description"),status:"danger"})}};return{actions:_(()=>[{name:"set-space-readme",icon:"markdown",handler:n,label:()=>s("Set as space description"),isEnabled:({space:a,resources:c})=>{var l;return c.length!==1||!((l=c[0].mimeType)!=null&&l.startsWith("text/"))||r(t.currentRoute).name!=="files-spaces-generic"||!a?!1:a.canEditReadme({user:e.getters.user})},canBeDefault:!1,componentType:"button",class:"oc-files-actions-set-space-readme-trigger"}])}},la=({store:e}={})=>{e=e||q();const{$gettext:t}=J(),s=Z(!1),i=()=>{s.value=!1},n=({})=>{s.value=!0},o=_(()=>[{name:"editReadmeContent",icon:"article",label:()=>t("Edit description"),handler:n,isEnabled:({resources:a})=>a.length!==1||!a[0].canEditReadme({user:e.getters.user})?!1:!!a[0].spaceReadmeData,componentType:"button",class:"oc-files-actions-edit-readme-content-trigger"}]);return{modalOpen:s,closeModal:i,actions:o}},ro=({store:e}={})=>{e=e||_s();const{$gettext:t}=J(),s=({resources:n})=>{e.commit("Files/SET_FILE_SELECTION",n),Y.publish(_e.openWithPanel,"space-share")};return{actions:_(()=>[{name:"show-members",icon:"group",label:()=>t("Members"),handler:s,isEnabled:({resources:n})=>n.length===1,componentType:"button",class:"oc-files-actions-show-details-trigger"}])}},lo=W({setup(){const e=q(),t=Z(!1);je(Ct(),()=>{e.dispatch("Files/resetFileSelection")});const s=()=>{t.value=!1},i=c=>{t.value=(c.dataTransfer.types||[]).some(l=>l==="Files")},n=Y.subscribe("drag-over",i),o=Y.subscribe("drag-out",s),a=Y.subscribe("drop",s);return wt(()=>{Y.unsubscribe("drag-over",n),Y.unsubscribe("drag-out",o),Y.unsubscribe("drop",a)}),{dragareaEnabled:t}}});const co={id:"files",class:"oc-flex oc-height-1-1"},uo={key:0,class:"dragarea"};function po(e,t,s,i,n,o){const a=y("router-view");return d(),k("main",co,[e.dragareaEnabled?(d(),k("div",uo)):I("",!0),b(),w(a,{tabindex:"0",class:"files-wrapper oc-width-expand oc-height-1-1 oc-flex-wrap"})])}const ho=K(lo,[["render",po],["__scopeId","data-v-5ef3ff85"]]),mo=e=>({meta:{...e.meta,authContext:"anonymous"},path:e.path,redirect:t=>{const s=e.redirect(t);return console.warn(`route "${e.path}" is deprecated, use "${String(s.path)||String(s.name)}" instead.`),s}}),fo=()=>[{path:"/list",redirect:e=>be("files-spaces-generic",{...e,params:{...e.params,driveAliasAndItem:"personal/home"}})},{path:"/list/all/:item(.*)",redirect:e=>be("files-spaces-generic",{...e,params:{...e.params,driveAliasAndItem:Ge("personal/home",e.params.item,{leadingSlash:!1})}})},{path:"/list/favorites",redirect:e=>Ms("files-common-favorites",e)},{path:"/list/shared-with-me",redirect:e=>dt("files-shares-with-me",e)},{path:"/list/shared-with-others",redirect:e=>dt("files-shares-with-others",e)},{path:"/list/shared-via-link",redirect:e=>dt("files-shares-via-link",e)},{path:"/trash-bin",redirect:e=>zs("files-trash-generic",e)},{path:"/public/list/:item(.*)",redirect:e=>Rt("files-public-link",e)},{path:"/private-link/:fileId",redirect:e=>({name:"resolvePrivateLink",params:{fileId:e.params.fileId}})},{path:"/public-link/:token",redirect:e=>({name:"resolvePublicLink",params:{token:e.params.token}})}].map(mo),go={name:"root",path:"/",redirect:e=>be("files-spaces-generic",e)},bo=e=>[go,...qn(e),...Vn(e),...Hn(e),...Kn(e),...Wn(e),...fo()],ca=(e,t)=>{const s=e.configurationManager||ji(),i=l=>r(e.space)||r(e.spaces).find(u=>u.id===l),n=l=>i(l.storageId)||Oe({shareId:l.shareId,shareName:l.name,serverUrl:s.serverUrl}),o=e.targetRouteCallback;return{getInternalSpace:i,getMatchingSpace:n,createFileAction:l=>{let u=n(l);u||(u=Oe({shareId:l.shareId,shareName:l.name,serverUrl:s.serverUrl})),t.emit("fileClick",{space:u,resources:[l]})},createFolderLink:l=>{if(r(o))return r(o)(l);const{path:u,fileId:p,resource:m}=l;let h;if(m.shareId)h=Oe({shareId:m.shareId,shareName:at(m.shareRoot),serverUrl:s.serverUrl});else{if(!m.shareId&&!i(m.storageId))return u==="/"?dt("files-shares-with-me"):{name:"resolvePrivateLink",params:{fileId:p}};h=n(m)}return h?be("files-spaces-generic",Ee(h,{path:u,fileId:p})):{}}}};class re{}ie(re,"defaultModeName","resource-table"),ie(re,"default",{name:"resource-table",label:"Switch to default table view",icon:{name:"menu-line",fillType:"none"}}),ie(re,"condensedTable",{name:"resource-table-condensed",label:"Switch to condensed table view",icon:{name:"menu-line-condensed",fillType:"none"}}),ie(re,"tilesView",{name:"resource-tiles",label:"Switch to tiles view",icon:{name:"apps-2",fillType:"line"}}),ie(re,"queryName","view-mode"),ie(re,"tilesSizeDefault",1),ie(re,"tilesSizeQueryName","tiles-size");function yo(e){if(e)return _(()=>r(e));const t=Dt({name:re.queryName,defaultValue:re.defaultModeName});return _(()=>Xe(r(t)))}function vo(e){if(e)return _(()=>parseInt(r(e)));const t=Dt({name:re.tilesSizeQueryName,defaultValue:re.tilesSizeDefault.toString()});return _(()=>parseInt(Xe(r(t))))}class bt{}ie(bt,"Cut","cut"),ie(bt,"Copy","copy");function oi(e,t,s){return t.name=at(s),t.path=s,t.webDavPath=Ke(e.webDavPath,s),t.extension=Yt(t),t}function ri(e,t){return"/"+`files/${e}/${t}`.split("/").filter(Boolean).join("/")}function Os(e,t=""){return"/"+`trash-bin/${e}/${t}`.split("/").filter(Boolean).join("/")}function da(e){return(e.mimeType||"").startsWith("text/")&&e.size<30}function Qt(e,t=!1,s,i,n=[]){return e.sort((a,c)=>a.path.localeCompare(c.path)),n.length&&(e=So(e,n)),t?(e=li(e),xa(e,["file_source","permissions"],["asc","desc"]).map(a=>{const c=ci(a,t,s,i);return c.shareId=a.id,c})):li(e).map(a=>ci(a,t,s,i))}function li(e){const t=[];let s=null;for(const i of e){if((s==null?void 0:s.storage_id)===i.storage_id&&(s==null?void 0:s.file_source)===i.file_source){B.containsAnyValue(B.authenticated,[parseInt(i.share_type)])?s.sharedWith.push({username:i.share_with,name:i.share_with_displayname,displayName:i.share_with_displayname,avatar:void 0,shareType:parseInt(i.share_type)}):parseInt(i.share_type)===B.link.value&&s.sharedWith.push({name:i.name||i.token,link:!0,shareType:parseInt(i.share_type)});continue}B.containsAnyValue(B.authenticated,[parseInt(i.share_type)])?i.sharedWith=[{username:i.share_with,displayName:i.share_with_displayname,name:i.share_with_displayname,avatar:void 0,shareType:parseInt(i.share_type)}]:parseInt(i.share_type)===B.link.value&&(i.sharedWith=[{name:i.name||i.token,link:!0,shareType:parseInt(i.share_type)}]),s=i,t.push(i)}return t}function So(e,t){const s=[];for(const i of e){let n;if(i.path==="/"){const o=Ni(i.item_source);n=t.find(a=>a.id===o&&a.driveType==="project")}s.push({...i,matchingSpace:n})}return s}function ci(e,t=!1,s=!0,i=!1){const n=e.item_type==="folder";let o={id:e.id,fileId:e.item_source,storageId:Ni(e.item_source),parentFolderId:e.file_parent,type:e.item_type,mimeType:e.mimetype,isFolder:n,sdate:Ce.fromSeconds(parseInt(e.stime)).toRFC2822(),indicators:[],tags:[],path:void 0,webDavPath:void 0};return t?(o.resourceOwner={username:e.uid_file_owner,displayName:e.displayname_file_owner},o.owner=[{username:e.uid_owner,displayName:e.displayname_owner,avatar:void 0,shareType:B.user.value}],o.sharedWith=e.sharedWith||[],o.status=parseInt(e.state),o.name=vt.basename(e.file_target),i?(o.path="/",o.webDavPath=vs([mn,o.id].join("!"),"/")):(o.path=e.file_target,o.webDavPath=ri(e.share_with,e.file_target)),o.canDownload=()=>parseInt(e.state)===ye.accepted,o.canShare=()=>Fe.share.enabled(e.permissions),o.canRename=()=>parseInt(e.state)===ye.accepted,o.canBeDeleted=()=>Fe.delete.enabled(e.permissions),o.canEditTags=()=>parseInt(e.state)===ye.accepted&&Fe.update.enabled(e.permissions)):(o.sharedWith=e.sharedWith||[],o.shareOwner=e.uid_owner,o.shareOwnerDisplayname=e.displayname_owner,o.name=vt.basename(e.path),o.path=e.path,o.webDavPath=i?vs(o.storageId,e.path):ri(e.uid_owner,e.path),o.canDownload=()=>!0,o.canShare=()=>!0,o.canRename=()=>!0,o.canBeDeleted=()=>!0,o.canEditTags=()=>!0),o.extension=Yt(o),o.isReceivedShare=()=>t,o.canUpload=()=>Fe.create.enabled(e.permissions),o.canCreate=()=>Fe.create.enabled(e.permissions),o.isMounted=()=>!1,o.share=Et(e,o,s),o.canDeny=()=>Fe.denied.enabled(e.permissions),o.getDomSelector=()=>ds(e.id),e.matchingSpace&&(o={...o,...e.matchingSpace}),o}function Et(e,t,s){return parseInt(e.share_type)===B.link.value?ko(e):[B.spaceUser.value,B.spaceGroup.value].includes(parseInt(e.share_type))?Jn(e,t):es(e,t,s)}function ko(e){let t="";const s=parseInt(e.permissions),i=yt.getByBitmask(s,e.item_type==="folder");i&&(t=i.label);const n=(()=>{var c;return typeof e.attributes!="string"?!1:((c=JSON.parse(e.attributes||"[]").find(l=>l.key==="isQuickLink"))==null?void 0:c.enabled)==="true"})(),o=e.quicklink==="true",a=n||o;return{shareType:parseInt(e.share_type),id:e.id,token:e.token,url:e.url,path:e.path,permissions:s,description:t,quicklink:a,stime:e.stime,name:typeof e.name=="string"?e.name:e.token,password:!!(e.share_with&&e.share_with_displayname),expiration:typeof e.expiration=="string"?Ce.fromFormat(e.expiration,"yyyy-MM-dd HH:mm:ss").toFormat("yyyy-MM-dd"):null,itemSource:e.item_source,file:{parent:e.file_parent,source:e.file_source,target:e.file_target}}}function fs(e){return typeof e!="string"?null:e}function es(e,t,s){const i={shareType:parseInt(e.share_type),id:e.id,itemSource:e.item_source,file:{parent:e.file_parent,source:e.file_source,target:e.file_target}};return B.containsAnyValue([B.user,B.remote,B.group,B.guest],[i.shareType])&&(i.collaborator={name:e.share_with,displayName:e.share_with_displayname,additionalInfo:fs(e.share_with_additional_info)},i.owner={name:e.uid_owner,displayName:e.displayname_owner,additionalInfo:fs(e.additional_info_owner)},i.fileOwner={name:e.uid_file_owner,displayName:e.displayname_file_owner,additionalInfo:fs(e.additional_info_file_owner)},i.stime=e.stime,i.permissions=parseInt(e.permissions),i.customPermissions=Fe.bitmaskToPermissions(e.permissions),i.role=gt.getByBitmask(parseInt(e.permissions),t.isFolder||t.type==="folder",s)),(typeof e.expiration=="string"||e.expiration instanceof String)&&(i.expires=new Date(e.expiration)),i.path=e.path,i}function wo(e){const t=e.type==="dir"||e.type==="folder",s=e.fileInfo[$e.TrashbinOriginalFilename],i=Yt({name:s,type:e.type}),n=vt.basename(e.name);return{type:t?"folder":e.type,isFolder:t,ddate:e.fileInfo[$e.TrashbinDeletedDate],name:vt.basename(s),extension:i,path:Ge(e.fileInfo[$e.TrashbinOriginalLocation],{leadingSlash:!0}),id:n,parentFolderId:e.fileInfo[$e.FileParent],indicators:[],webDavPath:"",canUpload:()=>!1,canDownload:()=>!1,canBeDeleted:()=>!0,canBeRestored:function(){return!0},canRename:()=>!1,canShare:()=>!1,canCreate:()=>!1,isMounted:()=>!1,isReceivedShare:()=>!1,getDomSelector:()=>ds(n)}}const ua=e=>e?[{name:"name",sortable:!0,sortDir:ke.Asc},{name:"size",sortable:!0,sortDir:ke.Desc},{name:"sharedWith",sortable:t=>t.length>0?t.sort((s,i)=>s.shareType!==i.shareType?s.shareType<i.shareType?-1:1:s.displayName<i.displayName?-1:1).map(s=>s.displayName).join():!1,sortDir:ke.Asc},{name:"owner",sortable:"displayName",sortDir:ke.Asc},{name:"mdate",sortable:t=>new Date(t).valueOf(),sortDir:ke.Desc},{name:"sdate",sortable:t=>new Date(t).valueOf(),sortDir:ke.Desc},{name:"ddate",sortable:t=>new Date(t).valueOf(),sortDir:ke.Desc}].filter(t=>Object.prototype.hasOwnProperty.call(e,t.name)):[],ns=(e,t)=>!e||!t?!1:e.id===t.id;class Bs{constructor(t,s,i,n,o,a){this.createModal=t,this.hideModal=s,this.showMessage=i,this.$gettext=n,this.$ngettext=o,this.$gettextInterpolate=a}async resolveAllConflicts(t,s,i){const n=[];for(const u of t){const p=Ke(s.path,u.name);i.some(h=>h.path===p)&&n.push({resource:u,strategy:null})}let o=0,a=!1,c=null;const l=[];for(const u of n){if(a){u.strategy=c,l.push(u);continue}const p=n.length-o,m=await this.resolveFileExists(u.resource,p,p===1);u.strategy=m.strategy,l.push(u),o+=1,m.doForAllConflicts&&(a=!0,c=m.strategy)}return l}resolveFileExists(t,s,i,n=!1,o=!1){let a;return o?t.isFolder?a=this.$gettext("Apply to all %{count} folders"):a=this.$gettext("Apply to all %{count} files"):a=this.$gettext("Apply to all %{count} conflicts"),new Promise(c=>{let l=!1;const u={variation:"danger",title:t.isFolder?this.$gettext("Folder already exists"):this.$gettext("File already exists"),message:this.$gettextInterpolate(t.isFolder?this.$gettext('Folder with name "%{name}" already exists.'):this.$gettext('File with name "%{name}" already exists.'),{name:t.name},!0),cancelText:this.$gettext("Skip"),confirmText:this.$gettext("Keep both"),buttonSecondaryText:n?this.$gettext("Merge"):this.$gettext("Replace"),checkboxLabel:i?"":this.$gettextInterpolate(a,{count:s},!0),onCheckboxValueChanged:p=>{l=p},onCancel:()=>{this.hideModal(),c({strategy:Pe.SKIP,doForAllConflicts:l})},onConfirmSecondary:()=>{this.hideModal();const p=n?Pe.MERGE:Pe.REPLACE;c({strategy:p,doForAllConflicts:l})},onConfirm:()=>{this.hideModal(),c({strategy:Pe.KEEP_BOTH,doForAllConflicts:l})}};this.createModal(u)})}resolveDoCopyInsteadOfMoveForSpaces(){return new Promise(t=>{const s={variation:"danger",title:this.$gettext("Copy here?"),customContent:"<p>Moving files from one space to another is not possible. Do you want to copy instead?</p><p>Note: Links and shares of the original file are not copied.</p>",cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Copy here"),onCancel:()=>{this.hideModal(),t(!1)},onConfirm:()=>{this.hideModal(),t(!0)}};this.createModal(s)})}}const Lt=(e,t,s,i=1)=>{let n;return t.length===0?n=`${e} (${i})`:n=`${Es({name:e,extension:t})} (${i}).${t}`,s.some(a=>a.name===n)?Lt(e,t,s,i+1):n},Co=(e,t,s,i)=>e.id===s.id&&it(t.path)===i.path;var Pe=(e=>(e[e.SKIP=0]="SKIP",e[e.REPLACE=1]="REPLACE",e[e.KEEP_BOTH=2]="KEEP_BOTH",e[e.MERGE=3]="MERGE",e))(Pe||{});class pa extends Bs{constructor(t,s,i,n,o,a,c,l,u,p,m,h){super(c,l,u,p,m,h),this.sourceSpace=t,this.resourcesToMove=s,this.targetSpace=i,this.targetFolder=n,this.clientService=o,this.loadingService=a}hasRecursion(){return this.sourceSpace.id!==this.targetSpace.id?!1:this.resourcesToMove.some(t=>this.targetFolder.path===t.path)}showRecursionErrorMessage(){const t=this.resourcesToMove.length,s=this.$ngettext("You can't paste the selected file at this location because you can't paste an item into itself.","You can't paste the selected files at this location because you can't paste an item into itself.",t);this.showMessage({title:s,status:"danger"})}showResultMessage(t,s,i){var o;if(t.length===0){const a=s.length;if(a===0)return;const c=i===ze.COPY?this.$ngettext("%{count} item was copied successfully","%{count} items were copied successfully",a):this.$ngettext("%{count} item was moved successfully","%{count} items were moved successfully",a),l=this.$gettextInterpolate(c,{count:a},!0);this.showMessage({title:l,status:"success"});return}let n=this.$gettextInterpolate(i===ze.COPY?this.$gettext("Failed to copy %{count} resources"):this.$gettext("Failed to move %{count} resources"),{count:t.length},!0);t.length===1&&(n=this.$gettextInterpolate(i===ze.COPY?this.$gettext('Failed to copy "%{name}"'):this.$gettext('Failed to move "%{name}"'),{name:(o=t[0])==null?void 0:o.resourceName},!0)),this.showMessage({title:n,status:"danger"})}async perform(t){if(this.hasRecursion())return this.showRecursionErrorMessage(),[];if(this.sourceSpace.id!==this.targetSpace.id&&t===ze.MOVE){if(!await this.resolveDoCopyInsteadOfMoveForSpaces())return[];t=ze.COPY}const s=(await this.clientService.webdav.listFiles(this.targetSpace,this.targetFolder)).children,i=await this.resolveAllConflicts(this.resourcesToMove,this.targetFolder,s);return this.loadingService.addTask(({setProgress:n})=>this.moveResources(i,s,t,{setProgress:n}),{indeterminate:t===ze.COPY})}async moveResources(t,s,i,{setProgress:n}){var c;const o=[],a=[];for(let[l,u]of this.resourcesToMove.entries()){u={...u};const p=t.some(g=>g.resource.id===u.id);let m=u.name,h=!1;if(p){const g=(c=t.find(f=>f.resource.id===u.id))==null?void 0:c.strategy;if(g===Pe.SKIP)continue;g===Pe.REPLACE&&(h=!0),g===Pe.KEEP_BOTH&&(m=Lt(u.name,u.extension,[...o,...s]),u.name=m)}try{if(Co(this.sourceSpace,u,this.targetSpace,this.targetFolder)&&h)continue;i===ze.COPY?(await this.clientService.webdav.copyFiles(this.sourceSpace,u,this.targetSpace,{path:Ke(this.targetFolder.path,m)},{overwrite:h}),u.id=void 0,u.fileId=void 0):i===ze.MOVE&&await this.clientService.webdav.moveFiles(this.sourceSpace,u,this.targetSpace,{path:Ke(this.targetFolder.path,m)},{overwrite:h}),u.path=Ke(this.targetFolder.path,u.name),u.webDavPath=Ke(this.targetFolder.webDavPath,u.name),o.push(u)}catch(g){console.error(g),g.resourceName=u.name,a.push(g)}finally{n({total:this.resourcesToMove.length,current:l+1})}}return this.showResultMessage(a,o,i),o}}class Fo extends Bs{constructor(t,s,i,n,o,a,c,l,u,p,m,h,g,f,v,F){super(m,h,g,f,v,F),this.filesToUpload=t,this.currentFiles=s,this.inputFilesToUppyFiles=i,this.$uppyService=n,this.space=o,this.currentFolder=a,this.currentFolderId=c,this.spaces=l,this.hasSpaces=u,this.createDirectoryTree=p}perform(){const t=this.inputFilesToUppyFiles(this.filesToUpload);if(this.checkQuotaExceeded(t))return this.$uppyService.clearInputs();const i=this.getConflicts(t);if(i.length)return this.displayOverwriteDialog(t,i);this.handleUppyFileUpload(this.space,this.currentFolder,t)}getConflicts(t){const s=[];for(const i of t){const n=i.meta.relativePath;if(n){const a=n.replace(/^\/+/,"").split("/")[0];if(this.currentFiles.find(l=>l.name===a)){if(s.some(l=>l.name===a))continue;s.push({name:a,type:"folder"});continue}}this.currentFiles.find(a=>a.name===i.name&&!i.meta.relativeFolder)&&s.push({name:i.name,type:"file"})}return s}async handleUppyFileUpload(t,s,i){this.$uppyService.publish("uploadStarted");const n=await this.createDirectoryTree(t,s,i,this.currentFolderId);let o=i;n.failed.length&&(o=i.filter(l=>!n.failed.some(u=>l.meta.relativeFolder.startsWith(u))));const a=this.$uppyService.getFailedFiles(),c=[];for(const l of a){const u=o.find(p=>p.meta.uppyId===l.meta.uppyId);u&&(u.meta.uploadId=l.meta.uploadId,c.push(u))}o.length&&this.$uppyService.publish("addedForUpload",o);for(const l of c)this.$uppyService.retryUpload(l.meta.uppyId),o=o.filter(u=>u.meta.uppyId!==l.meta.uppyId);o.length&&this.$uppyService.uploadFiles(o),!o.length&&!c.length&&this.$uppyService.publish("uploadCompleted",{successful:[]})}async displayOverwriteDialog(t,s){let i=0,n=0;const o=[],a=[];let c=!1,l,u=!1,p;for(const v of s){const F=v.type==="folder",S=F?a:o;if(c&&!F){S.push({name:v.name,strategy:l});continue}if(u&&F){S.push({name:v.name,strategy:p});continue}const E=s.filter(N=>N.type===v.type).length-(F?n:i),L=await this.resolveFileExists({name:v.name,isFolder:F},E,E===1,F,!0);F?n++:i++,L.doForAllConflicts&&(F?(u=!0,p=L.strategy):(c=!0,l=L.strategy)),S.push({name:v.name,strategy:L.strategy})}const m=o.filter(v=>v.strategy===Pe.SKIP).map(v=>v.name),h=a.filter(v=>v.strategy===Pe.SKIP).map(v=>v.name);t=t.filter(v=>!m.includes(v.name)),t=t.filter(v=>!h.some(F=>v.meta.relativeFolder.split("/")[1]===F));const g=o.filter(v=>v.strategy===Pe.KEEP_BOTH).map(v=>v.name),f=a.filter(v=>v.strategy===Pe.KEEP_BOTH).map(v=>v.name);for(const v of g){const F=t.find(E=>E.name===v&&!E.meta.relativeFolder),S=Yt({name:v});F.name=Lt(v,S,this.currentFiles)}for(const v of f){const F=t.filter(S=>S.meta.relativeFolder.split("/")[1]===v);for(const S of F){const E=Lt(v,"",this.currentFiles);S.meta.relativeFolder=S.meta.relativeFolder.replace(new RegExp(`/${v}`),`/${E}`),S.meta.relativePath=S.meta.relativePath.replace(new RegExp(`/${v}/`),`/${E}/`),S.meta.tusEndpoint=S.meta.tusEndpoint.replace(new RegExp(`/${v}`),`/${E}`)}}if(t.length===0)return this.$uppyService.clearInputs();this.handleUppyFileUpload(this.space,this.currentFolder,t)}checkQuotaExceeded(t){if(!this.hasSpaces)return!1;let s=!1;return t.reduce((n,o)=>{let a;if(o.meta.routeName===Gn.name||(o.meta.routeName===Yn.name&&(a=this.spaces.find(p=>p.id===o.meta.spaceId)),!a||St(a)))return n;const c=this.currentFiles.find(p=>!o.meta.relativeFolder&&p.name===o.name),l=c?Number(c.size):0,u=n.find(p=>p.space.id===a.id);return u?(u.uploadSize=o.data.size-l,n):(n.push({space:a,uploadSize:o.data.size-l}),n)},[]).forEach(({space:n,uploadSize:o})=>{if(n.spaceQuota.remaining&&n.spaceQuota.remaining<o){let a=n.name;n.driveType==="personal"&&(a=this.$gettext("Personal"));const c=this.$gettext("There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files");this.showMessage({title:this.$gettext("Not enough quota"),desc:this.$gettextInterpolate(c,{spaceName:a,missingSpace:ja((n.spaceQuota.remaining-o)*-1)}),status:"danger"}),s=!0}}),s}}var ze=(e=>(e[e.COPY=0]="COPY",e[e.MOVE=1]="MOVE",e))(ze||{});const Us=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s,interpolate:i}=J(),n=ne(),o=Ve(),a=fn(),c=(m,h,g=void 0)=>{const f=m.path.substring(0,m.path.length-m.name.length)+h;if(!h)return e.dispatch("setModalInputErrorMessage",s("The name cannot be empty"));if(/[/]/.test(h))return e.dispatch("setModalInputErrorMessage",s('The name cannot contain "/"'));if(h===".")return e.dispatch("setModalInputErrorMessage",s('The name cannot be equal to "."'));if(h==="..")return e.dispatch("setModalInputErrorMessage",s('The name cannot be equal to ".."'));if(/\s+$/.test(h))return e.dispatch("setModalInputErrorMessage",s("The name cannot end with whitespace"));if(e.getters["Files/files"].find(F=>F.path===f&&m.name!==h)){const F=s('The name "%{name}" is already taken');return e.dispatch("setModalInputErrorMessage",i(F,{name:h},!0))}if(g&&g.find(S=>S.path===f&&m.name!==h)){const S=s('The name "%{name}" is already taken');return e.dispatch("setModalInputErrorMessage",i(S,{name:h},!0))}e.dispatch("setModalInputErrorMessage",null)},l=async(m,h,g)=>{e.dispatch("toggleModalConfirmButton");let f=e.getters["Files/currentFolder"];try{const v=Ke(it(h.path),g);await n.webdav.moveFiles(m,h,m,{path:v}),e.dispatch("hideModal");const F=ns(h,f);if(St(m)&&h.isReceivedShare()){if(m.rename(g),F)return f={...f},f.name=g,e.commit("Files/SET_CURRENT_FOLDER",f),t.push(Ee(m,{path:"",fileId:h.fileId}));const E={...h};E.name=g,e.commit("Files/UPSERT_RESOURCE",E);return}if(F)return f={...f},oi(m,f,v),e.commit("SET_CURRENT_FOLDER",f),t.push(Ee(m,{path:v,fileId:h.fileId}));const S={...h};oi(m,S,v),e.commit("Files/UPSERT_RESOURCE",S)}catch(v){console.error(v),e.dispatch("toggleModalConfirmButton");let F=s('Failed to rename "%{file}" to "%{newName}"');v.statusCode===423&&(F=s('Failed to rename "%{file}" to "%{newName}" - the file is locked'));const S=i(F,{file:h.name,newName:g},!0);e.dispatch("showMessage",{title:S,status:"danger"})}},u=async({space:m,resources:h})=>{const g=e.getters["Files/currentFolder"];let f;if(ns(h[0],g)){const R=it(g.path);f=(await n.webdav.listFiles(m,{path:R})).children}const v=e.state.Files.areFileExtensionsShown,F=R=>(v||(R=`${R}.${h[0].extension}`),l(m,h[0],R)),S=R=>{v||(R=`${R}.${h[0].extension}`),c(h[0],R,f)},E=Es(h[0]),L=!h[0].isFolder&&!v?E:h[0].name,N=i(h[0].isFolder?s("Rename folder %{name}"):s("Rename file %{name}"),{name:L}),x=!h[0].isFolder&&!v?E:h[0].name,O=h[0].isFolder||!v?null:[0,E.length],Q={variation:"passive",title:N,cancelText:s("Cancel"),confirmText:s("Rename"),hasInput:!0,inputValue:x,inputSelectionRange:O,inputLabel:h[0].isFolder?s("Folder name"):s("File name"),onCancel:()=>e.dispatch("hideModal"),onConfirm:R=>o.addTask(()=>F(R)),onInput:S};e.dispatch("createModal",Q)};return{actions:_(()=>[{name:"rename",icon:"pencil",label:()=>s("Rename"),handler:u,isEnabled:({resources:m})=>me(t,"files-trash-generic")||ue(t,"files-shares-with-me")&&!r(a)||m.length!==1||m.some(f=>f.shareId&&f.path==="/")?!1:!m.some(f=>!f.canRename()),componentType:"button",class:"oc-files-actions-rename-trigger"}]),checkNewName:c,renameResource:l}},_o=850,Ao=W({components:{ContextMenuQuickAction:Yi},props:{resources:{type:Array,required:!0},resourceDomSelector:{type:Function,required:!1,default:e=>ds(e.id)},arePathsDisplayed:{type:Boolean,required:!1,default:!1},areThumbnailsDisplayed:{type:Boolean,required:!1,default:!0},selectedIds:{type:Array,default:()=>[]},hasActions:{type:Boolean,required:!1,default:!0},targetRouteCallback:{type:Function,required:!1,default:void 0},areResourcesClickable:{type:Boolean,required:!1,default:!0},headerPosition:{type:Number,required:!1,default:0},isSelectable:{type:Boolean,required:!1,default:!0},disabled:{type:[String,Array],required:!1,default:null},paddingX:{type:String,required:!1,default:"small",validator:e=>/(xsmall|small|medium|large|xlarge)/.test(e)},dragDrop:{type:Boolean,required:!1,default:!1},viewMode:{type:String,default:re.defaultModeName},hover:{type:Boolean,required:!1,default:!0},sortBy:{type:String,required:!1,default:void 0},fieldsDisplayed:{type:Array,required:!1,default:null},sortDir:{type:String,required:!1,default:void 0,validator:e=>e===void 0||[ke.Asc.toString(),ke.Desc.toString()].includes(e)},space:{type:Object,required:!1,default:null}},emits:["fileClick","sort","rowMounted",ni,"update:selectedIds","update:modelValue"],setup(e,t){const s=q(),i=_(()=>s.getters["runtime/spaces/spaces"]),{width:n}=Na(),o=_(()=>Is().value&&n.value>=_o),a=ca({space:Z(e.space),spaces:i,targetRouteCallback:_(()=>e.targetRouteCallback)},t),{actions:c}=Us(),l=_(()=>r(c)[0].handler);return{getTagToolTip:p=>p.length>7?p:"",renameActions:c,renameHandler:l,resourceRouteResolver:a,ViewModeConstants:re,hasTags:o,hasShareJail:we(),hasProjectSpaces:Ts(),isUserContext:Gi({store:s})}},data(){return{constants:{ImageDimension:qe,EVENT_TROW_MOUNTED:xn}}},computed:{...ee(["configuration"]),...De("Files",["areFileExtensionsShown","latestSelectedId","clipboardResources","clipboardAction"]),...De("runtime/spaces",["spaces"]),fields(){if(this.resources.length===0)return[];const e=this.resources[0],t=[];this.isSelectable&&t.push({name:"select",title:"",type:"slot",headerType:"slot",width:"shrink"});const s=ua(e);return t.push(...[{name:"name",title:this.$gettext("Name"),type:"slot",width:"expand",wrap:"truncate"},{name:"indicators",title:this.$gettext("Shares"),type:"slot",alignH:"right",wrap:"nowrap"},{name:"size",title:this.$gettext("Size"),type:"slot",alignH:"right",wrap:"nowrap"},{name:"status",title:this.$gettext("Status"),type:"slot",alignH:"right",wrap:"nowrap"},this.hasTags?{name:"tags",title:this.$gettext("Tags"),type:"slot",alignH:"right",wrap:"nowrap"}:{},{name:"owner",title:this.$gettext("Shared by"),type:"slot",alignH:"right",wrap:"nowrap"},{name:"sharedWith",title:this.$gettext("Shared with"),type:"slot",alignH:"right",wrap:"nowrap"},{name:"mdate",title:this.$gettext("Modified"),type:"slot",alignH:"right",wrap:"nowrap",accessibleLabelCallback:i=>this.formatDateRelative(i.mdate)+" ("+this.formatDate(i.mdate)+")"},{name:"sdate",title:this.$gettext("Shared on"),type:"slot",alignH:"right",wrap:"nowrap",accessibleLabelCallback:i=>this.formatDateRelative(i.sdate)+" ("+this.formatDate(i.sdate)+")"},{name:"ddate",title:this.$gettext("Deleted"),type:"slot",alignH:"right",wrap:"nowrap",accessibleLabelCallback:i=>this.formatDateRelative(i.ddate)+" ("+this.formatDate(i.ddate)+")"}].filter(i=>{const n=Object.prototype.hasOwnProperty.call(e,i.name);return this.fieldsDisplayed?n&&this.fieldsDisplayed.includes(i.name):n}).map(i=>{const n=s.find(o=>o.name===i.name);return n&&Object.assign(i,{sortable:n.sortable,sortDir:n.sortDir}),i})),this.hasActions&&t.push({name:"actions",title:this.$gettext("Actions"),type:"slot",alignH:"right",wrap:"nowrap"}),t},lazyLoading(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.displayResourcesLazy},areAllResourcesSelected(){return this.selectedResources.length===this.resources.length},selectedResources(){return this.resources.filter(e=>this.selectedIds.includes(e.id))},allResourcesCheckboxLabel(){return this.$gettext("Select all resources")},contextMenuLabel(){return this.$gettext("Show context menu")},hoverableQuickActions(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.hoverableQuickActions}},methods:{...pe("Files",["toggleFileSelection"]),isResourceSelected(e){return this.selectedIds.includes(e.id)},isResourceCut(e){return this.clipboardAction!==bt.Cut?!1:this.clipboardResources.some(t=>t.id===e.id)},shouldDisplayThumbnails(e){return this.areThumbnailsDisplayed&&!da(e)},getTagLink(e){return Ms("files-common-search",{query:{term:`Tags:"${e}"`,provider:"files.sdk"}})},getTagComponentAttrs(e){return this.isUserContext?{to:this.getTagLink(e)}:{}},isLatestSelectedItem(e){return e.id===this.latestSelectedId},hasRenameAction(e){return this.renameActions.filter(t=>t.isEnabled({space:this.space,resources:[e]})).length},openRenameDialog(e){this.renameHandler({space:this.resourceRouteResolver.getMatchingSpace(e),resources:[e]})},openTagsSidebar(){Y.publish(_e.open)},openSharingSidebar(e){var s;let t;e.type==="space"?t="space-share":((s=e.share)==null?void 0:s.shareType)===B.link.value?t="sharing#linkShares":t="sharing#peopleShares",Y.publish(_e.openWithPanel,t)},folderLink(e){return this.resourceRouteResolver.createFolderLink({path:e.path,fileId:e.fileId,resource:e})},parentFolderLink(e){return e.shareId&&e.path==="/"?dt("files-shares-with-me"):he(e)?be("files-spaces-projects"):this.resourceRouteResolver.createFolderLink({path:it(e.path),...e.parentFolderId&&{fileId:e.parentFolderId},resource:e})},fileDragged(e){this.addSelectedResource(e)},fileDropped(e){this.$emit(ni,e)},sort(e){this.$emit("sort",e)},addSelectedResource(e){this.isResourceSelected(e)||this.toggleFileSelection(e)},showContextMenuOnBtnClick(e,t){const{dropdown:s,event:i}=e;(s==null?void 0:s.tippy)!==void 0&&(this.isResourceSelected(t)||this.emitSelect([t.id]),as(s.tippy,i,this.$refs.contextMenuButton))},showContextMenu(e,t,s){t.preventDefault();const i=e.$el.getElementsByClassName("resource-table-btn-action-dropdown")[0];i!==void 0&&(this.isResourceSelected(s)||this.emitSelect([s.id]),as(i._tippy,t,this.$refs.contextMenuButton))},rowMounted(e,t){this.$emit("rowMounted",e,t,this.constants.ImageDimension.Thumbnail)},fileClicked(e){var a,c,l;const t=e[0],s=e[1],i=(a=e[2])!=null?a:!1,n=(s==null?void 0:s.target.getAttribute("type"))==="checkbox";if(((l=(c=s==null?void 0:s.target)==null?void 0:c.closest("div"))==null?void 0:l.id)!=="oc-files-context-menu"){if(s&&s.metaKey)return Y.publish("app.files.list.clicked.meta",t);if(s&&s.shiftKey)return Y.publish("app.files.list.clicked.shift",{resource:t,skipTargetSelection:i});if(!n)return this.emitSelect([t.id])}},formatDate(e){return In(new Date(e),this.$language.current)},formatDateRelative(e){return Rn(new Date(e),this.$language.current)},setSelection(e,t){e?this.emitSelect([...this.selectedIds,t.id]):this.emitSelect(this.selectedIds.filter(s=>s!==t.id))},emitSelect(e){Y.publish("app.files.list.clicked"),this.$emit("update:selectedIds",e)},toggleSelectionAll(){if(this.areAllResourcesSelected)return this.emitSelect([]);this.emitSelect(this.resources.map(e=>e.id))},emitFileClick(e){let t=this.resourceRouteResolver.getMatchingSpace(e);t||(t=Oe({shareId:e.shareId,shareName:e.name,serverUrl:Re.serverUrl})),this.$emit("fileClick",{space:t,resources:[e]})},isResourceClickable(e){return this.areResourcesClickable?Array.isArray(this.disabled)?!this.disabled.includes(e):this.disabled!==e:!1},getResourceCheckboxLabel(e){return e.type==="folder"?this.$gettext("Select folder"):this.$gettext("Select file")},getSharedWithAvatarDescription(e){const t=e.type==="folder"?this.$gettext("folder"):this.$gettext("file"),s=e.sharedWith.filter(c=>!c.link).length,i=e.sharedWith.filter(c=>!!c.link).length,n=s>0?this.$ngettext("This %{ resourceType } is shared via %{ shareCount } invite","This %{ resourceType } is shared via %{ shareCount } invites",s):"",o=i>0?this.$ngettext("This %{ resourceType } is shared via %{ linkCount } link","This %{ resourceType } is shared via %{ linkCount } links",i):"",a=[n,o].join(" ");return this.$gettextInterpolate(a,{resourceType:t,shareCount:s,linkCount:i})},getOwnerAvatarDescription(e){const t=this.$gettext("This %{ resourceType } is owned by %{ ownerName }"),s=e.type==="folder"?this.$gettext("folder"):this.$gettext("file");return this.$gettextInterpolate(t,{resourceType:s,ownerName:e.owner[0].displayName})},getDefaultParentFolderName(e){if(this.hasProjectSpaces){if(he(e))return this.$gettext("Spaces");const t=this.resourceRouteResolver.getMatchingSpace(e);if((t==null?void 0:t.driveType)==="project")return t.name}return this.hasShareJail?e.shareId?e.path==="/"?this.$gettext("Shared with me"):at(e.shareRoot):this.resourceRouteResolver.getInternalSpace(e.storageId)?this.$gettext("Personal"):this.$gettext("Shared with me"):this.$gettext("All files and folders")}}});const $o={class:"resource-table-select-all"},Do={class:"oc-text-truncate"},Eo=["textContent"],To=["textContent"],Io=["textContent"],Ro={class:"resource-table-actions"};function Lo(e,t,s,i,n,o){const a=y("oc-checkbox"),c=y("oc-resource"),l=y("oc-icon"),u=y("oc-button"),p=y("oc-resource-size"),m=y("oc-tag"),h=y("oc-status-indicators"),g=y("oc-avatars"),f=y("context-menu-quick-action"),v=y("oc-table"),F=ce("oc-tooltip");return d(),$(v,{class:oe([e.hoverableQuickActions&&"hoverable-quick-actions",{condensed:e.viewMode===e.ViewModeConstants.condensedTable.name}]),data:e.resources,fields:e.fields,highlighted:e.selectedIds,disabled:e.disabled,sticky:!0,"header-position":e.headerPosition,"drag-drop":e.dragDrop,hover:e.hover,"item-dom-selector":e.resourceDomSelector,selection:e.selectedResources,"sort-by":e.sortBy,"sort-dir":e.sortDir,lazy:e.lazyLoading,"padding-x":"medium",onHighlight:e.fileClicked,onRowMounted:e.rowMounted,onContextmenuClicked:e.showContextMenu,onItemDropped:e.fileDropped,onItemDragged:e.fileDragged,onSort:e.sort,"onUpdate:modelValue":t[0]||(t[0]=S=>e.$emit("update:modelValue",S))},Ma({selectHeader:A(()=>[C("div",$o,[w(a,{id:"resource-table-select-all",size:"large",label:e.allResourcesCheckboxLabel,"hide-label":!0,"model-value":e.areAllResourcesSelected,"onUpdate:modelValue":e.toggleSelectionAll},null,8,["label","model-value","onUpdate:modelValue"])])]),select:A(({item:S})=>[w(a,{id:`resource-table-select-${e.resourceDomSelector(S)}`,label:e.getResourceCheckboxLabel(S),"hide-label":!0,size:"large","model-value":e.isResourceSelected(S),outline:e.isLatestSelectedItem(S),"onUpdate:modelValue":E=>e.setSelection(E,S),onClick:lt(E=>e.fileClicked([S,E,!0]),["stop"])},null,8,["id","label","model-value","outline","onUpdate:modelValue","onClick"])]),name:A(({item:S})=>[C("div",{class:oe(["resource-table-resource-wrapper",[{"resource-table-resource-wrapper-limit-max-width":e.hasRenameAction(S)}]])},[(d(),$(c,{key:`${S.path}-${e.resourceDomSelector(S)}-${S.thumbnail}`,resource:S,"is-path-displayed":e.arePathsDisplayed,"parent-folder-name-default":e.getDefaultParentFolderName(S),"is-thumbnail-displayed":e.shouldDisplayThumbnails(S),"is-extension-displayed":e.areFileExtensionsShown,"is-resource-clickable":e.isResourceClickable(S.id),"folder-link":e.folderLink(S),"parent-folder-link":e.parentFolderLink(S),class:oe({"resource-table-resource-cut":e.isResourceCut(S)}),onClick:E=>e.emitFileClick(S)},null,8,["resource","is-path-displayed","parent-folder-name-default","is-thumbnail-displayed","is-extension-displayed","is-resource-clickable","folder-link","parent-folder-link","class","onClick"])),b(),e.hasRenameAction(S)?(d(),$(u,{key:0,class:"resource-table-edit-name",appearance:"raw",onClick:E=>e.openRenameDialog(S)},{default:A(()=>[w(l,{name:"edit-2","fill-type":"line",size:"small"})]),_:2},1032,["onClick"])):I("",!0)],2)]),status:A(({item:S})=>[We(e.$slots,"status",{resource:S})]),size:A(({item:S})=>[w(p,{size:S.size||Number.NaN},null,8,["size"])]),tags:A(({item:S})=>[(d(!0),k(X,null,fe(S.tags.slice(0,2),E=>(d(),$(Ei(e.isUserContext?"router-link":"span"),Be({key:E},e.getTagComponentAttrs(E),{class:"resource-table-tag-wrapper"}),{default:A(()=>[V((d(),$(m,{class:"resource-table-tag oc-ml-xs",rounded:!0,size:"small"},{default:A(()=>[w(l,{name:"price-tag-3",size:"small"}),b(),C("span",Do,D(E),1)]),_:2},1024)),[[F,e.getTagToolTip(E)]])]),_:2},1040))),128)),b(),S.tags.length>2?(d(),$(m,{key:0,size:"small",class:"resource-table-tag-more",onClick:e.openTagsSidebar},{default:A(()=>[b(`
        + `+D(S.tags.length-2),1)]),_:2},1032,["onClick"])):I("",!0)]),mdate:A(({item:S})=>[V(C("span",{tabindex:"0",textContent:D(e.formatDateRelative(S.mdate))},null,8,Eo),[[F,e.formatDate(S.mdate)]])]),indicators:A(({item:S})=>[S.indicators.length?(d(),$(h,{key:0,resource:S,indicators:S.indicators},null,8,["resource","indicators"])):I("",!0)]),sdate:A(({item:S})=>[V(C("span",{tabindex:"0",textContent:D(e.formatDateRelative(S.sdate))},null,8,To),[[F,e.formatDate(S.sdate)]])]),ddate:A(({item:S})=>[V(C("span",{tabindex:"0",textContent:D(e.formatDateRelative(S.ddate))},null,8,Io),[[F,e.formatDate(S.ddate)]])]),owner:A(({item:S})=>[w(u,{appearance:"raw-inverse",variation:"passive",onClick:E=>e.openSharingSidebar(S)},{default:A(()=>[w(g,{class:"resource-table-people",items:S.owner,"is-tooltip-displayed":!0,"accessible-description":e.getOwnerAvatarDescription(S)},null,8,["items","accessible-description"])]),_:2},1032,["onClick"])]),sharedWith:A(({item:S})=>[w(u,{appearance:"raw-inverse",variation:"passive",onClick:E=>e.openSharingSidebar(S)},{default:A(()=>[w(g,{class:"resource-table-people",items:S.sharedWith,stacked:!0,"max-displayed":3,"is-tooltip-displayed":!0,"accessible-description":e.getSharedWithAvatarDescription(S)},null,8,["items","accessible-description"])]),_:2},1032,["onClick"])]),actions:A(({item:S})=>[C("div",Ro,[We(e.$slots,"quickActions",{resource:S}),b(),w(f,{ref:"contextMenuButton",item:S,"resource-dom-selector":e.resourceDomSelector,class:"resource-table-btn-action-dropdown",onQuickActionClicked:E=>e.showContextMenuOnBtnClick(E,S)},{contextMenu:A(()=>[We(e.$slots,"contextMenu",{resource:S})]),_:2},1032,["item","resource-dom-selector","onQuickActionClicked"])])]),_:2},[e.$slots.footer?{name:"footer",fn:A(()=>[We(e.$slots,"footer")]),key:"0"}:void 0]),1032,["class","data","fields","highlighted","disabled","header-position","drag-drop","hover","item-dom-selector","selection","sort-by","sort-dir","lazy","onHighlight","onRowMounted","onContextmenuClicked","onItemDropped","onItemDragged","onSort"])}const Ft=K(Ao,[["render",Lo]]);async function ha(e,t,s,i,n){const o=Po(t);if(!o)throw new Error("invalid new share status");let a=await n.requests.ocs({service:"apps/files_sharing",action:`api/v1/shares/pending/${e.share.id}`,method:o});if(a.status!==200)throw new Error(a.statusText);if(parseInt(a.headers.get("content-length"))>0&&(a=await a.json(),a.ocs.data.length>0)){const c=a.ocs.data[0];return Qt([c],!0,s,i)[0]}return null}function Po(e){switch(e){case ye.accepted:return"POST";case ye.declined:return"DELETE";default:return null}}const qs=({store:e}={})=>{e=e||q();const t=ae(),{$ngettext:s}=J(),i=Ye(),n=we(),o=ne(),a=Ve(),c=async({resources:u})=>{const p=[],m=[],h=new xt({concurrency:4});if(u.forEach(g=>{m.push(h.add(async()=>{try{const f=await ha(g,ye.accepted,r(i),r(n),o.owncloudSdk);f&&e.commit("Files/UPDATE_RESOURCE",f)}catch(f){console.error(f),p.push(f)}}))}),await Promise.all(m),p.length===0){e.dispatch("Files/resetFileSelection"),se(t,"files-spaces-generic")&&e.dispatch("showMessage",{title:s("The selected share was accepted successfully","The selected shares were accepted successfully",u.length)});return}e.dispatch("showMessage",{title:s("Failed to accept the selected share.","Failed to accept selected shares.",u.length),status:"danger"})};return{actions:_(()=>[{name:"accept-share",icon:"check",handler:u=>a.addTask(()=>c(u)),label:({resources:u})=>s("Accept share","Accept shares",u.length),isEnabled:({space:u,resources:p})=>{var h;return!ue(t,"files-shares-with-me")&&!se(t,"files-spaces-generic")||p.length===0||se(t,"files-spaces-generic")&&(((h=r(u))==null?void 0:h.driveType)!=="share"||p.length>1||p[0].path!=="/")?!1:!p.some(g=>g.status===ye.accepted)},componentType:"button",class:"oc-files-actions-accept-share-trigger"}])}},xo=({store:e}={})=>{e=e||_s();const{$gettext:t}=J(),s=()=>{e.commit("Files/RESET_SELECTION")};return{actions:_(()=>[{name:"clear-selection",icon:"close",label:()=>t("Clear selection"),hideLabel:!0,handler:s,isEnabled:({resources:n})=>n.length>0,componentType:"button",class:"oc-files-actions-clear-selection-trigger"}])}},Vs=({store:e}={})=>{e=e||q();const t=ae(),s=J(),{$pgettext:i}=s,n=_(()=>window.navigator.platform.match("Mac")),o=_(()=>r(n)?i("Keyboard shortcut for macOS for copying files","⌘ + C"):i("Keyboard shortcut for non-macOS systems for copying files","Ctrl + C")),a=({space:l,resources:u})=>{e.dispatch("Files/copySelectedFiles",{...s,space:l,resources:u})};return{actions:_(()=>[{name:"copy",icon:"file-copy-2",handler:a,shortcut:r(o),label:()=>i("Action in the files list row to initiate copying resources","Copy"),isEnabled:({resources:l})=>!se(t,"files-spaces-generic")&&!Ae(t,"files-public-link")&&!Ne(t,"files-common-favorites")||se(t,"files-spaces-projects")||l.length===0?!1:Ae(t,"files-public-link")?e.getters["Files/currentFolder"].canCreate():!0,componentType:"button",class:"oc-files-actions-copy-trigger"}])}},ks=async e=>{var N,x,O,Q,R,G,T,P,j;const{clientService:t,resource:s,store:i,password:n,language:o,ability:a}=e,{$gettext:c}=o,l=a.can("create-all","PublicLink"),u=(N=i.state.user.capabilities.files_sharing)==null?void 0:N.resharing,p=((O=(x=i.state.user.capabilities.files_sharing)==null?void 0:x.quick_link)==null?void 0:O.default_role)||is.name,m=((R=(Q=i.state.user.capabilities.files_sharing)==null?void 0:Q.public)==null?void 0:R.can_edit)||!1,h=((T=(G=i.state.user.capabilities.files_sharing)==null?void 0:G.public)==null?void 0:T.can_contribute)||!1,g=(j=(P=i.state.user.capabilities.files_sharing)==null?void 0:P.public)==null?void 0:j.alias,f=l?p||is.name:As.name,v=yt.getByName(f,s.isFolder,m,h,g).bitmask(u),F={name:c("Link"),permissions:v.toString(),quicklink:!0};n&&(F.password=n);const S=i.state.user.capabilities.files_sharing.public.expire_date;S.enforced&&(F.expireDate=Ce.now().plus({days:parseInt(S.days,10)}).endOf("day").toISO()),F.spaceRef=s.fileId||s.id;const E=await i.dispatch("Files/addLink",{path:s.path,client:t.owncloudSdk,params:F,storageId:s.fileId||s.id}),{copy:L}=rs({legacy:!0});return L(E.url),await i.dispatch("showMessage",{title:c("The link has been copied to your clipboard.")}),E},ma=({resource:e,sharedAncestor:t,matchingSpace:s})=>{if(e.shareId){if(e.path==="")return{};const i=Oe({shareId:e.shareId,shareName:(s==null?void 0:s.name)||at(e.shareRoot),serverUrl:Re.serverUrl});return be("files-spaces-generic",Ee(i,{path:t.path,fileId:t.id}))}return s?be("files-spaces-generic",Ee(s,{path:t.path,fileId:t.id})):{}};function os(e,t){const{capabilities:s}=t.state.user;return!s.files_sharing||!s.files_sharing.api_enabled||e.isReceivedShare()&&!s.files_sharing.resharing?!1:e.canShare()}function ws({$gettext:e,store:t},s){const i={variation:"passive",title:e("Set password"),cancelText:e("Cancel"),confirmText:e("Set"),hasInput:!0,inputDescription:e("Passwords for links are required."),inputLabel:e("Password"),inputType:"password",onCancel:()=>t.dispatch("hideModal"),onConfirm:async n=>{!n||n.trim()===""?t.dispatch("showMessage",{title:e("Password cannot be empty"),status:"danger"}):(await t.dispatch("hideModal"),s(n))},onInput:n=>n.trim()===""?t.dispatch("setModalInputErrorMessage",e("Password cannot be empty")):t.dispatch("setModalInputErrorMessage",null)};return t.dispatch("createModal",i)}const Wt={collaborators:{id:"collaborators",label:e=>e("Add people"),icon:"user-add",iconFillType:void 0,handler:()=>Y.publish(_e.openWithPanel,"sharing#peopleShares"),displayed:os},quicklink:{id:"quicklink",label:e=>e("Copy link"),icon:"link",iconFillType:void 0,handler:async({ability:e,clientService:t,item:s,language:i,store:n})=>{var a,c,l,u,p;if(((p=(u=(l=(c=(a=n.getters.capabilities)==null?void 0:a.files_sharing)==null?void 0:c.public)==null?void 0:l.password)==null?void 0:u.enforced_for)==null?void 0:p.read_only)===!0)return ws({store:n,$gettext:i.$gettext},async m=>{await ks({ability:e,clientService:t,language:i,password:m,resource:s,store:n})});await ks({ability:e,clientService:t,language:i,resource:s,store:n})},displayed:os}},jo=({store:e}={})=>{e=e||q();const t=ae(),s=J(),{$gettext:i}=s,n=Nt(),o=ne(),a=async({space:l,resources:u})=>{const[p]=u;await ks({clientService:o,resource:p,storageId:(l==null?void 0:l.id)||(p==null?void 0:p.fileId)||(p==null?void 0:p.id),store:e,language:s,ability:n})};return{actions:_(()=>[{name:"create-quicklink",icon:Wt.quicklink.icon,iconFillType:Wt.quicklink.iconFillType,label:()=>i("Copy link"),handler:a,isEnabled:({resources:l})=>l.length!==1||ue(t,"files-shares-with-me")&&l[0].status!==ye.accepted?!1:os(l[0],e),componentType:"button",class:"oc-files-actions-create-quicklink-trigger"}])}},Hs=({store:e}={})=>{e=e||q();const t=ae(),{$ngettext:s}=J(),i=Ye(),n=we(),o=ne(),a=Ve(),c=async({resources:u})=>{const p=[],m=[],h=new xt({concurrency:4});if(u.forEach(g=>{m.push(h.add(async()=>{try{const f=await ha(g,ye.declined,r(i),r(n),o.owncloudSdk);f&&e.commit("Files/UPDATE_RESOURCE",f)}catch(f){console.error(f),p.push(f)}}))}),await Promise.all(m),p.length===0){e.dispatch("Files/resetFileSelection"),se(t,"files-spaces-generic")&&(e.dispatch("showMessage",{title:s("The selected share was declined successfully","The selected shares were declined successfully",u.length)}),t.push(dt("files-shares-with-me")));return}e.dispatch("showMessage",{title:s("Failed to decline the selected share","Failed to decline selected shares",u.length),status:"danger"})};return{actions:_(()=>[{name:"decline-share",icon:"spam-3",handler:u=>a.addTask(()=>c(u)),label:({resources:u})=>s("Decline share","Decline shares",u.length),isEnabled:({space:u,resources:p})=>!ue(t,"files-shares-with-me")&&!se(t,"files-spaces-generic")||p.length===0||se(t,"files-spaces-generic")&&((u==null?void 0:u.driveType)!=="share"||p.length>1||p[0].path!=="/")?!1:!p.some(h=>h.status===ye.declined),componentType:"button",class:"oc-files-actions-decline-share-trigger"}])}};function No(e){if(e===void 0)throw new Error('cloneStateObject: cannot clone "undefined"');return JSON.parse(JSON.stringify(e))}const Mo=({store:e})=>{e=e||q();const t=ae(),s=J(),{$gettext:i,$ngettext:n,interpolate:o}=s,a=we(),c=jt(),l=ne(),u=Ve(),{owncloudSdk:p}=l,m=new xt({concurrency:4}),h=[],g=Z([]),f=ct("page","1"),v=_(()=>parseInt(Xe(r(f)))),F=ct("items-per-page","1"),S=_(()=>parseInt(Xe(r(F)))),E=_(()=>me(t,"files-trash-generic")),L=_(()=>No(r(g))),N=_(()=>{const P=r(L),j=P[0].type==="folder";let H=null;return P.length===1?(j?H=r(E)?i("Permanently delete folder %{name}"):i("Delete folder %{name}"):H=r(E)?i("Permanently delete file %{name}"):i("Delete file %{name}"),o(H,{name:P[0].name},!0)):(H=r(E)?n("Permanently delete selected resource?","Permanently delete %{amount} selected resources?",P.length):n("Delete selected resource?","Delete %{amount} selected resources?",P.length),o(H,{amount:P.length},!1))}),x=_(()=>{const P=r(L),j=P[0].type==="folder";return P.length===1?j?r(E)?i("Are you sure you want to delete this folder? All it’s content will be permanently removed. This action cannot be undone."):i("Are you sure you want to delete this folder?"):r(E)?i("Are you sure you want to delete this file? All it’s content will be permanently removed. This action cannot be undone."):i("Are you sure you want to delete this file?"):r(E)?i("Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone."):i("Are you sure you want to delete all selected resources?")}),O=(P,j)=>{const H=r(a)?Rs(P.id):Os(e.getters.user.id);return p.fileTrash.clearTrashBin(H,j.id).then(()=>{e.dispatch("Files/removeFilesFromTrashbin",[j]);const z=i('"%{file}" was deleted successfully');e.dispatch("showMessage",{title:o(z,{file:j.name},!0)})}).catch(z=>{if(z.statusCode===423){const U=m.add(()=>O(P,j));h.push(U);return}console.error(z);const M=i('Failed to delete "%{file}"');e.dispatch("showMessage",{title:o(M,{file:j.name},!0),status:"danger"})})},Q=P=>{e.dispatch("toggleModalConfirmButton");for(const j of r(L)){const H=m.add(()=>O(P,j));h.push(H)}Promise.all(h).then(()=>{e.dispatch("hideModal"),e.dispatch("toggleModalConfirmButton")})},R=P=>u.addTask(j=>e.dispatch("Files/deleteFiles",{...s,space:P,files:r(L),clientService:l,loadingCallbackArgs:j}).then(async()=>{if(e.dispatch("hideModal"),e.dispatch("toggleModalConfirmButton"),se(t,"files-spaces-generic")&&!["public","share"].includes(P==null?void 0:P.driveType))if(r(c)){const U=await l.graphAuthenticated.drives.getDrive(r(L)[0].storageId);e.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:U.data.id,field:"spaceQuota",value:U.data.quota})}else{const M=await p.users.getUser(e.getters.user.id);e.commit("SET_QUOTA",M.quota)}if(r(g).length&&ns(r(g)[0],e.getters["Files/currentFolder"]))return t.push(Ee(P,{path:it(r(g)[0].path),fileId:r(g)[0].parentFolderId}));const H=e.getters["Files/activeFiles"].length,z=Math.ceil(r(H)/r(S));r(v)>1&&r(v)>z&&(f.value=z.toString())}),{indeterminate:!1}),G=P=>{e.dispatch("toggleModalConfirmButton"),r(E)?Q(P):R(P)};return{displayDialog:(P,j)=>{g.value=[...j];const H={variation:"danger",title:r(N),message:r(x),cancelText:i("Cancel"),confirmText:i("Delete"),onCancel:()=>{e.dispatch("hideModal")},onConfirm:()=>{G(P)}};e.dispatch("createModal",H)},filesList_delete:R}},Ks=({store:e}={})=>{e=e||q();const t=ae(),s=Mi(),{displayDialog:i}=Mo({store:e}),{$gettext:n}=J(),o=({space:c,resources:l})=>{i(c,l)};return{actions:_(()=>[{name:"delete",icon:"delete-bin-5",label:()=>n("Delete"),handler:o,isEnabled:({space:c,resources:l})=>!se(t,"files-spaces-generic")&&!Ae(t,"files-public-link")&&!Ne(t,"files-common-search")||l.length===0||se(t,"files-spaces-generic")&&(c==null?void 0:c.driveType)==="share"&&l[0].path==="/"?!1:!l.some(p=>!p.canBeDeleted()),componentType:"button",class:"oc-files-actions-delete-trigger"},{name:"delete-permanent",icon:"delete-bin-5",label:()=>n("Delete"),handler:o,isEnabled:({space:c,resources:l})=>!me(t,"files-trash-generic")||!r(s)||he(c)&&!c.isEditor(e.getters.user)&&!c.isManager(e.getters.user)?!1:l.length>0,componentType:"button",class:"oc-files-actions-delete-permanent-trigger"}])}},zo=e=>e==="files",Bt=()=>{const e=Ct();return _(()=>zo(Xn(r(e))))},Oo=()=>$s("$archiverService"),Ws=({store:e}={})=>{e=e||q();const t=ae(),s=Ve(),i=Oo(),{$ngettext:n,$gettext:o}=J(),a=Ls({store:e}),c=Bt(),l=({space:p,resources:m})=>{const h=i.fileIdsSupported?{fileIds:m.map(g=>g.fileId)}:{dir:vt.dirname(za(m).path)||"/",files:m.map(g=>g.name)};return i.triggerDownload({...h,...Vt(p)&&{publicToken:p.id,publicLinkPassword:r(a)}}).catch(g=>{console.error(g),e.dispatch("showMessage",{title:n("Failed to download the selected folder.","Failed to download the selected files.",m.length),status:"danger"})})};return{actions:_(()=>[{name:"download-archive",icon:"inbox-archive",handler:p=>s.addTask(()=>l(p)),label:()=>o("Download"),isEnabled:({resources:p})=>r(c)&&!se(t,"files-spaces-generic")&&!Ae(t,"files-public-link")&&!Ne(t,"files-common-favorites")&&!Ne(t,"files-common-search")&&!ue(t,"files-shares-with-me")&&!ue(t,"files-shares-with-others")&&!ue(t,"files-shares-via-link")||se(t,"files-spaces-projects")||p.length===0||p.length===1&&!p[0].isFolder||!i.available||!i.fileIdsSupported&&Ne(t,"files-common-favorites")?!1:!p.some(h=>!h.canDownload()),canBeDefault:!0,componentType:"button",class:"oc-files-actions-download-archive-trigger"}])}},Gs=()=>{const e=ae(),{$gettext:t}=J(),s=Bt(),i=ra(),{downloadFile:n}=oa(),o=({resources:c})=>{n(c[0])};return{actions:_(()=>[{name:"download-file",icon:"file-download",handler:o,label:()=>t("Download"),isEnabled:({resources:c})=>r(s)&&!r(i)&&!se(e,"files-spaces-generic")&&!Ae(e,"files-public-link")&&!Ne(e,"files-common-favorites")&&!Ne(e,"files-common-search")&&!ue(e,"files-shares-with-me")&&!ue(e,"files-shares-with-others")&&!ue(e,"files-shares-via-link")||c.length!==1||c[0].isFolder?!1:c[0].canDownload(),canBeDefault:!0,componentType:"button",class:"oc-files-actions-download-file-trigger"}])}},fa=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s,$pgettext:i}=J(),n=ne(),o=Ve(),a=we(),c=Mi(),l=({space:m})=>{const h=r(a)?Rs(m.id):Os(e.getters.user.id);return n.owncloudSdk.fileTrash.clearTrashBin(h).then(()=>{e.dispatch("showMessage",{title:s("All deleted files were removed")}),e.dispatch("Files/clearTrashBin")}).catch(g=>{console.error(g),e.dispatch("showMessage",{title:i("Error message in case emptying trash bin fails","Failed to empty trash bin"),status:"danger"})}).finally(()=>{e.dispatch("hideModal")})},u=({space:m})=>{const h={variation:"danger",title:s("Empty trash bin"),cancelText:s("Cancel"),confirmText:s("Delete"),message:s("Are you sure you want to permanently delete the listed items? You can’t undo this action."),hasInput:!1,onCancel:()=>e.dispatch("hideModal"),onConfirm:()=>o.addTask(()=>l({space:m}))};e.dispatch("createModal",h)};return{actions:_(()=>[{name:"empty-trash-bin",icon:"delete-bin-5",label:()=>s("Empty trash bin"),handler:u,isEnabled:({space:m,resources:h})=>!me(t,"files-trash-generic")||!r(c)||he(m)&&!m.isEditor(e.getters.user)&&!m.isManager(e.getters.user)?!1:h.length===0,isDisabled:({resources:m})=>e.getters["Files/activeFiles"].length===0,componentType:"button",class:"oc-files-actions-empty-trash-bin-trigger",variation:"danger"}]),emptyTrashBin:l}},ga=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s,interpolate:i}=J(),n=ne(),o=gn(),a=Bt(),c=({resources:u})=>{e.dispatch("Files/markFavorite",{client:n.owncloudSdk,file:u[0]}).catch(()=>{const p=s('Failed to change favorite state of "%{file}"'),m=i(p,{file:u[0].name},!0);e.dispatch("showMessage",{title:m,status:"danger"})})};return{actions:_(()=>[{name:"favorite",icon:"star",handler:c,label:({resources:u})=>u[0].starred?s("Remove from favorites"):s("Add to favorites"),isEnabled:({resources:u})=>r(a)&&!se(t,"files-spaces-generic")&&!Ne(t,"files-common-favorites")||u.length!==1?!1:r(o),componentType:"button",class:"oc-files-actions-favorite-trigger"}])}};function Bo(e,t){const s=e.isReceivedShare()||e.isMounted(),i=t===""&&s;return e.canBeDeleted()&&!i}const Ys=({store:e}={})=>{e=e||q();const t=ae(),s=J(),{$pgettext:i}=s,n=_(()=>window.navigator.platform.match("Mac")),o=_(()=>r(n)?i("Keyboard shortcut for macOS for cutting files","⌘ + X"):i("Keyboard shortcut for non-macOS systems for cutting files","Ctrl + X")),a=({space:l,resources:u})=>{e.dispatch("Files/cutSelectedFiles",{...s,space:l,resources:u})};return{actions:_(()=>[{name:"cut",icon:"scissors",handler:a,shortcut:r(o),label:()=>i("Action in the files list row to initiate cutting resources","Cut"),isEnabled:({resources:l})=>!se(t,"files-spaces-generic")&&!Ae(t,"files-public-link")&&!Ne(t,"files-common-favorites")||l.length===0||!e.getters["Files/currentFolder"]?!1:!l.some(p=>Bo(p,e.getters["Files/currentFolder"].path)===!1),componentType:"button",class:"oc-files-actions-move-trigger"}])}},ba=({store:e}={})=>{e=e||q();const t=ae(),{$pgettext:s}=J(),i=(a,c)=>{if(a)return a;const l=c.storageId;return a=e.getters["runtime/spaces/spaces"].find(u=>u.id===l),a||Oe({shareId:c.shareId,shareName:c.name,serverUrl:Re.serverUrl})},n=_(()=>Ae(t,"files-public-link")?Rt("files-public-link"):be("files-spaces-generic"));return{actions:_(()=>[{name:"navigate",icon:"folder-open",label:()=>s("Action in the files list row to open a folder","Open folder"),isEnabled:({resources:a})=>{if(me(t,"files-trash-generic")||a.length!==1)return!1;const c=e.getters["Files/currentFolder"];return!(c!==null&&ns(a[0],c)||!a[0].isFolder||a[0].type==="space"||ue(t,"files-shares-with-me")&&a[0].status!==ye.accepted)},canBeDefault:!0,componentType:"router-link",route:({space:a,resources:c})=>St(a)&&(ue(t,"files-shares-with-others")||ue(t,"files-shares-via-link"))?{name:"resolvePrivateLink",params:{fileId:c[0].fileId}}:Oa({},r(n),Ee(i(a,c[0]),{path:c[0].path,fileId:c[0].fileId})),class:"oc-files-actions-navigate-trigger"}])}},Uo=({store:e}={})=>{e=e||q();const t=ae(),s=ne(),i=Ve(),{$gettext:n,$pgettext:o,interpolate:a,$ngettext:c}=J(),l=_(()=>window.navigator.platform.match("Mac")),u=_(()=>r(l)?o("Keyboard shortcut for macOS for pasting files","⌘ + V"):o("Keyboard shortcut for non-macOS systems for pasting files","Ctrl + V")),p=({space:h})=>{e.dispatch("Files/pasteSelectedFiles",{targetSpace:h,clientService:s,loadingService:i,createModal:(...g)=>e.dispatch("createModal",...g),hideModal:(...g)=>e.dispatch("hideModal",...g),showMessage:(...g)=>e.dispatch("showMessage",...g),$gettext:n,$gettextInterpolate:a,$ngettext:c})};return{actions:_(()=>[{name:"paste",icon:"clipboard",handler:p,label:()=>o("Action in the files list row to initiate pasting resources","Paste"),shortcut:r(u),isEnabled:({resources:h})=>{if(e.getters["Files/clipboardResources"].length===0||!se(t,"files-spaces-generic")&&!Ae(t,"files-public-link")&&!Ne(t,"files-common-favorites")||h.length===0)return!1;const g=e.getters["Files/currentFolder"];return Ae(t,"files-public-link")?g.canCreate():!0},componentType:"button",class:"oc-files-actions-copy-trigger"}])}},Qs=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s,$ngettext:i,interpolate:n}=J(),o=ne(),a=Ve(),c=jt(),l=async(f,v)=>{const F={},S=[],E=[],L=[];for(const N of v){const x=it(N.path);let O=[];if(x in F)O=F[x];else{try{O=(await o.webdav.listFiles(f,{path:x})).children}catch{L.push(x)}F[x]=O}O.some(R=>R.name===N.name)||E.filter(R=>R.id!==N.id).some(R=>R.path===N.path)?S.push(N):E.push(N)}return{existingResourcesByPath:F,conflicts:S,resolvedResources:E,missingFolderPaths:L.filter(N=>{var x;return!((x=F[N])!=null&&x.length)})}},u=async f=>{let v=0;const F=[],S=f.length;let E=!1,L;for(const N of f){const x=N.type==="folder";if(E){F.push({resource:N,strategy:L});continue}const O=S-v,R=await new Bs((...G)=>e.dispatch("createModal",...G),(...G)=>e.dispatch("hideModal",...G),(...G)=>e.dispatch("showMessage",...G),s,i,n).resolveFileExists({name:N.name,isFolder:x},O,O<=1,!1);v++,R.doForAllConflicts&&(E=!0,L=R.strategy),F.push({resource:N,strategy:R.strategy})}return F},p=async(f,v,F)=>{const{webdav:S}=o,E=v.split("/").filter(Boolean);let L="";for(const N of E){const x=Ge(L,N);if(F.includes(x)){L=Ge(L,N);continue}try{await S.createFolder(f,{path:x})}catch{}F.push(x),L=x}return{existingPaths:F}},m=async(f,v,F,{setProgress:S})=>{const E=[],L=[];let N=[];for(const[x,O]of v.entries()){const Q=it(O.path);if(F.includes(Q)){const{existingPaths:R}=await p(f,Q,N);N=R}try{await o.webdav.restoreFile(f,O,O,{overwrite:!0}),E.push(O)}catch(R){console.error(R),L.push(O)}finally{S({total:v.length,current:x+1})}}if(E.length){e.dispatch("Files/removeFilesFromTrashbin",E);let x;const O={};E.length===1?(x=s("%{resource} was restored successfully"),O.resource=E[0].name):(x=s("%{resourceCount} files restored successfully"),O.resourceCount=E.length),e.dispatch("showMessage",{title:n(x,O,!0)})}if(L.length){let x;const O={};L.length===1?(x=s('Failed to restore "%{resource}"'),O.resource=L[0].name):(x=s("Failed to restore %{resourceCount} files"),O.resourceCount=L.length),e.dispatch("showMessage",{title:n(x,O,!0),status:"danger"})}if(r(c)){const O=await o.graphAuthenticated.drives.getDrive(f.id);e.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:O.data.id,field:"spaceQuota",value:O.data.quota})}else{const x=await o.owncloudSdk.users.getUser(e.getters.user.id);e.commit("SET_QUOTA",x.quota)}},h=async({space:f,resources:v})=>{const F=v.sort((R,G)=>R.path.length-G.path.length),{existingResourcesByPath:S,conflicts:E,resolvedResources:L,missingFolderPaths:N}=await l(f,F),x=await u(E),O=x.filter(R=>R.strategy===Pe.REPLACE).map(R=>R.resource);L.push(...O);const Q=x.filter(R=>R.strategy===Pe.KEEP_BOTH).map(R=>R.resource);for(let R of Q){R={...R};const G=it(R.path),T=S[G]||[],P=Yt(R),j=Lt(R.name,P,[...T,...x.map(H=>H.resource),...L]);R.name=j,R.path=Ge(G,j),L.push(R)}return a.addTask(({setProgress:R})=>m(f,L,N,{setProgress:R}),{indeterminate:!1})};return{actions:_(()=>[{name:"restore",icon:"arrow-go-back",label:()=>s("Restore"),handler:h,isEnabled:({space:f,resources:v})=>!me(t,"files-trash-generic")||!v.every(F=>F.canBeRestored())||he(f)&&!f.isEditor(e.getters.user)&&!f.isManager(e.getters.user)?!1:v.length>0,componentType:"button",class:"oc-files-actions-restore-trigger"}]),restoreResources:m}},qo=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s}=J(),i=ne(),n=Ve(),o=Mt(),a=async({space:l,resources:u})=>{const p=i.graphAuthenticated,m=l==null?void 0:l.id,h=u[0].path,g=`/.space/${u[0].name}`,{copyFiles:f,getFileInfo:v,createFolder:F}=i.webdav;try{try{await v(l,{path:".space"})}catch{await F(l,{path:".space"})}h!==g&&await f(l,{path:h},l,{path:g},{overwrite:!0});const S=await v(l,{path:g}),{data:E}=await p.drives.updateDrive(m,{special:[{specialFolder:{name:"image"},id:S.id}]},{});e.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:m,field:"spaceImageData",value:Kt(E).spaceImageData}),e.dispatch("showMessage",{title:s("Space image was set successfully")})}catch(S){console.error(S),e.dispatch("showMessage",{title:s("Failed to set space image"),status:"danger"})}};return{actions:_(()=>[{name:"set-space-image",icon:"image-edit",handler:l=>n.addTask(()=>a(l)),label:()=>s("Set as space image"),isEnabled:({space:l,resources:u})=>u.length!==1||!u[0].mimeType||!o.isMimetypeSupported(u[0].mimeType,!0)||!se(t,"files-spaces-generic")||!l?!1:l.canEditImage({user:e.getters.user}),canBeDefault:!1,componentType:"button",class:"oc-files-actions-set-space-image-trigger"}])}},ya=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s}=J(),i=Bt();return{actions:_(()=>[{name:"show-details",icon:"information",componentType:"button",class:"oc-files-actions-show-details-trigger",label:()=>s("Details"),isEnabled:({resources:o})=>!r(i)||me(t,"files-trash-generic")?!1:o.length>0,handler({resources:o}){e.commit("Files/SET_FILE_SELECTION",o),Y.publish(_e.open)}}])}},va=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s}=J(),i=Bt(),n=Is(),o=({resources:c})=>{e.commit("Files/SET_FILE_SELECTION",c),Y.publish(_e.openWithPanel,"tags")};return{actions:_(()=>[{name:"show-edit-tags",icon:"price-tag-3",label:()=>s("Add or edit tags"),handler:o,isEnabled:({resources:c})=>!r(i)||!r(n)||me(t,"files-trash-generic")||Ae(t,"files-public-link")?!1:c.length===1&&c[0].canEditTags(),componentType:"button",class:"oc-files-actions-show-edit-tags-trigger"}])}},Vo=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s}=J(),i=Bt(),n=({resources:a})=>{e.commit("Files/SET_FILE_SELECTION",a),Y.publish(_e.openWithPanel,"sharing#peopleShares")};return{actions:_(()=>[{name:"show-shares",icon:Wt.collaborators.icon,iconFillType:Wt.collaborators.iconFillType,label:()=>s("Share"),handler:n,isEnabled:({resources:a})=>!r(i)||me(t,"files-trash-generic")||a.length!==1||ue(t,"files-shares-with-me")&&a[0].status!==ye.accepted?!1:os(a[0],e),componentType:"button",class:"oc-files-actions-show-shares-trigger"}])}},Sa=()=>{const e=ne(),{$gettext:t}=J(),s=ji();return{createSpace:async n=>{const{graphAuthenticated:o,webdav:a}=e,{data:c}=await o.drives.createDrive({name:n},{}),l=Kt({...c,serverUrl:s.serverUrl});await a.createFolder(l,{path:".space"});const u=await a.putFileContents(l,{path:".space/readme.md",content:t("Here you can add a description for this Space.")}),{data:p}=await o.drives.updateDrive(c.id,{special:[{specialFolder:{name:"readme"},id:u.id}]},{});return Kt({...p,serverUrl:s.serverUrl})}}},ka=({store:e}={})=>{const{can:t}=Nt(),{$gettext:s,$ngettext:i}=J(),n=Ve(),{createSpace:o}=Sa(),{checkSpaceNameModalInput:a}=Ki(),c=ne(),l=ae(),u=_(()=>t("create-all","Drive")),p=async({spaceName:g,resources:f,space:v})=>{const{webdav:F}=c;e.dispatch("hideModal");const S=new xt({concurrency:4}),E=[];try{const L=await o(g);e.commit("runtime/spaces/UPSERT_SPACE",L),f.length===1&&f[0].isFolder&&(f=(await F.listFiles(v,{path:f[0].path})).children);for(const N of f)E.push(S.add(()=>F.copyFiles(v,N,L,{path:N.name})));await Promise.all(E),e.dispatch("Files/resetFileSelection"),e.dispatch("showMessage",{title:s("Space was created successfully")})}catch(L){console.error(L),e.dispatch("showMessage",{title:s("Creating space failed…"),status:"danger"})}},m=({resources:g,space:f})=>{const v={variation:"passive",title:i('Create Space from "%{resourceName}"',"Create Space from selection",g.length,{resourceName:g[0].name}),message:i('Create Space with the content of "%{resourceName}".',"Create Space with the selected files.",g.length,{resourceName:g[0].name}),contextualHelperLabel:s("The marked elements will be copied."),contextualHelperData:{title:s("Restrictions"),text:s("Shares, versions and tags will not be copied.")},cancelText:s("Cancel"),confirmText:s("Create"),hasInput:!0,inputLabel:s("Space name"),onInput:a,onCancel:()=>e.dispatch("hideModal"),onConfirm:F=>n.addTask(()=>p({spaceName:F,space:f,resources:g}))};e.dispatch("createModal",v)};return{actions:_(()=>[{name:"create-space-from-resource",icon:"layout-grid",handler:m,label:()=>s("Create Space from selection"),isEnabled:({resources:g,space:f})=>!(!g.length||!r(u)||!se(l,"files-spaces-generic")||!Je(f)),componentType:"button",class:"oc-files-actions-create-space-from-resource-trigger"}])}},Ho="edit",Ko="create",st=({store:e}={})=>{e=e||q();const t=ae(),{$gettext:s,interpolate:i}=J(),n=ra(),o=bn(),a=_(()=>!!r(o).find(z=>z.enabled)),{actions:c}=qs({store:e}),{actions:l}=Vs({store:e}),{actions:u}=Ks({store:e}),{actions:p}=Hs({store:e}),{actions:m}=Ws({store:e}),{actions:h}=Gs(),{actions:g}=ga({store:e}),{actions:f}=Ys({store:e}),{actions:v}=ba({store:e}),{actions:F}=Us({store:e}),{actions:S}=Qs({store:e}),{actions:E}=va({store:e}),{actions:L}=ka({store:e}),N=_(()=>[...r(m),...r(h),...r(u),...r(f),...r(l),...r(F),...r(L),...r(E),...r(S),...r(c),...r(p),...r(g),...r(v)]),x=_(()=>{const z=e.state.apps;return z.fileEditors.map(M=>({name:`editor-${M.id}`,label:()=>{if(M.label)return s(M.label);const U=s("Open in %{app}");return i(U,{app:z.meta[M.app].name},!0)},icon:z.meta[M.app].icon,...z.meta[M.app].iconFillType&&{iconFillType:z.meta[M.app].iconFillType},img:z.meta[M.app].img,handler:U=>Q(M,U.space.getDriveAliasAndItem(U.resources[0]),U.resources[0].webDavPath,U.resources[0].fileId,Ho,U.space.shareId),isEnabled:({resources:U})=>U.length!==1||!r(n)&&(me(t,"files-trash-generic")||ue(t,"files-shares-with-me")&&U[0].status!==ye.accepted)?!1:U[0].extension&&M.extension?U[0].extension.toLowerCase()===M.extension.toLowerCase():U[0].mimeType&&M.mimeType?U[0].mimeType.toLowerCase()===M.mimeType.toLowerCase()||U[0].mimeType.split("/")[0].toLowerCase()===M.mimeType.toLowerCase():!1,canBeDefault:M.canBeDefault,componentType:"button",class:`oc-files-actions-${Ba(z.meta[M.app].name).toLowerCase()}-trigger`})).sort((M,U)=>U.canBeDefault!==M.canBeDefault&&U.canBeDefault?1:0)}),O=(z,M,U,le,ve,Se)=>({name:z.routeName||z.app,params:{driveAliasAndItem:M,filePath:U,fileId:le,mode:ve},query:{...Se&&{shareId:Se},...le&&Re.options.routing.idBased&&{fileId:le},...yn(r(t.currentRoute))}}),Q=(z,M,U,le,ve,Se=void 0)=>{const Te=e.getters.configuration;if(z.handler)return z.handler({config:Te,extensionConfig:z.config,driveAliasAndItem:M,filePath:U,fileId:le,mode:ve,...Se&&{shareId:Se}});const te=O(z,M,U,le,ve,Se);if(Te.options.openAppsInTab){const ge=t.resolve(te).href,Le=`${z.routeName}-${U}`,He=window.open(ge,Le);He&&He.focus();return}t.push(te)},R=z=>{T(z).handler({...z})},G=(z,M)=>{const U=P(M).filter(le=>le.name===z)[0];if(!U)throw new Error(`Action not found: '${z}'`);U.handler(M)},T=z=>{const M=ve=>ve.canBeDefault&&ve.isEnabled({...z,parent:e.getters["Files/currentFolder"]}),U=r(x).filter(M);if(U.length)return U[0];const le=j(z).filter(M);return le.length?le[0]:r(N).filter(M)[0]},P=z=>[...r(x),...j(z),...r(N)].filter(M=>M.isEnabled(z)),j=z=>{var He;if(me(t,"files-trash-generic"))return[];if(z.resources.length!==1)return[];const M=z.resources[0],{mimeType:U,webDavPath:le,fileId:ve}=M,Se=(He=z.space)==null?void 0:He.getDriveAliasAndItem(M);if(!Se)return[];const Te=e.getters["External/mimeTypes"]||[];if(U===void 0||!r(a)||!Te.length)return[];const te=Te.find(Me=>Me.mime_type===U);if(te===void 0)return[];const{app_providers:ge=[],default_application:Le}=te;return ge.map(Me=>{const Jt=s("Open in %{ appName }");return{name:Me.name,icon:Me.icon,img:Me.img,componentType:"button",class:`oc-files-actions-${Me.name}-trigger`,isEnabled:()=>!0,canBeDefault:Le===Me.name,handler:()=>H(Me.name,Se,le,ve,z.space.shareId),label:()=>i(Jt,{appName:Me.name})}})},H=(z,M,U,le,ve)=>{const Se=O({routeName:"external-apps"},M,U,void 0,void 0,ve);Se.query={app:z,fileId:le,...Se.query},window.open(t.resolve(Se).href,"_blank")};return{editorActions:x,systemActions:N,getAllAvailableActions:P,loadExternalAppActions:j,openEditor:Q,triggerAction:G,triggerDefaultAction:R}},Wo=W({name:"ContextActions",components:{ContextActionMenu:Qi},props:{actionOptions:{type:Object,required:!0}},setup(e){const t=q(),{editorActions:s,loadExternalAppActions:i}=st(),{actions:n}=qs({store:t}),{actions:o}=Vs({store:t}),{actions:a}=jo({store:t}),{actions:c}=Hs({store:t}),{actions:l}=Ks({store:t}),{actions:u}=Ws({store:t}),{actions:p}=Gs(),{actions:m}=ga({store:t}),{actions:h}=fa({store:t}),{actions:g}=Ys({store:t}),{actions:f}=ba({store:t}),{actions:v}=Uo({store:t}),{actions:F}=Us({store:t}),{actions:S}=Qs({store:t}),{actions:E}=qo({store:t}),{actions:L}=oo({store:t}),{actions:N}=ya({store:t}),{actions:x}=va({store:t}),{actions:O}=ka({store:t}),{actions:Q}=Vo({store:t}),R=Ti(e,"actionOptions"),G=_(()=>[...r(n),...r(c),...r(u),...r(g),...r(o),...r(h),...r(l),...r(S),...r(O)].filter(M=>M.isEnabled(r(R)))),T=_(()=>[...[...r(s),...i(r(R))]].filter(U=>U.isEnabled(r(R))).sort((U,le)=>Number(le.canBeDefault)-Number(U.canBeDefault))),P=_(()=>[...r(Q),...r(a)].filter(M=>M.isEnabled(r(R)))),j=_(()=>[...r(u),...r(p),...r(l),...r(g),...r(o),...r(v),...r(F),...r(O),...r(x),...r(S),...r(n),...r(c),...r(E),...r(L)].filter(M=>M.isEnabled(r(R)))),H=_(()=>{const M=[...r(f)];return[...r(m).map(U=>(U.keepOpen=!0,U)),...M,...r(N)].filter(U=>U.isEnabled(r(R)))});return{menuSections:_(()=>{const M=[];return r(R).resources.length>1?(r(G).length&&M.push({name:"batch-actions",items:[...r(G)]}),M.push({name:"batch-details",items:[...r(N)]}),M):(r(T).length&&M.push({name:"context",items:r(T)}),r(P).length&&M.push({name:"share",items:r(P)}),r(j).length&&M.push({name:"actions",items:r(j)}),r(H).length&&M.push({name:"sidebar",items:r(H)}),M)}),_actionOptions:R}}});function Go(e,t,s,i,n,o){const a=y("context-action-menu");return d(),$(a,{"menu-sections":e.menuSections,"action-options":e._actionOptions},null,8,["menu-sections","action-options"])}const mt=K(Wo,[["render",Go]]),wa=({store:e,spaceImageInput:t})=>{e=e||q();const{$gettext:s}=J(),i=ne(),n=Ve(),o=Mt();let a=null;const c=({resources:p})=>{var m;p.length===1&&(a=p[0],(m=r(t))==null||m.click())},l=p=>{const m=i.graphAuthenticated,h=p.currentTarget.files[0];if(!h)return;if(!o.isMimetypeSupported(h.type,!0))return e.dispatch("showMessage",{title:s("The file type is unsupported"),status:"danger"});const g={};return h.lastModifiedDate?g["X-OC-Mtime"]=""+h.lastModifiedDate.getTime()/1e3:h.lastModified&&(g["X-OC-Mtime"]=""+h.lastModified/1e3),n.addTask(()=>i.owncloudSdk.files.putFileContents(`/spaces/${a.id}/.space/${h.name}`,h,{headers:g,overwrite:!0}).then(f=>m.drives.updateDrive(a.id,{special:[{specialFolder:{name:"image"},id:f["OC-FileId"]}]},{}).then(({data:v})=>{e.commit("runtime/spaces/UPDATE_SPACE_FIELD",{id:a.id,field:"spaceImageData",value:v.special.find(F=>F.specialFolder.name==="image")}),e.dispatch("showMessage",{title:s("Space image was uploaded successfully")}),Y.publish("app.files.list.load")})).catch(f=>{console.error(f),e.dispatch("showMessage",{title:s("Failed to upload space image"),status:"danger"})}))};return{actions:_(()=>[{name:"upload-space-image",icon:"image-add",handler:c,label:()=>s("Edit image"),isEnabled:({resources:p})=>p.length!==1?!1:p[0].canEditImage({user:e.getters.user}),componentType:"button",class:"oc-files-actions-upload-space-image-trigger"}]),uploadImageSpace:l}};class Pt{}ie(Pt,"perPageDefault","100"),ie(Pt,"perPageQueryName","items-per-page");function Yo(e){const t=Qo(e),s=Z(e.page),i=_(()=>Math.ceil(r(e.items).length/r(t))||1);return{items:_(()=>{if(!r(t))return r(e.items);const o=(r(s)-1)*r(t),a=o+r(t);return r(e.items).slice(o,a)}),total:i,perPage:t}}function Qo(e){if(e.perPage)return _(()=>r(e.perPage));const t=Dt({name:Pt.perPageQueryName,defaultValue:Pt.perPageDefault});return _(()=>parseInt(String(r(t))))}const kt=e=>e,di=e=>B.containsAnyValue(B.authenticated,e!=null?e:[]),ui=e=>B.containsAnyValue(B.unauthenticated,e!=null?e:[]),Zo=({isDirect:e})=>kt(e?"This item is directly shared with others.":"This item is shared with others through one of the parent folders."),Jo=({isDirect:e})=>kt(e?"This item is directly shared via links.":"This item is shared via links through one of the parent folders."),pi=({resource:e,isDirect:t,isIncoming:s=!1})=>({id:`files-sharing-${e.getDomSelector()}`,accessibleDescription:Zo({isDirect:t}),label:kt(s?"Shared with you":"Show invited people"),icon:"group",target:"sharing",type:t?"user-direct":"user-indirect",handler:(i,n,o)=>{if(s){o.push(dt("files-shares-with-me"));return}Y.publish(_e.openWithPanel,`${n}#peopleShares`)}}),Xo=({resource:e,isDirect:t})=>({id:`file-link-${e.getDomSelector()}`,accessibleDescription:Jo({isDirect:t}),label:kt("Show links"),icon:"link",target:"sharing",type:t?"link-direct":"link-indirect",handler:(s,i)=>{Y.publish(_e.openWithPanel,`${i}#linkShares`)}}),Tt=({resource:e,ancestorMetaData:t})=>{const s=[],i=Object.values(t).reduce((a,c)=>(a.push(...c.shareTypes||[]),a),[]),n=di(e.shareTypes);n||di(i)?s.push(pi({resource:e,isDirect:n})):e.isReceivedShare()&&s.push(pi({resource:e,isDirect:!1,isIncoming:!0}));const o=ui(e.shareTypes);return(o||ui(i))&&s.push(Xo({resource:e,isDirect:o})),s};class er{isEnabled(){return!0}isActive(t){return se(t,"files-spaces-projects")?!1:se(t,"files-spaces-generic")||Ae(t,"files-public-link")}getTask(t){const{store:s,router:i,clientService:n}=t,{owncloudSdk:o,webdav:a}=n,{replaceInvalidFileRoute:c}=vn({router:i}),l=Ye(s);return Ue(function*(u,p,m,h=null,g=null,f={}){try{s.commit("Files/CLEAR_CURRENT_FILES_LIST");let{resource:v,children:F}=yield a.listFiles(m,{path:h,fileId:g});if(c({space:m,resource:v,path:h,fileId:g}),h==="/")if(m.driveType==="share"){const S=yield o.shares.getShare(m.shareId);v=Qt([S.shareInfo],!0,r(l),!0)[0]}else["personal","public"].includes(m.driveType)||(v=m);if(yield s.dispatch("Files/loadAncestorMetaData",{folder:v,space:m,client:a}),f.loadShares){const S=s.getters["Files/ancestorMetaData"];for(const E of F)E.indicators=Tt({resource:E,ancestorMetaData:S})}s.commit("Files/LOAD_FILES",{currentFolder:v,files:F})}catch(v){if(s.commit("Files/SET_CURRENT_FOLDER",null),console.error(v),v.statusCode===401)return eo.handleAuthError(r(i.currentRoute))}}).restartable()}}class tr{isEnabled(){return!0}isActive(t){return Ne(t,"files-common-favorites")}getTask(t){const{store:s,clientService:{owncloudSdk:i}}=t;return Ue(function*(n,o){s.commit("Files/CLEAR_CURRENT_FILES_LIST"),s.commit("Files/SET_ANCESTOR_META_DATA",{});let a=yield i.files.getFavoriteFiles(Gt.Default);a=a.map(c=>{const l=It(c);return l.storageId||(l.storageId=s.getters.user.id),l}),s.commit("Files/LOAD_FILES",{currentFolder:null,files:a}),s.dispatch("Files/loadIndicators",{client:i,currentFolder:"/"})})}}class sr{isEnabled(t){return!0}isActive(t){return ue(t,"files-shares-via-link")}getTask(t){const{store:s,clientService:{owncloudSdk:i}}=t,n=Ye(s),o=we(s);return Ue(function*(a,c){s.commit("Files/CLEAR_CURRENT_FILES_LIST"),s.commit("Files/SET_ANCESTOR_META_DATA",{});let l=yield i.shares.getShares("",{share_types:B.link.value.toString(),include_tags:!1});l=l.map(p=>p.shareInfo);const u=s.getters["runtime/spaces/spaces"];l.length&&(l=Qt(l,!1,r(n),r(o),u).map(p=>(p.storageId||(p.storageId=s.getters.user.id),p))),s.commit("Files/LOAD_FILES",{currentFolder:null,files:l})})}}class ir{isEnabled(t){return!0}isActive(t){return ue(t,"files-shares-with-me")}getTask(t){const{store:s,clientService:i}=t,n=Ye(s),o=we(s);return Ue(function*(a,c){s.commit("Files/CLEAR_CURRENT_FILES_LIST"),s.commit("Files/SET_ANCESTOR_META_DATA",{});let l=yield i.owncloudSdk.shares.getShares("",{state:"all",include_tags:!1,shared_with_me:!0});l=l.map(u=>u.shareInfo),l.length&&(l=Qt(l,!0,r(n),r(o)).map(u=>(u.storageId||(u.storageId=s.getters.user.id),u))),s.commit("Files/LOAD_FILES",{currentFolder:null,files:l})})}}class ar{isEnabled(t){return!0}isActive(t){return ue(t,"files-shares-with-others")}getTask(t){const{store:s,clientService:{owncloudSdk:i}}=t,n=Ye(s),o=we(s);return Ue(function*(a,c){s.commit("Files/CLEAR_CURRENT_FILES_LIST"),s.commit("Files/SET_ANCESTOR_META_DATA",{});const l=B.authenticated.filter(p=>![B.spaceUser.value,B.spaceGroup.value].includes(p.value)).map(p=>p.value).join(",");let u=yield i.shares.getShares("",{share_types:l,reshares:!0,include_tags:!1});u=u.map(p=>p.shareInfo),u.length&&(u=Qt(u,!1,r(n),r(o)).map(p=>(p.storageId||(p.storageId=s.getters.user.id),p))),s.commit("Files/LOAD_FILES",{currentFolder:null,files:u})})}}class nr{isEnabled(t){return!0}isActive(t){return me(t,"files-trash-generic")}getTask(t){const{store:s,clientService:{owncloudSdk:i}}=t,n=we(s);return Ue(function*(o,a,c){s.commit("Files/CLEAR_CURRENT_FILES_LIST"),s.commit("Files/SET_ANCESTOR_META_DATA",{});const l=r(n)?Rs(c.id):Os(c.id),u=yield i.fileTrash.list(l,"1",Gt.Trashbin);s.commit("Files/LOAD_FILES",{currentFolder:It(u[0]),files:u.slice(1).map(wo)})})}}class or{constructor(){ie(this,"loaders");this.loaders=[new er,new tr,new sr,new ir,new ar,new nr]}getTask(){const t=q(),s=ae(),i=ne(),n=this.loaders.find(o=>o.isEnabled(r(t))&&o.isActive(r(s)));if(!n){console.error("No folder loader found for route");return}return Ue(function*(...o){const a={clientService:i,store:t,router:s};try{yield n.getTask(a).perform(...o)}catch(c){console.error(c)}})}}const rr=new or,lr=(e,t=3500)=>{const s=document.querySelectorAll(`[data-item-id='${e}']`)[0];s&&(s.classList.add("oc-table-accentuated"),setTimeout(()=>{s.classList.remove("oc-table-accentuated")},t))};const Ca=[{label:"A-Z",name:"name",sortable:!0,sortDir:ke.Asc},{label:"Z-A",name:"name",sortable:!0,sortDir:ke.Desc},{label:"Newest",name:"mdate",sortable:e=>new Date(e).valueOf(),sortDir:ke.Desc},{label:"Oldest",name:"mdate",sortable:e=>new Date(e).valueOf(),sortDir:ke.Asc},{label:"Largest",name:"size",sortable:!0,sortDir:ke.Desc},{label:"Smallest",name:"size",sortable:!0,sortDir:ke.Asc}],cr=e=>e?Ca.filter(t=>Object.prototype.hasOwnProperty.call(e,t.name)):[],Zs=e=>{const t=e.store||q(),s=_({get(){return t.getters["Files/selectedFiles"]},set(a){t.commit("Files/SET_FILE_SELECTION",a)}}),i=_({get(){return t.state.Files.selectedIds},set(a){t.commit("Files/SET_SELECTED_IDS",a)}}),n=a=>r(i).includes(a.id),o=_(()=>{if(r(s).length!==1)return null;const a=r(s)[0],c=a.storageId,l=t.getters["runtime/spaces/spaces"].find(u=>u.id===c);return l||Oe({shareId:a.shareId,shareName:a.name,serverUrl:Re.serverUrl})});return{selectedResources:s,selectedResourcesIds:i,isResourceInSelection:n,selectedResourceSpace:o}},Js=()=>{const e=q(),t=ct("scrollTo"),s=ct("details"),i=_(()=>Xe(r(t))),n=_(()=>Xe(r(s))),o=c=>{const l=document.querySelectorAll(`[data-item-id='${c.id}']`)[0];if(!l)return;if(l.getBoundingClientRect().bottom>window.innerHeight){l.scrollIntoView(!1);return}const p=document.getElementsByClassName("files-topbar")[0].offsetHeight+l.offsetHeight*2;l.getBoundingClientRect().top<p&&document.getElementsByClassName("files-view-wrapper")[0].scrollBy(0,-l.offsetHeight)};return{scrollToResource:o,scrollToResourceFromRoute:c=>{if(!r(i)||!c.length)return;const l=r(c).find(u=>u.id===r(i));l&&(e.commit("Files/SET_FILE_SELECTION",[l]),o(l),r(n)&&Y.publish(_e.openWithPanel,r(n)))}}},_t=(e={})=>{const t=e.loadResourcesTask||rr.getTask(),s=_(()=>t.isRunning||!t.last),i=q(),{refresh:n,y:o}=js(),a=_(()=>i.getters["Files/activeFiles"]||[]),c=ct("view-mode",re.defaultModeName),l=_(()=>Xe(c.value)),u=yo(l),p=ct("tiles-size","1"),m=_(()=>String(p.value)),h=vo(m),g=_(()=>r(u)===re.tilesView.name?cr(r(a)[0]):ua(r(a)[0])),{sortBy:f,sortDir:v,items:F,handleSort:S}=Ht({items:a,fields:g}),E=ct("page","1"),L=_(()=>parseInt(String(E.value))),{items:N,total:x}=Yo({page:L,items:F});return to(["Files/UPSERT_RESOURCE"],async({payload:O})=>{await ls(),lr(O.id)}),{fileListHeaderY:o,refreshFileListHeaderPosition:n,loadResourcesTask:t,areResourcesLoading:s,storeItems:a,sortFields:g,viewMode:u,viewSize:h,paginatedResources:N,paginationPages:x,paginationPage:L,handleSort:S,sortBy:f,sortDir:v,...Zs({store:i}),...Zi(),...Js()}},Ie=(e,...t)=>{const s=Z(!1),i=ae(),n=Ct();return je(n,()=>{s.value=e(i,...t)},{immediate:!0}),s};function Xs(){const e=q(),t=_(()=>e.getters["Files/outgoingLinks"]);return{outgoingCollaborators:_(()=>e.getters["Files/outgoingCollaborators"]),outgoingLinks:t}}const dr=W({setup(){const e=cs().proxy.$gettext,t=ae(),s=[ps,hs,ms].reduce((l,u)=>(l[u.name]=t.getRoutes().find(p=>p.name===u.name),l),{}),i=Ie(ue,ps.name),n=Ie(ue,hs.name),o=Ie(ue,ms.name),a=_(()=>[{icon:"share-forward",to:s[ps.name].path,text:e("Shared with me"),active:r(i)},{icon:"reply",to:s[hs.name].path,text:e("Shared with others"),active:r(n)},{icon:"link",to:s[ms.name].path,text:e("Shared via link"),active:r(o)}]);return{currentNavItem:_(()=>r(a).find(l=>l.active)),navItems:a}}});const ur=["aria-label"],pr=["textContent"],hr={class:"oc-hidden@s"},mr=["textContent"],fr=["textContent"];function gr(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-list"),u=y("oc-drop");return d(),k("nav",{id:"shares-navigation",class:"oc-py-s","aria-label":e.$gettext("Shares pages navigation")},[w(l,{class:"oc-flex oc-visible@s"},{default:A(()=>[(d(!0),k(X,null,fe(e.navItems,p=>(d(),k("li",{key:`shares-navigation-desktop-${p.to}`},[w(c,{type:"router-link",class:"oc-mr-m oc-py-s shares-nav-desktop",appearance:"raw",to:p.to},{default:A(()=>[w(a,{size:"small",name:p.icon},null,8,["name"]),b(),C("span",{textContent:D(p.text)},null,8,pr)]),_:2},1032,["to"])]))),128))]),_:1}),b(),C("div",hr,[w(c,{id:"shares_navigation_mobile",appearance:"raw"},{default:A(()=>[C("span",{textContent:D(e.currentNavItem.text)},null,8,mr),b(),w(a,{name:"arrow-down-s","fill-type":"line",size:"small"})]),_:1}),b(),w(u,{toggle:"#shares_navigation_mobile",mode:"click","close-on-click":"","padding-size":"small"},{default:A(()=>[w(l,null,{default:A(()=>[(d(!0),k(X,null,fe(e.navItems,p=>(d(),k("li",{key:`shares-navigation-mobile-${p.to}`},[w(c,{type:"router-link",class:oe(["oc-my-xs shares-nav-mobile",{"oc-background-primary-gradient":p.active}]),to:p.to,appearance:p.active?"raw-inverse":"raw",variation:p.active?"primary":"passive"},{default:A(()=>[C("span",{class:oe(["icon-box",{"icon-box-active":p.active}])},[w(a,{name:p.icon},null,8,["name"])],2),b(),C("span",{textContent:D(p.text)},null,8,fr)]),_:2},1032,["to","class","appearance","variation"])]))),128))]),_:1})]),_:1})])],8,ur)}const br=K(dr,[["render",gr],["__scopeId","data-v-836c18ba"]]),yr=W({props:{sideBarOpen:{type:Boolean,default:!1}},computed:{toggleSidebarButtonLabel(){return this.sideBarOpen?this.$gettext("Close sidebar to hide details"):this.$gettext("Open sidebar to view details")},toggleSidebarButtonIconFillType(){return this.sideBarOpen?"fill":"line"}},methods:{toggleSideBar(){Y.publish(_e.toggle)}}});function vr(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("oc-tooltip");return V((d(),$(c,{id:"files-toggle-sidebar","aria-label":e.toggleSidebarButtonLabel,appearance:"raw",class:"oc-my-s oc-p-xs",onClick:lt(e.toggleSideBar,["stop"])},{default:A(()=>[w(a,{name:"side-bar-right","fill-type":e.toggleSidebarButtonIconFillType},null,8,["fill-type"])]),_:1},8,["aria-label","onClick"])),[[l,e.toggleSidebarButtonLabel]])}const Sr=K(yr,[["render",vr],["__scopeId","data-v-26fc49fe"]]),kr=W({props:{hasHiddenFiles:{type:Boolean,default:!0},hasFileExtensions:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!0},viewModes:{type:Array,default:()=>[]}},setup(){const e=ae(),t=Ct(),{$gettext:s}=J(),i=Z(!1),n=ct("page"),o=_(()=>r(n)?parseInt(Xe(r(n))):1),a=Dt({name:Pt.perPageQueryName,defaultValue:Pt.perPageDefault}),c=Dt({name:re.queryName,defaultValue:re.defaultModeName}),l=Dt({name:re.tilesSizeQueryName,defaultValue:re.tilesSizeDefault.toString()}),u=()=>{const h=document.querySelector(":root").style,g=h.getPropertyValue("--oc-size-tiles-resize-step"),f=`${r(l)*12}rem`;(!g||g!==f)&&h.setProperty("--oc-size-tiles-resize-step",f)},p=h=>e.replace({query:{...r(t).query,"items-per-page":h,...r(o)>1&&{page:"1"}}}),m=h=>{c.value=h.name};return je([a,c,l],h=>{i.value=h.some(g=>!g)},{immediate:!0,deep:!0}),je(l,h=>{h&&u()},{immediate:!0}),{ViewModeConstants:re,viewModeCurrent:c,viewSizeCurrent:l,itemsPerPageCurrent:a,queryParamsLoading:i,setTilesViewSize:u,setItemsPerPage:p,setViewMode:m,viewOptionsButtonLabel:s("Display customization options of the files list")}},computed:{...De("Files",["areHiddenFilesShown","areFileExtensionsShown"]),hiddenFilesShownModel:{get(){return this.areHiddenFilesShown},set(e){this.SET_HIDDEN_FILES_VISIBILITY(e)}},fileExtensionsShownModel:{get(){return this.areFileExtensionsShown},set(e){this.SET_FILE_EXTENSIONS_VISIBILITY(e)}}},methods:{queryItemAsString:Xe,...xe("Files",["SET_HIDDEN_FILES_VISIBILITY","SET_FILE_EXTENSIONS_VISIBILITY"]),updateHiddenFilesShownModel(e){this.hiddenFilesShownModel=e},updateFileExtensionsShownModel(e){this.fileExtensionsShownModel=e}}});const wr={class:"oc-flex oc-flex-middle"},Cr={key:0,class:"viewmode-switch-buttons oc-button-group oc-visible@s oc-mr-s"},Fr={key:0,class:"files-view-options-list-item"},_r={key:1,class:"files-view-options-list-item"},Ar={key:2,class:"files-view-options-list-item"},$r={key:3,class:"files-view-options-list-item oc-visible@s oc-flex oc-flex-between oc-flex-middle"},Dr=["textContent"];function Er(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-switch"),u=y("oc-page-size"),p=y("oc-list"),m=y("oc-drop"),h=ce("oc-tooltip");return d(),k("div",wr,[e.viewModes.length>1?(d(),k("div",Cr,[(d(!0),k(X,null,fe(e.viewModes,g=>V((d(),$(c,{key:g.name,class:oe(g.name),appearance:e.viewModeCurrent===g.name?"filled":"outline","aria-label":e.$gettext(g.label),onClick:f=>e.setViewMode(g)},{default:A(()=>[w(a,{name:g.icon.name,"fill-type":g.icon.fillType,size:"small",variation:"inherit"},null,8,["name","fill-type"])]),_:2},1032,["class","appearance","aria-label","onClick"])),[[h,e.$gettext(g.label)]])),128))])):I("",!0),b(),V((d(),$(c,{id:"files-view-options-btn",key:"files-view-options-btn","data-testid":"files-view-options-btn","aria-label":e.viewOptionsButtonLabel,appearance:"raw",class:"oc-my-s oc-p-xs"},{default:A(()=>[w(a,{name:"settings-3","fill-type":"line"})]),_:1},8,["aria-label"])),[[h,e.viewOptionsButtonLabel]]),b(),w(m,{"drop-id":"files-view-options-drop",toggle:"#files-view-options-btn",mode:"click",class:"oc-width-auto","padding-size":"medium"},{default:A(()=>[w(p,null,{default:A(()=>[e.hasHiddenFiles?(d(),k("li",Fr,[w(l,{checked:e.hiddenFilesShownModel,"onUpdate:checked":[t[0]||(t[0]=g=>e.hiddenFilesShownModel=g),e.updateHiddenFilesShownModel],"data-testid":"files-switch-hidden-files",label:e.$gettext("Show hidden files")},null,8,["checked","label","onUpdate:checked"])])):I("",!0),b(),e.hasFileExtensions?(d(),k("li",_r,[w(l,{checked:e.fileExtensionsShownModel,"onUpdate:checked":[t[1]||(t[1]=g=>e.fileExtensionsShownModel=g),e.updateFileExtensionsShownModel],"data-testid":"files-switch-files-extensions-files",label:e.$gettext("Show file extensions")},null,8,["checked","label","onUpdate:checked"])])):I("",!0),b(),e.hasPagination?(d(),k("li",Ar,[e.queryParamsLoading?I("",!0):(d(),$(u,{key:0,selected:e.queryItemAsString(e.itemsPerPageCurrent),"data-testid":"files-pagination-size",label:e.$gettext("Items per page"),options:["100","500"],class:"files-pagination-size",onChange:e.setItemsPerPage},null,8,["selected","label","onChange"]))])):I("",!0),b(),e.viewModes.includes(e.ViewModeConstants.tilesView)?(d(),k("li",$r,[C("label",{for:"tiles-size-slider",textContent:D(e.$gettext("Tile size"))},null,8,Dr),b(),V(C("input",{id:"tiles-size-slider","onUpdate:modelValue":t[2]||(t[2]=g=>e.viewSizeCurrent=g),type:"range",min:"1",max:"6",class:"oc-range","data-testid":"files-tiles-size-slider",onInput:t[3]||(t[3]=(...g)=>e.setTilesViewSize&&e.setTilesViewSize(...g))},null,544),[[Ii,e.viewSizeCurrent]])])):I("",!0)]),_:1})]),_:1})])}const Tr=K(kr,[["render",Er],["__scopeId","data-v-6cd03873"]]),Ir=W({components:{BatchActions:jn,ContextActions:mt,SharesNavigation:br,SidebarToggle:Sr,ViewOptions:Tr},props:{breadcrumbs:{type:Array,default:()=>[]},breadcrumbsContextActionsItems:{type:Array,default:()=>[]},viewModes:{type:Array,default:()=>[]},hasBulkActions:{type:Boolean,default:!1},hasSharesNavigation:{type:Boolean,default:!1},hasSidebarToggle:{type:Boolean,default:!0},hasViewOptions:{type:Boolean,default:!0},hasHiddenFiles:{type:Boolean,default:!0},hasFileExtensions:{type:Boolean,default:!0},hasPagination:{type:Boolean,default:!0},showActionsOnSelection:{type:Boolean,default:!1},sideBarOpen:{type:Boolean,default:!1},space:{type:Object,required:!1,default:null}},setup(e){const t=q(),{$gettext:s}=J(),{actions:i}=qs({store:t}),{actions:n}=xo({store:t}),{actions:o}=Vs({store:t}),{actions:a}=Hs({store:t}),{actions:c}=Ks({store:t}),{actions:l}=Ws({store:t}),{actions:u}=Gs(),{actions:p}=fa({store:t}),{actions:m}=Ys({store:t}),{actions:h}=Qs({store:t}),g=_(()=>[...r(n),...r(i),...r(a),...r(l),...r(u),...r(m),...r(o),...r(p),...r(c),...r(h)].filter(x=>x.isEnabled({space:e.space,resources:t.getters["Files/selectedFiles"]}))),f=_(()=>t.getters["runtime/spaces/spaces"].filter(x=>Je(x)||he(x))),v=de("isMobileWidth"),F=Ie(me,"files-trash-generic"),S=_(()=>!r(v)&&e.breadcrumbs.length?!0:r(F)&&r(f).length===1?!1:e.breadcrumbs.length>1),E=_(()=>r(F)&&r(f).length===1?e.breadcrumbs.length<=2:e.breadcrumbs.length<=1),L=no("title"),N=_(()=>{var x;return r(L)?s(r(L)):((x=e.space)==null?void 0:x.name)||""});return{batchActions:g,showBreadcrumb:S,showMobileNav:E,pageTitle:N}},data:function(){return{resizeObserver:new ResizeObserver(this.onResize),limitedScreenSpace:!1}},computed:{...ee("Files",["files","selectedFiles"]),...De("Files",["areHiddenFilesShown","areFileExtensionsShown"]),showContextActions(){return Ri(this.breadcrumbs).allowContextActions},showBatchActions(){return this.hasBulkActions&&(this.selectedFiles.length>1||me(this.$router,"files-trash-generic"))},selectedResourcesAnnouncement(){if(this.selectedFiles.length===0)return this.$gettext("No items selected.");const e=this.$ngettext("%{ amount } item selected. Actions are available above the table.","%{ amount } items selected. Actions are available above the table.",this.selectedFiles.length);return this.$gettextInterpolate(e,{amount:this.selectedFiles.length})}},mounted(){this.resizeObserver.observe(this.$refs.filesAppBar)},beforeUnmount(){this.resizeObserver.unobserve(this.$refs.filesAppBar)},created(){const t=(window.localStorage.getItem("oc_hiddenFilesShown")||"false")==="true";t!==this.areHiddenFilesShown&&this.SET_HIDDEN_FILES_VISIBILITY(t);const i=(window.localStorage.getItem("oc_fileExtensionsShown")||"true")==="true";i!==this.areFileExtensionsShown&&this.SET_FILE_EXTENSIONS_VISIBILITY(i)},methods:{...xe("Files",["SET_HIDDEN_FILES_VISIBILITY","SET_FILE_EXTENSIONS_VISIBILITY"]),onResize(){this.limitedScreenSpace=this.sideBarOpen?window.innerWidth<=1280:window.innerWidth<=1e3}}});const Rr={class:"files-topbar oc-py-s"},Lr=["textContent"],Pr={key:3,class:"oc-flex"},xr={class:"files-app-bar-actions oc-mt-xs"},jr={class:"oc-flex-1 oc-flex oc-flex-start"};function Nr(e,t,s,i,n,o){const a=y("oc-hidden-announcer"),c=y("context-actions"),l=y("oc-breadcrumb"),u=y("portal-target"),p=y("shares-navigation"),m=y("view-options"),h=y("sidebar-toggle"),g=y("batch-actions");return d(),k("div",{id:"files-app-bar",ref:"filesAppBar",class:oe({"files-app-bar-squashed":e.sideBarOpen})},[w(a,{announcement:e.selectedResourcesAnnouncement,level:"polite"},null,8,["announcement"]),b(),C("div",Rr,[C("h1",{class:"oc-invisible-sr",textContent:D(e.pageTitle)},null,8,Lr),b(),C("div",{class:oe(["oc-flex oc-flex-middle files-app-bar-controls",{"oc-flex-between":e.breadcrumbs.length||e.hasSharesNavigation,"oc-flex-right":!e.breadcrumbs.length&&!e.hasSharesNavigation}])},[e.showBreadcrumb?(d(),$(l,{key:0,id:"files-breadcrumb","data-testid":"files-breadcrumbs",class:"oc-flex oc-flex-middle","context-menu-padding":"small","show-context-actions":e.showContextActions,items:e.breadcrumbs},{contextMenu:A(()=>[w(c,{"action-options":{space:e.space,resources:e.breadcrumbsContextActionsItems.filter(Boolean)}},null,8,["action-options"])]),_:1},8,["show-context-actions","items"])):I("",!0),b(),e.showMobileNav?(d(),$(u,{key:1,name:"app.runtime.mobile.nav"})):I("",!0),b(),e.hasSharesNavigation?(d(),$(p,{key:2})):I("",!0),b(),e.hasViewOptions||e.hasSidebarToggle?(d(),k("div",Pr,[e.hasViewOptions?(d(),$(m,{key:0,"view-modes":e.viewModes,"has-hidden-files":e.hasHiddenFiles,"has-file-extensions":e.hasFileExtensions,"has-pagination":e.hasPagination},null,8,["view-modes","has-hidden-files","has-file-extensions","has-pagination"])):I("",!0),b(),e.hasSidebarToggle?(d(),$(h,{key:1,"side-bar-open":e.sideBarOpen},null,8,["side-bar-open"])):I("",!0)])):I("",!0)],2),b(),C("div",xr,[C("div",jr,[!e.selectedFiles.length||e.showActionsOnSelection&&e.selectedFiles.length===1?We(e.$slots,"actions",{key:0,limitedScreenSpace:e.limitedScreenSpace},void 0,!0):I("",!0),b(),e.showBatchActions?(d(),$(g,{key:1,actions:e.batchActions,"action-options":{space:e.space,resources:e.selectedFiles},"limited-screen-space":e.limitedScreenSpace},null,8,["actions","action-options","limited-screen-space"])):I("",!0)])]),b(),We(e.$slots,"content",{},void 0,!0)])],2)}const ot=K(Ir,[["render",Nr],["__scopeId","data-v-8e4030ef"]]),Mr=W({name:"QuickActions",props:{actions:{type:Object,required:!0},item:{type:Object,required:!0}},setup(e){const t=q(),s=Nt(),i=ne(),n=J(),o=_(()=>Ua(e.actions,a=>a.displayed(e.item,t)===!0));return{ability:s,clientService:i,store:t,language:n,filteredActions:o}}});const zr={class:"oc-flex"};function Or(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("oc-tooltip");return d(),k("div",zr,[(d(!0),k(X,null,fe(e.filteredActions,u=>V((d(),$(c,{key:u.label(e.$gettext),"aria-label":u.label(e.$gettext),appearance:"raw",class:oe(["oc-mr-xs quick-action-button oc-p-xs",`files-quick-action-${u.id}`]),onClick:p=>u.handler({ability:e.ability,clientService:e.clientService,item:e.item,language:e.language,store:e.store})},{default:A(()=>[w(a,{name:u.icon,"fill-type":"line"},null,8,["name"])]),_:2},1032,["aria-label","class","onClick"])),[[l,u.label(e.$gettext)]])),128))])}const Fa=K(Mr,[["render",Or]]),Br=W({props:{files:{type:Number,required:!0},folders:{type:Number,required:!0},spaces:{type:Number,default:0,required:!1},showSpaces:{type:Boolean,default:!1,required:!1},size:{type:[String,Number],required:!1,default:null}},computed:{items(){return this.files+this.folders+(this.showSpaces?this.spaces:0)},text(){const e=this.$gettextInterpolate(this.$ngettext("%{ filesCount } file","%{ filesCount } files",this.files),{filesCount:this.files}),t=this.$gettextInterpolate(this.$ngettext("%{ foldersCount } folder","%{ foldersCount } folders",this.folders),{foldersCount:this.folders}),s=this.$gettextInterpolate(this.$ngettext("%{ spacesCount } space","%{ spacesCount } spaces",this.spaces),{spacesCount:this.spaces}),i=us(this.size,this.$language.current);let n;return this.showSpaces?n=this.size>0?this.$ngettext("%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } items with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})",this.items):this.$ngettext("%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } items in total (%{ filesStr}, %{foldersStr}, %{spacesStr})",this.items):n=this.size>0?this.$ngettext("%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})","%{ itemsCount } items with %{ itemSize } in total (%{ filesStr}, %{foldersStr})",this.items):this.$ngettext("%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})","%{ itemsCount } items in total (%{ filesStr}, %{foldersStr})",this.items),this.$gettextInterpolate(n,{itemsCount:this.items,itemSize:i,filesStr:e,foldersStr:t,spacesStr:s})}}}),Ur={class:"oc-text-nowrap oc-text-center"},qr=["data-test-items","data-test-files","data-test-folders","data-test-spaces","data-test-size"];function Vr(e,t,s,i,n,o){return d(),k("div",Ur,[C("p",{"data-testid":"files-list-footer-info","data-test-items":e.items,"data-test-files":e.files,"data-test-folders":e.folders,"data-test-spaces":e.spaces,"data-test-size":e.size,class:"oc-text-muted"},D(e.text),9,qr)])}const At=K(Br,[["render",Vr]]),Hr=W({name:"PrivateLinkItem",setup(){const{$gettext:e}=J(),t=q(),s=de("resource"),i=_(()=>r(s)),{copy:n,copied:o,isSupported:a}=rs({legacy:!0,copiedDuring:550});return{copied:o,copyLinkToClipboard:()=>{n(r(i).privateLink),t.dispatch("showMessage",{title:e("Private link copied"),desc:e("The private link has been copied to your clipboard.")})},isClipboardCopySupported:a}},computed:{buttonText(){return this.$gettext("Private link")},buttonLabel(){return this.$gettext("Copy private link to clipboard")}}}),Kr=["textContent"];function Wr(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("oc-tooltip");return e.isClipboardCopySupported?V((d(),$(c,{key:0,appearance:"raw","aria-label":e.buttonLabel,class:"oc-files-private-link-copy-url",variation:e.copied?"success":"passive",onClick:e.copyLinkToClipboard},{default:A(()=>[C("span",{textContent:D(e.buttonText)},null,8,Kr),b(),e.copied?(d(),$(a,{key:"oc-copy-to-clipboard-copied",name:"checkbox-circle",class:"_clipboard-success-animation"})):(d(),$(a,{key:"oc-copy-to-clipboard-copy",name:"clipboard"}))]),_:1},8,["aria-label","variation","onClick"])),[[l,e.buttonLabel]]):I("",!0)}const Gr=K(Hr,[["render",Wr]]),Yr=W({name:"FileInfo",components:{PrivateLinkItem:Gr},props:{isSubPanelActive:{type:Boolean,default:!0}},setup(){const e=q(),t=de("resource"),s=Ps(),i=Sn(),n=e.state.Files.areFileExtensionsShown,o=_(()=>r(s)?!1:r(i)&&r(t).privateLink);return{resource:t,areFileExtensionsShown:n,privateLinkEnabled:o}}});const Qr={class:"file_info oc-flex oc-flex-between oc-p-s"},Zr={class:"oc-flex oc-flex-middle"},Jr={class:"file_info__body oc-text-overflow"},Xr={"data-testid":"files-info-name",class:"oc-font-semibold"};function el(e,t,s,i,n,o){const a=y("oc-resource-icon"),c=y("oc-resource-name"),l=y("private-link-item");return d(),k("div",Qr,[C("div",Zr,[e.isSubPanelActive?(d(),$(a,{key:0,resource:e.resource,size:"large",class:"file_info__icon oc-mr-s"},null,8,["resource"])):I("",!0),b(),C("div",Jr,[C("h3",Xr,[w(c,{name:e.resource.name,extension:e.resource.extension,type:e.resource.type,"full-path":e.resource.webDavPath,"is-extension-displayed":e.areFileExtensionsShown,"is-path-displayed":!1,"truncate-name":!1},null,8,["name","extension","type","full-path","is-extension-displayed"])])])]),b(),e.privateLinkEnabled?(d(),$(l,{key:0,class:"oc-ml-s"})):I("",!0)])}const tl=K(Yr,[["render",el]]),sl=W({components:{FileInfo:tl,SpaceInfo:Nn,InnerSideBar:Mn},props:{open:{type:Boolean,required:!0},activePanel:{type:String,required:!1,default:null},space:{type:Object,required:!1,default:null}},setup(e){const t=q(),s=ae(),{$gettext:i}=J(),n=ne(),o=Z(),a=Z(!1),c=_(()=>t.getters["Files/highlightedFile"]),l=_(()=>t.getters["Files/selectedFiles"]),u=_(()=>t.getters["Files/currentFolder"]),p=Ie(ue,"files-shares-with-me"),m=Ie(ue,"files-shares-with-others"),h=Ie(ue,"files-shares-via-link"),g=se(s,"files-spaces-projects"),f=Ie(Ne,"files-common-favorites"),v=Ie(Ne,"files-common-search"),F=Ie(Ae,"files-public-link"),S=Ie(me,"files-trash-generic"),E=we(),L=()=>{Y.publish(_e.close)},N=te=>{Y.publish(_e.setActivePanel,te)},x=(te,ge)=>{var Le;te.focus({from:document.activeElement,to:(Le=te.sidebar)==null?void 0:Le.$el,revert:ge==="beforeUnmount"})},O=(te,ge)=>{x(te,ge),Y.publish(_e.close)},Q=_(()=>{var te;return((te=r(c))==null?void 0:te.status)===0}),R=_(()=>r(p)?r(Q):!0),G=_(()=>r(Q)?null:i("Select an accepted share to show details.")),T=_(()=>{var te;return((te=r(l))==null?void 0:te.length)>1}),P=_(()=>{var ge,Le,He,Me,Jt;const te=((Le=(ge=r(c))==null?void 0:ge.path)==null?void 0:Le.split("/").filter(Boolean))||[];return r(p)||r(v)?!r(c):r(E)&&((He=e.space)==null?void 0:He.driveType)==="share"?!1:r(S)&&!((Me=r(c))!=null&&Me.id)?!0:((Jt=e.space)==null?void 0:Jt.driveType)==="project"?!1:!te.length}),j=_(()=>he(r(c)||{})),H=_(()=>t.getters["runtime/spaces/spaces"].find(te=>te.id===r(c).id)),z=_(()=>r(F)||r(S)),M=_(()=>r(p)||r(m)||r(h)),U=_(()=>r(M)||r(v)||r(f)),le=_(()=>{const{panels:te}=t.getters.fileSideBars.reduce((ge,Le)=>{const He=Le({capabilities:t.getters.capabilities,resource:r(o),selectedFiles:r(l),router:s,multipleSelection:r(T),rootFolder:r(P),user:t.getters.user});return He.enabled&&ge.panels.push(He),ge},{panels:[]});return te}),ve=()=>{var te;return r(j)&&r(l).length===1?r(H):r(l).length===1?r(l)[0]:(te=r(u))!=null&&te.id&&!r(P)&&!r(T)?r(u):null},Se=async te=>{if(!r(M)){o.value=te;return}try{let ge=await n.webdav.getFileInfo(e.space,{path:r(c).path});ge.share=r(c).share,ge.status=r(c).status,r(j)&&(ge={...ge,...r(c)}),o.value=ge}catch(ge){o.value=te,console.error(ge)}},Te=()=>{t.dispatch("Files/loadShares",{client:n.owncloudSdk,path:r(c).path,storageId:r(c).fileId,useCached:!r(U)&&!r(g)})};return je(()=>[...r(l),e.open],()=>{var Le;if(!e.open||r(l).length===1&&((Le=r(o))==null?void 0:Le.id)===r(l)[0].id)return;a.value=!0;let te=ve();if(te){r(z)||Te(),r(j)&&t.dispatch("runtime/spaces/loadSpaceMembers",{graphClient:n.graphAuthenticated,space:r(H)}),Se(te),a.value=!1;return}(!(!r(U)&&!r(g))||r(u))&&(t.commit("Files/PRUNE_SHARES"),o.value=null,a.value=!1)},{deep:!0}),Xt("resource",_(()=>r(o))),Xt("space",_(()=>e.space)),Xt("activePanel",_(()=>e.activePanel)),{loadedResource:o,highlightedFile:c,setActiveSideBarPanel:N,closeSideBar:L,destroySideBar:O,focusSideBar:x,availablePanels:le,loading:a,warningMessage:G,isContentDisplayed:R,highlightedFileIsSpace:j}}});function il(e,t,s,i,n,o){const a=y("file-info"),c=y("space-info"),l=y("InnerSideBar");return e.open?(d(),$(l,Be({key:0,ref:"sidebar",class:"files-side-bar",tabindex:"-1",open:e.open,"active-panel":e.activePanel,"available-panels":e.availablePanels,"warning-message":e.warningMessage,"is-content-displayed":e.isContentDisplayed,loading:e.loading,"is-header-compact":!!e.loadedResource},e.$attrs,{"data-custom-key-bindings":"true",onBeforeUnmount:e.destroySideBar,onMounted:e.focusSideBar,onFileChanged:e.focusSideBar,onSelectPanel:e.setActiveSideBarPanel,onClose:e.closeSideBar}),{header:A(()=>[e.highlightedFile&&e.loadedResource&&!e.highlightedFileIsSpace?(d(),$(a,{key:0,class:"sidebar-panel__file_info","is-sub-panel-active":!!e.activePanel},null,8,["is-sub-panel-active"])):I("",!0),b(),e.highlightedFile&&e.loadedResource&&e.highlightedFileIsSpace?(d(),$(c,{key:1,class:"sidebar-panel__space_info"})):I("",!0)]),_:1},16,["open","active-panel","available-panels","warning-message","is-content-displayed","loading","is-header-compact","onBeforeUnmount","onMounted","onFileChanged","onSelectPanel","onClose"])):I("",!0)}const ft=K(sl,[["render",il]]),al=W({inheritAttrs:!1});const nl={class:"files-view-wrapper oc-width-expand"};function ol(e,t,s,i,n,o){return d(),k("div",nl,[C("div",Be({id:"files-view"},e.$attrs),[We(e.$slots,"default",{},void 0,!0)],16)])}const rt=K(al,[["render",ol],["__scopeId","data-v-d13ddade"]]),ei=({spaces:e,resource:t})=>{const s=t.storageId,i=e.find(n=>n.id===s);return i||Oe({shareId:t.shareId,shareName:t.name,serverUrl:Re.serverUrl})},hi=new ht,rl=W({components:{FilesViewWrapper:rt,AppBar:ot,ResourceTable:Ft,QuickActions:Fa,AppLoadingSpinner:tt,Pagination:zt,NoContentMessage:nt,ListInfo:At,ContextActions:mt,SideBar:ft},setup(){const e=q(),t=i=>ei({spaces:e.getters["runtime/spaces/spaces"],resource:i}),s=_(()=>[re.condensedTable,re.default,re.tilesView]);return{...st(),..._t(),getSpace:t,viewModes:s}},computed:{...De(["app"]),...De("Files",["files"]),...ee("Files",["totalFilesCount","totalFilesSize"]),...ee(["user","configuration"]),isEmpty(){return this.paginatedResources.length<1},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)}},async created(){await this.loadResourcesTask.perform(),this.scrollToResourceFromRoute(this.paginatedResources)},beforeUnmount(){hi.disconnect()},methods:{...pe("Files",["loadPreview"]),rowMounted(e,t){if(!this.displayThumbnails)return;const s=pt(({unobserve:i})=>{i(),this.loadPreview({previewService:this.$previewService,space:this.getSpace(e),resource:e,dimensions:qe.Thumbnail,type:Ot.Thumbnail})},250);hi.observe(t.$el,{onEnter:s,onExit:s.cancel})}}}),ll={class:"oc-flex"};function cl(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("quick-actions"),p=y("context-actions"),m=y("pagination"),h=y("list-info"),g=y("resource-table"),f=y("files-view-wrapper"),v=y("side-bar"),F=ce("translate");return d(),k("div",ll,[w(f,null,{default:A(()=>[w(a,{"view-modes":e.viewModes,"side-bar-open":e.sideBarOpen},null,8,["view-modes","side-bar-open"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.isEmpty?(d(),$(l,{key:0,id:"files-favorites-empty",class:"files-empty",icon:"star"},{message:A(()=>[V((d(),k("span",null,[b("There are no resources marked as favorite")])),[[F]])]),_:1})):(d(),$(g,{key:1,id:"files-favorites-table",selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=S=>e.selectedResourcesIds=S),class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"are-paths-displayed":!0,"are-thumbnails-displayed":e.displayThumbnails,resources:e.paginatedResources,"header-position":e.fileListHeaderY,"sort-by":e.sortBy,"sort-dir":e.sortDir,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.handleSort},{quickActions:A(S=>[w(u,{class:"oc-visible@s",item:S.resource,actions:e.app.quickActions},null,8,["item","actions"])]),contextMenu:A(({resource:S})=>[e.isResourceInSelection(S)?(d(),$(p,{key:0,"action-options":{space:e.getSpace(S),resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(m,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(h,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize},null,8,["files","folders","size"])):I("",!0)]),_:1},8,["selectedIds","class","are-thumbnails-displayed","resources","header-position","sort-by","sort-dir","onFileClick","onRowMounted","onSort"]))],64))]),_:1}),b(),w(v,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.selectedResourceSpace},null,8,["open","active-panel","space"])])}const dl=K(rl,[["render",cl]]),ul=W({props:{btnLabel:{type:String,required:!1,default:""},btnClass:{type:String,required:!1,default:""},isFolder:{type:Boolean,required:!1,default:!1}},setup(e){return{resource:_(()=>({extension:"",isFolder:e.isFolder}))}},computed:{inputId(){return this.isFolder?"files-folder-upload-input":"files-file-upload-input"},uploadLabelId(){return this.isFolder?"files-folder-upload-button":"files-file-upload-button"},buttonLabel(){return this.btnLabel?this.btnLabel:this.isFolder?this.$gettext("Folder"):this.$gettext("Files")},inputAttrs(){return this.isFolder?{webkitdirectory:!0,mozdirectory:!0,allowdirs:!0}:{multiple:!0}}},mounted(){this.$uppyService.registerUploadInput(this.$refs.input)},beforeUnmount(){this.$uppyService.removeUploadInput(this.$refs.input)},methods:{triggerUpload(){this.$refs.input.click()}}});const pl=["id"],hl=["id","aria-labelledby","name"];function ml(e,t,s,i,n,o){const a=y("oc-resource-icon"),c=y("oc-button");return d(),k("div",null,[w(c,{class:oe(e.btnClass),"justify-content":"left",appearance:"raw",onClick:e.triggerUpload},{default:A(()=>[w(a,{resource:e.resource,size:"medium"},null,8,["resource"]),b(),C("span",{id:e.uploadLabelId},D(e.buttonLabel),9,pl)]),_:1},8,["class","onClick"]),b(),C("input",Be({id:e.inputId,ref:"input"},e.inputAttrs,{class:"upload-input-target",type:"file","aria-labelledby":e.uploadLabelId,name:e.isFolder?"file":"folder",tabindex:"-1"}),null,16,hl)])}const _a=K(ul,[["render",ml],["__scopeId","data-v-a73636a0"]]);function Aa(e){const t=q(),s=ne(),{current:i}=J(),n=Ls({store:t}),o=zi({store:t}),a=kn({store:t}),c=wn(),l=Cn(),u=Fn(),p=_(()=>{const h={"X-Request-ID":ut(),"Accept-Language":i};if(r(o)){const g=r(n);return g?{...h,Authorization:"Basic "+Buffer.from("public:"+g).toString("base64")}:h}return{...h,Authorization:"Bearer "+r(a)}}),m=_(()=>{var g,f,v,F;const h=r(l)>0;return{isTusSupported:h,onBeforeRequest:S=>{S.setHeader("Authorization",r(p).Authorization),S.setHeader("X-Request-ID",r(p)["X-Request-ID"]),S.setHeader("Accept-Language",r(p)["Accept-Language"])},headers:S=>({"x-oc-mtime":S.data.lastModified/1e3,...r(p)}),...h&&{tusMaxChunkSize:r(l),tusHttpMethodOverride:r(c),tusExtension:r(u)},...!h&&{xhrTimeout:((F=(v=(f=(g=t.getters.configuration)==null?void 0:g.options)==null?void 0:f.upload)==null?void 0:v.xhr)==null?void 0:F.timeout)||6e4}}});return je(m,()=>{if(r(m).isTusSupported){e.uppyService.useTus(r(m));return}e.uppyService.useXhr(r(m))},{immediate:!0}),{createDirectoryTree:fl({clientService:s,uppyService:e.uppyService})}}const fl=({clientService:e,uppyService:t})=>async(s,i,n,o)=>{const{webdav:a}=e,c=[],l=[];for(const u of n){const p=u.meta.relativeFolder;if(!p||c.includes(p))continue;const m=p.split("/");let h="";for(const g of m){if(!g)continue;const f=`${h}/${g}`;if(c.includes(f)){h+=`/${g}`,c.push(h);continue}if(l.includes(f))break;const v=h?ut():u.meta.topLevelFolderId,F={id:ut(),name:g,isFolder:!0,type:"folder",meta:{spaceId:s.id,spaceName:s.name,driveAlias:s.driveAlias,driveType:s.driveType,currentFolder:i,currentFolderId:o,relativeFolder:h,uploadId:v,routeName:u.meta.routeName,routeDriveAliasAndItem:u.meta.routeDriveAliasAndItem,routeShareId:u.meta.routeShareId}};t.publish("addedForUpload",[F]);try{const S=await a.createFolder(s,{path:Ke(i,f)});t.publish("uploadSuccess",{...F,meta:{...F.meta,fileId:S==null?void 0:S.fileId}}),h+=`/${g}`,c.push(h)}catch(S){console.error(S),l.push(f),t.publish("uploadError",{file:F,error:S})}}}return{successful:c,failed:l}},gl=W({components:{ResourceUpload:_a},setup(){const e=cs().proxy,t=$s("$uppyService"),s=q(),i=ae(),n=on(),o=ne(),a=_n({store:s}),c=Ls({store:s}),l=Z(),u=Z(!1),p=Z(!0),m=Z(null);let h,g,f,v;const F=()=>{u.value=!1},S=L=>{u.value=(L.dataTransfer.types||[]).some(N=>N==="Files")},E=()=>{p.value=!0,o.owncloudSdk.publicFiles.list(r(a),r(c),Gt.PublicLink,"0").then(L=>{const N=parseInt(L[0].getProperty($e.PublicLinkPermission));if(Ds.bitmask(!1)!==N){i.replace(Rt("files-public-link",{params:{driveAliasAndItem:`public/${r(a)}`}}));return}l.value=L[0]}).catch(L=>{if(L.statusCode===401)return n.handleAuthError(r(i.currentRoute));console.error(L),m.value=L}).finally(()=>{p.value=!1})};return et(()=>{g=Y.subscribe("drag-over",S),f=Y.subscribe("drag-out",F),v=Y.subscribe("drop",F),h=t.subscribe("filesSelected",e.onFilesSelected),t.useDropTarget({targetSelector:"#files-drop-container",uppyService:t}),E()}),wt(()=>{Y.unsubscribe("drag-over",g),Y.unsubscribe("drag-out",f),Y.unsubscribe("drop",v),t.unsubscribe("filesSelected",h),t.removeDropTarget()}),{...Aa({uppyService:t}),dragareaEnabled:u,loading:p,errorMessage:m,share:l}},computed:{...ee(["configuration"]),pageTitle(){return this.$gettext(this.$route.meta.title)},publicLinkToken(){return this.$route.params.token},title(){if(this.share){const e=this.$gettext("%{owner} shared this folder with you for uploading");return this.$gettextInterpolate(e,{owner:this.share.getProperty(this.$client.publicFiles.PUBLIC_LINK_SHARE_OWNER)},!0)}return""},url(){return this.$client.publicFiles.getFileUrl(this.publicLinkToken)+"/"}},methods:{onFilesSelected(e){this.$uppyService.publish("uploadStarted");const t=e.map(s=>({source:"FileDrop",name:s.name,type:s.type,data:s,meta:{tusEndpoint:this.url,relativePath:s.webkitRelativePath||s.relativePath||"",uploadId:ut()}}));this.$uppyService.publish("addedForUpload",t),this.$uppyService.uploadFiles(t)}}});const bl={id:"files-drop-container",class:"oc-height-1-1 oc-flex oc-flex-column oc-flex-between"},yl={key:0,class:"dragarea"},vl={class:"oc-invisible-sr"},Sl={class:"oc-p oc-height-1-1"},kl={key:"loading-drop",class:"oc-flex oc-flex-column oc-flex-middle"},wl={class:"oc-login-card-title"},Cl=["textContent"],Fl={key:"loaded-drop",class:"oc-flex oc-flex-column oc-flex-middle"},_l={class:"oc-text-center oc-width-1-1 oc-width-xxlarge@m"},Al=["textContent"],$l=C("div",{id:"previews",hidden:""},null,-1),Dl={key:0,class:"oc-text-center"},El=["textContent"],Tl=["textContent"],Il={class:"oc-text-center oc-mt-xxl"},Rl=["textContent"];function Ll(e,t,s,i,n,o){const a=y("oc-spinner"),c=y("resource-upload");return d(),k("div",bl,[e.dragareaEnabled?(d(),k("div",yl)):I("",!0),b(),C("h1",vl,D(e.pageTitle),1),b(),C("div",Sl,[e.loading?(d(),k("div",kl,[C("h2",wl,[C("span",{textContent:D(e.$gettext("Loading public link…"))},null,8,Cl)]),b(),w(a,{"aria-hidden":!0})])):(d(),k("div",Fl,[C("div",_l,[C("h2",{textContent:D(e.title)},null,8,Al),b(),w(c,{id:"files-drop-zone",ref:"fileUpload",class:"oc-flex oc-flex-middle oc-flex-center oc-placeholder","btn-label":e.$gettext("Drop files here to upload or click to select file")},null,8,["btn-label"]),b(),$l]),b(),e.errorMessage?(d(),k("div",Dl,[C("h2",null,[C("span",{textContent:D(e.$gettext("An error occurred while loading the public link"))},null,8,El)]),b(),C("p",{class:"oc-m-rm",textContent:D(e.errorMessage)},null,8,Tl)])):I("",!0)])),b(),C("div",Il,[C("p",{textContent:D(e.configuration.currentTheme.general.slogan)},null,8,Rl)])])])}const Pl=K(gl,[["render",Ll]]),mi=new ht,xl=W({components:{ResourceTable:Ft,ContextActions:mt,ListInfo:At,NoContentMessage:nt},props:{title:{type:String,required:!0},emptyMessage:{type:String,required:!1,default:""},items:{type:Array,required:!0},shareStatus:{type:Number,required:!0},sortBy:{type:String,required:!1,default:void 0},sortDir:{type:String,required:!1,default:void 0,validator:e=>e===void 0||[ke.Asc.toString(),ke.Desc.toString()].includes(e)},sortHandler:{type:Function,required:!0},showMoreToggle:{type:Boolean,default:!1},showMoreToggleCount:{type:Number,default:3},resourceClickable:{type:Boolean,default:!0},displayThumbnails:{type:Boolean,default:!0},sideBarOpen:{type:Boolean,default:!1},fileListHeaderY:{type:Number,default:0}},setup(){const e=q(),t=we(),s=_(()=>e.getters["runtime/spaces/spaces"].find(o=>o.driveType==="personal")),i=o=>r(t)?Oe({shareId:o.id,shareName:o.name,serverUrl:Re.serverUrl}):r(s),n=({path:o,fileId:a,resource:c})=>be("files-spaces-generic",Ee(i(c),{path:o,fileId:a}));return{...st(),resourceTargetRouteCallback:n,...Zs({store:e}),hasShareJail:we(),getSpace:i}},data:()=>({ShareStatus:ye,showMore:!1}),computed:{displayedFields(){return["name","status","owner","sdate","sharedWith"]},countFiles(){return this.items.filter(e=>e.type!=="folder").length},countFolders(){return this.items.filter(e=>e.type==="folder").length},toggleMoreLabel(){return this.showMore?this.$gettext("Show less"):this.$gettext("Show more")},hasMore(){return this.items.length>this.showMoreToggleCount},resourceItems(){return!this.showMoreToggle||this.showMore?this.items:this.items.slice(0,this.showMoreToggleCount)}},beforeUnmount(){mi.disconnect()},methods:{...pe("Files",["loadPreview","loadAvatars"]),rowMounted(e,t){const s=pt(({unobserve:i})=>{i(),this.loadAvatars({resource:e,clientService:this.$clientService}),this.displayThumbnails&&this.loadPreview({previewService:this.$previewService,space:this.getSpace(e),resource:e,dimensions:qe.Thumbnail,type:Ot.Thumbnail})},250);mi.observe(t.$el,{onEnter:s,onExit:s.cancel})},getShowAcceptButton(e){return e.status===ye.declined||e.status===ye.pending},getShowDeclineButton(e){return e.status===ye.accepted||e.status===ye.pending},toggleShowMore(){this.showMore=!this.showMore}}});const jl={class:"oc-px-m oc-py-s"},Nl={class:"oc-text-medium"},Ml={key:0,class:"oc-width-1-1 oc-text-center oc-mt"};function zl(e,t,s,i,n,o){const a=y("no-content-message"),c=y("oc-icon"),l=y("oc-button"),u=y("context-actions"),p=y("list-info"),m=y("resource-table"),h=ce("translate");return d(),k("div",null,[C("h2",jl,[b(D(e.title)+" ",1),C("span",Nl,"("+D(e.items.length)+")",1)]),b(),e.items.length?(d(),$(m,{key:1,selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=g=>e.selectedResourcesIds=g),"data-test-share-status":e.shareStatus,class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"fields-displayed":e.displayedFields,"sidebar-closed":"","are-thumbnails-displayed":e.displayThumbnails,resources:e.resourceItems,"are-resources-clickable":e.resourceClickable,"target-route-callback":e.resourceTargetRouteCallback,"header-position":e.fileListHeaderY,"sort-by":e.sortBy,"sort-dir":e.sortDir,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.sortHandler},{status:A(({resource:g})=>[(d(),k("div",{key:g.getDomSelector()+g.status,class:"oc-text-nowrap oc-flex oc-flex-middle oc-flex-right"},[e.getShowAcceptButton(g)?(d(),$(l,{key:0,size:"small",variation:"success",class:"file-row-share-status-accept",onClick:lt(f=>e.triggerAction("accept-share",{space:null,resources:[g]}),["stop"])},{default:A(()=>[w(c,{size:"small",name:"check"}),b(),V((d(),k("span",null,[b("Accept")])),[[h]])]),_:2},1032,["onClick"])):I("",!0),b(),e.getShowDeclineButton(g)?(d(),$(l,{key:1,size:"small",class:"file-row-share-decline oc-ml-s",onClick:lt(f=>e.triggerAction("decline-share",{space:null,resources:[g]}),["stop"])},{default:A(()=>[w(c,{size:"small",name:"spam-3","fill-type":"line"}),b(),V((d(),k("span",null,[b("Decline")])),[[h]])]),_:2},1032,["onClick"])):I("",!0)]))]),contextMenu:A(({resource:g})=>[e.isResourceInSelection(g)?(d(),$(u,{key:0,"action-options":{space:e.getSpace(g),resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[e.showMoreToggle&&e.hasMore?(d(),k("div",Ml,[w(l,{id:"files-shared-with-me-show-all",appearance:"raw","gap-size":"xsmall",size:"small","data-test-expand":(!e.showMore).toString(),onClick:e.toggleShowMore},{default:A(()=>[b(D(e.toggleMoreLabel)+" ",1),w(c,{name:"arrow-"+(e.showMore?"up":"down")+"-s","fill-type":"line"},null,8,["name"])]),_:1},8,["data-test-expand","onClick"])])):(d(),$(p,{key:1,class:"oc-width-1-1 oc-my-s",files:e.countFiles,folders:e.countFolders},null,8,["files","folders"]))]),_:1},8,["selectedIds","data-test-share-status","class","fields-displayed","are-thumbnails-displayed","resources","are-resources-clickable","target-route-callback","header-position","sort-by","sort-dir","onFileClick","onRowMounted","onSort"])):(d(),$(a,{key:0,class:"files-empty oc-flex-stretch",icon:"share-forward"},{message:A(()=>[C("span",null,D(e.emptyMessage),1)]),_:1}))])}const Ol=K(xl,[["render",zl],["__scopeId","data-v-c4da7a9d"]]),Bl=W({components:{FilesViewWrapper:rt,AppBar:ot,AppLoadingSpinner:tt,SharedWithMeSection:Ol,SideBar:ft},setup(){const{areResourcesLoading:e,sortFields:t,fileListHeaderY:s,loadResourcesTask:i,selectedResources:n,selectedResourcesIds:o,sideBarActivePanel:a,sideBarOpen:c,storeItems:l,scrollToResourceFromRoute:u}=_t(),p=_(()=>r(l).filter(j=>j.status===ye.pending)),{sortBy:m,sortDir:h,items:g,handleSort:f}=Ht({items:p,fields:t,sortByQueryName:"pending-sort-by",sortDirQueryName:"pending-sort-dir"}),v=_(()=>r(l).filter(j=>j.status===ye.accepted)),{sortBy:F,sortDir:S,items:E,handleSort:L}=Ht({items:v,fields:t,sortByQueryName:"accepted-sort-by",sortDirQueryName:"accepted-sort-dir"}),N=_(()=>r(l).filter(j=>j.status===ye.declined)),{sortBy:x,sortDir:O,items:Q,handleSort:R}=Ht({items:N,fields:t,sortByQueryName:"declined-sort-by",sortDirQueryName:"declined-sort-dir"}),G=q(),T=we(),P=_(()=>{if(r(n).length!==1)return null;const j=r(n)[0];return r(T)?Oe({shareId:j.shareId,shareName:j.name,serverUrl:Re.serverUrl}):G.getters["runtime/spaces/spaces"].find(H=>H.driveType==="personal")});return{loadResourcesTask:i,areResourcesLoading:e,selectedResources:n,selectedResourcesIds:o,fileListHeaderY:s,sideBarOpen:c,sideBarActivePanel:a,selectedShareSpace:P,scrollToResourceFromRoute:u,pendingHandleSort:f,pendingSortBy:m,pendingSortDir:h,pendingItems:g,acceptedHandleSort:L,acceptedSortBy:F,acceptedSortDir:S,acceptedItems:E,declinedHandleSort:R,declinedSortBy:x,declinedSortDir:O,declinedItems:Q}},data:()=>({ShareStatus:ye}),computed:{...ee(["configuration"]),pendingTitle(){return this.$gettext("Pending shares")},acceptedTitle(){return this.$gettext("Accepted shares")},acceptedEmptyMessage(){return this.$gettext("You have no accepted shares.")},declinedTitle(){return this.$gettext("Declined shares")},declinedEmptyMessage(){return this.$gettext("You have no declined shares.")},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)}},async created(){await this.loadResourcesTask.perform(),this.scrollToResourceFromRoute([...this.acceptedItems,...this.pendingItems,...this.declinedItems])}}),Ul={class:"oc-flex"};function ql(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("shared-with-me-section"),u=y("files-view-wrapper"),p=y("side-bar");return d(),k("div",Ul,[w(u,{class:"oc-flex-column"},{default:A(()=>[w(a,{"has-shares-navigation":!0,"has-bulk-actions":!0,"side-bar-open":e.sideBarOpen},null,8,["side-bar-open"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.pendingItems.length>0?(d(),$(l,{key:0,id:"files-shared-with-me-pending-section","display-thumbnails":!1,"file-list-header-y":e.fileListHeaderY,items:e.pendingItems,"resource-clickable":!1,"share-status":e.ShareStatus.pending,"show-more-toggle":!0,"side-bar-open":e.sideBarOpen,"sort-by":e.pendingSortBy,"sort-dir":e.pendingSortDir,"sort-handler":e.pendingHandleSort,title:e.pendingTitle},null,8,["file-list-header-y","items","share-status","side-bar-open","sort-by","sort-dir","sort-handler","title"])):I("",!0),b(),w(l,{id:"files-shared-with-me-accepted-section","display-thumbnails":e.displayThumbnails,"empty-message":e.acceptedEmptyMessage,"file-list-header-y":e.fileListHeaderY,items:e.acceptedItems,"resource-clickable":!0,"share-status":e.ShareStatus.accepted,"side-bar-open":e.sideBarOpen,"sort-by":e.acceptedSortBy,"sort-dir":e.acceptedSortDir,"sort-handler":e.acceptedHandleSort,title:e.acceptedTitle},null,8,["display-thumbnails","empty-message","file-list-header-y","items","share-status","side-bar-open","sort-by","sort-dir","sort-handler","title"]),b(),w(l,{id:"files-shared-with-me-declined-section","display-thumbnails":!1,"empty-message":e.declinedEmptyMessage,"file-list-header-y":e.fileListHeaderY,items:e.declinedItems,"resource-clickable":!1,"share-status":e.ShareStatus.declined,"show-more-toggle":!0,"side-bar-open":e.sideBarOpen,"sort-by":e.declinedSortBy,"sort-dir":e.declinedSortDir,"sort-handler":e.declinedHandleSort,title:e.declinedTitle},null,8,["empty-message","file-list-header-y","items","share-status","side-bar-open","sort-by","sort-dir","sort-handler","title"])],64))]),_:1}),b(),w(p,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.selectedShareSpace},null,8,["open","active-panel","space"])])}const Vl=K(Bl,[["render",ql]]),fi=new ht,Hl=W({components:{FilesViewWrapper:rt,AppBar:ot,ResourceTable:Ft,AppLoadingSpinner:tt,NoContentMessage:nt,ListInfo:At,Pagination:zt,ContextActions:mt,SideBar:ft},setup(){const e=q(),t=s=>ei({spaces:e.getters["runtime/spaces/spaces"],resource:s});return{...st(),..._t(),getSpace:t}},computed:{...De(["app"]),...De("Files",["files"]),...ee("Files",["totalFilesCount"]),...ee(["configuration","user"]),isEmpty(){return this.paginatedResources.length<1},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)}},async created(){await this.loadResourcesTask.perform(),this.scrollToResourceFromRoute(this.paginatedResources)},beforeUnmount(){fi.disconnect()},methods:{...pe("Files",["loadPreview","loadAvatars"]),rowMounted(e,t){const s=pt(({unobserve:i})=>{i(),this.loadAvatars({resource:e,clientService:this.$clientService}),this.displayThumbnails&&this.loadPreview({previewService:this.$previewService,space:this.getSpace(e),resource:e,dimensions:qe.Thumbnail,type:Ot.Thumbnail})},250);fi.observe(t.$el,{onEnter:s,onExit:s.cancel})}}}),Kl={class:"oc-flex"};function Wl(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("context-actions"),p=y("pagination"),m=y("list-info"),h=y("resource-table"),g=y("files-view-wrapper"),f=y("side-bar"),v=ce("translate");return d(),k("div",Kl,[w(g,null,{default:A(()=>[w(a,{"has-shares-navigation":!0,"side-bar-open":e.sideBarOpen},null,8,["side-bar-open"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.isEmpty?(d(),$(l,{key:0,id:"files-shared-with-others-empty",class:"files-empty",icon:"reply"},{message:A(()=>[V((d(),k("span",null,[b(" You have not shared any resources with other people. ")])),[[v]])]),_:1})):(d(),$(h,{key:1,id:"files-shared-with-others-table",selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=F=>e.selectedResourcesIds=F),class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"fields-displayed":["name","sharedWith","sdate"],"are-thumbnails-displayed":e.displayThumbnails,"are-paths-displayed":!0,resources:e.paginatedResources,"header-position":e.fileListHeaderY,"sort-by":e.sortBy,"sort-dir":e.sortDir,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.handleSort},{contextMenu:A(({resource:F})=>[e.isResourceInSelection(F)?(d(),$(u,{key:0,"action-options":{space:e.getSpace(F),resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(p,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(m,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders},null,8,["files","folders"])):I("",!0)]),_:1},8,["selectedIds","class","are-thumbnails-displayed","resources","header-position","sort-by","sort-dir","onFileClick","onRowMounted","onSort"]))],64))]),_:1}),b(),w(f,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.selectedResourceSpace},null,8,["open","active-panel","space"])])}const Gl=K(Hl,[["render",Wl]]),gi=new ht,Yl=W({components:{FilesViewWrapper:rt,AppBar:ot,ResourceTable:Ft,AppLoadingSpinner:tt,NoContentMessage:nt,ListInfo:At,Pagination:zt,ContextActions:mt,SideBar:ft},setup(){const e=q(),t=s=>ei({spaces:e.getters["runtime/spaces/spaces"],resource:s});return{...st(),..._t(),getSpace:t,hasProjectSpaces:Ts()}},computed:{...De(["app"]),...ee("Files",["totalFilesCount"]),...ee(["configuration"]),helpersEnabled(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.contextHelpers},isEmpty(){return this.paginatedResources.length<1},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)}},async created(){await this.loadResourcesTask.perform(),this.scrollToResourceFromRoute(this.paginatedResources)},beforeUnmount(){gi.disconnect()},methods:{...pe("Files",["loadPreview"]),rowMounted(e,t){if(!this.displayThumbnails)return;const s=pt(({unobserve:i})=>{i(),this.loadPreview({previewService:this.$previewService,space:this.getSpace(e),resource:e,dimensions:qe.Thumbnail,type:Ot.Thumbnail})},250);gi.observe(t.$el,{onEnter:s,onExit:s.cancel})}}}),Ql={class:"oc-flex"};function Zl(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("context-actions"),p=y("pagination"),m=y("list-info"),h=y("resource-table"),g=y("files-view-wrapper"),f=y("side-bar"),v=ce("translate");return d(),k("div",Ql,[w(g,null,{default:A(()=>[w(a,{"has-shares-navigation":!0,"side-bar-open":e.sideBarOpen},null,8,["side-bar-open"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.isEmpty?(d(),$(l,{key:0,id:"files-shared-via-link-empty",class:"files-empty",icon:"link"},{message:A(()=>[V((d(),k("span",null,[b("You have not shared any resource via link.")])),[[v]])]),_:1})):(d(),$(h,{key:1,id:"files-shared-via-link-table",selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=F=>e.selectedResourcesIds=F),class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"fields-displayed":["name","sharedWith","sdate"],"are-thumbnails-displayed":e.displayThumbnails,"are-paths-displayed":!0,resources:e.paginatedResources,"header-position":e.fileListHeaderY,"sort-by":e.sortBy,"sort-dir":e.sortDir,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.handleSort},{contextMenu:A(({resource:F})=>[e.isResourceInSelection(F)?(d(),$(u,{key:0,"action-options":{space:e.getSpace(F),resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(p,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(m,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,spaces:e.totalFilesCount.spaces,"show-spaces":e.hasProjectSpaces},null,8,["files","folders","spaces","show-spaces"])):I("",!0)]),_:1},8,["selectedIds","class","are-thumbnails-displayed","resources","header-position","sort-by","sort-dir","onFileClick","onRowMounted","onSort"]))],64))]),_:1}),b(),w(f,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.selectedResourceSpace},null,8,["open","active-panel","space"])])}const Jl=K(Yl,[["render",Zl]]),bi="personal/home",Xl=W({name:"DriveRedirect",components:{AppLoadingSpinner:tt},props:{driveAliasAndItem:{type:String,required:!1,default:""},appendHomeFolder:{type:Boolean,required:!1,default:!1}},setup(e){const t=q(),s=ae(),i=Ct(),n=_(()=>t.getters["runtime/spaces/spaces"].find(a=>a.driveType==="personal")),o=_(()=>{if(!e.appendHomeFolder)return"";const a=e.driveAliasAndItem.startsWith(bi)?Ge(e.driveAliasAndItem.slice(bi.length)):"/";return a!=="/"?a:t.getters.homeFolder});if(!r(n))s.replace(be("files-spaces-projects"));else{const{params:a,query:c}=Ee(r(n),{path:r(o)});s.replace({...r(i),params:{...r(i).params,...a},query:c}).catch(()=>{})}}}),ec={class:"oc-flex oc-width-1-1"};function tc(e,t,s,i,n,o){const a=y("app-loading-spinner");return d(),k("div",ec,[w(a)])}const sc=K(Xl,[["render",tc]]);function ic(e){return{inputFilesToUppyFiles:nc({uppyService:e.uppyService,route:Ct(),space:e.space,currentFolder:e.currentFolder,currentFolderId:e.currentFolderId})}}const ac=e=>{const t=e.webkitRelativePath||e.relativePath;if(t)return Ge(t)},nc=({uppyService:e,route:t,space:s,currentFolder:i,currentFolderId:n})=>o=>{const a=[],{name:c,params:l,query:u}=r(t),p=r(s).getWebDavUrl({path:r(i)}),m={};for(const h of o){const g=ac(h),f=!g||vt.dirname(g)==="."?"":vt.dirname(g),v=Ge(p,f);let F;if(g){const S=g.split("/").filter(Boolean)[0];m[S]||(m[S]=ut()),F=m[S]}a.push({source:"file input",name:h.name,isFolder:!1,type:h.type,size:h.size,data:h,meta:{spaceId:r(s).id,spaceName:r(s).name,driveAlias:r(s).driveAlias,driveType:r(s).driveType,currentFolder:r(i),currentFolderId:r(n),uppyId:e.generateUploadId(h),relativeFolder:f,relativePath:g,tusEndpoint:v,uploadId:ut(),topLevelFolderId:F,routeName:c,routeDriveAliasAndItem:(l==null?void 0:l.driveAliasAndItem)||"",routeShareId:(u==null?void 0:u.shareId)||""}})}return a},oc=W({components:{ResourceUpload:_a},props:{space:{type:Object,required:!0},item:{type:String,required:!1,default:null},limitedScreenSpace:{type:Boolean,default:!1,required:!1},itemId:{type:[String,Number],required:!1,default:null}},setup(e){const t=cs().proxy,s=$s("$uppyService"),i=ne(),n=q();let o,a;const c=_(()=>n.getters["Files/currentFolder"]),l=_(()=>{var u;return(u=r(c))==null?void 0:u.canUpload({user:n.getters.user})});return et(()=>{o=s.subscribe("filesSelected",t.onFilesSelected),a=s.subscribe("uploadCompleted",t.onUploadComplete)}),wt(()=>{s.unsubscribe("filesSelected",o),s.unsubscribe("uploadCompleted",a),s.removeDropTarget()}),je(l,()=>{r(l)?s.useDropTarget({targetSelector:"#files-view",uppyService:s}):s.removeDropTarget()},{immediate:!0}),{...st({store:n}),...Aa({uppyService:s}),...ic({uppyService:s,space:_(()=>e.space),currentFolder:_(()=>e.item),currentFolderId:_(()=>e.itemId)}),...An(),clientService:i,isPublicLocation:Ie(Ae,"files-public-link"),isSpacesGenericLocation:Ie(se,"files-spaces-generic"),hasShareJail:we(),hasSpaces:jt(),isUserContext:Gi({store:n}),canUpload:l,currentFolder:c}},data:()=>({newFileAction:null}),computed:{...ee(["capabilities","configuration","newFileHandlers","user"]),...ee("Files",["ancestorMetaData","files","selectedFiles","clipboardResources"]),...De("Files",["areFileExtensionsShown"]),...ee("runtime/spaces",["spaces"]),showPasteHereButton(){return this.clipboardResources&&this.clipboardResources.length!==0},hideButtonLabels(){return this.limitedScreenSpace&&this.showPasteHereButton},mimetypesAllowedForCreation(){const e=this.$store.getters["External/mimeTypes"];return e?e.filter(t=>t.allow_creation)||[]:[]},showActions(){return!(this.uploadOrFileCreationBlocked&&this.isPublicLocation)},createFileActionsAvailable(){return this.newFileHandlers.length>0||this.mimetypesAllowedForCreation.length>0},newButtonTooltip(){return this.canUpload?null:this.$gettext("You have no permission to create new files!")},newButtonAriaLabel(){const e=this.newButtonTooltip;return e||(this.createFileActionsAvailable?this.$gettext("Create new files or folders"):this.$gettext("Create a new folder"))},uploadButtonTooltip(){return this.canUpload?null:this.$gettext("You have no permission to upload!")},uploadButtonAriaLabel(){const e=this.uploadButtonTooltip;return e||this.$gettext("Upload files or folders")},uploadOrFileCreationBlocked(){return!this.canUpload},loadIndicatorsForNewFile(){return this.isSpacesGenericLocation&&this.space.driveType!=="share"},folderIconResource(){return{isFolder:!0,extension:""}}},methods:{...pe("Files",["clearClipboardFiles","pasteSelectedFiles"]),...pe(["showMessage","createModal","setModalInputErrorMessage","hideModal"]),...xe("Files",["UPSERT_RESOURCE"]),...xe("runtime/spaces",["UPDATE_SPACE_FIELD"]),...xe(["SET_QUOTA"]),pasteFilesHere(){this.pasteSelectedFiles({targetSpace:this.space,clientService:this.clientService,loadingService:this.$loadingService,createModal:this.createModal,hideModal:this.hideModal,showMessage:this.showMessage,$gettext:this.$gettext,$gettextInterpolate:this.$gettextInterpolate,$ngettext:this.$ngettext}).then(()=>{document.activeElement.blur()})},async onUploadComplete(e){if(e.successful){const t=e.successful[0];if(!t)return;const{spaceId:s,currentFolder:i,currentFolderId:n}=t.meta;if(!["public","share"].includes(t.meta.driveType))if(this.hasSpaces){const l=await this.clientService.graphAuthenticated.drives.getDrive(s);this.UPDATE_SPACE_FIELD({id:l.data.id,field:"spaceQuota",value:l.data.quota})}else{const c=await this.$client.users.getUser(this.user.id);this.SET_QUOTA(c.quota)}const o=this.itemId?n===this.itemId:i===this.item;s===this.space.id&&o&&Y.publish("app.files.list.load")}},showCreateResourceModal(e=!0,t="txt",s=null,i=!1){const n=l=>{this.setModalInputErrorMessage(e?this.checkNewFolderName(l):this.checkNewFileName(this.areFileExtensionsShown?l:`${l}.${t}`))};let o=e?this.$gettext("New folder"):this.$gettext("New file")+`.${t}`;this.files.some(l=>l.name===o)&&(o=Lt(o,e?"":t,this.files)),this.areFileExtensionsShown||(o=Es({name:o,extension:t})),e||(this.newFileAction=s);const a=e||!this.areFileExtensionsShown?null:[0,o.length-(t.length+1)],c={variation:"passive",title:e?this.$gettext("Create a new folder"):this.$gettext("Create a new file"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Create"),hasInput:!0,inputValue:o,inputLabel:e?this.$gettext("Folder name"):this.$gettext("File name"),inputError:e?this.checkNewFolderName(o):this.checkNewFileName(this.areFileExtensionsShown?o:`${o}.${t}`),inputSelectionRange:a,onCancel:this.hideModal,onConfirm:e?this.addNewFolder:i?this.addAppProviderFile:l=>{this.areFileExtensionsShown||(l=`${l}.${t}`),this.addNewFile(l)},onInput:n};this.createModal(c)},async addNewFolder(e){e=e.trimEnd();try{const t=Ke(this.item,e),s=await this.$clientService.webdav.createFolder(this.space,{path:t});this.loadIndicatorsForNewFile&&(s.indicators=Tt({resource:s,ancestorMetaData:this.ancestorMetaData})),this.UPSERT_RESOURCE(s),this.hideModal(),this.showMessage({title:this.$gettextInterpolate(this.$gettext('"%{folderName}" was created successfully'),{folderName:e})})}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to create folder"),status:"danger"})}},checkNewFolderName(e){if(e.trim()==="")return this.$gettext("Folder name cannot be empty");if(/[/]/.test(e))return this.$gettext('Folder name cannot contain "/"');if(e===".")return this.$gettext('Folder name cannot be equal to "."');if(e==="..")return this.$gettext('Folder name cannot be equal to ".."');if(this.files.find(s=>s.name===e)){const s=this.$gettext("%{name} already exists");return this.$gettextInterpolate(s,{name:e},!0)}return null},async addNewFile(e){if(e!=="")try{const t=Ke(this.item,e),s=await this.$clientService.webdav.putFileContents(this.space,{path:t});if(this.loadIndicatorsForNewFile&&(s.indicators=Tt({resource:s,ancestorMetaData:this.ancestorMetaData})),this.UPSERT_RESOURCE(s),this.newFileAction){this.openEditor(this.newFileAction,this.space.getDriveAliasAndItem(s),s.webDavPath,s.fileId,Ko),this.hideModal();return}this.hideModal(),this.showMessage({title:this.$gettextInterpolate(this.$gettext('"%{fileName}" was created successfully'),{fileName:e})})}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to create file"),status:"danger"})}},async addAppProviderFile(e){if(e!=="")try{const t=Ge(Re.serverUrl,this.capabilities.files.app_providers[0].new_url),s=qa.stringify({parent_container_id:this.currentFolder.fileId,filename:e}),i=`${t}?${s}`,n=await this.makeRequest("POST",i);if(n.status!==200)throw new Error(`An error has occurred: ${n.status}`);const o=Ke(this.item,e)||"",a=await this.$clientService.webdav.getFileInfo(this.space,{path:o});this.loadIndicatorsForNewFile&&(a.indicators=Tt({resource:a,ancestorMetaData:this.ancestorMetaData})),this.triggerDefaultAction({space:this.space,resources:[a]}),this.UPSERT_RESOURCE(a),this.hideModal(),this.showMessage({title:this.$gettextInterpolate(this.$gettext('"%{fileName}" was created successfully'),{fileName:e})})}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to create file"),status:"danger"})}},checkNewFileName(e){if(e==="")return this.$gettext("File name cannot be empty");if(/[/]/.test(e))return this.$gettext('File name cannot contain "/"');if(e===".")return this.$gettext('File name cannot be equal to "."');if(e==="..")return this.$gettext('File name cannot be equal to ".."');if(/\s+$/.test(e))return this.$gettext("File name cannot end with whitespace");if(this.files.find(s=>s.name===e)){const s=this.$gettext("%{name} already exists");return this.$gettextInterpolate(s,{name:e},!0)}return null},onFilesSelected(e){new Fo(e,this.files,this.inputFilesToUppyFiles,this.$uppyService,this.space,this.item,this.itemId,this.spaces,this.hasSpaces,this.createDirectoryTree,this.createModal,this.hideModal,this.showMessage,this.$gettext,this.$ngettext,this.$gettextInterpolate).perform()},getIconResource(e){return{type:"file",extension:e.ext}}}});const rc={key:0,class:"create-and-upload-actions oc-flex-inline oc-width-1-1"},lc=["textContent"],cc={class:"create-list-folder oc-menu-item-hover"},dc=["textContent"],uc=["textContent"],pc={key:1},hc=["textContent"],mc=["textContent"],fc={class:"oc-menu-item-hover"},gc={class:"oc-menu-item-hover"};function bc(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-resource-icon"),u=y("oc-list"),p=y("oc-drop"),m=y("resource-upload"),h=ce("oc-tooltip"),g=ce("translate");return e.showActions?(d(),k("div",rc,[e.createFileActionsAvailable?(d(),k(X,{key:0},[V((d(),k("span",null,[V((d(),$(c,{id:"new-file-menu-btn",key:"new-file-menu-btn-enabled","aria-label":e.newButtonAriaLabel,appearance:"filled",variation:"primary",disabled:e.uploadOrFileCreationBlocked},{default:A(()=>[w(a,{name:"add"}),b(),e.hideButtonLabels?I("",!0):(d(),k("span",{key:0,textContent:D(e.$gettext("New"))},null,8,lc))]),_:1},8,["aria-label","disabled"])),[[h,e.hideButtonLabels?e.$gettext("New"):""]])])),[[h,e.newButtonTooltip]]),b(),w(p,{"drop-id":"new-file-menu-drop",toggle:"#new-file-menu-btn",mode:"click","close-on-click":"",class:"oc-width-auto","padding-size":"small"},{default:A(()=>[w(u,{id:"create-list"},{default:A(()=>[C("li",cc,[w(c,{id:"new-folder-btn",appearance:"raw",onClick:e.showCreateResourceModal},{default:A(()=>[w(l,{resource:e.folderIconResource,size:"medium"},null,8,["resource"]),b(),C("span",{textContent:D(e.$gettext("Folder"))},null,8,dc)]),_:1},8,["onClick"])]),b(),(d(!0),k(X,null,fe(e.newFileHandlers,(f,v)=>(d(),k("li",{key:`file-creation-item-${v}`,class:"create-list-file oc-menu-item-hover"},[w(c,{appearance:"raw",class:oe(["new-file-btn-"+f.ext]),onClick:F=>e.showCreateResourceModal(!1,f.ext,f.action)},{default:A(()=>[w(l,{resource:e.getIconResource(f),size:"medium"},null,8,["resource"]),b(),C("span",null,D(f.menuTitle(e.$gettext)),1)]),_:2},1032,["class","onClick"])]))),128)),b(),e.mimetypesAllowedForCreation?(d(!0),k(X,{key:0},fe(e.mimetypesAllowedForCreation,(f,v)=>(d(),k("li",{key:`file-creation-item-external-${v}`,class:"create-list-file oc-menu-item-hover"},[w(c,{appearance:"raw",onClick:F=>e.showCreateResourceModal(!1,f.ext,!1,!0)},{default:A(()=>[w(l,{resource:e.getIconResource(f),size:"medium"},null,8,["resource"]),b(),C("span",{textContent:D(e.$gettextInterpolate(e.$gettext("%{name}"),{name:f.name}))},null,8,uc)]),_:2},1032,["onClick"])]))),128)):I("",!0)]),_:1})]),_:1})],64)):V((d(),k("span",pc,[V((d(),$(c,{id:"new-folder-btn",appearance:"filled",variation:"primary","aria-label":e.newButtonAriaLabel,disabled:e.uploadOrFileCreationBlocked,onClick:e.showCreateResourceModal},{default:A(()=>[w(a,{name:"resource-type-folder"}),b(),e.hideButtonLabels?I("",!0):(d(),k("span",{key:0,textContent:D(e.$gettext("New Folder"))},null,8,hc))]),_:1},8,["aria-label","disabled","onClick"])),[[h,e.hideButtonLabels?e.$gettext("New Folder"):""]])])),[[h,e.newButtonTooltip]]),b(),V((d(),k("span",null,[V((d(),$(c,{id:"upload-menu-btn",key:"upload-menu-btn-enabled","aria-label":e.uploadButtonAriaLabel,disabled:e.uploadOrFileCreationBlocked},{default:A(()=>[w(a,{name:"upload","fill-type":"line"}),b(),e.hideButtonLabels?I("",!0):(d(),k("span",{key:0,textContent:D(e.$gettext("Upload"))},null,8,mc))]),_:1},8,["aria-label","disabled"])),[[h,e.hideButtonLabels?e.$gettext("Upload"):""]])])),[[h,e.uploadButtonTooltip]]),b(),w(p,{"drop-id":"upload-menu-drop",toggle:"#upload-menu-btn",mode:"click",class:"oc-width-auto","close-on-click":"","padding-size":"small"},{default:A(()=>[w(u,{id:"upload-list"},{default:A(()=>[C("li",fc,[w(m,{ref:"folder-upload","btn-class":"oc-width-1-1"},null,512)]),b(),C("li",gc,[w(m,{ref:"file-upload","btn-class":"oc-width-1-1","is-folder":!0},null,512)])]),_:1})]),_:1}),b(),e.showPasteHereButton?V((d(),k("div",{key:2,id:"clipboard-btns",class:oe(["oc-button-group",{disabled:e.uploadOrFileCreationBlocked}])},[w(c,{disabled:e.uploadOrFileCreationBlocked,class:"paste-files-btn",onClick:e.pasteFilesHere},{default:A(()=>[w(a,{"fill-type":"line",name:"clipboard"}),b(),V((d(),k("span",null,[b("Paste here")])),[[g]])]),_:1},8,["disabled","onClick"]),b(),w(c,{disabled:e.uploadOrFileCreationBlocked,class:"clear-clipboard-btn",onClick:e.clearClipboardFiles},{default:A(()=>[w(a,{"fill-type":"line",name:"close"})]),_:1},8,["disabled","onClick"])],2)),[[h,e.uploadOrFileCreationBlocked?e.$gettext("You have no permission to paste files here!"):""]]):I("",!0)])):I("",!0)}const yc=K(oc,[["render",bc]]),vc=W({props:{paginatedResources:{type:Array,required:!0},keybindOnElementId:{type:String,required:!1,default:"files-view"},space:{type:Object,required:!0}},setup(e){const t=q(),s=J(),i=ne(),{scrollToResource:n}=Js(),o=Ve(),a=Z(0);let c,l,u;const p=_(()=>t.state.Files.latestSelectedId),m=()=>{const T=document.activeElement.tagName,P=document.activeElement.getAttribute("type");if(["textarea","input","select"].includes(T.toLowerCase())&&P!=="checkbox")return!0;const j=window.getSelection().focusNode;if(!j)return!1;let H;try{H=j==null?void 0:j.closest("[data-custom-key-bindings='true']")}catch{H=j==null?void 0:j.parentElement.closest("[data-custom-key-bindings='true']")}return!!H},h=()=>{a.value=0},g=(T=!1)=>{const P=e.paginatedResources.findIndex(H=>H.id===p.value);if(P===-1)return-1;const j=P+(T?-1:1);return j<0||j>=e.paginatedResources.length?-1:e.paginatedResources[j].id},f=()=>e.paginatedResources.length?e.paginatedResources[0].id:-1,v=T=>{T.preventDefault(),t.dispatch("Files/toggleFileSelection",{id:r(p)})},F=()=>{t.dispatch("Files/pasteSelectedFiles",{targetSpace:e.space,clientService:i,loadingService:o,createModal:T=>{t.dispatch("createModal",T)},hideModal:T=>{t.dispatch("hideModal",T)},showMessage:T=>{t.dispatch("showMessage",T)},$gettext:s.$gettext,$gettextInterpolate:s.interpolate,$ngettext:s.$ngettext})},S=(T,P=!1)=>{T.preventDefault();const j=r(p)?g(P):f();j!==-1&&(h(),t.dispatch("Files/resetFileSelection"),t.commit("Files/ADD_FILE_SELECTION",{id:j}),n({id:j}))},E=T=>{t.dispatch("Files/toggleFileSelection",{id:T.id})},L=()=>{h(),t.dispatch("Files/resetFileSelection")},N=T=>{T.preventDefault(),h(),t.commit("Files/SET_FILE_SELECTION",e.paginatedResources)},x=()=>{const T=g(!0);T!==-1&&(r(a)>0?(t.dispatch("Files/toggleFileSelection",{id:r(p)}),t.commit("Files/SET_LATEST_SELECTED_FILE_ID",T)):t.commit("Files/ADD_FILE_SELECTION",{id:T}),n({id:T}),a.value=r(a)-1)},O=()=>{const T=g();T!==-1&&(r(a)<0?(t.dispatch("Files/toggleFileSelection",{id:r(p)}),t.commit("Files/SET_LATEST_SELECTED_FILE_ID",T)):t.commit("Files/ADD_FILE_SELECTION",{id:T}),n({id:T}),a.value=r(a)+1)},Q=({resource:T,skipTargetSelection:P})=>{const j=document.querySelectorAll(`[data-item-id='${T.id}']`)[0],H=Object.values(j.parentNode.children),z=H.find(Te=>Te.getAttribute("data-item-id")===r(p)),M=H.find(Te=>Te.getAttribute("data-item-id")===T.id);let U=H.indexOf(z);U=U===-1?0:U;const le=H.indexOf(M),ve=Math.min(U,le),Se=Math.max(U,le);for(let Te=ve;Te<=Se;Te++){const te=H[Te].getAttribute("data-item-id");P&&te===T.id||t.commit("Files/ADD_FILE_SELECTION",{id:te})}t.commit("Files/SET_LATEST_SELECTED_FILE_ID",T.id)},R=T=>{if((T.keyCode||T.which)===Qe("space"))return v(T)},G=T=>{const P=T.keyCode||T.which,j=T.shiftKey,H=window.navigator.platform.match("Mac")?T.metaKey:T.ctrlKey,z=window.getSelection().type==="Range";if(!m()&&!z){if(P===Qe("c")&&H)return t.dispatch("Files/copySelectedFiles",{...s,space:e.space,resources:t.getters["Files/selectedFiles"]});if(P===Qe("v")&&H)return F();if(P===Qe("x")&&H)return t.dispatch("Files/cutSelectedFiles",{...s,space:e.space,resources:t.getters["Files/selectedFiles"]});if(P===Qe("down")&&!j)return S(T);if(P===Qe("up")&&!j)return S(T,!0);if(P===Qe("esc"))return L();if(P===Qe("down")&&j)return O();if(P===Qe("up")&&j)return x();if(P===Qe("a")&&H)return N(T)}};return et(()=>{const T=document.getElementById(e.keybindOnElementId);T&&T.addEventListener("keydown",R,!1),document.addEventListener("keydown",G),c=Y.subscribe("app.files.list.clicked",h),l=Y.subscribe("app.files.list.clicked.meta",E),u=Y.subscribe("app.files.list.clicked.shift",Q)}),wt(()=>{Y.unsubscribe("app.files.list.clicked",c),Y.unsubscribe("app.files.list.clicked.meta",l),Y.unsubscribe("app.files.list.clicked.shift",u);const T=document.getElementById(e.keybindOnElementId);T&&T.removeEventListener("keydown",R),document.removeEventListener("keydown",G)}),{areCustomKeyBindingsEnabled:m,handleGlobalShortcuts:G,handelLocalShortcuts:R,handleShiftClickAction:Q,handleCtrlClickAction:E}}});function Sc(e,t,s,i,n,o){return d(),k("div")}const kc=K(vc,[["render",Sc]]),wc=W({name:"NotFoundMessage",props:{space:{type:Object,required:!1,default:null}},setup(e){var i;const t=ae(),s=((i=e.space)==null?void 0:i.driveType)==="project";return{showPublicLinkButton:Ae(t,"files-public-link"),showHomeButton:se(t,"files-spaces-generic")&&!s,showSpacesButton:se(t,"files-spaces-generic")&&s,homeRoute:be("files-spaces-generic",{params:{driveAliasAndItem:"personal"}}),publicLinkRoute:Rt("files-public-link",Ee(e.space,{})),spacesRoute:be("files-spaces-projects")}}});const Cc={id:"files-list-not-found-message",class:"oc-text-center oc-flex-middle oc-flex oc-flex-center oc-flex-column"},Fc={class:"oc-text-muted oc-text-xlarge"},_c={class:"oc-text-muted"},Ac={class:"oc-mt-s"};function $c(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("translate");return d(),k("div",Cc,[w(a,{name:"cloud",type:"div",size:"xxlarge"}),b(),C("div",Fc,[V((d(),k("span",null,[b("Resource not found")])),[[l]])]),b(),C("div",_c,[V((d(),k("span",null,[b(`
        We went looking everywhere, but were unable to find the selected resource.
      `)])),[[l]])]),b(),C("div",Ac,[e.showSpacesButton?(d(),$(c,{key:0,id:"space-not-found-button-go-spaces",type:"router-link",appearance:"raw",to:e.spacesRoute},{default:A(()=>[V((d(),k("span",null,[b("Go to »Spaces Overview«")])),[[l]])]),_:1},8,["to"])):I("",!0),b(),e.showHomeButton?(d(),$(c,{key:1,id:"files-list-not-found-button-go-home",type:"router-link",appearance:"raw",to:e.homeRoute},{default:A(()=>[V((d(),k("span",null,[b("Go to »Personal« page")])),[[l]])]),_:1},8,["to"])):I("",!0),b(),e.showPublicLinkButton?(d(),$(c,{key:2,id:"files-list-not-found-button-reload-link",type:"router-link",appearance:"raw",to:e.publicLinkRoute},{default:A(()=>[V((d(),k("span",null,[b("Reload public link")])),[[l]])]),_:1},8,["to"])):I("",!0)])])}const Dc=K(wc,[["render",$c]]),Ec=W({name:"ResourceTiles",components:{ContextMenuQuickAction:Yi},props:{data:{type:Array,default:()=>[]},resizable:{type:Boolean,default:!1},selectedIds:{type:Array,default:()=>[]},targetRouteCallback:{type:Function,required:!1,default:void 0},space:{type:Object,required:!1,default:null},sortFields:{type:Array,default:()=>[]},sortBy:{type:String,required:!1,default:void 0},sortDir:{type:String,required:!1,default:void 0,validator:e=>e===void 0||[ke.Asc.toString(),ke.Desc.toString()].includes(e)},viewSize:{type:Number,required:!1,default:re.tilesSizeDefault},dragDrop:{type:Boolean,default:!1}},emits:["fileClick","fileDropped","rowMounted","sort","update:selectedIds"],setup(e,t){const s=q(),{$gettext:i}=J(),n=_(()=>s.state.Files.areFileExtensionsShown),o=Z(),a=Z(),c=Z({tiles:[],dropBtns:[]}),l=_(()=>s.getters["runtime/spaces/spaces"]),u=ca({space:Z(e.space),spaces:l,targetRouteCallback:_(()=>e.targetRouteCallback)},t),p=T=>T.type==="space"?T.disabled?{path:"#"}:be("files-spaces-generic",Ee(T,{path:"",fileId:T.fileId})):T.type==="folder"?u.createFolderLink({path:T.path,fileId:T.fileId,resource:T}):{path:""},m=T=>{T.disabled&&T.type==="space"&&s.dispatch("showMessage",{title:i("Disabled spaces cannot be entered"),status:"warning"}),T.type!=="space"&&T.type!=="folder"&&u.createFileAction(T)},h=(T,P,j)=>{const{dropdown:H,event:z}=T;(H==null?void 0:H.tippy)!==void 0&&as(H.tippy,z,r(c).dropBtns[j])},g=(T,P,j)=>{var z;T.preventDefault();const H=(z=r(c).tiles[P])==null?void 0:z.$el.getElementsByClassName("resource-tiles-btn-action-dropdown")[0];H!==void 0&&as(H._tippy,T,j)},f=T=>e.selectedIds.includes(T.id),v=T=>{const P=f(T)?e.selectedIds.filter(j=>j!==T.id):[...e.selectedIds,T.id];t.emit("update:selectedIds",P)},F=T=>{switch(T.type){case"folder":return i("Select folder");case"space":return i("Select space");default:return i("Select file")}},S=_(()=>e.sortFields.find(T=>T.name===e.sortBy&&T.sortDir===e.sortDir)||e.sortFields[0]),E=T=>{t.emit("sort",{sortBy:T.name,sortDir:T.sortDir})},L=T=>r(S)===T,N=_(()=>{var P;return(P={1:"xlarge",2:"xlarge",3:"xxlarge",4:"xxlarge",5:"xxxlarge",6:"xxxlarge"}[e.viewSize])!=null?P:"xlarge"});Va(()=>{c.value={tiles:[],dropBtns:[]}});const x=(T,P,j)=>{var M,U;if((((M=j.dataTransfer)==null?void 0:M.types)||[]).some(le=>le==="Files")||(U=j.currentTarget)!=null&&U.contains(j.relatedTarget)||e.selectedIds.includes(T.id)||T.type!=="folder")return;const z=r(c).tiles[T.id];if(P){z.$el.classList.remove("oc-tiles-item-drop-highlight");return}z.$el.classList.add("oc-tiles-item-drop-highlight")},O=_(()=>e.selectedIds.filter(T=>T!==r(o).id)),Q=async(T,P)=>{o.value=T,await ls(),r(a).$el.ariaHidden="true",r(a).$el.style.left="-99999px",r(a).$el.style.top="-99999px",P.dataTransfer.setDragImage(r(a).$el,0,0),P.dataTransfer.dropEffect="move",P.dataTransfer.effectAllowed="move"};return{areFileExtensionsShown:n,emitTileClick:m,getRoute:p,showContextMenuOnBtnClick:h,showContextMenu:g,tileRefs:c,isResourceSelected:f,toggleSelection:v,getResourceCheckboxLabel:F,selectSorting:E,isSortFieldSelected:L,currentSortField:S,resourceIconSize:N,ghostElementRef:a,dragItem:o,dragStart:async(T,P)=>{f(T)||v(T),await Q(T,P)},dragSelection:O,fileDropped:(T,P)=>{(P.dataTransfer.types||[]).some(H=>H==="Files")||(o.value=null,x(T,!0,P),t.emit("fileDropped",T.id))},setDropStyling:x}},data(){return{ImageDimension:qe}}});const Tc={key:0,class:"oc-tile-sorting oc-border-b oc-mb-m oc-pb-s"},Ic=["textContent"],Rc=["textContent"],Lc=["textContent"],Pc={class:"oc-tiles-footer"};function xc(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-list"),u=y("oc-drop"),p=y("oc-checkbox"),m=y("context-menu-quick-action"),h=y("oc-tile"),g=y("oc-ghost-element");return d(),k("div",null,[e.sortFields.length?(d(),k("div",Tc,[C("span",{class:"oc-mr-xs",textContent:D(e.$gettext("Sort by: "))},null,8,Ic),b(),w(c,{id:"oc-tiles-sort-btn",appearance:"raw","gap-size":"none"},{default:A(()=>[C("span",{textContent:D(e.$gettext(e.currentSortField.label))},null,8,Rc),b(),w(a,{name:"arrow-down-s"})]),_:1}),b(),w(u,{ref:"sortDrop",toggle:"#oc-tiles-sort-btn",class:"oc-tiles-sort-drop",mode:"click","padding-size":"small","close-on-click":""},{default:A(()=>[w(l,{class:"oc-tiles-sort-list"},{default:A(()=>[(d(!0),k(X,null,fe(e.sortFields,(f,v)=>(d(),k("li",{key:v,class:"oc-my-xs"},[w(c,{"justify-content":"space-between",class:oe(["oc-tiles-sort-list-item oc-p-s oc-width-1-1",{"oc-background-primary-gradient":e.isSortFieldSelected(f),selected:e.isSortFieldSelected(f)}]),appearance:e.isSortFieldSelected(f)?"raw-inverse":"raw",variation:e.isSortFieldSelected(f)?"primary":"passive",onClick:F=>e.selectSorting(f)},{default:A(()=>[C("span",{textContent:D(e.$gettext(f.label))},null,8,Lc),b(),e.isSortFieldSelected(f)?(d(),$(a,{key:0,name:"check",variation:"inherit"})):I("",!0)]),_:2},1032,["class","appearance","variation","onClick"])]))),128))]),_:1})]),_:1},512)])):I("",!0),b(),w(l,{class:oe(["oc-tiles oc-flex",e.resizable?"resizableTiles":""])},{default:A(()=>[(d(!0),k(X,null,fe(e.data,f=>(d(),k("li",{key:f.id,class:"oc-tiles-item"},[w(h,{ref_for:!0,ref:v=>e.tileRefs.tiles[f.id]=v,resource:f,"resource-route":e.getRoute(f),"is-resource-selected":e.isResourceSelected(f),"is-extension-displayed":e.areFileExtensionsShown,"resource-icon-size":e.resourceIconSize,draggable:e.dragDrop,onVnodeMounted:v=>e.$emit("rowMounted",f,e.tileRefs.tiles[f.id],e.ImageDimension.Tile),onContextmenu:v=>e.showContextMenu(v,f.id,e.tileRefs.tiles[f.id]),onClick:v=>e.emitTileClick(f),onDragstart:v=>e.dragStart(f,v),onDragenter:lt(v=>e.setDropStyling(f,!1,v),["prevent"]),onDragleave:lt(v=>e.setDropStyling(f,!0,v),["prevent"]),onDrop:v=>e.fileDropped(f,v),onDragover:t[0]||(t[0]=v=>v.preventDefault())},{selection:A(()=>[w(p,{label:e.getResourceCheckboxLabel(f),"hide-label":!0,size:"large",class:"oc-flex-inline oc-p-s","model-value":e.isResourceSelected(f),onClick:lt(v=>e.toggleSelection(f),["stop","prevent"])},null,8,["label","model-value","onClick"])]),imageField:A(()=>[We(e.$slots,"image",{resource:f},void 0,!0)]),actions:A(()=>[We(e.$slots,"actions",{resource:f},void 0,!0)]),contextMenu:A(()=>[w(m,{ref_for:!0,ref:v=>e.tileRefs.dropBtns[f.id]=v,item:f,class:"resource-tiles-btn-action-dropdown",onQuickActionClicked:v=>e.showContextMenuOnBtnClick(v,f,f.id)},{contextMenu:A(()=>[We(e.$slots,"contextMenuActions",{resource:f},void 0,!0)]),_:2},1032,["item","onQuickActionClicked"])]),_:2},1032,["resource","resource-route","is-resource-selected","is-extension-displayed","resource-icon-size","draggable","onVnodeMounted","onContextmenu","onClick","onDragstart","onDragenter","onDragleave","onDrop"])]))),128))]),_:3},8,["class"]),b(),e.dragItem?(d(),$(Ha,{key:1,to:"body"},[w(g,{ref:"ghostElementRef","preview-items":[e.dragItem,...e.dragSelection]},null,8,["preview-items"])])):I("",!0),b(),C("div",Pc,[We(e.$slots,"footer",{},void 0,!0)])])}const $a=K(Ec,[["render",xc],["__scopeId","data-v-e989d359"]]),jc=W({name:"SpaceReadmeContentModal",props:{space:{type:Object,required:!0},cancel:{type:Function,required:!0}},data:function(){return{readmeContent:""}},computed:{modalTitle(){return this.$gettextInterpolate(this.$gettext("Edit description for space %{name}"),{name:this.space.name})}},async mounted(){const e=this.space.spaceReadmeData.webDavUrl.split("/"),t=e.slice(e.indexOf("dav")+1).join("/");this.readmeContent=await this.$client.files.getFileContents(decodeURI(t))},methods:{...pe(["showMessage"]),...xe("Files",["UPDATE_RESOURCE_FIELD"]),editReadme(){const e=this.space.spaceReadmeData.webDavUrl.split("/"),t=e.slice(e.indexOf("dav")+1).join("/");return this.$client.files.putFileContents(decodeURI(t),this.readmeContent).then(s=>{this.cancel(),this.UPDATE_RESOURCE_FIELD({id:this.space.id,field:"spaceReadmeData",value:{...this.space.spaceReadmeData,etag:s.ETag}}),this.showMessage({title:this.$gettext("Space description was edited successfully")})}).catch(s=>{console.error(s),this.showMessage({title:this.$gettext("Failed to edit space description"),status:"danger"})})}}}),Nc={class:"oc-label",for:"description-input-area"};function Mc(e,t,s,i,n,o){const a=y("oc-modal"),c=y("portal"),l=ce("translate");return d(),$(c,{to:"app.runtime.modal"},{default:A(()=>[w(a,{"focus-trap-initial":"#description-input-area",title:e.modalTitle,"button-cancel-text":e.$gettext("Cancel"),"button-confirm-text":e.$gettext("Confirm"),onConfirm:e.editReadme,onCancel:e.cancel},{content:A(()=>[V((d(),k("label",Nc,[b("Space description")])),[[l]]),b(),V(C("textarea",{id:"description-input-area","onUpdate:modelValue":t[0]||(t[0]=u=>e.readmeContent=u),class:"oc-width-1-1 oc-height-1-1 oc-input oc-text-input",rows:"30"},null,512),[[Ii,e.readmeContent]])]),_:1},8,["title","button-cancel-text","button-confirm-text","onConfirm","onCancel"])]),_:1})}const Da=K(jc,[["render",Mc]]),zc=W({name:"SpaceContextActions",components:{ContextActionMenu:Qi,QuotaModal:Ji,ReadmeContentModal:Da},props:{actionOptions:{type:Object,required:!0}},setup(e){const t=ae(),s=q(),i=Mt(),n=Ti(e,"actionOptions"),o=_(()=>i.getSupportedMimeTypes("image/").join(",")),{actions:a}=Xi({store:s}),{actions:c}=ea({store:s}),{actions:l,modalOpen:u,closeModal:p}=ta({store:s}),{actions:m}=sa({store:s}),{actions:h,modalOpen:g,closeModal:f}=la({store:s}),{actions:v}=ia({store:s}),{actions:F}=aa({store:s}),{actions:S}=ya({store:s}),{actions:E}=ro({store:s}),L=Z(null),{actions:N,uploadImageSpace:x}=wa({store:s,spaceImageInput:L}),O=_(()=>[...[...r(E)]].filter(j=>j.isEnabled(r(n)))),Q=_(()=>{const P=[...r(v),...r(m),...r(N)];return se(t,"files-spaces-generic")&&P.splice(2,0,...r(h)),[...P].filter(j=>j.isEnabled(r(n)))}),R=_(()=>[...[...r(l),...r(c),...r(F),...r(a)]].filter(j=>j.isEnabled(r(n)))),G=_(()=>[...[...r(S)]].filter(j=>j.isEnabled(r(n)))),T=_(()=>{const P=[];return r(O).length&&P.push({name:"members",items:r(O)}),r(Q).length&&P.push({name:"primaryActions",items:r(Q)}),r(R).length&&P.push({name:"secondaryActions",items:r(R)}),r(G).length&&P.push({name:"sidebar",items:r(G)}),P});return{_actionOptions:n,menuSections:T,maxQuota:Oi(),spaceImageInput:L,uploadImageActions:N,uploadImageSpace:x,supportedSpaceImageMimeTypes:o,readmeContentModalIsOpen:g,closeReadmeContentModal:f,quotaModalIsOpen:u,closeQuotaModal:p}}});const Oc=["accept"];function Bc(e,t,s,i,n,o){const a=y("context-action-menu"),c=y("quota-modal"),l=y("readme-content-modal");return d(),k("div",null,[w(a,{"menu-sections":e.menuSections,"action-options":e._actionOptions},null,8,["menu-sections","action-options"]),b(),e.quotaModalIsOpen?(d(),$(c,{key:0,cancel:e.closeQuotaModal,spaces:e._actionOptions.resources,"max-quota":e.maxQuota},null,8,["cancel","spaces","max-quota"])):I("",!0),b(),e.readmeContentModalIsOpen?(d(),$(l,{key:1,cancel:e.closeReadmeContentModal,space:e._actionOptions.resources[0]},null,8,["cancel","space"])):I("",!0),b(),C("input",{id:"space-image-upload-input",ref:"spaceImageInput",type:"file",name:"file",multiple:"",tabindex:"-1",accept:e.supportedSpaceImageMimeTypes,onChange:t[0]||(t[0]=(...u)=>e.uploadImageSpace&&e.uploadImageSpace(...u))},null,40,Oc)])}const Ea=K(zc,[["render",Bc]]),Uc=new ht,gs="collapsed",qc=W({name:"SpaceHeader",components:{SpaceContextActions:Ea},props:{space:{type:Object,required:!0},sideBarOpen:{type:Boolean,default:!1}},setup(e){const t=J(),{$gettext:s,$ngettext:i,interpolate:n}=t,o=ne(),{getFileContents:a,getFileInfo:c}=o.webdav,l=q(),u=Mt(),p=Z(null),m=Z(""),h=Z(!0),g=Z(!1),f=_(()=>r(h)?"add":"subtract"),v=_(()=>r(h)?s("Show more"):s("Show less")),F=()=>{h.value=!r(h),r(p).classList.toggle(gs)},S=()=>{if(!r(p))return;if(r(p).classList.remove(gs),r(p).offsetHeight<150){g.value=!1;return}g.value=!0,r(h)&&r(p).classList.add(gs)},E=new ResizeObserver(S),L=()=>{!E||!r(p)||(E.unobserve(r(p)),E.observe(r(p)))},N=()=>{!E||!r(p)||E.unobserve(r(p))};et(L),wt(()=>{Uc.disconnect(),N()}),je(_(()=>e.space.spaceReadmeData),async j=>{if(!j)return;const z=decodeURI(j.webDavUrl).split("/"),M=z.find(Se=>Se.startsWith(e.space.id));if(!M)return;const U=z.slice(z.indexOf(M)+1).join("/"),le=await a(e.space,{path:decodeURIComponent(U)});N();const ve=Ka.parse(le.body);m.value=Wa(ve),r(m)&&L()},{deep:!0,immediate:!0});const x=Z(null),O=Z(!1),Q=()=>{O.value=!r(O)};je(_(()=>e.space.spaceImageData),async j=>{if(!j)return;const z=decodeURI(e.space.spaceImageData.webDavUrl).split("/"),M=z.find(ve=>ve.startsWith(e.space.id));if(!M)return;const U=z.slice(z.indexOf(M)+1).join("/"),le=await c(e.space,{path:decodeURIComponent(U)});x.value=await u.loadPreview({space:e.space,resource:le,dimensions:qe.Preview})},{deep:!0,immediate:!0});const R=_(()=>{var j;return(j=e.space)==null?void 0:j.spaceImageData}),G=_(()=>l.getters["runtime/spaces/spaceMembers"].length),T=_(()=>{const j=i("%{count} member","%{count} members",r(G));return n(j,{count:r(G)})}),P=()=>{l.commit("Files/SET_SELECTED_IDS",[]),Y.publish(_e.openWithPanel,"space-share")};return{isMobileWidth:de("isMobileWidth"),markdownContainerRef:p,markdownContent:m,markdownCollapsed:h,showMarkdownCollapse:g,toggleMarkdownCollapsedIcon:f,toggleMarkdownCollapsedText:v,toggleMarkdownCollapsed:F,imageContent:x,imageExpanded:O,toggleImageExpanded:Q,hasImage:R,memberCount:G,memberCountString:T,openSideBarSharePanel:P}}});const Vc=["src"],Hc={key:1,class:"space-header-image-default oc-flex oc-flex-middle oc-flex-center"},Kc={class:"space-header-infos"},Wc={class:"oc-flex oc-mb-s oc-flex-middle oc-flex-between"},Gc={class:"oc-flex oc-flex-middle space-header-infos-heading"},Yc={class:"space-header-name"},Qc=["textContent"],Zc={key:0,class:"oc-mt-rm oc-text-bold"},Jc=["innerHTML"],Xc={key:0,class:"markdown-collapse oc-text-center oc-mt-s"};function ed(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("space-context-actions"),u=y("oc-drop"),p=ce("oc-tooltip");return d(),k("div",{class:oe(["space-header oc-p-m",{"oc-flex":!e.imageExpanded&&!e.isMobileWidth,"space-header-squashed":e.sideBarOpen}])},[C("div",{class:oe(["space-header-image",{"space-header-image-expanded":e.imageExpanded||e.isMobileWidth}])},[e.hasImage?(d(),k("img",{key:0,class:"oc-cursor-pointer",alt:"",src:e.imageContent,onClick:t[0]||(t[0]=(...m)=>e.toggleImageExpanded&&e.toggleImageExpanded(...m))},null,8,Vc)):(d(),k("div",Hc,[w(a,{name:"layout-grid",size:"xxlarge",class:"oc-px-m oc-py-m"})]))],2),b(),C("div",Kc,[C("div",Wc,[C("div",Gc,[C("h2",Yc,D(e.space.name),1),b(),V((d(),$(c,{id:"space-context-btn","aria-label":e.$gettext("Show context menu"),appearance:"raw",class:"oc-ml-s"},{default:A(()=>[w(a,{name:"more-2"})]),_:1},8,["aria-label"])),[[p,e.$gettext("Show context menu")]]),b(),w(u,{"drop-id":"space-context-drop",toggle:"#space-context-btn",mode:"click","close-on-click":"",options:{delayHide:0},"padding-size":"small",position:"right-start"},{default:A(()=>[w(l,{"action-options":{resources:[e.space]}},null,8,["action-options"])]),_:1})]),b(),e.memberCount?(d(),$(c,{key:0,"aria-label":e.$gettext("Open context menu and show members"),appearance:"raw",onClick:e.openSideBarSharePanel},{default:A(()=>[w(a,{name:"group","fill-type":"line",size:"small"}),b(),C("span",{class:"space-header-people-count oc-text-small",textContent:D(e.memberCountString)},null,8,Qc)]),_:1},8,["aria-label","onClick"])):I("",!0)]),b(),e.space.description?(d(),k("p",Zc,D(e.space.description),1)):I("",!0),b(),C("div",null,[C("div",{ref:"markdownContainerRef",class:"markdown-container",innerHTML:e.markdownContent},null,8,Jc),b(),e.showMarkdownCollapse?(d(),k("div",Xc,[w(c,{appearance:"raw",onClick:e.toggleMarkdownCollapsed},{default:A(()=>[w(a,{name:e.toggleMarkdownCollapsedIcon},null,8,["name"]),b(),C("span",null,D(e.toggleMarkdownCollapsedText),1)]),_:1},8,["onClick"])])):I("",!0)])])],2)}const td=K(qc,[["render",ed]]),sd=(e,t)=>{const s=(o="")=>o.split("/").filter(Boolean),i=s(e.path),n=s(t);return n.map((o,a)=>({allowContextActions:!0,text:o,to:{path:"/"+[...i].splice(0,i.length-n.length+a+1).join("/"),query:ts(e.query,"fileId","page")}}))},id=(...e)=>{const t=e.pop();return[...e,{allowContextActions:t.allowContextActions,text:t.text,onClick:()=>Y.publish("app.files.list.load")}]},yi=new ht,ad=W({name:"GenericSpace",components:{AppBar:ot,AppLoadingSpinner:tt,ContextActions:mt,CreateAndUpload:yc,FilesViewWrapper:rt,KeyboardActions:kc,ListInfo:At,NoContentMessage:nt,NotFoundMessage:Dc,Pagination:zt,QuickActions:Fa,ResourceTable:Ft,ResourceTiles:$a,SideBar:ft,SpaceHeader:td},props:{space:{type:Object,required:!1,default:null},item:{type:String,required:!1,default:null},itemId:{type:[String,Number],required:!1,default:null}},setup(e){const t=_s(),{$gettext:s,$ngettext:i,interpolate:n}=J();let o;const a=_(()=>{var F;return(F=t.getters["Files/currentFolder"])==null?void 0:F.canUpload({user:t.getters.user})}),c=_(()=>[re.condensedTable,re.default,re.tilesView]),l=({path:F,fileId:S})=>{const{params:E,query:L}=Ee(e.space,{path:F,fileId:S});return Vt(e.space)?Rt("files-public-link",{params:E,query:L}):be("files-spaces-generic",{params:E,query:L})},u=_(()=>e.space.driveType==="project"&&e.item==="/"),p=_(()=>{const F=[e.space.name];return e.item!=="/"&&F.unshift(at(e.item)),F});Bi({titleSegments:p});const m=Ct(),h=_(()=>{const F=e.space,S=[];he(F)?S.push({text:s("Spaces"),to:be("files-spaces-projects")}):St(F)&&S.push({text:s("Shares"),to:{path:"/files/shares"}},{text:s("Shared with me"),to:{path:"/files/shares/with-me"}});let E,{params:L,query:N}=Ee(F,{fileId:F.fileId});return N=ts({...r(m).query,...N},"page"),Je(F)?E={text:F.name,to:be("files-spaces-generic",{params:L,query:N})}:St(F)?E={allowContextActions:!0,text:F.name,to:be("files-spaces-generic",{params:L,query:ts(N,"fileId")})}:Vt(F)?E={text:s("Public link"),to:Rt("files-public-link",{params:L,query:N})}:E={allowContextActions:!r(u),text:F.name,to:be("files-spaces-generic",{params:L,query:N})},id(...S,E,...sd(r(m),e.item))}),g=F=>{const S=document.getElementById("files-breadcrumb");if(!S)return;const E=Ri(S.children[0].children),L=E.getElementsByTagName("button")[0];if(!L)return;const N=t.getters["Files/totalFilesCount"],x=N.files+N.folders,O=n(i("This folder contains %{ amount } item.","This folder contains %{ amount } items.",x),{amount:x}),Q=x>0?O:s("This folder has no content.");document.querySelectorAll(".oc-breadcrumb-sr").forEach(G=>G.remove());const R=document.createElement("p");R.className="oc-invisible-sr oc-breadcrumb-sr",R.innerHTML=Q,E.append(R),F&&L.focus()},f=_t(),v=async(F,S,E)=>{if(f.loadResourcesTask.isRunning)return;const L={loadShares:!Vt(e.space)};await f.loadResourcesTask.perform(e.space,S||e.item,E||e.itemId,L),f.scrollToResourceFromRoute([t.getters["Files/currentFolder"],...r(f.paginatedResources)]),f.refreshFileListHeaderPosition(),g(F)};return et(()=>{v(!1),o=Y.subscribe("app.files.list.load",(F,S)=>{v(!0,F,S)})}),wt(()=>{yi.disconnect(),Y.unsubscribe("app.files.list.load",o)}),{...st(),...f,canUpload:a,breadcrumbs:h,hasSpaceHeader:u,resourceTargetRouteCallback:l,performLoaderTask:v,ViewModeConstants:re,viewModes:c,uploadHint:s('Drag files and folders here or use the "New" or "Upload" buttons to add files')}},computed:{...De(["app"]),...De("Files",["files"]),...ee("Files",["currentFolder","totalFilesCount","totalFilesSize"]),...ee(["user","configuration"]),isEmpty(){return this.paginatedResources.length<1},folderNotFound(){return!this.currentFolder},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)},isSpaceFrontpage(){return he(this.space)&&this.item==="/"}},watch:{item:{handler:function(){this.performLoaderTask(!0)}},space:{handler:function(){this.performLoaderTask(!0)}}},methods:{...pe("Files",["loadPreview"]),...pe(["showMessage","createModal","hideModal"]),...xe("Files",["REMOVE_FILES","REMOVE_FILES_FROM_SEARCHED","RESET_SELECTION"]),async fileDropped(e){const t=[...this.selectedResources],s=this.paginatedResources.find(a=>a.id===e);if(t.some(a=>a.id===e)||s.type!=="folder")return;const o=await new pa(this.space,t,this.space,s,this.$clientService,this.$loadingService,this.createModal,this.hideModal,this.showMessage,this.$gettext,this.$ngettext,this.$gettextInterpolate).perform(ze.MOVE);this.REMOVE_FILES(o),this.REMOVE_FILES_FROM_SEARCHED(o),this.RESET_SELECTION()},rowMounted(e,t,s){if(!this.displayThumbnails)return;const i=pt(({unobserve:n})=>{n(),this.loadPreview({previewService:this.$previewService,space:this.space,resource:e,dimensions:s,type:Ot.Thumbnail})},250);yi.observe(t.$el,{onEnter:i,onExit:i.cancel})}}}),nd=["textContent"],od=["textContent"];function rd(e,t,s,i,n,o){const a=y("keyboard-actions"),c=y("create-and-upload"),l=y("app-bar"),u=y("app-loading-spinner"),p=y("not-found-message"),m=y("space-header"),h=y("no-content-message"),g=y("context-actions"),f=y("pagination"),v=y("list-info"),F=y("resource-tiles"),S=y("quick-actions"),E=y("resource-table"),L=y("files-view-wrapper"),N=y("side-bar");return d(),k("div",{class:oe(["oc-flex oc-width-1-1",{"space-frontpage":e.isSpaceFrontpage}])},[w(a,{"paginated-resources":e.paginatedResources,space:e.space},null,8,["paginated-resources","space"]),b(),w(L,null,{default:A(()=>[w(l,{breadcrumbs:e.breadcrumbs,"breadcrumbs-context-actions-items":[e.currentFolder],"view-modes":e.viewModes,"has-bulk-actions":!0,"show-actions-on-selection":!0,"side-bar-open":e.sideBarOpen,space:e.space},{actions:A(({limitedScreenSpace:x})=>[w(c,{space:e.space,item:e.item,"item-id":e.itemId,"limited-screen-space":x},null,8,["space","item","item-id","limited-screen-space"])]),_:1},8,["breadcrumbs","breadcrumbs-context-actions-items","view-modes","side-bar-open","space"]),b(),e.areResourcesLoading?(d(),$(u,{key:0})):(d(),k(X,{key:1},[e.folderNotFound?(d(),$(p,{key:0,space:e.space,class:"files-not-found"},null,8,["space"])):(d(),k(X,{key:1},[e.hasSpaceHeader?(d(),$(m,{key:0,space:e.space,"side-bar-open":e.sideBarOpen,class:"oc-px-m oc-mt-m"},null,8,["space","side-bar-open"])):I("",!0),b(),e.isEmpty?(d(),$(h,{key:1,id:"files-space-empty",class:"files-empty",icon:"folder"},{message:A(()=>[C("span",{textContent:D(e.$gettext("No resources found"))},null,8,nd)]),callToAction:A(()=>[e.canUpload?(d(),k("span",{key:0,class:"file-empty-upload-hint",textContent:D(e.uploadHint)},null,8,od)):I("",!0)]),_:1})):e.viewMode===e.ViewModeConstants.tilesView.name?(d(),$(F,{key:2,selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=x=>e.selectedResourcesIds=x),data:e.paginatedResources,class:"oc-px-m oc-pt-l",resizable:!0,"target-route-callback":e.resourceTargetRouteCallback,space:e.space,"drag-drop":!0,"sort-fields":e.sortFields,"sort-by":e.sortBy,"sort-dir":e.sortDir,"view-size":e.viewSize,onRowMounted:e.rowMounted,onFileClick:e.triggerDefaultAction,onFileDropped:e.fileDropped,onSort:e.handleSort},{contextMenuActions:A(({resource:x})=>[w(g,{"action-options":{space:e.space,resources:[x]}},null,8,["action-options"])]),footer:A(()=>[w(f,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(v,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize},null,8,["files","folders","size"])):I("",!0)]),_:1},8,["selectedIds","data","target-route-callback","space","sort-fields","sort-by","sort-dir","view-size","onRowMounted","onFileClick","onFileDropped","onSort"])):(d(),$(E,{key:3,id:"files-space-table",selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[1]||(t[1]=x=>e.selectedResourcesIds=x),class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"view-mode":e.viewMode,"are-thumbnails-displayed":e.displayThumbnails,resources:e.paginatedResources,"target-route-callback":e.resourceTargetRouteCallback,"header-position":e.fileListHeaderY,"drag-drop":!0,"sort-by":e.sortBy,"sort-dir":e.sortDir,space:e.space,onFileDropped:e.fileDropped,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.handleSort},{quickActions:A(({resource:x})=>[w(S,{class:oe([x.preview,"oc-visible@s"]),item:x,actions:e.app.quickActions},null,8,["class","item","actions"])]),contextMenu:A(({resource:x})=>[e.isResourceInSelection(x)?(d(),$(g,{key:0,"action-options":{space:e.space,resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(f,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(v,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize},null,8,["files","folders","size"])):I("",!0)]),_:1},8,["selectedIds","class","view-mode","are-thumbnails-displayed","resources","target-route-callback","header-position","sort-by","sort-dir","space","onFileDropped","onFileClick","onRowMounted","onSort"]))],64))],64))]),_:1}),b(),w(N,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.space},null,8,["open","active-panel","space"])],2)}const ld=K(ad,[["render",rd]]),cd=W({name:"GenericTrash",components:{AppBar:ot,AppLoadingSpinner:tt,ContextActions:mt,FilesViewWrapper:rt,ListInfo:At,NoContentMessage:nt,Pagination:zt,ResourceTable:Ft,SideBar:ft},props:{space:{type:Object,required:!1,default:null},itemId:{type:[String,Number],required:!1,default:null}},setup(e){const{$gettext:t}=J();let s;const i=_(()=>e.space.driveType==="personal"?t("You have no deleted files"):t("Space has no deleted files")),n=jt(),o=_(()=>{const l=[t("Deleted files")];return r(n)&&l.unshift(e.space.name),l});Bi({titleSegments:o});const a=_t(),c=async()=>{await a.loadResourcesTask.perform(e.space),a.refreshFileListHeaderPosition(),a.scrollToResourceFromRoute(r(a.paginatedResources))};return et(()=>{c(),s=Y.subscribe("app.files.list.load",()=>{c()})}),wt(()=>{Y.unsubscribe("app.files.list.load",s)}),{...a,hasShareJail:we(),noContentMessage:i}},computed:{...De("Files",["files"]),...ee("Files",["totalFilesCount"]),...ee(["user"]),isEmpty(){return this.paginatedResources.length<1},breadcrumbs(){var t;let e=(t=this.space)==null?void 0:t.name;return this.space.driveType==="personal"&&(e=this.hasShareJail?this.$gettext("Personal"):this.$gettext("All files")),[{text:this.$gettext("Deleted files"),to:zs("files-trash-overview")},{text:e,onClick:()=>Y.publish("app.files.list.load")}]},showActions(){return!he(this.space)||this.space.isEditor(this.user)||this.space.isManager(this.user)}}}),dd={class:"oc-flex oc-width-1-1"};function ud(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("context-actions"),p=y("pagination"),m=y("list-info"),h=y("resource-table"),g=y("files-view-wrapper"),f=y("side-bar");return d(),k("div",dd,[w(g,null,{default:A(()=>[w(a,{breadcrumbs:e.breadcrumbs,"has-bulk-actions":!0,"side-bar-open":e.sideBarOpen,space:e.space},null,8,["breadcrumbs","side-bar-open","space"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.isEmpty?(d(),$(l,{key:0,id:"files-trashbin-empty",class:"files-empty",icon:"delete-bin-7","icon-fill-type":"line"},{message:A(()=>[C("span",null,D(e.noContentMessage),1)]),_:1})):(d(),$(h,{key:1,id:"files-trashbin-table",selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=v=>e.selectedResourcesIds=v),class:oe(["files-table",{"files-table-squashed":e.sideBarOpen}]),"fields-displayed":["name","ddate"],"are-paths-displayed":!0,"are-thumbnails-displayed":!1,resources:e.paginatedResources,"are-resources-clickable":!1,"header-position":e.fileListHeaderY,"sort-by":e.sortBy,"sort-dir":e.sortDir,space:e.space,"has-actions":e.showActions,onSort:e.handleSort},{contextMenu:A(({resource:v})=>[e.isResourceInSelection(v)?(d(),$(u,{key:0,"action-options":{space:e.space,resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(p,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.paginatedResources.length>0?(d(),$(m,{key:0,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders},null,8,["files","folders"])):I("",!0)]),_:1},8,["selectedIds","class","resources","header-position","sort-by","sort-dir","space","has-actions","onSort"]))],64))]),_:1}),b(),w(f,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.space},null,8,["open","active-panel","space"])])}const pd=K(cd,[["render",ud]]),hd=W({components:{DriveRedirect:sc,GenericSpace:ld,GenericTrash:pd},setup(){const e=q(),t=ne(),s=ae(),i=$n("driveAliasAndItem"),n=Ie(se,"files-spaces-generic"),o=Ie(me,"files-trash-generic"),a=Dn({store:e,driveAliasAndItem:i}),c=async()=>{const l=r(a.space);try{return await t.webdav.getFileInfo(l)}catch(u){return console.error(u),l}};return et(async()=>{const l=r(a.space);if(l&&Vt(l)){let u=await c();Ds.bitmask(!1)===u.publicLinkPermission&&s.push({name:Qn.name,params:{token:l.id.toString()}})}}),{...a,driveAliasAndItem:i,isSpaceRoute:n,isTrashRoute:o}}});function md(e,t,s,i,n,o){const a=y("drive-redirect"),c=y("generic-trash"),l=y("generic-space");return e.space?e.isTrashRoute?(d(),$(c,{key:1,space:e.space,"item-id":e.itemId},null,8,["space","item-id"])):(d(),$(l,{key:2,space:e.space,item:e.item,"item-id":e.itemId},null,8,["space","item","item-id"])):(d(),$(a,{key:0,"drive-alias-and-item":e.driveAliasAndItem,"append-home-folder":e.isSpaceRoute},null,8,["drive-alias-and-item","append-home-folder"]))}const fd=K(hd,[["render",md]]),gd=W({setup(){const e=ne(),{createSpace:t}=Sa(),{checkSpaceNameModalInput:s}=Ki();return{clientService:e,createSpace:t,checkSpaceNameModalInput:s}},methods:{...pe(["showMessage","createModal","hideModal","setModalInputErrorMessage"]),...xe("runtime/spaces",["UPSERT_SPACE"]),...xe("Files",["UPSERT_RESOURCE","UPDATE_RESOURCE_FIELD"]),showCreateSpaceModal(){const e={variation:"passive",title:this.$gettext("Create a new space"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Create"),hasInput:!0,inputLabel:this.$gettext("Space name"),inputValue:this.$gettext("New space"),onCancel:this.hideModal,onConfirm:this.addNewSpace,onInput:this.checkSpaceNameModalInput};this.createModal(e)},async addNewSpace(e){try{const t=await this.createSpace(e);this.hideModal(),this.UPSERT_RESOURCE(t),this.UPSERT_SPACE(t)}catch(t){console.error(t),this.showMessage({title:this.$gettext("Creating space failed…"),status:"danger"})}}}});function bd(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("translate"),u=ce("oc-tooltip");return V((d(),$(c,{id:"new-space-menu-btn",key:"new-space-menu-btn-enabled","aria-label":e.$gettext("Create a new space"),appearance:"filled",variation:"primary",onClick:e.showCreateSpaceModal},{default:A(()=>[w(a,{name:"add"}),b(),V((d(),k("span",null,[b("New Space")])),[[l]])]),_:1},8,["aria-label","onClick"])),[[u,e.$gettext("Create a new space")]])}const yd=K(gd,[["render",bd]]),vd=W({components:{AppBar:ot,AppLoadingSpinner:tt,CreateSpace:yd,FilesViewWrapper:rt,NoContentMessage:nt,ResourceTiles:$a,SideBar:ft,SpaceContextActions:Ea},setup(){const e=q(),t=ne(),{selectedResourcesIds:s}=Zs({store:e}),{can:i}=Nt(),n=_(()=>e.getters["runtime/spaces/spaces"].filter(v=>he(v))||[]),o=Ca,{sortBy:a,sortDir:c,items:l,handleSort:u}=Ht({items:n,fields:o}),{scrollToResourceFromRoute:p}=Js(),m=Ue(function*(){e.commit("Files/CLEAR_FILES_SEARCHED"),e.commit("Files/CLEAR_CURRENT_FILES_LIST"),yield e.dispatch("runtime/spaces/reloadProjectSpaces",{graphClient:t.graphAuthenticated}),e.commit("Files/LOAD_FILES",{currentFolder:null,files:r(l)})}),h=_(()=>m.isRunning||!m.last),g=_(()=>i("create-all","Drive")),f=_(()=>[re.tilesView]);return et(async()=>{await m.perform(),p(r(l))}),{...Zi(),spaces:l,clientService:t,loadResourcesTask:m,areResourcesLoading:h,selectedResourcesIds:s,handleSort:u,sortBy:a,sortDir:c,sortFields:o,hasCreatePermission:g,viewModes:f}},data:function(){return{imageContentObject:{}}},computed:{...ee("Files",["highlightedFile"]),breadcrumbs(){return[{text:this.$gettext("Spaces"),onClick:()=>this.loadResourcesTask.perform()}]},showSpaceMemberLabel(){return this.$gettext("Show members")}},watch:{spaces:{handler:async function(e){var t,s;if(e)for(const i of this.spaces){if(!i.spaceImageData||((t=this.imageContentObject[i.id])==null?void 0:t.fileId)===((s=i.spaceImageData)==null?void 0:s.id))continue;const o=decodeURI(i.spaceImageData.webDavUrl).split("/"),a=o.find(u=>u.startsWith(`${i.id}`));if(!a)return;const c=o.slice(o.indexOf(a)+1).join("/"),l=await this.$clientService.webdav.getFileInfo(i,{path:c});this.$previewService.loadPreview({space:i,resource:l,dimensions:qe.Tile}).then(u=>{this.imageContentObject[i.id]={fileId:i.spaceImageData.id,data:u}})}},deep:!0,immediate:!0}},methods:{...xe("Files",["SET_FILE_SELECTION"]),openSidebarSharePanel(e){this.SET_FILE_SELECTION([e]),Y.publish(_e.openWithPanel,"space-share")}}});const Sd={class:"oc-flex"},kd=["textContent"],wd={key:1,class:"spaces-list oc-px-m oc-mt-l"},Cd=["src"];function Fd(e,t,s,i,n,o){const a=y("create-space"),c=y("app-bar"),l=y("app-loading-spinner"),u=y("no-content-message"),p=y("oc-icon"),m=y("oc-button"),h=y("space-context-actions"),g=y("resource-tiles"),f=y("files-view-wrapper"),v=y("side-bar"),F=ce("oc-tooltip");return d(),k("div",Sd,[w(f,null,{default:A(()=>[w(c,{breadcrumbs:e.breadcrumbs,"has-sidebar-toggle":!0,"show-actions-on-selection":!0,"has-bulk-actions":!0,"has-hidden-files":!1,"has-file-extensions":!1,"has-pagination":!1,"side-bar-open":e.sideBarOpen,"view-modes":e.viewModes},{actions:A(()=>[e.hasCreatePermission?(d(),$(a,{key:0})):I("",!0)]),_:1},8,["breadcrumbs","side-bar-open","view-modes"]),b(),e.areResourcesLoading?(d(),$(l,{key:0})):(d(),k(X,{key:1},[e.spaces.length?(d(),k("div",wd,[w(g,{selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=S=>e.selectedResourcesIds=S),data:e.spaces,resizable:!0,"sort-fields":e.sortFields,"sort-by":e.sortBy,"sort-dir":e.sortDir,onSort:e.handleSort},{image:A(({resource:S})=>[e.imageContentObject[S.id]?(d(),k("img",{key:0,class:"tile-preview",src:e.imageContentObject[S.id].data,alt:""},null,8,Cd)):I("",!0)]),actions:A(({resource:S})=>[V((d(),$(m,{"aria-label":e.showSpaceMemberLabel,appearance:"raw",onClick:E=>e.openSidebarSharePanel(S)},{default:A(()=>[w(p,{name:"group","fill-type":"line"})]),_:2},1032,["aria-label","onClick"])),[[F,e.showSpaceMemberLabel]])]),contextMenuActions:A(({resource:S})=>[w(h,{"action-options":{resources:[S]}},null,8,["action-options"])]),_:1},8,["selectedIds","data","sort-fields","sort-by","sort-dir","onSort"])])):(d(),$(u,{key:0,id:"files-spaces-empty",class:"files-empty",icon:"layout-grid"},{message:A(()=>[C("span",{textContent:D(e.$gettext("You don't have access to any spaces"))},null,8,kd)]),_:1}))],64))]),_:1}),b(),w(v,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.highlightedFile},null,8,["open","active-panel","space"])])}const _d=K(vd,[["render",Fd]]),Ad=W({name:"TrashOverview",components:{FilesViewWrapper:rt,AppBar:ot,AppLoadingSpinner:tt,NoContentMessage:nt},setup(){const e=q(),t=ae(),{$gettext:s}=J(),i=ne(),{y:n}=js(),o=Z("name"),a=Z("asc"),c=Z(""),l=Z(void 0),u=Z(void 0),p=_(()=>e.getters["runtime/spaces/spaces"].filter(R=>Je(R)||he(R))),m=Ue(function*(){e.commit("Files/CLEAR_FILES_SEARCHED"),e.commit("Files/CLEAR_CURRENT_FILES_LIST"),yield e.dispatch("runtime/spaces/reloadProjectSpaces",{graphClient:i.graphAuthenticated}),e.commit("Files/LOAD_FILES",{currentFolder:null,files:r(p)})}),h=_(()=>m.isRunning||!m.last),g=_(()=>s("%{spaceCount} trashes in total",{spaceCount:r(p).length.toString()})),f=_(()=>s("%{spaceCount} matching trashes",{spaceCount:r(S).length.toString()})),v=_(()=>[{text:s("Deleted files"),onClick:()=>m.perform()}]),F=(R,G,T)=>[...R].sort((P,j)=>{if(Je(P))return-1;if(Je(j))return 1;const H=P[G],z=j[G];return T?z.localeCompare(H):H.localeCompare(z)}),S=_(()=>F(L(r(p),r(c)),r(o),r(a)==="desc")),E=R=>{o.value=R.sortBy,a.value=R.sortDir},L=(R,G)=>(G||"").trim()?new Pi(R,{...Wi,keys:["name"]}).search(G).map(P=>P.item):R,N=_(()=>[{name:"icon",title:"",type:"slot",width:"shrink"},{name:"name",title:s("Name"),type:"slot",sortable:!0}]),x=R=>Je(R)?s("Personal"):R.disabled===!0?s("%{spaceName} (disabled)",{spaceName:R.name}):R.name,O=R=>he(R)&&R.disabled===!0?{disabled:!0}:{type:"router-link",to:Q(R)},Q=R=>zs("files-trash-generic",{...Ee(R,{fileId:R.fileId})});return et(async()=>{var R;if(r(p).length===1&&!he(r(p)[0]))return t.push(Q(r(p).pop()));await m.perform(),await ls(),l.value=new Li((R=r(u))==null?void 0:R.$el)}),je(c,()=>{const R=r(l);R&&(R.unmark(),R.mark(r(c),{element:"span",className:"highlight-mark",exclude:["th *","tfoot *"]}))}),{sortBy:o,sortDir:a,filterTerm:c,footerTextTotal:g,footerTextFilter:f,fields:N,tableRef:u,spaces:p,filter:L,handleSort:E,displaySpaces:S,breadcrumbs:v,getSpaceName:x,getTrashLink:Q,getSpaceAttributes:O,loadResourcesTask:m,areResourcesLoading:h,isPersonalSpaceResource:Je,fileListHeaderY:n}}});const $d={class:"oc-flex"},Dd=["textContent"],Ed={class:"oc-text-nowrap oc-text-center oc-width-1-1 oc-my-s"},Td={class:"oc-text-muted"},Id={key:0,class:"oc-text-muted"};function Rd(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("oc-text-input"),p=y("oc-icon"),m=y("oc-button"),h=y("oc-table"),g=y("files-view-wrapper");return d(),k("div",$d,[w(g,null,{default:A(()=>[w(a,{breadcrumbs:e.breadcrumbs,"has-sidebar-toggle":!1,"has-view-options":!1,"has-hidden-files":!1,"has-file-extensions":!1,"has-pagination":!1},null,8,["breadcrumbs"]),b(),e.areResourcesLoading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.spaces.length?(d(),k(X,{key:1},[w(u,{id:"spaces-filter",modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=f=>e.filterTerm=f),class:"oc-ml-m oc-my-s",label:e.$gettext("Search"),autocomplete:"off"},null,8,["modelValue","label"]),b(),w(h,{ref:"tableRef",class:"spaces-table","sort-by":e.sortBy,"sort-dir":e.sortDir,fields:e.fields,data:e.displaySpaces,"header-position":e.fileListHeaderY,sticky:!0,hover:!0,onSort:e.handleSort},{icon:A(({item:f})=>[e.isPersonalSpaceResource(f)?(d(),$(p,{key:0,class:"oc-pl-m",name:"folder"})):(d(),$(p,{key:1,class:"oc-pl-m",name:"layout-grid"}))]),name:A(({item:f})=>[w(m,Be({class:"oc-display-block",appearance:"raw"},e.getSpaceAttributes(f),{textContent:D(e.getSpaceName(f))}),null,16,["textContent"])]),footer:A(()=>[C("div",Ed,[C("p",Td,D(e.footerTextTotal),1),b(),e.filterTerm?(d(),k("p",Id,D(e.footerTextFilter),1)):I("",!0)])]),_:1},8,["sort-by","sort-dir","fields","data","header-position","onSort"])],64)):(d(),$(l,{key:0,icon:"delete-bin-5"},{message:A(()=>[C("span",{textContent:D(e.$gettext("You don't have access to any trashbins"))},null,8,Dd)]),_:1}))],64))]),_:1})])}const Ld=K(Ad,[["render",Rd]]),Pd={"(me)":"(أنا)",Accept:"موافق","Access denied":"الدخول مرفوض",Actions:"إجراءات","Add people":"أضف أشخاصا","All deleted files were removed":"تمت إزالة جميع الملفات المحذوفة","All files":"كل الملفات","An error occurred while loading the public link":"حدث خطأ أثناء تحميل الرابط العام","Are you sure you want to delete all selected resources?":"هل أنت متأكد أنك تريد حذف كافة الموارد المحددة؟","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"هل أنت متأكد أنك تريد حذف كافة الموارد المحددة؟ سيتم إزالة كل محتوياتهم بشكل دائم. لا يمكن التراجع عن هذا الإجراء.","Are you sure you want to delete this file?":"هل أنت متأكد أنك تريد حذف هذا الملف؟","Are you sure you want to delete this folder?":"هل أنت متأكد أنك تريد حذف هذا المجلد؟",Cancel:"إلغاء","Clear selection":"تحديد واضح","Close sidebar to hide details":"إغلاق الشريط الجانبي لإخفاء التفاصيل",Copy:{"Action in the files list row to initiate copying resources":"نسخ","":"نسخ"},Create:"أنشأ","Create a new file":"قم بإنشاء ملف جديد","Create a new folder":"انشاء مجلد جديد","Custom permissions":"صلاحيات مخصصة",Decline:"رفض",Delete:"حذف","Delete file %{name}":"حذف الملف٪ {name}","Delete folder %{name}":"حذف المجلد٪ {name}","Deleted files":"الملفات المحذوفة",Details:"التفاصيل",Download:"تحميل","Drop files here to upload or click to select file":"قم بإسقاط الملفات هنا للتحميل أو انقر لتحديد الملف","Empty trash bin":"سلة المهملات فارغة","Expires %{expires}":"تنتهي في٪ {expires}","Favorite files":"الملفات المفضلة",Favorites:"التفضيلات","File name":"اسم الملف","File name cannot be empty":"لا يمكن أن يكون اسم الملف فارغًا",'File name cannot be equal to ".."':'لا يمكن أن يكون اسم الملف مساويًا لـ ".."','File name cannot be equal to "."':'لا يمكن أن يكون اسم الملف مساويًا لـ "."','File name cannot contain "/"':'لا يمكن أن يحتوي اسم الملف على "/"',"File name cannot end with whitespace":"لا يمكن لاسم الملف أن ينتهي بمسافة بيضاء",Files:"ملفات","Files shared via link":"تمت مشاركة الملفات عبر رابط","Files shared with me":"الملفات المشتركة معي","Files shared with others":"الملفات المشتركة مع الآخرين","Filter members":"تصفية الأعضاء","Filter:":"تصفيه","Folder name":"إسم الملف","Folder name cannot be empty":"لا يمكن لاسم المجلد أن يكون فارغًا",'Folder name cannot be equal to ".."':'لا يمكن أن يكون اسم المجلد مساويًا لـ ".."','Folder name cannot be equal to "."':'لا يمكن أن يكون اسم المجلد مساويًا لـ "."','Folder name cannot contain "/"':'لا يمكن أن يحتوي اسم المجلد على "/"',Group:"مجموعة",Guest:"ضيف",Link:"رابط","Loading public link…":"تحميل الرابط العام ...",Members:"اعضاء",Modified:"تم التعديل",Name:"اسم",New:"جديد","New file":"ملف جديد","New folder":"ملف جديد","No Versions available for this file":"لا توجد إصدارات متاحة لهذا الملف","Open folder":{"Action in the files list row to open a folder":"افتح المجلد"},"Open sidebar to view details":"افتح الشريط الجانبي لعرض التفاصيل",Owner:"المالك",Password:"كلمة المرور","Password cannot be empty":"لا يمكن أن تكون كلمة المرور فارغة","Paste here":"الصق هنا","Permanently delete file %{name}":"حذف الملف٪ {name} نهائيًا","Permanently delete folder %{name}":"حذف المجلد٪ {name} نهائيًا","Person was added":"تمت إضافة الشخص","Private link":"رابط خاص","Public link":"رابط عام","Reload public link":"إعادة تحميل الرابط العام","Remote user":"مستخدم بعيد","Remove expiration date":"إزالة تاريخ انتهاء الصلاحية","Remove password":"إزالة كلمة المرور ",Rename:"إعادة تسمية","Resource not found":"لم يتم العثور على المورد",Restore:"استرجع",Save:"حفظ",Search:"بحث",Share:"شارك","Shared by":"تمت المشاركة بواسطة","Shared via link":"تمت المشاركة عبر الرابط","Shared with me":"مشاركة معي","Shared with others":"مشاركة مع الآخرين","Show context menu":"إظهار قائمة السياق","Show links":"اظهار الروابط",Spaces:"مسافات",Status:"حالة","The file type is unsupported":"نوع الملف غير معتمد","The name cannot be empty":"لا يمكن أن يكون الاسم فارغًا",'The name cannot be equal to ".."':'لا يمكن أن يكون الاسم مساويًا لـ ".."','The name cannot be equal to "."':'لا يمكن أن يكون الاسم مساويًا لـ "."','The name cannot contain "/"':'لا يمكن أن يحتوي الاسم على "/"',"The name cannot end with whitespace":"لا يمكن أن ينتهي الاسم بمسافة بيضاء","There are no resources marked as favorite":"لا توجد موارد تم تحديدها كمفضلة","This item is directly shared with others.":"ذا العضو المشترك مباشرة مع الآخرين",User:"مستخدم",Versions:"إصدارات","We went looking everywhere, but were unable to find the selected resource.":"قمنا بالبحث في كل مكان ، ولكن لم نتمكن من العثور على المورد المحدد.","You don't have permission to share this file.":"ليس لديك إذن بمشاركة هذا الملف.","You don't have permission to share this folder.":"ليس لديك إذن بمشاركة هذا المجلد.","You have no deleted files":"ليس لديك ملفات محذوفة","You have no permission to upload!":"ليس لديك إذن للتحميل!"},xd={'"%{file}" was deleted successfully':'"%{file}" е изтрит успешно','"%{fileName}" was created successfully':'"%{fileName}" е създаден успешно','"%{folderName}" was created successfully':'"%{folderName}" е създаден успешно',"“via folder”":'"чрез папка"',"(me)":"(аз)","%{ amount } item selected. Actions are available above the table.":["%{ amount } избран елемент. Действията са достъпни над таблицата.","%{ amount } избрани елемента. Действията са достъпни над таблицата."],"%{ filesCount } file":["%{ foldersCount } файл","%{ foldersCount } файла"],"%{ foldersCount } folder":["%{ foldersCount } папка","%{ foldersCount } папки"],"%{ itemCount } item selected":["%{ itemCount } избран елемент","%{ itemCount } избрани елемента"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["Общо %{ itemsCount } елемент (%{ filesStr}, %{foldersStr}, %{spacesStr})","Общо %{ itemsCount } елемента (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["Общо %{ itemsCount } елемент (%{ filesStr}, %{foldersStr})","Общо %{ itemsCount } елемента (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } елемент с %{ itemSize } общо (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } елемента с %{ itemSize } общо (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } елемент с общо %{ itemSize } (%{ filesStr}, %{foldersStr})","%{ itemsCount } елемента с общо %{ itemSize } (%{ filesStr}, %{foldersStr})"],"%{ spacesCount } space":["%{ spacesCount } пространство","%{ spacesCount } пространства"],"%{collaboratorName} (me)":"%{collaboratorName} (аз)","%{count} item was copied successfully":["%{count} елемент беше копиран успешно","%{count} елемента бяха копирани успешно"],"%{count} item was moved successfully":["%{count} елемент беше преместен успешно","%{count} елемента бяха преместени успешно"],"%{count} member":["%{count} член","%{count} члена"],"%{name} already exists":"%{name} вече съществува","%{owner} shared this folder with you for uploading":"%{owner} сподели с вас тази папка за качване","%{resource} was restored successfully":"%{resource} е успешно възстановен","%{resourceCount} files restored successfully":"%{resourceCount} файла бяха възстановени успешно","%{spaceCount} matching trashes":"%{spaceCount} съответстващи кошчета","%{spaceCount} trashes in total":"Общо %{spaceCount} кошчета","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},"A-Z":"А-Я",Accept:"Приемане","Accept share":["Приемане на споделянето","Приемане на споделянията"],"Accepted shares":"Приети споделяния","Access denied":"Отказан достъп","Access details":"Достъп до подробности","Access expires":"Срокът за достъп изтича",'Account and login is required. Only people from the list "Invited people" can access.':'Изисква се профил и вход. Достъп имат само хората от списъка "Поканени".',Actions:"Действия",Add:"Добавяне","Add expiration date":"Добавяне на дата на валидност","Add link":"Добавяне на връзка","Add members to this Space":"Добавяне на членове към това пространство","Add or edit tags":"Добавяне или редактиране на етикети","Add password":"Добавяне на парола","Add people":"Добавяне на хора","Add to favorites":"Добавяне към любими","Additional info":"Допълнителна информация","All Actions":"Цялата дейност","All deleted files were removed":"Всички изтрити файлове бяха премахнати","All files":"Всички файлове","All files and folders":"Всички файлове и папки","An error occurred while loading the public link":"Възникна грешка при зареждането на публичната връзка",Apply:"Прилагане","Apply to all %{count} conflicts":"Прилагане за всички %{count} конфликта","Apply to all %{count} files":"Прилага се за всички %{count} файла","Apply to all %{count} folders":"Прилага се за всички %{count} папки","Are you sure you want to delete all selected resources?":"Сигурни ли сте, че искате да изтриете всички избрани ресурси?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Сигурни ли сте, че искате да изтриете всички избрани ресурси? Цялото им съдържание ще бъде премахнато завинаги. Това действие не може да бъде отменено.","Are you sure you want to delete this file?":"Сигурни ли сте, че искате да изтриете този файл?","Are you sure you want to delete this folder?":"Сигурни ли сте, че искате да изтриете тази папка?","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Сигурни ли сте, че искате да изтриете тази връзка? Повторното създаване на същата връзка не е възможно.","Are you sure you want to remove this share?":"Сигурни ли сте, че искате да премахнете това споделяне?",Cancel:"Отказ","Choose how access is granted":"Избор на начина на предоставяне на достъп","Clear selection":"Изчистване на селекцията","Close filter":"Затваряне на филтъра","Close sidebar to hide details":"Затворете страничната лента, за да скриете подробностите","Context menu of the share":"Контекстно меню на споделянето",Copied:"Копирано","Copied to clipboard!":"Копирано в клипборда!",Copy:{"Action in the files list row to initiate copying resources":"Копиране","":"Копиране"},"Copy direct link":"Копиране на директната връзка","Copy FUSE path":"Копиране на FUSE пътя","Copy here":"Копиране тук","Copy here?":"Да се копира ли тук?","Copy link to clipboard":"Копиране на връзката в клипборда","Copy private link to clipboard":"Копиране на поверителната връзка в клипборда","Copy Windows path":"Копиране на Windows пътя",Create:"Създаване","Create a new file":"Създаване на нов файл","Create a new folder":"Създаване на нова папка","Create a new space":"Създаване на ново пространство","Create link":"Създаване на връзка","Create new files or folders":"Създаване на нови файлове или папки","Creating share":"Създаване на споделяне","Creating space failed…":"Неуспешно създаване на пространство...","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},"Custom permissions":"Персонализирани разрешения",Cut:{"Action in the files list row to initiate cutting resources":"Изрязване"},"Cut to clipboard!":"Изрязване в клипборда!",Decline:"Отхвърляне","Decline share":["Отхвърляне на споделяне","Отхвърляне на споделяния"],"Declined shares":"Отхвърлени споделяния",Delete:"Изтриване","Delete file %{name}":"Изтриване на файла %{name}","Delete folder %{name}":"Изтриване на папката %{name}","Delete link":"Изтриване на връзка","Delete selected resource?":["Да се изтрие ли избраният ресурс?","Да се изтрият ли избраните %{amount} ресурса?"],Deleted:"Изтрито","Deleted files":"Изтрити файлове","Deny access":"Отказан достъп","Deselect %{name}":"Премахване избора на %{name}",Details:"Подробности","Direct link":"Директна връзка","Direct link copied":"Директната връзка е копирана","Disabled spaces cannot be entered":"Деактивиране на  пространства, в които не може да се въвежда","Display customization options of the files list":"Показване на опциите за персонализиране на списъка с файлове",Download:"Изтегляне",'Drag files and folders here or use the "New" or "Upload" buttons to add files':'Плъзнете тук файлове и папки или използвайте бутоните "Нов" или "Качване", за да добавите файлове.',"Drop files here to upload or click to select file":"Пуснете файлове тук, за да ги качите, или натиснете ако искате да изберете файл","Edit expiration date":"Редактиране на датата на изтичане на валидността","Edit image":"Редактиране на изображението","Edit name":"Редактиране на името","Edit password":"Редактиране на паролата","Empty trash bin":"Изпразване на кошчето","Enter a name to add people or groups as members to this Space.":"Въведете име, за да добавите хора или групи като членове на това пространство.","Error while editing the share.":"Грешка при редактиране на споделянето.","Everyone with the link":"Всички с връзката","Expires %{expires}":"Изтича на %{expires}","Failed to accept the selected share.":["Неуспешно приемане на избраното споделяне.","Неуспешно приемане на избраните споделяния."],"Failed to apply expiration date":"Неуспешно прилагане на датата на валидност","Failed to apply new permissions":"Неуспешно прилагане на новите разрешения",'Failed to change favorite state of "%{file}"':'Неуспешна промяна на статуса любим на файла "%{file}"','Failed to copy "%{name}"':'Неуспешно копиране на "%{name}"',"Failed to copy %{count} resources":"Неуспешно копиране на %{count} ресурса","Failed to create file":"Неуспех при създаването на файл","Failed to create folder":"Неуспех при създаването на папка","Failed to create link":"Неуспех при създаването на връзка","Failed to decline the selected share":["Неуспешно отхвърляне на избраното споделяне","Неуспешно отхвърляне на избраните споделяния"],'Failed to delete "%{file}"':'Неуспех при изтриването на "%{file}"','Failed to delete "%{file}" - the file is locked':'Неуспех при изтриването на "%{file}" - файлът е заключен',"Failed to delete link":"Неуспех при изтриването на връзка","Failed to download the selected folder.":["Неуспех при изтеглянето на избраната папка.","Неуспех при изтеглянето на избраните файлове."],'Failed to move "%{name}"':'Неуспех при преместването на "%{name}"',"Failed to move %{count} resources":"Неуспешно преместване на %{count} ресурса","Failed to remove share":"Неуспех при премахването на споделяне",'Failed to rename "%{file}" to "%{newName}"':'Неуспешно преименуване на "%{file}" на "%{newName}"','Failed to rename "%{file}" to "%{newName}" - the file is locked':'Неуспешно преименуване на "%{file}" на "%{newName}" - файлът е заключен','Failed to restore "%{resource}"':'Неуспешно  възстановяване на "%{resource}"',"Failed to restore %{resourceCount} files":"Неуспешно възстановяване на %{resourceCount} файла","Failed to set space image":"Неуспешно задаване на изображение на пространство","Failed to update link":"Неуспех при актуализирането на връзка","Failed to upload space image":"Неуспешно качване на изображение на пространството","Favorite files":"Любими файлове",Favorites:"Любими",file:"файл","File already exists":"Файлът вече съществува","File name":"Име на файл","File name cannot be empty":"Името на файла не може да бъде празно",'File name cannot be equal to ".."':'Името на файла не може да бъде равно на ".."','File name cannot be equal to "."':'Името на файла не може да бъде равно на "."','File name cannot contain "/"':'Името на файла не може да съдържа "/"',"File name cannot end with whitespace":"Името на файла не може да завършва с интервал",'File with name "%{name}" already exists.':'Файлът с име "%{name}" вече съществува.',Files:"Файлове","Files shared via link":"Файлове, споделени чрез връзка","Files shared with me":"Файлове, споделени с мен","Files shared with others":"Файлове, споделени с други","Filter members":"Филтър за членове","Filter:":"Филтър:",folder:"папка",Folder:"Папка","Folder already exists":"Папката вече съществува","Folder name":"Име на папка","Folder name cannot be empty":"Името на папката не може да бъде празно",'Folder name cannot be equal to ".."':'Името на папката не може да бъде равно на ".."','Folder name cannot be equal to "."':'Името на папката не може да бъде равно на "."','Folder name cannot contain "/"':'Името на папката не може да съдържа "/"','Folder with name "%{name}" already exists.':'Папка с име "%{name}" вече съществува.',Folders:"Папки","Found %{totalResults}, showing the %{itemCount} best matching results":"Намерени %{totalResults}, показващи %{itemCount} от най-подходящите резултати","FUSE Path":"FUSE път","FUSE path copied":"FUSE пътят е копиран","Go to »Personal« page":"Отидете на страницата »Лични«.","Go to »Spaces Overview«":'Отидете на "Преглед на пространства"',Group:"Група",Guest:"Гост","Guest user":"Гост потребител","Here you can add a description for this Space.":"Тук можете да добавите описание на това пространство.",Hide:"Скриване","How to edit indirect links":"Как да редактирате непреки връзки","If you share a folder, all of its contents and subfolders will be shared as well.":"Ако споделите папка, цялото ѝ съдържание и подпапки също ще бъдат споделени.",Incognito:"Инкогнито","Indirect links (%{ count })":"Непреки връзки (%{ count })","Indirect links are links giving access by a parent folder.":"Индиректните връзки са връзки, даващи достъп чрез основната папка.","Indirect links can only be edited in their parent folder. Click on the folder icon below the link to navgate to the parent folder.":"Непреките връзки могат да се редактират само в основната им папка. Натиснете иконата на папка под връзката, за да преминете към основната папка.","Invited by":"Поканен от","Items per page":"Елементи на страница","Keep both":"Запазване и на двете",Largest:"Най-голямото","Last modified":"Последна промяна",Link:"Връзка","Link name":"Име на връзка","Link was created successfully":"Връзката е създадена успешно","Link was deleted successfully":"Връзката е изтрита успешно","Link was updated successfully":"Връзката е актуализирана успешно","Loading list of shares":"Зареждане на списък със споделяния","Loading public link…":"Зареждане на публичния адрес...",Members:"Членове",Merge:"Обединяване",Modified:"Променено",Name:"Име","Navigate to '%{folder}'":"Преминаване към '%{folder}'","Navigate to parent folder":"Преминаване към основната папка","Navigate to the parent (%{folderName})":"Преминаване към основната (%{folderName})",New:"Нов","New file":"Нов файл","New folder":"Нова папка","New Folder":"Нова папка","New space":"Ново пространство","New Space":"Ново пространство",Newest:"Най-новото",no:"няма","No information to display":"Няма информация за показване","No items selected.":"Няма избрани елементи.","No link":"Няма връзка",'No login required. Everyone with the link can access. If you share this link with people from the list "Invited people", they need to login so that their individual assigned permissions can take effect. If they are not logged-in, the permissions of the link take effect.':'Не се изисква влизане в системата. Всеки, който има връзка може да получи достъп. Ако споделите тази връзка с хора от списъка "Поканени хора", те ще трябва да влязат в системата, за да се задействат техните индивидуално зададени права. Ако те не са влезли в системата, влизат в сила разрешенията на връзката.',"No resources found":"Няма намерени ресурси","No results found":"Няма намерени резултати","No users or groups found.":"Няма намерени потребители или групи.","No Versions available for this file":"За този файл няма налични версии","Not enough quota":"Недостатъчна квота",Notification:"Известие",Oldest:"Най-старото","Only invited people can access":"Само поканени имат достъп до","Open context menu and show members":"Отваряне на контекстното меню и показване на членовете","Open folder":{"Action in the files list row to open a folder":"Отваряне на папка"},"Open in %{ appName }":"Отваряне в %{ appName }","Open in %{app}":"Отваряне в %{app}","Open sidebar to view details":"Отворете страничната лента, за да видите подробности","Overview of the information about the selected file":"Преглед на информацията за избрания файл","Overview of the information about the selected files":"Преглед на информацията за избраните файлове",Owner:"Собственик",Password:"Парола","Password can't be empty":"Паролата не може да бъде празна","Password cannot be empty":"Паролата не може да бъде празна","Passwords for links are required.":"Изискват се пароли за връзките.",Paste:{"Action in the files list row to initiate pasting resources":"Поставяне"},"Paste here":"Поставяне тук","Pending shares":"Чакащи споделяния","Permanently delete file %{name}":"Изтриване за постоянно на файла %{name}","Permanently delete folder %{name}":"Изтриване за постоянно на папката %{name}","Permanently delete selected resource?":["Да се изтрие ли за постоянно избраният ресурс?","Да се изтрият ли за постоянно  избраните %{amount} ресурса?"],"Person was added":"Лицето е добавено",Personal:"Лични","Private link":"Поверителна връзка","Private link copied":"Поверителната връзка е копирана","Public file upload":"Публично качване на файл","Public link":"Публична връзка","Reload public link":"Презареждане на публичната връзка","Remote user":"Отдалечен потребител",Remove:"Премахване","Remove expiration date":"Премахване на датата на изтичане на срока на валидност","Remove from favorites":"Премахване от любими","Remove password":"Премахване на парола","Remove share":"Премахване на споделяне",Rename:"Преименуване","Rename file %{name}":"Преименуване на файла %{name}","Rename folder %{name}":"Преименуване на папката %{name}",Replace:"Замяна","Resource not found":"Ресурсът не е намерен",Restore:"Възстановяване",Save:"Запазване",Search:"Търсене","Search for service or secondary Account":"Търсене на услуга или допълнителен профил","Search results":"Резултати от търсенето","See all versions":"Вижте всички версии","Select a file or folder to view details.":"Изберете файл или папка, за да видите подробности.","Select all resources":"Избиране на всички ресурси","Select file":"Избиране на файл","Select folder":"Избиране на папка","Select role for the invitation":"Избор на роля за поканата","Select space":"Избор на пространство",Set:"Задаване","Set as space image":"Задаване като изображение на пространството","Set expiration date":"Задаване на дата на валидност","Set password":"Задаване на парола",Share:"Споделяне","Share expires %{ expiryDateRelative } (%{ expiryDate })":"Споделянето е валидно до %{ expiry Date Relative } (%{ expiry Date })","Share receiver name: %{ displayName }":"Име на получателя на споделянето: %{ displayName }","Share receiver name: %{ displayName } (%{ additionalInfo })":"Име на получателя на споделянето: %{ displayName } (%{ additionalInfo })","Share receivers":"Споделяне на получатели","Share via link":"Споделяне чрез връзка","Share via public link":"Споделяне чрез публична връзка","Share was removed successfully":"Споделянето беше успешно премахнато","Share with people":"Споделяне с хората","Shared by":"Споделено от","Shared on":"Споделено на","Shared via":"Споделено чрез","Shared via link":"Споделено чрез връзка","Shared with":"Споделено с","Shared with me":"Споделено с мен","Shared with others":"Споделено с други","Shared with you":"Споделено с вас",Shares:"Споделяния","Shares pages navigation":"Навигация на страниците със споделяния",Show:"Показване","Show all":"Показване на всички","Show context menu":"Показване на контекстното меню","Show file extensions":"Показване на файловите разширения","Show hidden files":"Показване на скрити файлове","Show invited people":"Показване на поканените","Show less":"Показване на по-малко","Show links":"Показване на връзки","Show members":"Показване на членовете","Show more":"Показване на повече","Showing up to %{searchLimit} results":"Показват се до %{searchLimit} резултатa",Size:"Размер",Skip:"Пропускане",Smallest:"Най-малкото","Sort by: ":"Сортиране по:","Space has no deleted files":"В пространството няма изтрити файлове","Space image was set successfully":"Изображението на пространството е успешно зададено","Space image was uploaded successfully":"Изображението на пространството е успешно качено","Space members":"Членове на пространството","Space name":"Име на пространството",Spaces:"Пространства",Status:"Статус",Subfolders:"Подпапки","Switch to condensed table view":"Превключване към съкратен изглед на таблицата","Switch to default table view":"Превключване към изглед на таблицата по подразбиране","Switch to tiles view":"Превключване към изглед с плочки","Tag must not consist of blanks only":"Етикетът не може да се състои единствено от празни полета.",Tags:"Етикети","The “via folder” is shown next to a share, if access has already been given via a parent folder. Click on the “via folder” to edit the share on its parent folder.":'"Чрез папка" се показва до споделяне, ако вече е даден достъп чрез основната папка. Щракнете върху "чрез папка", за да редактирате споделянето в основната му папка.',"The direct link has been copied to your clipboard.":"Директната връзка е копирана в клипборда.","The file type is unsupported":"Типът файл не се поддържа","The FUSE path has been copied to your clipboard.":"FUSE пътят е копиран във вашия клипборд.",'The link "%{linkName}" has been copied to your clipboard.':"Връзката „%{linkName}“ е копирана в клипборда.",'The name "%{name}" is already taken':'Името "%{name}" вече е заето',"The name cannot be empty":"Името не може да бъде празно",'The name cannot be equal to ".."':'Името не може да бъде равно на ".."','The name cannot be equal to "."':'Името не може да бъде равно на "."','The name cannot contain "/"':'Името не може да съдържа "/".',"The name cannot end with whitespace":"Името не може да завършва с интервал","The private link has been copied to your clipboard.":"Поверителната връзка е копирана в клипборда.","The selected share was accepted successfully":["Избраното споделяне беше прието успешно","Избраните споделяния бяха приети успешно"],"The selected share was declined successfully":["Избраното споделяне беше отказано успешно","Избраните споделяния бяха отказани успешно"],"The Windows path has been copied to your clipboard.":"Windows пътят е копиран във вашия клипборд.","There are no resources marked as favorite":"Няма ресурси, отбелязани като любими","There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files":"Недостатъчна квота за %{spaceName}, имате нужда от допълнително %{missingSpace}, за да качите тези файлове","This %{ resourceType } is owned by %{ ownerName }":"Този %{ resourceType } е собственост на %{ ownerName }","This %{ resourceType } is shared via %{ linkCount } link":["Този %{ resourceType } се споделя чрез %{ linkCount } връзка","Този %{ resourceType } се споделя чрез %{ linkCount } връзки"],"This %{ resourceType } is shared via %{ shareCount } invite":["Този %{ resourceType } се споделя чрез %{ shareCount } покана","Този %{ resourceType } се споделя чрез %{ shareCount } покани"],"This file has been shared.":"Този файл е споделен.","This folder contains %{ amount } item.":["Тази папка съдържа %{ amount } елемент.","Тази папка съдържа %{ amount } елемента."],"This folder has been shared.":"Тази папка е споделена.","This folder has no content.":"В папката няма съдържание.","This item is directly shared via links.":"Този елемент се споделя директно чрез връзки.","This item is directly shared with others.":"Този елемент се споделя директно с други лица.","This item is shared via links through one of the parent folders.":"Този елемент се споделя чрез връзки в една от основните папки.","This item is shared with others through one of the parent folders.":"Този елемент е споделен с други потребители чрез една от основните папки.","This link is password-protected":"Тази връзка е защитена с парола","Tile size":"Размер на плочките",'To search for service or secondary accounts prefix the username with "a:" (like "a:doe") and for guest accounts prefix the username with "l:" (like "l:doe").':'За търсене на служебни или допълнителни профили използвайте префикс на потребителското име с "a:" (например "a:doe"), а за профили на гости използвайте префикс на потребителското име с "l:" (например "l:doe").',"Trash overview":"Преглед на кошчето",Type:"Тип",Upload:"Качване","Upload files or folders":"Качване на файлове и папки",User:"Потребител",Versions:"Версии",via:"чрез","We went looking everywhere, but were unable to find the selected resource.":"Търсихме навсякъде, но не успяхме да открием избрания ресурс.","What are indirect links?":"Какво представляват непреките връзки?","Windows Path":"Windows път","Windows path copied":"Windows пътят е копиран","You can't paste the selected file at this location because you can't paste an item into itself.":["Не можете да поставите избрания файл на това място, защото не можете да поставите елемент в самия него.","Не можете да поставите избраните файлове на това място, защото не можете да поставите елемент в самия него."],"You don't have access to any spaces":"Нямате достъп до никакви пространства","You don't have access to any trashbins":"Нямате достъп до кошчето","You don't have permission to share this file.":"Нямате необходимите права за споделяне на този файл.","You don't have permission to share this folder.":"Нямате необходимите права за споделяне на тази папка","You have no deleted files":"Нямате изтрити файлове","You have no permission to create new files!":"Нямате необходимите права за създаване на нови файлове!","You have no permission to paste files here!":"Нямате необходимите права да поставяте файлове тук!","You have no permission to upload!":"Нямате необходимите права за качване!","Z-A":"Я-А"},jd={'"%{file}" was deleted successfully':'"%{file}" úspěšně smazán','"%{fileName}" was created successfully':'"%{fileName}" úspěšně vytvořen','"%{folderName}" was created successfully':'"%{folderName}" úspěšně vytvořena',"“via folder”":"“složkou”","(me)":"(já)","%{ amount } item selected. Actions are available above the table.":["Vybrána %{ amount } položka. Akce jsou k dispozici nad tabulkou.","Vybrány %{ amount } položky. Akce jsou k dispozici nad tabulkou.","Vybráno %{ amount } položek. Akce jsou k dispozici nad tabulkou.","Vybráno %{ amount } položek. Akce jsou k dispozici nad tabulkou."],"%{ filesCount } file":["%{ filesCount } soubor","%{ filesCount } soubory","%{ filesCount } souborů","%{ filesCount } souborů"],"%{ foldersCount } folder":["%{ foldersCount } adresář","%{ foldersCount } adresáře","%{ foldersCount } adresářů","%{ foldersCount } adresářů"],"%{ itemCount } item selected":["%{ itemCount } položka vybrána","%{ itemCount } položky vybrány","%{ itemCount } položek vybráno","%{ itemCount } položek vybráno"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } položka celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položky celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položek celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položek celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } položka celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položky celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položek celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položek celkem (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } položka s %{ itemSize } celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položky s %{ itemSize } celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položek s %{ itemSize } celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } položek s %{ itemSize } celkem (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } položka s %{ itemSize } celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položky s %{ itemSize } celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položek s %{ itemSize } celkem (%{ filesStr}, %{foldersStr})","%{ itemsCount } položek s %{ itemSize } celkem (%{ filesStr}, %{foldersStr})"],"%{ spacesCount } space":["%{ spacesCount } místo","%{ spacesCount } místa","%{ spacesCount } míst","%{ spacesCount } míst"],"%{collaboratorName} (me)":"%{collaboratorName} (já)","%{count} item was copied successfully":["%{count} položka byla úspěšně zkopírována","%{count} položky byly úspěšně zkopírovány","%{count} položek bylo úspěšně zkopírováno","%{count} položek bylo úspěšně zkopírováno"],"%{count} item was moved successfully":["%{count} položka byla úspěšně přesunuta","%{count} položky byly úspěšně přesunuty","%{count} položek bylo úspěšně přesunuto","%{count} položek bylo úspěšně přesunuto"],"%{count} member":["%{count} člen","%{count} členové","%{count} členů","%{count} členů"],"%{name} already exists":"%{name} již existuje","%{owner} shared this folder with you for uploading":"%{owner} s vámi sdílí tuto složku k nahrávání","%{resource} was restored successfully":"%{resource} byl úspěšně obnoven","%{resourceCount} files restored successfully":"%{resourceCount} souborů bylo úspěšně obnoveno","%{spaceCount} matching trashes":"%{spaceCount} odpovídajících košů","%{spaceCount} trashes in total":"Celkem %{spaceCount} košů","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},"A-Z":"A-Z",Accept:"Přijmout","Accept share":["Přijmout sdílení","Přijmout sdílení","Přijmout sdílení","Přijmout sdílení"],"Accepted shares":"Přijatá sdílení","Access denied":"Přístup odepřen","Access details":"Podrobnosti o přístupu","Access expires":"Přístup vyprší",'Account and login is required. Only people from the list "Invited people" can access.':"Vyžaduje se účet a přihlášení. Přístup mají pouze lidé ze seznamu „Pozvaní lidé“.",Actions:"Akce",Add:"Přidat","Add link":"Přidat link","Add password":"Přidat heslo","Add people":"Přidat lidi","Add to favorites":"Přidat k oblíbeným","Additional info":"Dodatečné informace","All deleted files were removed":"Všechny smazané soubory byly odstraněny","All files":"Všechny soubory","All files and folders":"Všechny soubory a adresáře","An error occurred while loading the public link":"Při načítání veřejného odkazu došlo k chybě",Apply:"Aplikovat","Are you sure you want to delete all selected resources?":"Opravdu si přejete smazat všechny vybrané zdroje?","Are you sure you want to delete this file?":"Opravdu chcete tento soubor smazat?","Are you sure you want to delete this folder?":"Opravdu chcete tuto složku smazat?",Cancel:"Zrušit","Clear selection":"Vymazat výběr","Close filter":"Zavřít filtr","Close sidebar to hide details":"Skryjte detaily zavřením postranního panelu",Copied:"Zkopírováno","Copied to clipboard!":"Zkopírováno do schránky!",Copy:{"Action in the files list row to initiate copying resources":"Kopírovat","":"Kopírovat"},"Copy direct link":"Zkopírovat přímý link","Copy here":"Kopírovat sem","Copy here?":"Kopírovat sem?","Copy link to clipboard":"Zkopírovat link do schránky","Copy private link to clipboard":"Zkopírovat soukromý link do schránky",Create:"Vytvořit","Create a new file":"Vytvořit nový soubor","Create a new folder":"Vytvořit novou složku","Create a new space":"Vytvořit nové místo","Create link":"Vytvořit link","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},"Custom permissions":"Vlastní oprávnění",Cut:{"Action in the files list row to initiate cutting resources":"Vyjmout"},Decline:"Odmítnout",Delete:"Odstranit","Delete file %{name}":"Smazat soubor %{name}","Delete folder %{name}":"Smazat složku %{name}","Delete link":"Smazat link",Deleted:"Smazáno","Deleted files":"Smazané soubory","Deny access":"Zamítnout přístup",Details:"Detaily","Direct link":"Přímý link","Direct link copied":"Přímý link zkopírován",Download:"Stáhnout","Drop files here to upload or click to select file":"Sem přetáhněte soubory, které chcete nahrát, nebo kliknutím vyberte soubor","Edit expiration date":"Změnit datum platnosti","Edit image":"Změnit obrázek","Edit name":"Změnit jméno","Edit password":"Změnit heslo","Empty trash bin":"Vyprázdnit koš","Everyone with the link":"Všichni s linkem","Expires %{expires}":"Vyprší %{expires}",'Failed to copy "%{name}"':'Nezdařilo se zkopírovat "%{name}"',"Failed to create file":"Nezdařilo se vytvořit soubor","Failed to create folder":"Nezdařilo se vytvořit složku","Failed to create link":"Nezdařilo se vytvořit link",'Failed to delete "%{file}"':'Nezdařilo se smazat "%{file}"',"Failed to delete link":"Nezdařilo se smazat odkaz",'Failed to move "%{name}"':'Nezdařilo se přesunout "%{name}"',Favorites:"Oblíbené","File name":"Název souboru","File name cannot be empty":"Jméno souboru nemůže být prázdné",'File name cannot be equal to ".."':'Název souboru nemůže být ".."','File name cannot be equal to "."':'Název souboru nemůže být "."','File name cannot contain "/"':'Název souboru nemůže obsahovat "/"',"File name cannot end with whitespace":"Název souboru nemůže končit mezerou",Files:"Soubory","Folder name":"Jméno složky","Folder name cannot be empty":"Jméno složky nemůže být prázdný",'Folder name cannot be equal to ".."':'Název složky nemůže být ".."','Folder name cannot be equal to "."':'Název složky nemůže být "."','Folder name cannot contain "/"':'Název složky nemůže obsahovat "/"',Folders:"Složky",Group:"Skupina",Guest:"Host",Link:"Odkaz","Loading public link…":"Načítání veřejného odkazu...",Members:"Členové",Modified:"Změněno",Name:"Název",New:"Nový","New file":"Nový soubor","New folder":"Nová složka","No Versions available for this file":"Pro tento soubor nejsou dostupné žádné verze","Open sidebar to view details":"Zobrazit detaily otevřením postranního panelu",Owner:"Vlastník",Password:"Heslo","Password cannot be empty":"Heslo nesmí být prázdné",Personal:"Osobní","Private link":"Soukromý odkaz","Public link":"Veřejný odkaz","Remove password":"Odstranit heslo",Rename:"Přejmenovat","Rename file %{name}":"Přejmenovat soubor %{name}","Rename folder %{name}":"Přejmenovat složku %{name}",Restore:"Obnovit",Save:"Uložit",Search:"Hledat",Share:"Sdílet","Shared with me":"Sdíleno se mnou",Show:"Ukázat","Show context menu":"Ukázat kontextovou nabídku",Size:"Velikost","Space name":"Název místa",Spaces:"Místa",Status:"Stav",'The name "%{name}" is already taken':'Jméno "%{name}" je již obsazeno','The name cannot be equal to ".."':'Název nemůže být ".."','The name cannot be equal to "."':'Název nemůže být "."','The name cannot contain "/"':'Název nemůže obsahovat "/"',"The name cannot end with whitespace":"Název nemůže končit mezerou","The private link has been copied to your clipboard.":"Soukromý odkaz byl úspěšně zkopírován",Upload:"Nahrát",User:"Uživatel",Versions:"Verze","You have no permission to upload!":"Nemáte oprávnění nahrávat soubory."},Nd={'"%{file}" was deleted successfully':'"%{file}" wurde erfolgreich gelöscht','"%{fileName}" was created successfully':'"%{fileName}" wurde erfolgreich erstellt','"%{folderName}" was created successfully':'"%{folderName}" wurde erfolgreich erstellt',"“via folder”":'"durch Ordner"',"(me)":"(ich)","%{ amount } item selected. Actions are available above the table.":["%{ amount } Element ausgewählt. Aktionen sind oberhalb der Tabelle verfügbar.","%{ amount } Elemente ausgewählt. Aktionen sind oberhalb der Tabelle verfügbar."],"%{ filesCount } file":["%{ filesCount } Datei","%{ filesCount } Dateien"],"%{ foldersCount } folder":["%{ foldersCount } Ordner","%{ foldersCount } Ordner"],"%{ itemCount } item selected":["%{ itemCount } Datei ausgewählt","%{ itemCount } Elemente ausgewählt"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } Elemente gesamt (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } Elemente gesamt (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } Datei gesamt (%{ filesStr}, %{foldersStr})","%{ itemsCount } Elemente gesamt (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } Elemente mit %{ itemSize } gesamt (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } Elemente mit %{ itemSize } gesamt (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } Datei mit %{ itemSize } gesamt (%{ filesStr}, %{foldersStr})","%{ itemsCount } Elemente mit %{ itemSize } gesamt (%{ filesStr}, %{foldersStr})"],"%{ spacesCount } space":["%{ spacesCount } Spaces","%{ spacesCount } Spaces"],"%{collaboratorName} (me)":"%{collaboratorName} (Ich)","%{count} item was copied successfully":["%{count} Dateie wurde erfolgreich kopiert","%{count} Elemente wurden erfolgreich kopiert."],"%{count} item was moved successfully":["%{count} Datei wurde erfolgreich verschoben","%{count} Elemente wurden erfolgreich verschoben."],"%{count} member":["%{count} Mitglied","%{count} Mitglieder"],"%{name} already exists":"%{name} existiert bereits","%{owner} shared this folder with you for uploading":"%{owner} hat diesen Ordner zum Upload geteilt.","%{resource} was restored successfully":"%{resource} erfolgreich wiederhergestellt","%{resourceCount} files restored successfully":"%{resourceCount} Dateien erfolgreich wiederhergestellt","%{spaceCount} matching trashes":"%{spaceCount} Suchergebnisse im Papierkorb","%{spaceCount} trashes in total":"%{spaceCount} Papierkorb-Inhalte insgesamt","%{spaceName} (disabled)":"%{spaceName} (deaktiviert)","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},"A-Z":"A-Z",Accept:"Annehmen","Accept share":["Freigabe annehmen","Freigaben annehmen"],"Accepted shares":"Angenommene Freigaben","Access denied":"Zugriff verweigert","Access details":"Zugriffdetails","Access expires":"Freigabe läuft ab",'Account and login is required. Only people from the list "Invited people" can access.':'Konto und Anmeldung sind erforderlich. Nur Personen aus der Liste "Geteilt mit" haben Zugang.',Actions:"Aktionen",Add:"Hinzufügen","Add expiration date":"Ablaufdatum setzen","Add link":"Link hinzufügen","Add members to this Space":"Mitglieder zu diesem Space hinzufügen","Add or edit tags":"Hinzufügen oder Bearbeiten von Schlagworten","Add password":"Passwort setzen","Add people":"Personen hinzufügen","Add to favorites":"Zu Favoriten hinzufügen","Additional info":"Zusatzinfo","All Actions":"Alle Interaktionen","All deleted files were removed":"Alle gelöschten Dateien wurden entfernt","All files":"Alle Dateien","All files and folders":"Alle Dateien und Ordner","An error occurred while loading the public link":"Beim Laden des öffentlichen Links ist ein Fehler aufgetreten.",Apply:"Anwenden","Apply to all %{count} conflicts":"Auf alle %{count} Konflikte anwenden","Apply to all %{count} files":"Auf alle %{count} Dateien anwenden","Apply to all %{count} folders":"Auf alle %{count} Ordner anwenden","Are you sure you want to delete all selected resources?":"Sollen die gewählten Elemente wirklich gelöscht werden?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Sollen die gewählten Elemente wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this file?":"Soll diese Datei wirklich gelöscht werden?","Are you sure you want to delete this file? All its content will be permanently removed. This action cannot be undone.":"Soll diese Datei wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this folder?":"Soll dieser Ordner wirklich gelöscht werden?","Are you sure you want to delete this folder? All its content will be permanently removed. This action cannot be undone.":"Soll dieser Ordner wirklich gelöscht werden? Der gesamte Inhalt wird endgültig gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Soll der ausgewählte Link wirklich gelöscht werden? Derselbe Link kann danach nicht wieder erzeugt werden.","Are you sure you want to permanently delete the listed items? You can’t undo this action.":"Sollen die aufgelisteten Elemente wirklich dauerhaft gelöscht werden? Diese Aktion lässt sich nicht rückgängig machen.","Are you sure you want to remove this member?":"Soll dieses Mitglied wirklich entfernt werden?","Are you sure you want to remove this share?":"Soll die Freigabe wirklich entfernt werden?",Cancel:"Abbrechen","Choose how access is granted":"Bitte auswählen, wie der Zugriff erteilt wird","Clear selection":"Auswahl aufheben","Close filter":"Filter schließen","Close sidebar to hide details":"Seitenleiste schließen, um Details zu verbergen","Context menu of the share":"Kontextmenü der Freigabe",Copied:"Kopiert","Copied to clipboard!":"In die Zwischenablage kopiert",Copy:{"Action in the files list row to initiate copying resources":"Kopieren","":"Kopieren"},"Copy direct link":"Direkten Link kopieren","Copy FUSE path":"FUSE-Pfad kopieren","Copy here":"Hierher kopieren","Copy here?":"Hierher kopieren?","Copy link":"Link kopieren","Copy link to clipboard":"Link in die Zwischenablage kopieren","Copy private link to clipboard":"Privaten Link in die Zwischenablage kopieren","Copy Windows path":"Windows-Pfad kopieren",Create:"Erstellen","Create a new file":"Neue Datei erstellen","Create a new folder":"Neuen Ordner erstellen","Create a new space":"Neuen Space erzeugen","Create link":"Link erzeugen","Create new files or folders":"Dateien oder Ordner neu erstellen",'Create Space from "%{resourceName}"':['Aus "%{resourceName}" einen Space erstellen',"Neuen Space aus Auswahl erstellen"],"Create Space from selection":"Neuen Space aus Auswahl erstellen ...",'Create Space with the content of "%{resourceName}".':['Neuen Space mit aus Inhalten von "%{resourceName}" erstellen.',"Neuen Space aus ausgewählten Dateien erstellen."],"Creating share":"Freigabe wird erzeugt","Creating space failed…":"Anlegen des Space fehlgeschlagen","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Strg + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Strg + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Strg + X"},"Custom permissions":"Benutzerdefinierte Berechtigungen",Cut:{"Action in the files list row to initiate cutting resources":"Ausschneiden"},"Cut to clipboard!":"In die Zwischenablage ausgeschnitten",Decline:"Ablehnen","Decline share":["Freigabe ablehnen","Freigaben ablehnen"],"Declined shares":"Abgelehnte Freigaben",Delete:"Löschen","Delete file %{name}":"Datei %{name} löschen","Delete folder %{name}":"Ordner %{name} löschen","Delete link":"Link löschen","Delete selected resource?":["Ausgewählte Ressource löschen?","%{amount} ausgewählte Elemente löschen?"],Deleted:"Gelöscht","Deleted files":"Gelöschte Dateien","Deny access":"Zugriff verweigern","Deselect %{name}":"Auswahl für %{name} aufheben",Details:"Details","Direct link":"Direkter Link","Direct link copied":"Direkter Link kopiert","Disabled spaces cannot be entered":"Deaktivierte Spaces können nicht betreten werden.","Display customization options of the files list":"Anpassungsoptionen für die Dateienliste anzeigen",Download:"Herunterladen",'Drag files and folders here or use the "New" or "Upload" buttons to add files':'Dateien oder Ordner hierherziehen oder die "Neu" oder "Hochladen" Buttons nutzen, um Dateien hinzuzufügen',"Drop files here to upload or click to select file":"Dateien hierher ziehen oder klicken, um die Dateiauswahl zu öffnen.","Edit expiration date":"Ablaufdatum bearbeiten","Edit image":"Bild bearbeiten","Edit name":"Namen bearbeiten","Edit password":"Passwort bearbeiten","Edit permission":"Berechtigungen bearbeiten","Empty trash bin":"Papierkorb leeren","Enter a name to add people or groups as members to this Space.":"Geben Sie einen Namen ein, um Personen oder Gruppen als Mitglieder zu diesem Space hinzuzufügen.","Error while editing the share.":"Fehler beim Bearbeiten der Freigabe.","Everyone with the link":"Alle, die den Link kennen","Expires %{expires}":"Läuft ab: %{expires}","Expires %{timeToExpiry} (%{expiryDate})":"Läuft %{timeToExpiry} ab (%{expiryDate})","Failed to accept the selected share.":["Fehler beim Annehmen der ausgewählten Freigabe.","Fehler beim Annehmen der ausgewählten Freigaben."],"Failed to apply expiration date":"Fehler beim Anwenden des Ablaufdatums","Failed to apply new permissions":"Fehler beim Setzen der Berechtigungen",'Failed to change favorite state of "%{file}"':'Fehler beim Ändern des Favoriten-Status von "%{file}"','Failed to copy "%{name}"':'Fehler beim Kopieren von  "%{name}"',"Failed to copy %{count} resources":"Fehler beim Kopieren von %{count} Dateien","Failed to create file":"Fehler beim Erzeugen der Datei","Failed to create folder":"Fehler beim Erzeugen des Ordners","Failed to create link":"Link konnte nicht erstellt werden","Failed to decline the selected share":["Fehler beim Ablehnen der ausgewählten Freigabe","Fehler beim Ablehnen der ausgewählten Freigaben"],'Failed to delete "%{file}"':'Fehler beim Löschen von "%{file}"','Failed to delete "%{file}" - the file is locked':'Fehler beim Löschen von "%{file}" - die Datei ist gesperrt',"Failed to delete link":"Fehler beim Löschen des Links","Failed to download the selected folder.":["Fehler beim Herunterladen der ausgewählten Datei.","Fehler beim Herunterladen der ausgewählten Dateien."],"Failed to edit tags":"Schlagworte konnten nicht bearbeitet werden","Failed to empty trash bin":{"Error message in case emptying trash bin fails":"Leeren des Papierkorbs fehlgeschlagen"},'Failed to move "%{name}"':'Fehler beim Verschieben von "%{name}"',"Failed to move %{count} resources":"Fehler beim Verschieben von %{count} Dateien","Failed to remove share":"Fehler beim Löschen der Freigabe",'Failed to rename "%{file}" to "%{newName}"':'Fehler beim Umbenennen von "%{file}" zu "%{newName}"','Failed to rename "%{file}" to "%{newName}" - the file is locked':'Fehler beim Umbenennen von "%{file}" zu "%{newName}" - die Datei ist gesperrt','Failed to restore "%{resource}"':'Fehler beim Wiederherstellen von "%{resource}"',"Failed to restore %{resourceCount} files":"Fehler beim Wiederherstellen von %{resourceCount} Dateien","Failed to set space image":"Fehler beim Speichern des Space-Bildes","Failed to update link":"Fehler beim Bearbeiten des Links","Failed to upload space image":"Fehler beim Hochladen des Space-Bildes","Favorite files":"Als Favoriten markierte Dateien",Favorites:"Favoriten",file:"Datei","File already exists":"Die Datei existiert bereits.","File name":"Dateiname","File name cannot be empty":"Der Dateiname darf nicht leer sein.",'File name cannot be equal to ".."':'Der Dateiname darf nicht ".." sein.','File name cannot be equal to "."':'Der Dateiname darf nicht "." sein.','File name cannot contain "/"':'Der Dateiname darf kein "/" enthalten.',"File name cannot end with whitespace":"Der Dateiname darf nicht mit einem Leerzeichen enden.",'File with name "%{name}" already exists.':'Die Datei "%{name}" existiert bereits.',Files:"Dateien","Files shared via link":"Per Link geteilte Dateien","Files shared with me":"Mit mir geteilte Dateien","Files shared with others":"Mit anderen geteilten Dateien","Filter members":"Mitglieder filtern","Filter:":"Filter:",folder:"Ordner",Folder:"Ordner","Folder already exists":"Der Ordner existiert bereits.","Folder name":"Ordnername","Folder name cannot be empty":"Der Ordnername darf nicht leer sein.",'Folder name cannot be equal to ".."':'Der Ordnername darf nicht ".." sein.','Folder name cannot be equal to "."':'Der Ordnername darf nicht "." sein.','Folder name cannot contain "/"':'Der Ordnername darf kein "/" enthalten.','Folder with name "%{name}" already exists.':'Der Ordner "%{name}" existiert bereits.',Folders:"Ordner","Found %{totalResults}, showing the %{itemCount} best matching results":"%{totalResults} Ergebnisse gefunden, zeige die %{itemCount} besten passenden Treffer","FUSE Path":"FUSE-Pfad","FUSE path copied":"FUSE-Pfad kopiert","Go to »Personal« page":"Persönliche Seite anzeigen","Go to »Spaces Overview«":"Zur »Spaces Übersicht« gehen",Group:"Gruppe",Guest:"Gast","Guest user":"Gastnutzer/-in","Here you can add a description for this Space.":"Hier können Sie eine Beschreibung für diesen Space hinzufügen.",Hide:"Ausblenden","How to edit indirect links":"Bearbeiten von indirekten Links","If you share a folder, all of its contents and subfolders will be shared as well.":"Wenn Sie einen Ordner teilen, werden alle seine Inhalte und Unterordner ebenfalls geteilt.",Incognito:"Inkognito","Indirect links (%{ count })":"Indirekte Links (%{ count })","Indirect links are links giving access by a parent folder.":"Indirekte Links sind Links, die den Zugriff durch einen übergeordneten Ordner ermöglichen.","Indirect links can only be edited in their parent folder. Click on the folder icon below the link to navgate to the parent folder.":"Indirekte Links können nur in ihrem übergeordneten Ordner bearbeitet werden. Klicken Sie auf das Ordnersymbol unter dem Link, um zum übergeordneten Ordner zu navigieren.","Invited by":"Eingeladen von","Items per page":"Dateien pro Seite","Keep both":"Beide behalten",Largest:"Größte","Last modified":"Zuletzt bearbeitet",Link:"Link","Link name":"Link-Name","Link name cannot exceed 255 characters":"Der Space-Name darf nicht länger als 255 Zeichen sein.","Link was created successfully":"Der Link wurde erfolgreich erstellt.","Link was deleted successfully":"Der Link wurde erfolgreich gelöscht.","Link was updated successfully":"Der Link wurde erfolgreich bearbeitet.","Loading list of shares":"Lade die Liste der Freigaben.","Loading public link…":"Lade öffentlichen Link…","Member capabilities":"Berechtigungen für Mitglieder",Members:"Mitglieder","Members are able to see who has access to this space and access all files in this space. Read or write permissions can be set by assigning a role.":"Mitglieder können sehen, wer Zugriff auf diesen Space und alle darin enthaltenen Datein hat. Lese- und Schreibberechtigungen können mittels Rollen zugewiesen werden.","Members with the Manager role are able to edit all properties and content of a Space, such as adding or removing members, sharing subfolders with non-members, or creating links to share.":"Mitglieder mit der Rolle Management können alle Eigenschaften und Inhalte eines Spaces bearbeiten. Zum Beispiel können sie Personen hinzufügen oder entfernen, Unterordner mit Personen teilen, die nicht zum Space gehören, oder Freigabe-Links erstellen.",Merge:"Zusammenführen",Modified:"Bearbeitet",Name:"Name","Navigate to '%{folder}'":"Zu '%{folder}' navigieren","Navigate to parent folder":"In den übergeordneten Ordner navigieren","Navigate to the parent (%{folderName})":"In den übergeordneten Ordner (%{folderName}) navigieren",New:"Neu","New file":"Neue Datei","New folder":"Neuer Ordner","New Folder":"Neuer Ordner","New space":"Neuer Space","New Space":"Neuer Space",Newest:"Neueste",no:"nein","No information to display":"Keine Informationen anzeigbar.","No items selected.":"Keine Elemente ausgewählt.","No link":"Kein Link",'No login required. Everyone with the link can access. If you share this link with people from the list "Invited people", they need to login so that their individual assigned permissions can take effect. If they are not logged-in, the permissions of the link take effect.':"Keine Anmeldung erforderlich. Alle, die den Link kennen, können zugreifen. Wenn Sie diesen Link mit Personen aus der Liste „Eingeladene Personen“ teilen, müssen sich diese anmelden, damit ihre individuell zugewiesenen Berechtigungen wirksam sind. Wenn Sie sich nicht einloggen, verfügen Sie nur über die Berechtigungen des Links.","No resources found":"Keine Dateien gefunden","No results found":"Keine Ergebnisse gefunden","No users or groups found.":"Keine Personen oder Gruppen gefunden.","No Versions available for this file":"Für diese Datei sind keine Versionen verfügbar. ","Not enough quota":"Zu wenig Speicherplatz",Notification:"Benachrichtigung",Oldest:"Älteste","Only invited people can access":"Nur eingeladene Personen haben Zugriff","Open context menu and show members":"Kontextmenü öffnen und Mitglieder anzeigen","Open folder":{"Action in the files list row to open a folder":"Ordner öffnen"},"Open in %{ appName }":"In %{ appName } öffnen","Open in %{app}":"In %{app} öffnen","Open sidebar to view details":"Seitenleiste schließen, um Details anzuzeigen","Overview of the information about the selected file":"Übersicht der Informationen für die ausgewählte Datei","Overview of the information about the selected files":"Überblick der Informationen zu den ausgewählten Dateien",Owner:"Besitzer/-in",Password:"Passwort","Password can't be empty":"Das Passwort darf nicht leer sein.","Password can't exceed 72 characters":"Das Passwort darf nicht länger als 72 Zeichen sein.","Password cannot be empty":"Das Passwort darf nicht leer sein.","Passwords for links are required.":"Für Freigabelinks mit Bearbeitungsrechten ist das Setzen eines Passworts zwingend erforderlich.",Paste:{"Action in the files list row to initiate pasting resources":"Einfügen"},"Paste here":"Hier einfügen","Pending shares":"Ausstehende Freigaben","People you share resources with can not see who else has access.":"Personen, mit denen Ressourcen geteilt werden, können nicht sehen, wer noch Zugriff hat.","People you share resources with will be notified via email or in-app notification.":"Personen, mit denen Sie Ressourcen teilen, werden darüber per E-Mail oder App benachrichtigt.","Permanently delete file %{name}":"Datei %{name} endgültig löschen?","Permanently delete folder %{name}":"Ordner %{name} endgültig löschen?","Permanently delete selected resource?":["Ausgewählte Ressource endgültig löschen?","%{amount} ausgewählte Dateien endgültig löschen?"],"Person was added":"Person hinzugefügt",Personal:"Persönlich","Private link":"Privater Link","Private link copied":"Privater Link kopiert","Public file upload":"Öffentlicher Datei-Upload","Public link":"Öffentlicher Link","Reload public link":"Öffentlichen Link neu laden","Remote user":"Externe Person",Remove:"Entfernen","Remove expiration date":"Entferne Ablaufdatum","Remove from favorites":"Von Favoriten entfernen","Remove member":"Mitglied entfernen","Remove password":"Entferne Passwort","Remove share":"Freigabe entfernen",Rename:"Umbenennen","Rename file %{name}":"Datei %{name} umbenennen","Rename folder %{name}":"Ordner %{name} umbenennen",Replace:"Ersetzen","Resource not found":"Datei nicht gefunden",Restore:"Wiederherstellen",Restrictions:"Einschränkungen",Save:"Speichern",Search:"Suchen","Search for files":"Suche nach Dateien","Search for service or secondary Account":"Suche nach Dienst oder Zweitkonto","Search in file content":"Suche nach Inhalten","Search results":"Suchergebnisse",'Search results for "%{searchTerm}"':'Suchergebnisse für "%{searchTerm}"',"See all versions":"Alle Versionen anzeigen","Select a file or folder to view details.":"Wählen Sie eine oder mehrere Dateien oder Ordner aus, um hier Details anzuzeigen.","Select all resources":"Alle auswählen","Select an accepted share to show details.":"Wählen Sie eine akzeptierte Freigabe aus, um Details zu sehen.","Select file":"Datei auswählen","Select folder":"Ordner auswählen","Select permission":"Berechtigung auswählen","Select role for the invitation":"Rolle für Freigabe-Einladung auswählen","Select space":"Space auswählen",Set:"Festlegen","Set as space image":"Als Space-Bild festlegen","Set expiration date":"Ablaufdatum setzen","Set password":"Passwort festlegen",Share:"Teilen","Share expires %{ expiryDateRelative } (%{ expiryDate })":"Freigabe läuft ab %{ expiryDateRelative } (%{ expiryDate })","Share receiver name: %{ displayName }":"Freigabe für: %{ displayName }","Share receiver name: %{ displayName } (%{ additionalInfo })":"Freigabe für: %{ displayName } (%{ additionalInfo })","Share receivers":"Empfänger/-in der Freigabe","Share via link":"Per Link teilen","Share via public link":"Per öffentlichem Link teilen","Share was removed successfully":"Freigabe wurde erfolgreich entfernt.","Share with people":"Mit Personen teilen","Shared by":"Geteilt von","Shared on":"Geteilt am","Shared via":"Geteilt durch","Shared via link":"Per Link geteilt","Shared with":"Geteilt mit","Shared with me":"Mit mir geteilt","Shared with others":"Mit anderen geteilt","Shared with you":"Mit Ihnen geteilt",Shares:"Freigaben","Shares pages navigation":"Navigation der geteilten Dateien Seiten","Shares, versions and tags will not be copied.":"Freigaben, Versionen und Schlagworte werden nicht mitkopiert.",Show:"Anzeigen","Show all":"Alle anzeigen","Show context menu":"Kontextmenü anzeigen","Show file extensions":"Dateiendungen anzeigen","Show hidden files":"Versteckte Dateien anzeigen","Show invited people":"Zeige eingeladene Personen","Show less":"Weniger anzeigen","Show links":"Links anzeigen","Show members":"Mitglieder anzeigen","Show more":"Mehr anzeigen","Showing up to %{searchLimit} results":"Zeige bis zu %{searchLimit} Ergebnisse",Size:"Größe",Skip:"Überspringen",Smallest:"Kleinste","Sort by: ":"Sortieren nach:","Space has no deleted files":"Der Space hat keine gelöschten Dateien.","Space image was set successfully":"Das Space-Bild wurde erfolgreich festgelegt.","Space image was uploaded successfully":"Das Space-Bild wurde erfolgreich hochgeladen.","Space manager capabilities":"Berechtigungen für Space-Verwalter/-innen","Space members":"Space-Mitglieder","Space name":"Name des Spaces","Space was created successfully":"Der Space wurde erfolgreich angelegt.",Spaces:"Spaces",Status:"Status",Subfolders:"Unterordner","Switch to condensed table view":"Zur verdichteten Tabellenansicht wechseln","Switch to default table view":"Zur normalen Tabellenansicht wechseln","Switch to tiles view":"Zur Kachelansicht wechseln","Tag must not consist of blanks only":"Stichwort darf nicht nur aus Leerzeichen bestehen.",Tags:"Schlagworte","The “via folder” is shown next to a share, if access has already been given via a parent folder. Click on the “via folder” to edit the share on its parent folder.":'Das Symbol "via Ordner" wird neben einer Freigabe angezeigt, wenn die Freigabe bereits über einen übergeordneten Ordner gewährt wurde. Klicken Sie auf "via Ordner", um die Freigabe in ihrem übergeordneten Ordner zu bearbeiten.',"The direct link has been copied to your clipboard.":"Der direkte Link wurde in die Zwischenablage kopiert.","The file type is unsupported":"Dieser Dateityp wird nicht unterstützt.","The FUSE path has been copied to your clipboard.":"Der FUSE-Pfad wurde in die Zwischenablage kopiert.",'The link "%{linkName}" has been copied to your clipboard.':'Der Link "%{linkName}" wurde in die Zwischenablage kopiert.',"The link has been copied to your clipboard.":"Der Link wurde in die Zwischenablage kopiert.","The marked elements will be copied.":"Die ausgewählten Elemente werden kopiert.",'The name "%{name}" is already taken':'Der Name "%{name}" ist bereits vergeben',"The name cannot be empty":"Der Name darf nicht leer sein.",'The name cannot be equal to ".."':'Der Name darf nicht ".." sein.','The name cannot be equal to "."':'Der Name darf nicht "." sein.','The name cannot contain "/"':'Der Name darf kein "/" enthalten.',"The name cannot end with whitespace":"Der Name darf nicht mit einem Leerzeichen enden.","The private link has been copied to your clipboard.":"Der private Link wurde in die Zwichenablage kopiert.","The selected share was accepted successfully":["Die ausgewählte Freigabe wurde erfolgreich angenommen.","Die ausgewählten Freigaben wurden erfolgreich angenommen."],"The selected share was declined successfully":["Die ausgewählte Freigabe wurde abgelehnt","Die ausgewählten Freigaben wurden abgelehnt."],"The selection exceeds the allowed archive size (max. %{maxSize})":"Die Auswahl überschreitet die mögliche Archiv-Größe (max. %{maxSize})","The Windows path has been copied to your clipboard.":"Der Windows-Pfad wurde in die Zwischenablage kopiert.","There are no resources marked as favorite":"Keine Elemente als Favoriten ausgewählt","There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files":"Zu wenig Speicherplatz in %{spaceName}, weitere %{missingSpace} benötigt, um diese Dateien hochzuladen.","This %{ resourceType } is owned by %{ ownerName }":"%{ resourceType } gehört %{ ownerName }","This %{ resourceType } is shared via %{ linkCount } link":["Der/die %{ resourceType } ist via %{ linkCount } Link geteilt","%{ resourceType } ist durch %{ linkCount } Links geteilt."],"This %{ resourceType } is shared via %{ shareCount } invite":["Der/die %{ resourceType } ist via %{ linkCount } Freigabe geteilt","%{ resourceType } ist durch %{ linkCount } Freigaben geteilt."],"This file has been shared.":"Diese Datei wurde geteilt.","This folder contains %{ amount } item.":["Der Ordner enthält %{ amount } Datei.","Der Ordner enthält %{ amount } Dateien."],"This folder has been shared.":"Dieser Ordner wurde geteilt.","This folder has no content.":"Dieser Ordner ist leer.","This item is directly shared via links.":"Dieses Element wurde direkt über Links geteilt.","This item is directly shared with others.":"Dieses Element wurde direkt mit anderen Personen geteilt.","This item is shared via links through one of the parent folders.":"Dieses Element wurde durch einen übergeordneten Ordner über Links geteilt.","This item is shared with others through one of the parent folders.":"Dieses Element wurde durch einen übergeordneten Ordner mit anderen Personen geteilt.","This link is password-protected":"Dieser Link ist passwortgeschützt.","Tile size":"Kachelgröße",'To search for service or secondary accounts prefix the username with "a:" (like "a:doe") and for guest accounts prefix the username with "l:" (like "l:doe").':"Für die Suche nach Service- oder Zweitaccounts muss ein „a:“ (Beispielsweise „a:Martina“) vor den Nutzernamen hinzugefügt werden, für Gastaccounts ein „l:“ (Beispielsweise „l:Max“).","Trash overview":"Papierkorb-Überblick",Type:"Typ",Upload:"Hochladen","Upload files or folders":"Dateien oder Ordner hochladen","Use the input field to search for users and groups. Select them to share the item.":"Benutzen Sie das Eingabefeld, um nach Personen und Gruppen zu suchen.",User:"Person",Versions:"Versionen",via:"durch","We went looking everywhere, but were unable to find the selected resource.":"Wir haben überall gesucht, konnten das ausgewählte Element aber nicht finden.","What are indirect links?":"Was sind indirekte Links?","Windows Path":"Windows-Pfad","Windows path copied":"Windows-Pfad kopiert","You can't paste the selected file at this location because you can't paste an item into itself.":["Ordner können nicht in sich selbst eingefügt werden.","Ordner können nicht in sich selbst eingefügt werden."],"You do not have permission to create links":"Sie haben keine Berechtigung Links zu erstellen.","You don't have access to any spaces":"Sie haben aktuell keinen Zugriff auf einen Space.","You don't have access to any trashbins":"Sie haben aktuell keinen Zugriff auf Papierkörbe","You don't have permission to share this file.":"Sie haben keine Berechtigung diese Datei zu teilen.","You don't have permission to share this folder.":"Sie haben keine Berechtigung diesen Ordner zu teilen.","You have no accepted shares.":"Keine angenommenen Freigaben vorhanden.","You have no declined shares.":"Keine abgelehnten Freigaben vorhanden.","You have no deleted files":"Sie haben keine gelöschten Dateien.","You have no permission to create new files!":"Sie haben keine Berechtigung, um neue Dateien zu erzeugen.","You have no permission to paste files here!":"Sie haben keine Berechtigung, um Dateien hier einzufügen.","You have no permission to upload!":"Sie haben keine Berechtigung zum Hochladen.","You have not shared any resource via link.":"Sie haben keine Ressourcen per Link geteilt.","You have not shared any resources with other people.":"Sie haben keine Ressourcen mit anderen Personen geteilt.","Z-A":"Z-A"},Md={'"%{file}" was deleted successfully':'"%{file}" fue borrado correctamente','"%{fileName}" was created successfully':'"%{fileName}" fue creado correctamente','"%{folderName}" was created successfully':'"%{folderName}" fue creado correctamente',"“via folder”":'"via carpeta"',"(me)":"(yo)","%{ amount } item selected. Actions are available above the table.":["%{ amount } objeto seleccionado. Las acciones están disponibles sobre la tabla.","%{ amount } objetos seleccionados. Las acciones están disponibles sobre la tabla.","%{ amount } objetos seleccionados. Las acciones están disponibles sobre la tabla."],"%{name} already exists":"%{name} ya existe","%{owner} shared this folder with you for uploading":"%{owner} compartió esta carpeta con usted para subir archivos.","A-Z":"A-Z",Accept:"Aceptar","Access denied":"Acceso denegado",Actions:"Acciones","Add or edit tags":"Añadir o editar etiquetas","Add people":"Agregar persona","Add to favorites":"Agregar a favoritos","All Actions":"Todas las acciones","All deleted files were removed":"Todos los archivos fueron eliminados","All files":"Todos los archivos","All files and folders":"Todos los archivos y carpetas","An error occurred while loading the public link":"Se ha producido un error al cargar el enlace público",Apply:"Aplicar","Are you sure you want to delete this file?":"¿Estás seguro de que quieres eliminar este archivo?","Are you sure you want to delete this folder?":"¿Estás seguro de que quieres eliminar este carpeta?",Cancel:"Cancelar","Clear selection":"Limpiar selección","Close sidebar to hide details":"Cerrar el menú lateral para ocultar los detalles",Copy:{"Action in the files list row to initiate copying resources":"Copiar","":"Copiar"},"Copy link":"Enlace copiado","Copy link to clipboard":"Copiar el enlace al portapapeles","Copy private link to clipboard":"Copiar el enlace privado al portapapeles",Create:"Crear","Create a new file":"Crear un nuevo archivo","Create a new folder":"Crear una nueva carpeta","Create a new space":"Crear un nuevo espacio","Create new files or folders":"Crear nuevos archivos y carpetas?","Creating space failed…":"Error al crear el espacio....","Custom permissions":"Permisos personalizados",Decline:"Rechazar",Delete:"Eliminar","Delete file %{name}":"Eliminar archivo %{name}","Delete folder %{name}":"Eliminar carpeta %{name}",Deleted:"Eliminado","Deleted files":"Archivos borrados","Deny access":"Acceso denegado",Details:"Detalles",Download:"Descargar","Drop files here to upload or click to select file":"Arrastra archivos aquí o haz clic para seleccionar un archivo","Edit expiration date":"Editar fecha de expiración","Edit permission":"Editar permisos","Empty trash bin":"Vaciar papelera","Expires %{expires}":"Expira %{expires}","Failed to apply expiration date":"Error al aplicar la fecha de expiración","Failed to apply new permissions":"Error al aplicar los nuevos permisos","Failed to create file":"Error al crear el archivo","Failed to create folder":"Error al crear la carpeta","Failed to create link":"Error al crear el enlace","Failed to delete link":"Error al eliminar el enlace","Failed to empty trash bin":{"Error message in case emptying trash bin fails":"Error al vaciar la papelera"},"Failed to update link":"Error al actualizar el enlace","Failed to upload space image":"Error al subir la imagen al espacio",Favorites:"Favoritos",file:"Archivo","File already exists":"El archivo ya existe","File name":"Nombre de archivo","File name cannot be empty":"El nombre de archivo no puede ser vacío",'File name cannot be equal to ".."':'El nombre de archivo no puede ser igual a ".."','File name cannot be equal to "."':'El nombre de archivo no puede ser igual a "."','File name cannot contain "/"':'El nombre del archivo no puede contener "/"',"File name cannot end with whitespace":"El nombre del archivo no puede terminar con un espacio en blanco",Files:"Archivos","Filter members":"Filtrar miebros","Filter:":"Filtrar:",folder:"Carpeta",Folder:"Carpeta","Folder already exists":"La carpeta ya existe","Folder name":"Nombre de carpeta","Folder name cannot be empty":"El nombre de carpeta no puede ser vacío",'Folder name cannot be equal to ".."':'El nombre de carpeta no puede ser igual a ".."','Folder name cannot be equal to "."':'El nombre de carpeta no puede ser igual a "."','Folder name cannot contain "/"':'El nombre de la carpeta no puede contener "/"',Folders:"Carpetas",Group:"Grupo",Guest:"Invitado","Guest user":"Usuario invitado","Items per page":"Elementos por página",Link:"Enlace","Link name cannot exceed 255 characters":"El nombre del enlace no puedo exceder de los 255 caracteres ","Loading public link…":"Cargando enlace público...","Member capabilities":"Capacidades del miembro",Members:"Miembros",Modified:"Modificado",Name:"Nombre",New:"Nuevo","New file":"Nuevo archivo","New folder":"Nueva carpeta","New Folder":"Nueva carpeta","No items selected.":"No hay elementos seleccionados ","No Versions available for this file":"No hay versiones disponibles para este archivo","Open folder":{"Action in the files list row to open a folder":"Abrir carpeta"},"Open in %{app}":"Abrir en %{app}","Open sidebar to view details":"Abrir el menú lateral para ver los detalles",Owner:"Propietario",Password:"Contraseña","Password can't exceed 72 characters":"La contraseña no puede exceder los 72 caracteres","Password cannot be empty":"La contraseña no puede estar vacía","Permanently delete file %{name}":"Eliminar permanentemente la carpeta %{name}","Permanently delete folder %{name}":"Eliminar permanentemente la carpeta %{name}","Person was added":"La persona ha sido agregada","Private link":"Enlace privado","Private link copied":"Enlace privado copiado","Public file upload":"Cargar archivo público","Public link":"Enlace público","Remote user":"Usuario remoto","Remove expiration date":"Eliminar fecha de vencimiento","Remove member":"Eliminar miembro","Remove password":"Eliminar contraseña",Rename:"Renombrar","Rename file %{name}":"Renombrar archivo %{name}","Rename folder %{name}":"Renombrar carpeta %{name}","Resource not found":"Recurso no encontrado",Restore:"Restaurar",Restrictions:"Restricciones ",Save:"Guardar",Search:"Buscar","Select folder":"Seleccionar carpeta","Select permission":"Seleccionar permisos","Select space":"Seleccione el espacio",Share:"cuota","Shared via link":"Compartir vía enlace","Shared with":"Compartido con","Shared with me":"Compartido conmigo","Shared with others":"Compartido con otros","Shared with you":"Compartido con usted ","Show invited people":"Mostrar las personas invitadas","Show links":"Mostrar enlaces",Size:"Tamaño",Spaces:"Spaces",Status:"Estado",Subfolders:"Sub-carpetas",'The name "%{name}" is already taken':'El nombre "%{name}" ya está tomado',"The name cannot be empty":"El nombre no puede estar vacío",'The name cannot be equal to ".."':'El nombre no puede ser igual a ".."','The name cannot be equal to "."':'El nombre no puede ser igual a "."','The name cannot contain "/"':'El nombre no puede contener "/"',"The name cannot end with whitespace":"El nombre no puede terminar con un espacio en blanco","The private link has been copied to your clipboard.":"El enlace privado ha sido copiado al portapapeles","This folder has been shared.":"Esta carpeta ha sido compartida","This folder has no content.":"Esta carpeta no tiene contenido","This item is directly shared with others.":"Este elemento es directamente compartido con otros",Upload:"Subir","Upload files or folders":"cargar archivos y carpetas",User:"Usuario",Versions:"Versiones","You do not have permission to create links":"Usted no tiene permisos para crear enlaces","You don't have permission to share this file.":"Usted no tiene permisos para compartir este archivo","You don't have permission to share this folder.":"Usted no tiene permisos para compartir esta carpeta","You have no deleted files":"Tu no tienes archivos eliminados","You have no permission to upload!":"No tienes permisos para subir.","Z-A":"Z-A"},zd={'"%{file}" was deleted successfully':'"%{file}" a été supprimé correctement','"%{fileName}" was created successfully':'"%{fileName}" a été créé correctement','"%{folderName}" was created successfully':'"%{folderName}" a été créé correctement',"“via folder”":"Via le dossier","(me)":"(moi)","%{ amount } item selected. Actions are available above the table.":["%{ amount } élément sélectionné. Les actions sont disponibles sous le tableau.","%{ amount } éléments sélectionnés. Les actions sont disponibles sous le tableau.","%{ amount } éléments sélectionnés. Les actions sont disponibles sous le tableau."],"%{ filesCount } file":["%{ filesCount } fichier","%{ filesCount } fichier","%{ filesCount } fichiers"],"%{ foldersCount } folder":["%{ filesCount } dossier","%{ filesCount } dossiers","%{ filesCount } dossiers"],"%{ itemCount } item selected":["%{ itemCount } fichier sélectionner","%{ itemCount } fichiers sélectionnés","%{ itemCount } éléments sélectionnés"],"%{collaboratorName} (me)":"%{collaboratorName} (Moi)","%{count} item was copied successfully":["%{count} fichier a été copié","%{count} fichier ont été copiés","%{count} fichier ont été copiés"],"%{count} item was moved successfully":["%{count} fichier a été déplacé","%{count} fichiers ont été déplacés","%{count} fichier ont été copiés"],"%{count} member":["%{count} membre","%{count} membres","%{count} membres"],"%{name} already exists":"%{name} existe déjà","%{owner} shared this folder with you for uploading":"%{owner} a partagé ce dossier avec vous pour uploader.","%{resource} was restored successfully":"%{resource} a été restauré avec succès","%{resourceCount} files restored successfully":"%{resourceCount} fichier restauré","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},Accept:"Accepter","Accept share":["Accepter le partage","Accepter les partages","Accepter les partages"],"Accepted shares":"Partages acceptés","Access denied":"Accès refusé","Access details":"Détails de l'accès","Access expires":"Accès expirée",'Account and login is required. Only people from the list "Invited people" can access.':`Compte obligatoire. Seuls les utilisateurs dans la liste des "Invité" dispose d'un accès.`,Actions:"Actions",Add:"Ajouter","Add expiration date":"Ajouter une date d'expiration","Add link":"Ajouter un lien","Add members to this Space":"Ajouter des membres a l'Espace","Add password":"Ajouter un mot de passe","Add people":"Ajouter des personnes ","Add to favorites":"Ajouter aux favoris","Additional info":"Information additionnel","All Actions":"Toutes les actions","All deleted files were removed":"Tous les fichiers supprimés ont été retirés","All files":"Tous les fichiers","All files and folders":"Tous les fichiers et dossiers","An error occurred while loading the public link":"Une erreur est apparue lors du chargement du lien public",Apply:"Appliquer","Apply to all %{count} conflicts":"Appliquer aux %{count} conflits","Are you sure you want to delete all selected resources?":"Êtes vous sûr de vouloir supprimer les ressources selectionnées?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Êtes-vous sûr de vouloir supprimer toutes les ressources sélectionnées ? Tout leur contenu sera définitivement supprimé. Cette action ne peut pas être annulée. ","Are you sure you want to delete this file?":"Êtes-vous sûr de vouloir supprimer ce fichier ?","Are you sure you want to delete this folder?":"Êtes-vous sûr de vouloir supprimer ce dossier?","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Êtes-vous sûr de vouloir supprimer ce lien ? Recréer le même lien ne sera pas possibe à l'avenir.","Are you sure you want to remove this share?":"Êtes-vous sûr de vouloir supprimer ce partage ?",Cancel:"Annuler","Choose how access is granted":"Choisissez qu'elle accès sont accordés","Clear selection":"Annuler la sélection","Close sidebar to hide details":"Fermer le panneau latéral pour cacher les détails","Context menu of the share":"Menu contextuel de partage",Copied:"Copié","Copied to clipboard!":"Copier dans le presse papier",Copy:{"Action in the files list row to initiate copying resources":"Copier","":"Copier"},"Copy direct link":"Copier le lien direct","Copy here":"Copier ici","Copy link to clipboard":"Copier le lien dans le presse papier","Copy private link to clipboard":"Copier le lien privé vers le presse papier",Create:"Créer","Create a new file":"Créer un nouveau fichier...","Create a new folder":"Créer un nouveau dossier...","Create a new space":"Créer un nouvel espace","Create link":"Créer un lien","Create new files or folders":"Créer de nouveaux fichiers ou dossiers","Creating share":"Créer un partage","Creating space failed…":"Erreur lors de la création de l'espace...","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},Cut:{"Action in the files list row to initiate cutting resources":"Couper"},Decline:"Décliner","Decline share":["Refuser le partage","Refuser les partages","Refuser les partages"],"Declined shares":"Partages refusés",Delete:"Supprimer","Delete file %{name}":"Supprimer le fichier %{name}","Delete folder %{name}":"Supprimer le dossier %{name}","Delete link":"Supprimer le lien","Delete selected resource?":[" Supprimer la ressource sélectionnée?"," Supprimer les %{amount} ressources sélectionnées?"," Supprimer les %{amount} ressources sélectionnées?"],Deleted:"Supprimé","Deleted files":"Fichiers supprimés","Deselect %{name}":"désélectionner %{name}",Details:"Détails","Direct link":"Lien direct","Direct link copied":"Lien direct copié","Display customization options of the files list":"Afficher les options de customisation de la liste de fichier",Download:"Télécharger","Drop files here to upload or click to select file":"Déposer des fichiers ici pour uploader ou cliquer pour sélectionner des fichiers","Edit expiration date":"Modifier la date d'expiration","Edit image":"Modifier l'image","Edit name":"Modifier le nom","Edit password":"Modifier le mot de passe","Empty trash bin":"Vider la corbeille","Everyone with the link":"Tous les utilisateurs disposant du lieu","Expires %{expires}":"Expire le %{expires}","Failed to create file":"Echec de création du fichier","Failed to create folder":"Echec de création du dossier","Favorite files":"Fichiers favoris",Favorites:"Favoris",file:"fichier","File name":"Nom de fichier","File name cannot be empty":"Nom de fichier ne peut pas être vide",'File name cannot be equal to ".."':'Le nom du fichier ne peut pas être ".."','File name cannot be equal to "."':'Le nom du fichier ne peut pas être "."','File name cannot contain "/"':'Le nom du fichier ne peut pas contenir "/"',"File name cannot end with whitespace":"Le nom du fichier ne peut pas se terminer avec un espace",Files:"Fichiers","Files shared via link":"Fichier partagé avec un lien","Files shared with me":"Fichiers partagés avec moi","Files shared with others":"Fichiers partagés avec d'autres personnes","Filter members":"Filtrer les membres",folder:"dossier",Folder:"Dossier","Folder name":"Nom de dossier","Folder name cannot be empty":"Nom de dossier ne peut pas être vide",'Folder name cannot be equal to ".."':'Le nom du dossier ne peut pas être ".."','Folder name cannot be equal to "."':'Le nom du dossier ne peut pas être "."','Folder name cannot contain "/"':'Le nom du dossier ne peut pas contenir "/"',Folders:"Dossiers",Group:"Groupe",Guest:" Invité","Guest user":"Utilisateur invité",Hide:"Masquer","Items per page":"Éléments par page","Keep both":"Garder les deux","Last modified":"Dernière modification",Link:"Lien","Link name":"Nom du lien","Loading public link…":"Chargement du lien public...",Members:"Membres",Modified:"Modifié",Name:"Nom","Navigate to '%{folder}'":'Aller à "%{folder}"',New:"Nouveau","New file":"Nouveau fichier","New folder":"Nouveau dossier","New space":"Nouvel espace","New Space":"Nouvel Espace","No information to display":"Aucune information à afficher","No items selected.":"Aucun élément séléctionné","No link":"Aucun lien","No resources found":"Aucune ressource trouvée","No users or groups found.":"Aucun utilisateur ou groupe n'a été trouvé","No Versions available for this file":"Aucune version n'existe pour ce fichier","Not enough quota":"Quota insuffisant","Open folder":{"Action in the files list row to open a folder":"Ouvrir le dossie"},"Open in %{app}":"Ouvrir avec %{app}","Open sidebar to view details":"Ouvrir le panneau latéral pour voir les détails","Overview of the information about the selected file":"Aperçu des informations sur le fichier sélectionné","Overview of the information about the selected files":"Aperçu des informations sur les fichiers sélectionnés",Owner:"Propriétaire",Password:"Mot de passe","Password can't be empty":"Le mot de passe ne peut pas être vide","Password cannot be empty":"Le mot de passe ne peut pas être vide","Paste here":"Coller ici","Permanently delete file %{name}":"Supprimer définitivement le fichier %{name}","Permanently delete folder %{name}":" Supprimer définitivement le dossier %{name}","Permanently delete selected resource?":["Supprimer définitivement la ressource sélectionnée ?"," Supprimer définitivement les %{amount} ressources sélectionnées?"," Supprimer définitivement les %{amount} ressources sélectionnées?"],"Person was added":"Une personne a été ajoutée",Personal:"Personnel","Private link":"Lien privé","Private link copied":"Lien privé copié","Public file upload":"Fichier public téléchargé","Public link":"Lien public","Reload public link":"Recharger le lien public","Remote user":"Utilisateur distant",Remove:"Retirer","Remove expiration date":"Supprimer date d'expiration","Remove from favorites":"Retirer des favoris","Remove password":"Supprimer mot de passe",Rename:"Renommer","Rename file %{name}":"Renommer fichier %{name}","Rename folder %{name}":"Renommer dossier %{name}","Resource not found":" Ressource introuvable ",Restore:"Restaurer",Save:"Sauvegarder",Search:"Recherche","See all versions":"Voir toutes les versions","Select a file or folder to view details.":"Séléctionnez un fichier ou un dossier pour voir les détails","Select all resources":"Sélectionner toutes les ressources","Select file":"Sélectionnez un fichier","Select folder":"Sélectionnez un dossier",Set:"Définir","Set expiration date":"Définir la date d'expiration","Set password":"Définir le mot de passe",Share:"Partager","Share via link":"Partager par lien","Share via public link":"Partager par lien public","Share with people":"Partager avec des personnes","Shared by":"Partagé par","Shared via link":"Partagé par lien","Shared with":"Partagé avec","Shared with me":"Partagé avec moi","Shared with others":"Partagé avec autres",Shares:"Partages","Show all":"Tout afficher","Show file extensions":"Afficher les extensions du fichier","Show hidden files":"Afficher les fichiers masqués","Show invited people":"Voir les personnes invitées","Show less":"Afficher moins","Show links":"Afficher les liens","Show members":"Afficher les membres","Show more":"Afficher plus",Size:"Taille",Skip:"Passer","Space has no deleted files":"L’espace n'a pas de fichier supprimé",Spaces:"Espaces",Status:"État",Tags:"Étiquettes","The file type is unsupported":"Type de fichier non supporté",'The name "%{name}" is already taken':'Le nom "%{name}" existe déjà',"The name cannot be empty":"Le nom ne peut pas être vide",'The name cannot be equal to ".."':'Le nom ne peut pas être ".."','The name cannot be equal to "."':'Le nom ne peut pas être "."','The name cannot contain "/"':'Le nom ne peut pas contenir "/"',"The name cannot end with whitespace":"Le nom ne peut pas finir avec un espace","The private link has been copied to your clipboard.":"Le lien privé a été copié dans le presse-papier.","There are no resources marked as favorite":"Il n'y a aucun élément marqué comme favoris","This file has been shared.":"Ce fichier a été partagé","This folder has been shared.":"Ce dossier est partagé.","This folder has no content.":"Ce dossier est vide.","This item is directly shared via links.":"Cet élément est diretement partagé par lien.","This item is directly shared with others.":"Cet élément est directement partagé avec d'autres.","This item is shared via links through one of the parent folders.":"Cet élément est partagé par lien au travers de l'un des dossiers parents","This item is shared with others through one of the parent folders.":"Cet élément est partagé avec d'autres par lien au travers de l'un des dossiers parents",Upload:"Envoyer","Upload files or folders":"Envoyer des fichiers ou des dossiers",User:"Utilisateur",Versions:"Versions",via:"via","We went looking everywhere, but were unable to find the selected resource.":"Nous avons cherché partout, mais nous n’avons pas pu trouver la ressource sélectionnée.","You don't have permission to share this file.":"Vous n'avez pas la permission de partager ce fichier.","You don't have permission to share this folder.":"Vous n'avez pas la permission de partager ce dossier.","You have no deleted files":"Vous n'avez aucun fichier supprimé","You have no permission to create new files!":"Vous n'avez pas les droits pour créer de nouveaux fichiers !","You have no permission to upload!":"Vous n'avez pas la permission d'uploader !"},Od={"(me)":"(eu)","%{name} already exists":"%{name} xa existe","%{owner} shared this folder with you for uploading":"%{owner} compartiu este cartafol con vostede para envialo",Accept:"Aceptar",Actions:"Accións","Add people":"Engadir xente","All deleted files were removed":"Retiráronse todos os ficheiros eliminados","All files":"Todos os ficheiros","An error occurred while loading the public link":"Produciuse un erro ao cargar a ligazón pública","Are you sure you want to delete all selected resources?":"Confirma que quere eliminar todos os recursos seleccionados?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":` 
Confirma que quere eliminar todos os recursos seleccionados? Todo o seu contido eliminarase definitivamente. Esta acción non se pode desfacer.`,"Are you sure you want to delete this file?":"Confirma que quere eliminar este ficheiro?","Are you sure you want to delete this folder?":"Confirma que quere eliminar este cartafol?",Cancel:"Cancelar","Clear selection":"Limpar a selección",Copy:{"Action in the files list row to initiate copying resources":"Copiar","":"Copiar"},Create:"Crear","Create a new file":"Crear un novo ficheiro","Create a new folder":"Crear un novo cartafol",Decline:"Declinar",Delete:"Eliminar","Delete file %{name}":"Eliminar o ficheiro %{name}","Delete folder %{name}":"Eliminar o cartafol %{name}","Delete selected resource?":["Eliminar o recurso seleccionado?","Eliminar os %{amount} recursos seleccionados?"],"Deleted files":"Ficheiros eliminados",Download:"Descargar","Drop files here to upload or click to select file":"Solte os ficheiros aquí para envialos ou prema para seleccionar ficheiro","Empty trash bin":"Cesto do lixo baleiro","Expires %{expires}":"Caduca %{expires}",Favorites:"Favoritos","File name":"Nome de ficheiro","File name cannot be empty":"O nome do ficheiro non pode estar baleiro",'File name cannot be equal to ".."':"O nome do ficheiro non pode ser igual a «..»",'File name cannot be equal to "."':"O nome do ficheiro non pode ser igual a «.»",'File name cannot contain "/"':"O nome do ficheiro non pode conter unha «/»","File name cannot end with whitespace":"O nome do ficheiro non pode rematar cun espazo en branco",Files:"Ficheiros","Folder name":"Nome do cartafol","Folder name cannot be empty":"O nome do cartafol non pode estar baleiro",'Folder name cannot be equal to ".."':"O nome do cartafol non pode ser igual a «..»",'Folder name cannot be equal to "."':"O nome do cartafol non pode ser igual a «.»",'Folder name cannot contain "/"':"O nome do cartafol non pode conter unha «/»",Folders:"Cartafoles",Group:"Grupo",Guest:"Convidado","Loading public link…":"Cargando a ligazón pública…",Name:"Nome",New:"Novo","New file":"Novo ficheiro","New folder":"Novo cartafol","No Versions available for this file":"Non hai versións dispoñíbeis para este ficheiro","Open folder":{"Action in the files list row to open a folder":"Abrir cartafol"},Owner:"Propietario",Password:"Contrasinal","Paste here":"Pegar aquí","Permanently delete file %{name}":"Eliminar de xeito permanente o ficheiro %{name}","Permanently delete folder %{name}":"Eliminar de xeito permanente o cartafol %{name}","Permanently delete selected resource?":["Eliminar de xeito permanente o recurso seleccionado?","Eliminar de xeito permanente os %{amount} recursos seleccionados?"],"Person was added":"Engadiuse a persoa","Public link":"Ligazón pública","Reload public link":"Volvendo cargar a ligazón pública","Remote user":"Usuario remoto","Remove expiration date":"Retirar a data de caducidade","Remove password":"Retirar o contrasinal",Rename:"Renomear","Rename file %{name}":"Renomear o ficheiro %{name}","Rename folder %{name}":"Renomear o cartafol %{name}","Resource not found":"Non se atopou o recurso",Restore:"Restaurar",Save:"Gardar",Search:"Buscar",Share:"Compartir","Shared with":"Compartido con","Shared with me":"Compartido comigo","Shared with others":"Compartido con outros",Size:"Tamaño",Status:"Estado",'The name "%{name}" is already taken':"O nome «%{name}» xa está ocupado","The name cannot be empty":"O nome non pode estar baleiro",'The name cannot be equal to ".."':"O nome non pode ser igual a «..»",'The name cannot be equal to "."':"O nome non pode ser igual a «.»",'The name cannot contain "/"':"O nome non pode conter unha «/»","The name cannot end with whitespace":"O nome non pode rematar cun espazo en branco","The private link has been copied to your clipboard.":"A ligazón privada foi copiada no portapapeis.",Upload:"Envío",User:"Usuario",Versions:"Versións","We went looking everywhere, but were unable to find the selected resource.":"Buscamos por todas partes, mais non puidemos atopar o recurso seleccionado.","You don't have permission to share this file.":"Non ten permiso para compartir este ficheiro.","You don't have permission to share this folder.":"Non ten permiso para compartir este cartafol.","You have no permission to upload!":"Non ten permiso para facer envíos!"},Bd={'"%{file}" was deleted successfully':"„%{file}” נמחק בהצלחה",'"%{fileName}" was created successfully':"„%{fileName}” נוצר בהצלחה",'"%{folderName}" was created successfully':"„%{folderName}” נוצרה בהצלחה","(me)":"(אני)","%{ amount } item selected. Actions are available above the table.":["פריט אחד נבחר. הפעולות זמינות מעל הטבלה.","%{ amount } פריטים נבחרו. הפעולות זמינות מעל הטבלה.","%{ amount } פריטים נבחרו. הפעולות זמינות מעל הטבלה.","%{ amount } פריטים נבחרו. הפעולות זמינות מעל הטבלה."],"%{ filesCount } file":["קובץ אחד","%{ filesCount } קבצים","%{ filesCount } קבצים","%{ filesCount } קבצים"],"%{ foldersCount } folder":["תייקיה אחת","%{ foldersCount } תיקיות","%{ foldersCount } תיקיות","%{ foldersCount } תיקיות"],"%{ itemCount } item selected":["פריט אחד נבחר","%{ itemCount } פריטים נבחרו","%{ itemCount } פריטים נבחרו","%{ itemCount } פריטים נבחרו"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["פריט אחד בסך הכול (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בסך הכול (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בסך הכול (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בסך הכול (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["פריט אחד בגודל כולל של %{ itemSize } (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בגודל כולל של %{ itemSize } (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בגודל כולל של %{ itemSize } (%{ filesStr}, %{foldersStr})","%{ itemsCount } פריטים בגודל כולל של %{ itemSize } (%{ filesStr}, %{foldersStr})"],"%{collaboratorName} (me)":"%{collaboratorName} (אני)","%{count} item was copied successfully":["פריט הועתק בהצלחה","%{count} פריטים הועתקו בהצלחה","%{count} פריטים הועתקו בהצלחה","%{count} פריטים הועתקו בהצלחה"],"%{count} item was moved successfully":["פריט הועבר בהצלחה","%{count} פריטים הועברו בהצלחה","%{count} פריטים הועברו בהצלחה","%{count} פריטים הועברו בהצלחה"],"%{count} member":["חבר/ה","%{count} חברים","%{count} חברים","%{count} חברים"],"%{name} already exists":"%{name} כבר קיים","%{owner} shared this folder with you for uploading":"התיקייה הזו שותפה אתך על ידי %{owner} להעלאה.","%{resource} was restored successfully":"%{resource} שוחזר בהצלחה","%{resourceCount} files restored successfully":"%{resourceCount} קבצים שוחזרו בהצלחה",Accept:"לקבל","Accept share":["קבלת שיתוף","קבלת שיתופים","קבלת שיתופים","קבלת שיתופים"],"Accepted shares":"שיתופים שהתקבלו","Access denied":"הגישה נדחתה","Access details":"פרטי גישה","Access expires":"הגישה תפוג",Actions:"פעולות",Add:"הוספה","Add expiration date":"הוספת תאריך תפוגה","Add link":"הוספת קישור","Add password":"הוספה סיסמה","Add people":"הוספת איש קשר","Add to favorites":"הוספה למועדפים","Additional info":"פרטים נוספים","All Actions":"כל הפעולות","All deleted files were removed":"כל הקבצים למחיקה הוסרו","All files":"כל הקבצים","All files and folders":"כל הקבצים והתיקיות","An error occurred while loading the public link":"שגיאה אירעה בזמן טעינת הקישור הציבורי",Apply:"החלה","Are you sure you want to delete all selected resources?":"למחוק את כל המשאבים שנבחרו?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"למחוק את כל המשאבים שנבחרו? כל התוכן שלהם יוסר לצמיתות. לא ניתן לבטל פעולה זו. ","Are you sure you want to delete this file?":"למחוק קובץ זה?","Are you sure you want to delete this folder?":"למחוק תיקייה זו?","Are you sure you want to delete this link? Recreating the same link again is not possible.":"למחוק את הקישור הזה? יצירת אותו הקישור שוב אינה אפשרית.","Are you sure you want to remove this share?":"להסיר את השיתוף הזה?",Cancel:"ביטול","Choose how access is granted":"נא לבחור איך מוענקת גישה","Clear selection":"איפוס בחירה","Close sidebar to hide details":"סגירת הלוח תסתיר את הפרטים","Context menu of the share":"תפריט ההקשר של השיתוף",Copied:"הועתק","Copied to clipboard!":"הועתק ללוח הגזירים!",Copy:{"Action in the files list row to initiate copying resources":"העתקה","":"העתקה"},"Copy direct link":"העתקת קישור ישיר","Copy here":"העתקה לכאן","Copy link to clipboard":"העתקת קישור ללוח גזירים","Copy private link to clipboard":"העתקת קישור פרטי ללוח גזירים",Create:"יצירה","Create a new file":"יצירת קובץ חדש","Create a new folder":"יצירת תיקייה חדשה","Create a new space":"יצירת מרחב חדש","Create link":"יצירת קישור","Create new files or folders":"יצירת קבצים או תיקיות חדשים","Creating share":"נוצר שיתוף","Creating space failed…":"יצירת מרחב נכשלה…",Cut:{"Action in the files list row to initiate cutting resources":"גזירה"},"Cut to clipboard!":"גזירה ללוח הגזירים",Decline:"דחיה","Decline share":["דחיית שיתוף","דחיית שיתופים","דחיית שיתופים","דחיית שיתופים"],"Declined shares":"שיתופים שנדחו",Delete:"מחיקה","Delete file %{name}":"מחיקת קובץ %{name}","Delete folder %{name}":"מחיקת תיקייה %{name}","Delete link":"מחיקת קישור","Delete selected resource?":["למחוק משאב נבחר?","למחוק %{amount} משאבים נבחרים?","למחוק %{amount} משאבים נבחרים?","למחוק %{amount} משאבים נבחרים?"],Deleted:"נמחק","Deleted files":"קבצים מחוקים","Deselect %{name}":"ביטול הבחירה ב־%{name}",Details:"פרטים","Direct link":"קישור ישיר","Direct link copied":"הקישור הישיר הועתק","Display customization options of the files list":"הצגת אפשרות כוונון לרשימת הקבצים",Download:"הורדה",'Drag files and folders here or use the "New" or "Upload" buttons to add files':"אפשר לגרור קבצים ולשחרר לכאן או להשתמש בכפתורים „חדש” או „העלאה” כדי להוסיף קבצים","Drop files here to upload or click to select file":"שחרור קבצים לכאן להעלאה או הקלקה לבחירת קובץ","Edit expiration date":"עריכת תאריך תפוגת תוקף","Edit image":"עריכת תמונה","Edit name":"עריכת שם","Edit password":"עריכת סיסמה","Empty trash bin":"פינוי פח אשפה","Expires %{expires}":"התוקף יפוג ב־%{expires}","Failed to accept the selected share.":["קבלת השיתוף הנבחר נכשלה.","קבלת השיתופים הנבחרים נכשלה.","קבלת השיתופים הנבחרים נכשלה.","קבלת השיתופים הנבחרים נכשלה."],"Failed to apply expiration date":"החלת תאריך התפוגה נכשלה","Failed to apply new permissions":"החלת ההרשאות החדשות נכשלה",'Failed to change favorite state of "%{file}"':"החלפת מצב ההעדפה של „%{file}” נכשל",'Failed to copy "%{name}"':"ההעתקה של „%{name}” נכשלה","Failed to copy %{count} resources":"העתקת %{count} משאבים נכשלה","Failed to create file":"יצירת קובץ נכשלה","Failed to create folder":"יצירת תיקייה נכשלה","Failed to create link":"יצירת קישור נכשלה",'Failed to delete "%{file}"':"מחיקת „%{file}” נכשלה",'Failed to delete "%{file}" - the file is locked':"מחיקת „%{file}” נכשלה - הקובץ נעול","Failed to delete link":"מחיקת קישור נכשלה","Failed to download the selected folder.":["הורדת הקובץ הנבחר נכשלה.","הורדת הקבצים הנבחרים נכשלה.","הורדת הקבצים הנבחרים נכשלה.","הורדת הקבצים הנבחרים נכשלה."],'Failed to move "%{name}"':"העברת „%{name}” נכשלה","Failed to move %{count} resources":"העברת %{count} משאבים נכשלה","Failed to remove share":"הסרת השיתוף נכשלה",'Failed to rename "%{file}" to "%{newName}"':"שינוי השם של „%{file}” לשם „%{newName}” נכשל",'Failed to rename "%{file}" to "%{newName}" - the file is locked':"שינוי השם „%{file}” לשם „%{newName}” נכשל - הקובץ נעול",'Failed to restore "%{resource}"':"השחזור של „%{resource}” נכשל","Failed to restore %{resourceCount} files":"שחזור %{resourceCount} נכשל","Failed to set space image":"הגדרת תמונת המרחב נכשלה","Failed to update link":"עדכון הקישור נכשל","Failed to upload space image":"העלאת תמונת מרחב נכשלה","Favorite files":"קבצים מועדפים",Favorites:"מועדפים",file:"קובץ","File name":"שם קובץ","File name cannot be empty":"השם לא יכול להיות ריק",'File name cannot be equal to ".."':"שם הקובץ לא יכול להיות „..”",'File name cannot be equal to "."':"שם הקובץ לא יכול להיות „.”",'File name cannot contain "/"':"שם הקובץ לא יכול להכיל „/”","File name cannot end with whitespace":"שם קובץ לא יכול להסתיים ברווח",Files:"קבצים","Files shared via link":"קבצים שותפו דרך קישור","Files shared with me":"קבצים שותפו אתי","Files shared with others":"קבצים שותפו עם אחרים","Filter members":"סינון חברים","Filter:":"מסנן:",folder:"תיקייה",Folder:"תיקייה","Folder name":"שם תיקייה","Folder name cannot be empty":"שם תיקייה לא יכול להיות ריק",'Folder name cannot be equal to ".."':"שם התיקייה לא יכול להיות „..”",'Folder name cannot be equal to "."':"שם התיקייה לא יכול להיות „.”",'Folder name cannot contain "/"':"שם תיקייה לא יכול להכיל „/”",Folders:"תיקיות","Go to »Personal« page":"מעבר לעמוד „פרטי”","Go to »Spaces Overview«":"מעבר ל„סקירת מרחבים”",Group:"קבוצה",Guest:"אורח","Guest user":"אורח","Items per page":"פריטים לעמוד","Keep both":"להשאיר את שניהם","Last modified":"שינוי אחרון",Link:"קישור","Link name":"שם קישור","Link was created successfully":"הקישור נוצר בהצלחה","Link was deleted successfully":"הקישור נמחק בהצלחה","Link was updated successfully":"הקישור עודכן בהצלחה","Loading public link…":"קישור ציבורי נטען…",Members:"חברים",Modified:"שינוי",Name:"שם","Navigate to '%{folder}'":"ניווט אל ‚%{folder}’","Navigate to parent folder":"ניווט לתיקיית ההורה","Navigate to the parent (%{folderName})":"ניווט להורה (%{folderName})",New:"חדש","New file":"קובץ חדש","New folder":"תיקייה חדשה","New space":"מרחב חדש","New Space":"מרחב חדש","No information to display":"אין מידע להצגה","No items selected.":"לא נבחרו פריטים.","No link":"אין קישור","No resources found":"לא נמצאו משאבים","No users or groups found.":"לא נמצאו משתמשים או קבוצות.","No Versions available for this file":"אין גרסאות זמינות לקובץ זה","Not enough quota":"אין מספיק מיכסה","Open context menu and show members":"לפתוח את תפריט ההקשר ולהציג חברים","Open folder":{"Action in the files list row to open a folder":"פתיחת תיקייה"},"Open in %{ appName }":"פתיחה ב־%{ appName }","Open in %{app}":"פתיחה ב־%{app}","Open sidebar to view details":"פתיחת סרגל צד כדי להציג פרטים","Overview of the information about the selected file":"סקירת מידע על הקובץ הנבחר","Overview of the information about the selected files":"סקירת מידע על הקבצים הנבחרים",Owner:"בעלים",Password:"סיסמה:","Password can't be empty":"הסיסמה לא יכולה להישאר ריקה","Password cannot be empty":"הסיסמה לא יכולה להישאר ריקה","Passwords for links are required.":"צריך סיסמאות לקישורים","Paste here":"להדביק לכאן","Pending shares":"שיתופים ממתינים","Permanently delete file %{name}":"מחיקת הקובץ %{name} לצמיתות","Permanently delete folder %{name}":"מחיקת התיקייה %{name} לצמיתות","Permanently delete selected resource?":["מחיקה לצמיתות של משאב נבחר?","מחיקה לצמיתות של %{amount} משאבים נבחרים?","מחיקה לצמיתות של %{amount} משאבים נבחרים?","מחיקה לצמיתות של %{amount} משאבים נבחרים?"],"Person was added":"איש קשר נוסף",Personal:"אישי","Private link":"קישור פרטי","Private link copied":"הקישור הפרטי הועתק","Public file upload":"העלאת קובץ ציבורי","Public link":"קישור ציבורי","Reload public link":"טעינה חוזרת של קישור ציבורי","Remote user":"משתמש מרוחק",Remove:"הסרה","Remove expiration date":"הסרת תאריך תפוגה","Remove from favorites":"הסרה מהמועדפים","Remove password":"הסרת סיסמה","Remove share":"הסרת סיסמה",Rename:"שינוי שם","Rename file %{name}":"שינוי שם קובץ %{name}","Rename folder %{name}":"שינוי שם תיקייה %{name}",Replace:"החלפה","Resource not found":"משאב לא נמצא",Restore:"שחזור",Save:"שמירה",Search:"חיפוש","Search results":"תוצאות חיפוש","See all versions":"הצגת כל הגרסאות","Select a file or folder to view details.":"נא לבחור קובץ או תיקייה להצגת פרטים.","Select all resources":"בחירת כל המשאבים","Select file":"בחירת קובץ","Select folder":"בחירת תיקייה","Select role for the invitation":"נא לבחור תפקיד להזמנה",Set:"הגדרה","Set as space image":"הגדרה כתמונת המרחב","Set expiration date":"הגדרת תאריך תפוגה","Set password":"הגדרת סיסמה",Share:"שיתוף","Share expires %{ expiryDateRelative } (%{ expiryDate })":"השיתוף יפוג %{ expiryDateRelative } (%{ expiryDate })","Share receiver name: %{ displayName }":"שם נמען השיתוף: %{ displayName }","Share receiver name: %{ displayName } (%{ additionalInfo })":"שם נמען השיתוף: %{ displayName } (%{ additionalInfo })","Share receivers":"נמעני השיתופים","Share via link":"שיתוף דרך קישור","Share via public link":"שיתוף דרך קישור ציבורי","Share was removed successfully":"השיתוף הוסר בהצלחה","Share with people":"שיתוף עם אנשים","Shared by":"שותף על ידי","Shared on":"שותף על גבי","Shared via":"שותף דרך","Shared via link":"שותף דרך קישור","Shared with":"שיתוף עם","Shared with me":"שיתוף איתי","Shared with others":"שיתוף עם אחרים",Shares:"שיתופים","Shares pages navigation":"משתף את ניווט העמודים",Show:"הצגה","Show all":"להציג הכול","Show context menu":"הצגת תפריט הקשר","Show file extensions":"הצגת סיומות הקבצים","Show hidden files":"הצגת קבצים נסתרים","Show invited people":"הצגת אנשים שהוזמנו","Show less":"להציג פחות","Show links":"הצגת קישורים","Show members":"הצגת חברים","Show more":"להציג עוד",Size:"גודל",Skip:"דילוג","Space has no deleted files":"במרחב אין קבצים שנמחקו","Space image was set successfully":"תמונת המרחב הוגדרה בהצלחה","Space image was uploaded successfully":"תמונת המרחב הועלתה בהצלחה","Space members":"חברי המרחב","Space name":"שם המרחב",Spaces:"מרחבים",Status:"מצב","The direct link has been copied to your clipboard.":"הקישור הישיר הועתק ללוח הגזירים שלך.","The file type is unsupported":"סוג הקובץ לא נתמך",'The link "%{linkName}" has been copied to your clipboard.':"הקישור „%{linkName}” הועתק ללוח הגזירים.",'The name "%{name}" is already taken':'השם "%{name}" כבר קיים',"The name cannot be empty":"השם לא יכול להיות ריק",'The name cannot be equal to ".."':'השם אינו יכול להיות זהה ל- ".."','The name cannot be equal to "."':'השם אינו יכול להיות זהה ל- "."','The name cannot contain "/"':'השם אינו יכול להכיל "/"',"The name cannot end with whitespace":"השם לא יכול להכיל „/”","The private link has been copied to your clipboard.":"הקישור הפרטי הועתק ללוח הגזירים שלך.","There are no resources marked as favorite":"אין משאבים שמסומנים כמועדפים","There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files":"אין מספיק מיכסה ב־%{spaceName}, יש להוסיף עוד %{missingSpace} כדי לשלח את הקבצים האלה.","This %{ resourceType } is owned by %{ ownerName }":"%{ resourceType } זה הוא בבעלות %{ ownerName }","This %{ resourceType } is shared via %{ linkCount } link":["%{ resourceType } זה משותף דרך קישור אחד","%{ resourceType } זה משותף דרך %{ linkCount } קישורים","%{ resourceType } זה משותף דרך %{ linkCount } קישורים","%{ resourceType } זה משותף דרך %{ linkCount } קישורים"],"This %{ resourceType } is shared via %{ shareCount } invite":["%{ resourceType } זה משותף דרך הזמנה אחת","%{ resourceType } זה משותף דרך %{ linkCount } הזמנות","%{ resourceType } זה משותף דרך %{ linkCount } הזמנות","%{ resourceType } זה משותף דרך %{ linkCount } הזמנות"],"This file has been shared.":"הקובץ שותף.","This folder contains %{ amount } item.":["התיקייה מכילה פריט אחד.","התיקייה מכילה %{ amount } פריטים.","התיקייה מכילה %{ amount } פריטים.","התיקייה מכילה %{ amount } פריטים."],"This folder has been shared.":"התיקייה הזאת שותפה.","This folder has no content.":"בתיקייה הזאת אין תוכן.","This item is directly shared via links.":"הפריט הזה משותף ישירות דרך קישורים.","This item is directly shared with others.":"הפריט הזה משותף ישירות עם אחרים.","This item is shared via links through one of the parent folders.":"פריט זה משותף באמצעות קישורים דרך אחת מתיקיות ההורה שלו.","This item is shared with others through one of the parent folders.":"פריט זה משותף עם אחרים דרך אחת מתיקיות ההורה.","This link is password-protected":"הקישור הזה מוגן בסיסמה",Upload:"העלאה","Upload files or folders":"העלאת קבצים או תיקיות",User:"משתמש",Versions:"גרסאות",via:"דרך","We went looking everywhere, but were unable to find the selected resource.":"חפשנו בכל מקום, אך לא הצלחנו למצוא את המשאב שנבחר.","You don't have access to any spaces":"אין לך מפתחות גישה לאף אחד מהמרחבים","You don't have permission to share this file.":"אין לך הרשאות לשיתוף קובץ זה.","You don't have permission to share this folder.":"אין לך הרשאות לשיתוף תיקייה זו.","You have no deleted files":"אין לך קבצים שנמחקו","You have no permission to create new files!":"אין לך הרשאה ליצור קבצים חדשים!","You have no permission to upload!":"אין לך הרשאות להעלאה!"},Ud={'"%{file}" was deleted successfully':'"%{file}" è stato cancellato con successo','"%{fileName}" was created successfully':'"%{fileName}" è stato creato con successo','"%{folderName}" was created successfully':'La cartella "%{folderName}" è stata creata con successo',"(me)":"(io)","%{ amount } item selected. Actions are available above the table.":["%{ amount } oggetto selezionato. È possibile selezionare le azioni disponibili sopra la tabella.","%{ amount } oggetti selezionati. È possibile selezionare le azioni disponibili sopra la tabella.","%{ amount } oggetti selezionati. È possibile selezionare le azioni disponibili sopra la tabella."],"%{ filesCount } file":["%{ filesCount } file","%{ filesCount } files","%{ filesCount } files"],"%{ foldersCount } folder":["%{ foldersCount } cartella","%{ foldersCount } cartelle","%{ foldersCount } cartelle"],"%{ itemCount } item selected":["%{ itemCount } elemento selezionato","%{ itemCount } elementi selezionati","%{ itemCount } elementi selezionati"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } elemento in totale (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } elementi totali (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } elementi totali (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } elemento in totale (%{ filesStr}, %{foldersStr})","%{ itemsCount } elementi totali (%{ filesStr}, %{foldersStr})","%{ itemsCount } elementi totali (%{ filesStr}, %{foldersStr})"],"%{ spacesCount } space":["%{ spacesCount } spazio","%{ spacesCount } spazi","%{ spacesCount } spazi"],"%{collaboratorName} (me)":"%{collaboratorName} (io)","%{count} item was copied successfully":["%{count} elemento copiato con successo","%{count} elementi copiati con successo","%{count} elementi copiati con successo"],"%{count} item was moved successfully":["%{count} elemento spostato con successo","%{count} elementi spostati con successo","%{count} elementi spostati con successo"],"%{count} member":["%{count} membro","%{count} membri","%{count} membri"],"%{name} already exists":"%{name} esiste già","%{owner} shared this folder with you for uploading":"%{owner} ha condiviso con te questa cartella per il caricamento","%{resource} was restored successfully":"%{resource} ripristinata con successo","%{resourceCount} files restored successfully":"%{resourceCount} file ripristinati con successo","%{shareType} cannot access %{resourceName}":"%{shareType} non ha l'accesso a %{resourceName}","%{spaceName} (disabled)":"%{spaceName} (disabilitato)","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},"A-Z":"A-Z",Accept:"Accetta","Accept share":["Accetta condivisione","Accetta condivisioni","Accetta condivisioni"],"Accepted shares":"Condivisioni accettate","Access denied":"Accesso negato","Access details":"Dettagli di accesso","Access expires":"Scadenza accesso","Access was denied successfully":"Accesso negato con successo",'Account and login is required. Only people from the list "Invited people" can access.':'È necessario possedere un account ed accedervi. Solo le persone sulla lista "Persone invitate" possono accedere.',Actions:"Azioni",Add:"Aggiungi","Add expiration date":"Aggiungi data di scadenza","Add link":"Aggiungi collegamento","Add members to this Space":"Aggiungi membri a questo Spazio","Add or edit tags":"Aggiungi o modifica tag","Add password":"Aggiungi password","Add people":"Aggiungi persone","Add to favorites":"Aggiungi ai preferiti","Additional info":"Informazioni aggiuntive","All Actions":"Tutte le Azioni","All deleted files were removed":"Tutti i file eliminati sono stati rimossi","All files":"Tutti i file","All files and folders":"Tutti i file e le cartelle","An error occurred while loading the public link":"Si è verificato un errore nel caricamento del collegamento pubblico",Apply:"Applica","Apply to all %{count} conflicts":"Applica a tutti e %{count} i conflitti","Apply to all %{count} files":"Applica a tutti e %{count} i file","Apply to all %{count} folders":"Applica a tutti e %{count} le cartelle","Are you sure you want to delete all selected resources?":"Si è sicuri di voler eliminare tutte le risorse selezionate?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Si è sicuri di voler eliminare tutte le risorse selezionate? Tutto il loro contenuto verrà eliminato definitivamente. Questa azione non è reversibile.","Are you sure you want to delete this file?":"Si è sicuri di voler eliminare questo file?","Are you sure you want to delete this file? All its content will be permanently removed. This action cannot be undone.":"Si è sicuri di voler eliminare questo file? Tutto il contenuto verrà eliminato definitivamente. Questa azione non è reversibile.","Are you sure you want to delete this folder?":"Si è sicuri di voler eliminare questa cartella?","Are you sure you want to delete this folder? All its content will be permanently removed. This action cannot be undone.":"Si è sicuri di voler eliminare questa cartella? Tutto il contenuto verrà eliminato definitivamente. Questa azione non è reversibile.","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Si è sicuri di voler eliminare questo collegamento? Non sarà possibile ricreare lo stesso collegamento in futuro.","Are you sure you want to permanently delete the listed items? You can’t undo this action.":"Si è sicuri di voler eliminare definitivamente gli elementi della lista? Questa azione non è reversibile.","Are you sure you want to remove this member?":"Si è sicuri di voler rimuovere questo membro?","Are you sure you want to remove this share?":"Si è sicuri di voler rimuovere questa condivisione?",Cancel:"Cancella","Clear selection":"Cancella selezione","Close filter":"Chiudi filtri","Close sidebar to hide details":"Chiudere la barra laterale per nascondere i dettagli","Context menu of the share":"Menu contestuale della condivisione",Copied:"Copiato","Copied to clipboard!":"Copiato negli appunti!",Copy:{"Action in the files list row to initiate copying resources":"Copia","":"Copia"},"Copy direct link":"Copia collegamento diretto","Copy FUSE path":"Copia percorso FUSE","Copy here":"Copia qui","Copy here?":"Copiare qui?","Copy link":"Copia collegamento","Copy link to clipboard":"Copia collegamento negli appunti","Copy private link to clipboard":"Copia collegamento privato negli appunti","Copy Windows path":"Copia percorso Windows",Create:"Creare","Create a new file":"Creare un nuovo file","Create a new folder":"Creare nuova cartella","Create a new space":"Creare uno spazio nuovo","Create link":"Creare collegamento","Create new files or folders":"Creare nuovi file o cartelle",'Create Space from "%{resourceName}"':['Creare Spazio da "%{resourceName}"',"Creare Spazio dalla selezione","Creare Spazio dalla selezione"],"Create Space from selection":"Creare Spazio dalla selezione",'Create Space with the content of "%{resourceName}".':['Creare spazio con il contenuto "%{resourceName}".',"Creare spazio con i file selezionati.","Creare spazio con i file selezionati."],"Creating share":"Creazione condivisione","Creating space failed…":"Creazione spazio non riuscita...","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},"Custom permissions":"Permessi personalizzati",Cut:{"Action in the files list row to initiate cutting resources":"Taglia"},"Cut to clipboard!":"Taglia negli appunti!",Decline:"Rifiuta","Decline share":["Rifiuta condivisione","Rifiuta condivisioni","Rifiuta condivisioni"],"Declined shares":"Condivisioni rifiutate",Delete:"Elimina","Delete file %{name}":"Elimina file %{name}","Delete folder %{name}":"Elimina cartella %{name}","Delete link":"Elimina collegamento","Delete selected resource?":["Eliminare la risorsa selezionata?","Eliminare %{amount} risorse selezionate?","Eliminare %{amount} risorse selezionate?"],Deleted:"Eliminato","Deleted files":"File eliminati","Deny access":"Negare l'accesso","Deselect %{name}":"Deseleziona %{name}",Details:"Dettagli","Direct link":"Collegamento diretto","Direct link copied":"Collegamento diretto copiato","Disabled spaces cannot be entered":"Gli spazi disabilitati non possono essere immessi",Download:"Scarica","Edit expiration date":"Modifica data di scadenza","Edit image":"Modifica immagine","Edit name":"Modifica nome","Edit password":"Modifica password","Edit permission":"Modifica permessi","Empty trash bin":"Svuota cestino","Enter a name to add people or groups as members to this Space.":"Scrivi un nome per aggiungere persone o gruppi come membri di questo Spazio","Error while editing the share.":"Errore nella modifica della condivisione","Everyone with the link":"Chiunque abbia il collegamento","Expires %{expires}":"Scade %{expires}","Expires %{timeToExpiry} (%{expiryDate})":"Scade tra %{timeToExpiry} (%{expiryDate})","Failed to apply expiration date":"Applicazione della data di scadenza non riuscita","Failed to apply new permissions":"Applicazione di nuovi permessi non riuscita",'Failed to change favorite state of "%{file}"':'Cambiamento di stato preferito del file "%{file}" non riuscito','Failed to copy "%{name}"':'Non è stato possibile copiare "%{name}"',"Failed to copy %{count} resources":"Non è stato possibile copiare %{count} risorse","Failed to create file":"Non è stato possibile creare il file","Failed to create folder":"Non è stato possibile creare la cartella","Failed to create link":"Non è stato possibile creare il collegamento",'Failed to delete "%{file}"':'Non è stato possibile rimuovere "%{file}"','Failed to delete "%{file}" - the file is locked':'Non è stato possibile rimuovere "%{file}" - il file è bloccato',"Failed to delete link":"Non è stato possibile rimuovere il collegamento","Failed to deny access":"Non è stato possibile negare l'accesso","Failed to edit tags":"Non è stato possibile modificare i tag","Failed to empty trash bin":{"Error message in case emptying trash bin fails":"Non è stato possibile svuotare il cestino"},"Failed to grant access":"Non è stato possibile dare l'accesso",'Failed to move "%{name}"':'Non è stato possibile spostare "%{name}"',"Failed to move %{count} resources":"Non è stato possibile spostare %{count} risorse","Failed to remove share":"Non è stato possibile rimuovere la condivisione",'Failed to rename "%{file}" to "%{newName}"':'Non è stato possibile rinominare "%{file}" come "%{newName}"','Failed to rename "%{file}" to "%{newName}" - the file is locked':'Non è stato possibile rinominare "%{file}" come "%{newName}" - il file è bloccato','Failed to restore "%{resource}"':'Non è stato possibile ripristinare "%{resource}"',"Failed to restore %{resourceCount} files":"Non è stato possibile ripristinare %{resourceCount} file","Failed to set space image":"Non è stato possibile impostare l'immagine dello spazio","Failed to update link":"Non è stato possibile caricare il collegamento","Failed to upload space image":"Non è stato possibile caricare l'immagine dello spazio","Favorite files":"File preferiti",Favorites:"Preferiti",file:"file","File already exists":"Il file esiste già","File name":"Nome file",Files:"Files","Files shared via link":"File condivisi tramite collegamento","Files shared with me":"File condivisi con me","Files shared with others":"File condivisi con altri","Filter members":"Filtra membri","Filter:":"Filtra:",folder:"cartella",Folder:"Cartella",Folders:"Cartelle",Group:"Gruppo",Guest:"Ospite","Guest user":"Ospite",Link:"Collegamento","Loading public link…":"Caricamento collegamento pubblico...",Members:"Membri",Modified:"Modificato",Name:"Nome","Open sidebar to view details":"Apri la barra laterale per visualizzare i dettagli",Password:"Password","Password cannot be empty":"Il campo password non può essere lasciato vuoto",Personal:"Personale","Private link":"Link privato","Public link":"Link pubblico",Search:"Cerca",Share:"Condividi","Show context menu":"Visualizza menu contestuale",Spaces:"Spazi",Status:"Stato","The file type is unsupported":"Il tipo di file non è supportato",User:"Utente"},qd={"%{name} already exists":"%{name} już istnieje",Accept:"Akceptuj","Access denied":"Odmowa dostępu",Actions:"Akcje","All Actions":"Wszystkie akcje","All files":"Wszystkie pliki","All files and folders":"Wszystkie pliki i foldery","An error occurred while loading the public link":"Wystąpił problem przy próbie załadowania publicznego linku","Are you sure you want to delete this file?":"Czy na pewno chcesz usunąć ten plik?","Are you sure you want to delete this folder?":"Czy na pewno chcesz usunąć ten folder?",Cancel:"Anuluj","Clear selection":"Wyczyść zaznaczenie","Close sidebar to hide details":"Zamknij panel boczny by ukryć szczegóły",Copy:{"Action in the files list row to initiate copying resources":"Kopiuj","":"Kopiuj"},"Copy link to clipboard":"Kopiuj link do schowka",Create:"Utwórz","Create a new file":"Utwórz nowy plik","Create a new folder":"Utwórz nowy folder",Decline:"Odmów",Delete:"Usuń","Delete file %{name}":"Usuń plik %{name}","Delete folder %{name}":"Usuń folder %{name}","Deleted files":"Usunięte pliki",Details:"Szczegóły",Download:"Pobierz","Drop files here to upload or click to select file":"Przeciągnij pliki tutaj lub kliknij aby wybrać pliki","Edit image":"Edytuj obraz","Edit name":"Edytuj nazwę","Empty trash bin":"Opróżnij kosz",Favorites:"Ulubione","File name":"Nazwa pliku","File name cannot be empty":"Nazwa pliku nie może być pusta",'File name cannot be equal to ".."':'Nazwa pliku nie może być równa ".."','File name cannot contain "/"':'Nazwa pliku nie może zawierać "/" ',Files:"Pliki",folder:"folder",Folder:"Folder","Folder name":"Nazwa folderu","Folder name cannot be empty":"Nazwa folderu nie może być pusta",'Folder name cannot be equal to "."':'Nazwa folderu nie być równa "." ','Folder name cannot contain "/"':'Nazwa folderu nie może zawierać "/"',Folders:"Foldery",Group:"Grupa",Guest:"Gość","Guest user":"Gość","Loading public link…":"Ładowanie linku publicznego...",Members:"Członkowie",Name:"Nazwa",New:"Nowy","New file":"Nowy plik","New folder":"Nowy folder","No Versions available for this file":"Brak dostępnych wersji dla tego pliku.","Open folder":{"Action in the files list row to open a folder":"Otwórz folder"},Password:"Hasło","Password cannot be empty":"Hasło nie może być puste","Paste here":"Wklej tutaj","Person was added":"Osoba została dodana","Private link":"Link prywatny","Public link":"Link publiczny","Remote user":"Użytkownik zdalny","Remove password":"Usuń hasło",Rename:"Zmień nazwę",Save:"Zapisz",Search:"Szukaj",Share:"Udostępnij","Shared with me":"Udostępnione dla mnie","Shared with others":"Udostępnione z innymi",Show:"Pokaż",Status:"Status","The name cannot be empty":"Nazwa nie może być pusta",'The name cannot contain "/"':'Nazwa nie może zawieać "/"',"This folder has no content.":"Ten folder jest pusty.",Upload:"Wyślij","Upload files or folders":"Wyślij pliki lub foldery",User:"Użytkownik",via:"przez","You don't have permission to share this file.":"Nie masz uprawnień aby udostępnić ten plik.","You don't have permission to share this folder.":"Nie masz uprawnień aby udostępnić ten folder.","You have no permission to create new files!":"NIe masz uprawnień aby tworzyć nowe pliki!","You have no permission to upload!":"Nie masz uprawnień aby wysłać"},Vd={"%{name} already exists":"%{имя} уже существует","%{owner} shared this folder with you for uploading":"%{владелец} поделился с вами этой папкой для загрузки",Accept:"Принять",Actions:"Действия","An error occurred while loading the public link":"При загрузке публичной ссылки возникла ошибка","Are you sure you want to delete all selected resources?":"Вы уверены что хотите удалить все выбранные ресурсы?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Вы уверены что хотите удалить все выбранные ресурсы? Все содержимое будет удалено навсегда. Это действие нельзя отменить.",Cancel:"Отменить","Clear selection":"Очистить выбор","Close sidebar to hide details":"Закрыть боковую панель, чтобы скрыть детали",Create:"создать","Custom permissions":"Пользовательские разрешения",Decline:"Отклонить",Delete:"удалить","Deny access":"отказано в доступе",Details:"Подробности",Download:"Загрузить","Drop files here to upload or click to select file":"Переместите файлы для загрузки сюда или нажмите на выбрать файл",Favorites:"Избранное","File name cannot be empty":"Имя файла не может быть пустым",'File name cannot be equal to ".."':'Имя файла не может быть "."','File name cannot be equal to "."':'Имя файла не может быть "."','File name cannot contain "/"':'Имя файла не должно содержать "/"',"File name cannot end with whitespace":"Имя файла не должно заканчиваться пробелом",Files:"Файлы","Filter members":"Фильтр пользователей","Filter:":"Фильтр:","Folder name cannot be empty":"Имя папки не может быть пустым",'Folder name cannot be equal to ".."':'Имя папки не может быть "."','Folder name cannot be equal to "."':'Имя папки не может быть "."','Folder name cannot contain "/"':'Имя папки не должно содержать "/"',Group:"Группа",Guest:"Гость",Link:"ссылка","Loading public link…":"Загрузка публичной ссылки...",Members:"Члены",Modified:"Изменено",Name:"Имя",New:"Новый","New file":"Новый файл","New folder":"Новая папка","No Versions available for this file":"Для этого файла нет доступных версий.","Open sidebar to view details":"Откройте боковую панель, чтобы просмотреть подробности",Password:"Пароль","Password cannot be empty":"Пароль не может быть пустым","Remove password":"Удалить пароль",Rename:"Переименование",Restore:"Восстановить",Save:"Сохранить",Search:"Найти",Share:"Поделиться",'The name "%{name}" is already taken':'Имя "%{name}" уже занято','The name cannot be equal to ".."':'Имя не может быть "."','The name cannot contain "/"':'Имя не должно содержать "/"',"The name cannot end with whitespace":"Имя не должно заканчиваться пробелом",User:"Пользователь","You have no permission to upload!":"У Вас нет разрешения на загрузку"},Hd={'"%{file}" was deleted successfully':'"%{file}" je úspešne odstránený','"%{fileName}" was created successfully':'"%{fileName}" je úspešne vytvorený','"%{folderName}" was created successfully':'"%{folderName}" je úspešne vytvorený',"(me)":"(ja)","%{ amount } item selected. Actions are available above the table.":["%{ amount } označený položka. Akcie sú dostupné nad tabuľkou.","%{ amount } označené položky. Akcie sú dostupné nad tabuľkou.","%{ amount } označených položiek. Akcie sú dostupné nad tabuľkou.","%{ amount } označených položiek. Akcie sú dostupné nad tabuľkou."],"%{ filesCount } file":["%{ filesCount } súbor","%{ filesCount } súbory","%{ filesCount } súborov","%{ filesCount } súborov"],"%{ foldersCount } folder":["%{ foldersCount } priečinok","%{ foldersCount } priečinky","%{ foldersCount } priečinkov","%{ foldersCount } priečinkov"],"%{ itemCount } item selected":["%{ itemCount } označená položka","%{ itemCount } označené položky","%{ itemCount } označených položiek","%{ itemCount } označených položiek"],"Access denied":"Prístup zamietnutý",Actions:"Akcie",Cancel:"Zrušiť","Clear selection":"Zrušiť výber",Create:"Vytvoriť",Delete:"Odstrániť",Details:"Podrobnosti",Password:"Heslo","Password cannot be empty":"Heslo nemôže byť prázdne","Private link":"Súkromný odkaz","Public link":"Verejný odkaz",Save:"Uložiť"},Kd={'"%{file}" was deleted successfully':"“%{file}” u fshi me sukses",'"%{fileName}" was created successfully':"“%{fileName}” u krijua me sukses",'"%{folderName}" was created successfully':"“%{folderName}” u krijua me sukses","“via folder”":"“përmes dosjeje”","(me)":"(unë)","%{ amount } item selected. Actions are available above the table.":["%{ amount } objekt i përzgjedhur. Veprimet shihen sipër tabelës.","%{ amount } objekte të përzgjedhur. Veprimet shihen sipër tabelës."],"%{ filesCount } file":["%{ filesCount } kartelë","%{ filesCount } kartela"],"%{ foldersCount } folder":["%{ foldersCount } dosje","%{ foldersCount } dosje"],"%{ itemCount } item selected":["%{ itemCount } objekt i përzgjedhur","%{ itemCount } objekte të përzgjedhur"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } objekt gjithsej (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } objekte gjithsej (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } objekt gjithsej (%{ filesStr}, %{foldersStr})","%{ itemsCount } objekte gjithsej (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr}, %{spacesStr})":["%{ itemsCount } objekt me %{ itemSize } gjithsej (%{ filesStr}, %{foldersStr}, %{spacesStr})","%{ itemsCount } objekte me %{ itemSize } gjithsej (%{ filesStr}, %{foldersStr}, %{spacesStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } objekt me %{ itemSize } gjithsej (%{ filesStr}, %{foldersStr})","%{ itemsCount } objekte me %{ itemSize } gjithsej (%{ filesStr}, %{foldersStr})"],"%{ spacesCount } space":["%{ spacesCount } hapësirë","%{ spacesCount } hapësira"],"%{collaboratorName} (me)":"%{collaboratorName} (unë)","%{count} item was copied successfully":["U kopjua me sukses %{count} objekt","U kopjuan me sukses %{count} objekte"],"%{count} item was moved successfully":["U hoq me sukses %{count} objekt","U hoqën me sukses %{count} objekte"],"%{count} member":["%{count} anëtar","%{count} anëtarë"],"%{name} already exists":"%{name} ekziston tashmë","%{owner} shared this folder with you for uploading":"%{owner} ndau këtë dosje me ju për ngarkime","%{resource} was restored successfully":"%{resource} u rikthye me sukses","%{resourceCount} files restored successfully":"U rikthyen me sukses %{resourceCount} kartela","%{shareType} cannot access %{resourceName}":"%{shareType} s’mund të përdorë %{resourceName}","%{spaceCount} matching trashes":"%{spaceCount} hedhurina me përputhje","%{spaceCount} trashes in total":"%{spaceCount} hedhurina gjithsej","%{spaceName} (disabled)":"%{spaceName} (e çaktivizuar)","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},"A-Z":"A-Z",Accept:"Pranoje","Accept share":["Pranoje pjesën","Pranoji pjesët"],"Accepted shares":"Pjesë të pranuara","Access denied":"Hyrje e mohuar","Access details":"Hollësi hyrjeje","Access expires":"Hyrja skadon","Access was denied successfully":"Hyrja u mohua me sukses","Access was granted successfully":"Hyrja u akordua me sukses",'Account and login is required. Only people from the list "Invited people" can access.':"Llogaria dhe kredencialet e hyrjes janë të domosdoshme. Mund të hyjnë vetëm persona nga lista “Persona të ftuar”.",Actions:"Veprime",Add:"Shto","Add expiration date":"Shtoni datë skadimi","Add link":"Shtoni lidhje","Add members to this Space":"Shtoni anëtarë te kjo Hapësirë","Add or edit tags":"Shtoni ose përpunoni etiketa","Add password":"Shtoni fjalëkalim","Add people":"Shtoni persona","Add to favorites":"Shtoje te të parapëlqyerit","Additional info":"Hollësi shtesë","All Actions":"Krejt Veprimet","All deleted files were removed":"U hoqën krejt kartelat e fshira","All files":"Krejt kartelat","All files and folders":"Krejt kartelat dhe dosjet","An error occurred while loading the public link":"Ndodhi një gabim gjatë ngarkimit të lidhjes publike",Apply:"Aplikoje","Apply to all %{count} conflicts":"Zbatoje te krejt %{count} përplasjet","Apply to all %{count} files":"Aplikoje mbi krejt %{count} kartelat","Apply to all %{count} folders":"Aplikoje mbi krejt %{count} dosjet","Are you sure you want to delete all selected resources?":"Jeni i sigurt se doni të fshihen krejt burimet e përzgjedhura?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Jeni i sigurt se doni të fshihen krejt burimet e përzgjedhur? Krejt lënda e tyre do të hiqet përgjithnjë. Ky veprim s’mund të zhbëhet.","Are you sure you want to delete this file?":"Jeni i sigurt se doni të fshihet kjo kartelë?","Are you sure you want to delete this file? All its content will be permanently removed. This action cannot be undone.":"Jeni i sigurt se doni të fshihet kjo kartelë? Krejt lënda e saj do të hiqet përgjithnjë. Ky veprim s’mund të zhbëhet.","Are you sure you want to delete this folder?":"Jeni i sigurt se doni të fshihet kjo dosje?","Are you sure you want to delete this folder? All its content will be permanently removed. This action cannot be undone.":"Jeni i sigurt se doni të fshihet kjo dosje? Krejt lënda e saj do të hiqet përgjithnjë. Ky veprim s’mund të zhbëhet.","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Jeni i sigurt se doni të fshihet kjo lidhje? Rikrijimi sërish i të njëjtës lidhje s’është i mundur.","Are you sure you want to permanently delete the listed items? You can’t undo this action.":"Jeni i sigurt se doni të fshihen për gjithmonë objektet e paraqitur? Këtë veprim s’mund ta zhbëni.","Are you sure you want to remove this member?":"Jeni i sigurt se doni të hiqet ky anëtar?","Are you sure you want to remove this share?":"Jeni i sigurt se doni të hiqet kjo pjesë?",Cancel:"Anuloje","Choose how access is granted":"Zgjidhni si akordohet hyrje","Clear selection":"Spastro përzgjedhjen","Close filter":"Mbylle filtrin","Close sidebar to hide details":"Që të fshihen hollësitë, mbyllni anështyllën","Context menu of the share":"Menu konteksti për pjesën",Copied:"U kopjua","Copied to clipboard!":"U kopjua në të papastër!",Copy:{"Action in the files list row to initiate copying resources":"Kopjoje","":"Kopjoje"},"Copy direct link":"Kopjo lidhje të drejtpërdrejtë","Copy FUSE path":"Kopjo shteg FUSE","Copy here":"Kopjoje këtu","Copy here?":"Të kopjohet këtu?","Copy link":"Kopjoji lidhjen","Copy link to clipboard":"Kopjoja lidhjen në të papastër","Copy private link to clipboard":"Kopjoje lidhjen private në të papastër","Copy Windows path":"Kopjo shteg Windows",Create:"Krijoje","Create a new file":"Krijoni një kartelë të re","Create a new folder":"Krijoni dosje të re","Create a new space":"Krijoni një hapësirë të re","Create link":"Krijo lidhje","Create new files or folders":"Krijoni kartela ose dosje të reja",'Create Space from "%{resourceName}"':["Krijo hapësirë prej “%{resourceName}”","Krijo Hapësirë prej përzgjedhjes"],"Create Space from selection":"Krijo Hapësirë prej përzgjedhjes",'Create Space with the content of "%{resourceName}".':["Krijo Hapësirë me lëndën e “%{resourceName}”.","Krijo Hapësirë me kartelat e përzgjedhura"],"Creating share":"Po krijohet pjesë","Creating space failed…":"Krijimi i hapësirës dështoi…","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},"Custom permissions":"Leje të përshtatura",Cut:{"Action in the files list row to initiate cutting resources":"Prije"},"Cut to clipboard!":"Prije në të papastër!",Decline:"Hidhe poshtë","Decline share":["Hidhe poshtë pjesën","Hidhi poshtë pjesët"],"Declined shares":"Pjesë të hedhura poshtë",Delete:"Fshije","Delete file %{name}":"Fshije kartelën %{name}","Delete folder %{name}":"Fshije dosjen %{name}","Delete link":"Fshije lidhjen","Delete selected resource?":["Të fshihet burimi i përzgjedhur?","Të fshihen %{amount} burimet e përzgjedhur?"],Deleted:"U fshi","Deleted files":"Kartela të fshira","Deny access":"Mohoji hyrjen","Deselect %{name}":"Shpërzgjidhe %{name}",Details:"Hollësi","Direct link":"Lidhje e drejtpërdrejtë","Direct link copied":"Lidhja e drejtpërdrejtë u kopjua","Disabled spaces cannot be entered":"S’mund të jepen hapësira të çaktivizuara","Display customization options of the files list":"Shfaq mundësi përshtatjeje të listës së kartelave",Download:"Shkarkoje",'Drag files and folders here or use the "New" or "Upload" buttons to add files':"Që të shtoni kartela, tërhiqni kartela dhe dosje këtu, ose përdorni butonat “E re” ose “Ngarkoni”","Drop files here to upload or click to select file":"Hidhni kartela për ngarkim këtu, ose klikoni që të përzgjidhni kartelë","Edit expiration date":"Përpunoni datë skadimi","Edit image":"Përpunoni figurë","Edit name":"Përpunoni emër","Edit password":"Përpunoni fjalëkalim","Edit permission":"Përpunoni leje","Empty trash bin":"Zbraz koshin e hedhurinave","Enter a name to add people or groups as members to this Space.":"Jepni një emër që të shtohen persona ose grupe si anëtarë te kjo Hapësirë.","Error while editing the share.":"Gabim teksa përpunohej pjesa.","Everyone with the link":"Cilido me lidhjen","Expires %{expires}":"Skadon më %{expires}","Expires %{timeToExpiry} (%{expiryDate})":"Skadon më %{timeToExpiry} (%{expiryDate})","Failed to accept the selected share.":["S’u arrit të pranohet pjesa e përzgjedhur.","S’u arrit të pranohen pjesët e përzgjedhura."],"Failed to add share for %{displayName}":"S’u arrit të shtohej pjesë për %{displayName}","Failed to apply expiration date":"S’u arrit të aplikohet datë skadimi","Failed to apply new permissions":"S’u arrit të aplikohen leje të reja",'Failed to change favorite state of "%{file}"':"S’u arrit të ndryshohet gjendja e parapëlqyer e “%{file}”",'Failed to copy "%{name}"':"S’u arrit të kopjohej “%{name}”","Failed to copy %{count} resources":"S’u arrit të kopjohen %{count} burime","Failed to create file":"S’u arrit të krijohet kartelë","Failed to create folder":"S’u arrit të krijohet dosje","Failed to create link":"S’u arrit të krijohej lidhje","Failed to decline the selected share":["S’u arrit të hidhej poshtë pjesa e përzgjedhur","S’u arrit të hidhen poshtë pjesët e përzgjedhura"],'Failed to delete "%{file}"':"S’u arrit të fshihej “%{file}”",'Failed to delete "%{file}" - the file is locked':"S’u arrit të fshihej “%{file}” - kartela është e kyçur","Failed to delete link":"S’u arrit të fshihej lidhje","Failed to deny access":"S’u arrit të mohohej hyrje","Failed to download the selected folder.":["S’u arrit të shkarkohet dosja e përzgjedhur.","S’u arrit të shkarkohen kartelat e përzgjedhura."],"Failed to edit tags":"S’u arrit të përpunohen etiketa","Failed to empty trash bin":{"Error message in case emptying trash bin fails":"S’u arrit të zbrazet koshi i hedhurinave"},"Failed to grant access":"S’u arrit të akordohej hyrje",'Failed to move "%{name}"':"S’u arrit të lëvizej “%{name}”","Failed to move %{count} resources":"S’u arrit të lëvizen %{count} burime","Failed to remove share":"S’u arrit të hiqej pjesë",'Failed to rename "%{file}" to "%{newName}"':"S’u arrit të riemërtohet “%{file}” në “%{newName}”",'Failed to rename "%{file}" to "%{newName}" - the file is locked':"S’u arrit të riemërtohet “%{file}” në “%{newName}” - kartela është e kyçur",'Failed to restore "%{resource}"':"S’u arrit të rikthehet “%{resource}”","Failed to restore %{resourceCount} files":"S’u arritën të rikthehen %{resourceCount} kartela","Failed to set space image":"S’u arrit të caktohet figurë hapësire","Failed to update link":"S’u arrit të përditësohej lidhje","Failed to upload space image":"S’u arrit të ngarkohet figurë hapësire","Favorite files":"Kartela të parapëlqyera",Favorites:"Të parapëlqyera",file:"kartelë","File already exists":"Kartela ekziston tashmë","File name":"Emër kartele","File name cannot be empty":"Emri i kartelës s’mund të jetë i zbrazët",'File name cannot be equal to ".."':"Emri i kartelës s’mund të jetë i njëjtë me “..”",'File name cannot be equal to "."':"Emri i kartelës s’mund të jetë i njëjtë me “.”",'File name cannot contain "/"':"Emri i kartelës s’mund të përmbajë “/”","File name cannot end with whitespace":"Emri i kartelës s’mund të përfundojë me një hapësirë të zbrazët",'File with name "%{name}" already exists.':"Ka tashmë një kartelë me emrin “%{name}”.",Files:"Kartela","Files shared via link":"Kartela të ndara përmes lidhjeje","Files shared with me":"Kartela të ndara me","Files shared with others":"Kartela të ndara me të tjerët","Filter members":"Filtroni anëtarë","Filter tags":"Filtroni etiketa","Filter:":"Filtroji sipas:",folder:"dosje",Folder:"Dosje","Folder already exists":"Ka tashmë një dosje të tillë","Folder name":"Emër dosjeje","Folder name cannot be empty":"Emri i dosjes s’mund të jetë i zbrazët",'Folder name cannot be equal to ".."':"Emri i dosjes s’mund të jetë i njëjtë me “..”",'Folder name cannot be equal to "."':"Emri i dosjes s’mund të jetë i njëjtë me “..”",'Folder name cannot contain "/"':"Emri i dosjes s’mund të përmbajë “/”.",'Folder with name "%{name}" already exists.':"Ka tashmë një dosje me emrin “%{name}”.",Folders:"Dosje","Found %{totalResults}, showing the %{itemCount} best matching results":"U gjetën %{totalResults}, po shfaqen %{itemCount} përfundimet me përkimin më të mirë","FUSE Path":"Shteg FUSE","FUSE path copied":"U kopjua shteg FUSE","Go to »Personal« page":"Kalo te faqja »Personale«","Go to »Spaces Overview«":"Kalo te »Përmbledhje Hapësirash«",Group:"Grup",Guest:"Mysafir","Guest user":"Përdorues mysafir","Here you can add a description for this Space.":"Këtu mund të shtoni një përshkrim për këtë Hapësirë.",Hide:"Fshihe","How to edit indirect links":"Si të përpunohen lidhje jo të drejtpërdrejta","If you share a folder, all of its contents and subfolders will be shared as well.":"Nëse ndani me dikë një dosje, do të ndahen dhe krejt lënda dhe nëndosjet e saj.","Indirect links (%{ count })":"Lidhje të tërthorta (%{ count })","Indirect links are links giving access by a parent folder.":"Lidhjet e tërthorta janë lidhje që lejojnë hyrje te një dosje mëmë.","Indirect links can only be edited in their parent folder. Click on the folder icon below the link to navgate to the parent folder.":"Lidhjet e tërthorta mund të përpunohen vetëm në dosjen e tyre mëmë. Klikoni mbi ikonën dosje nën lidhjen që të kaloni te dosja mëmë.","Invited by":"Ftuar nga","Items per page":"Objekte për faqe","Keep both":"Mbaji të dyja",Largest:"Më të mëdhave","Last modified":"Ndryshuar së fundi më",Link:"Lidhje","Link name":"Emër lidhjeje","Link name cannot exceed 255 characters":"Emri i lidhjes s’mund të tejkalojë 255 shenja","Link was created successfully":"Lidhja u krijua me sukses","Link was deleted successfully":"Lidhja u fshi me sukses","Link was updated successfully":"Lidhja u përditësua me sukses","Loading list of shares":"Po ngarkohet listë e pjesëve","Loading public link…":"Po ngarkohet lidhje publike…","Member capabilities":"Aftësi anëtarësh",Members:"Anëtarë","Members are able to see who has access to this space and access all files in this space. Read or write permissions can be set by assigning a role.":"Anëtarët janë në gjendje të shohin se kush ka hyrje në këtë hapësirë dhe hyrje te krejt kartelat në këtë hapësirë. Lejet për lexim ose shkrim mund të ujdisen duke akorduar një rol.","Members with the Manager role are able to edit all properties and content of a Space, such as adding or removing members, sharing subfolders with non-members, or creating links to share.":"Anëtarë me rolin Përgjegjës janë në gjendje të përpunojnë krejt vetitë dhe lëndën e një Hapësire, bie fjala, të shtojnë ose të heqin anëtarë, të ndajnë nëndosje me jo anëtarë, ose të krijojnë lidhje për ndarje me të tjerë.",Merge:"Përzieji",Modified:"E ndryshuar",Name:"Emër","Navigate to '%{folder}'":"Kalo te '%{folder}'","Navigate to parent folder":"Kaloni te dosja mëmë","Navigate to the parent (%{folderName})":"Kalo te mëma (%{folderName})",New:"E re","New file":"Kartelë e re","New folder":"Dosje e re","New Folder":"Dosje e Re","New space":"Hapësirë e re","New Space":"Hapësirë e Re",Newest:"Më të rejave",no:"jo","No information to display":"S’ka hollësi për shfaqje","No items selected.":"S’u përzgjodh objekt.","No link":"Pa lidhje",'No login required. Everyone with the link can access. If you share this link with people from the list "Invited people", they need to login so that their individual assigned permissions can take effect. If they are not logged-in, the permissions of the link take effect.':"S’lyp bërjen e hyrjes. Cilido me lidhjen mund ta përdorë. Nëse e ndani këtë lidhje me persona prej listës “Persona të ftuar”, atyre u duhet të bëjnë hyrjen, që të mund të kenë veprim lejet individuale dhënë atyre. Nëse s’kanë bërë hyrjen, në fuqi do të jenë lejet e lidhjes.","No resources found":"S’u gjetën përfundime","No results found":"S’u gjetën përfundime","No users or groups found.":"S’u gjetën përdorues ose grupe.","No Versions available for this file":"S’ka versione të gatshëm për këtë kartelë","Not enough quota":"Kuotë e pamjaftueshme",Notification:"Njoftim",Oldest:"Më të vjetrave","Only invited people can access":"Mund të hyjnë vetëm persona të ftuar","Open context menu and show members":"Hap menu konteksti dhe shfaq anëtarë","Open folder":{"Action in the files list row to open a folder":"Hap dosjen"},"Open in %{ appName }":"Hape me %{ appName }","Open in %{app}":"Hape me %{app}","Open sidebar to view details":"Që të shihni hollësitë, hapni anështyllën","Overview of the information about the selected file":"Përmbledhje e hollësive rreth kartelës së përzgjedhur","Overview of the information about the selected files":"Përmbledhje e hollësive rreth kartelave të përzgjedhura",Owner:"Pronar",Password:"Fjalëkalim","Password can't be empty":"Fjalëkalimi s’mund të jetë i zbrazët","Password can't exceed 72 characters":"Fjalëkalimi s’mund të tejkalojë 72 shenja","Password cannot be empty":"Fjalëkalimi s’mund të jetë i zbrazët","Passwords for links are required.":"Fjalëkalimet për lidhjet janë të domosdoshëm.",Paste:{"Action in the files list row to initiate pasting resources":"Ngjite"},"Paste here":"Ngjite këtu","Pending shares":"Pjesë pezull","People you share resources with can not see who else has access.":"Personat me të cilët ndani burime s’mund të shohin se kush tjetër mund t’i përdorë.","People you share resources with will be notified via email or in-app notification.":"Personat me të cilët ndani burime do të njoftohen me email, ose me njoftime nga aplikacioni.","Permanently delete file %{name}":"Fshije përgjithmonë kartelën %{name}","Permanently delete folder %{name}":"Fshije përgjithmonë dosjen %{name}","Permanently delete selected resource?":["Të fshihet përgjithmonë burimi i përzgjedhur?","Të fshihen përgjithmonë %{amount} burimet e përzgjedhur?"],"Person was added":"Personi u shtua",Personal:"Personale","Private link":"Lidhje private","Private link copied":"Lidhja private u kopjua","Public file upload":"Ngarkim kartele publike","Public link":"Lidhje publike","Reload public link":"Ringarko lidhjen publike","Remote user":"Përdorues i largët",Remove:"Hiqe","Remove expiration date":"Hiqi datë skadimi","Remove from favorites":"Hiqe prej të parapëlqyerve","Remove member":"Hiqe anëtarin","Remove password":"Hiqe fjalëkalimin","Remove share":"Hiqe pjesën",Rename:"Riemërtoje","Rename file %{name}":"Riemërtoni kartelën %{name}","Rename folder %{name}":"Riemërtoni dosjen %{name}",Replace:"Zëvendësoje","Resource not found":"Burimi s’u gjet",Restore:"Riktheje",Restrictions:"Kufizime",Save:"Ruaje",Search:"Kërko","Search for files":"Kërkoni për kartela","Search for service or secondary Account":"Kërkoni për shërbim, ose Llogari dytësore","Search in file content":"Kërkon në lëndën e kartelës","Search results":"Përfundime kërkimi",'Search results for "%{searchTerm}"':"Përfundime kërkimi për “%{searchTerm}”","See all versions":"Shihini krejt versionet","Select a file or folder to view details.":"Që të shihni hollësitë, përzgjidhni një kartelë ose dosje.","Select all resources":"Përzgjidhni krejt burimet","Select an accepted share to show details.":"Që t’i shihni hollësitë, përzgjidhni një ndarje të pranuar.","Select file":"Përzgjidhni kartelë","Select folder":"Përzgjidhni dosje","Select permission":"Përzgjidhni leje","Select role for the invitation":"Përzgjidhni rol për ftesën","Select space":"Përzgjidhni hapësirë",Set:"Caktoje","Set as space image":"Caktoni një figurë hapësire","Set expiration date":"Caktoni datë skadimi","Set password":"Caktoni fjalëkalim",Share:"Pjesë","Share expires %{ expiryDateRelative } (%{ expiryDate })":"Ndarja skadon më %{ expiryDateRelative } (%{ expiryDate })","Share receiver name: %{ displayName }":"Emër marrësi pjese: %{ displayName }","Share receiver name: %{ displayName } (%{ additionalInfo })":"Emër marrësi pjese: %{ displayName } (%{ additionalInfo })","Share receivers":"Marrës pjesësh","Share successfully changed":"Pjesa u ndryshua me sukses","Share via link":"Ndajeni me të tjerë përmes një lidhjeje","Share via public link":"Ndajeni me të tjerë përmes një lidhjeje publike","Share was added successfully":"Pjesa u shtua me sukses","Share was removed successfully":"Pjesa u hoq me sukses","Share with people":"Ndajeni me të tjerë","Shared by":"Ndarë me të tjerët nga","Shared on":"Ndarë më","Shared via":"Ndarë me të tjerë përmes","Shared via link":"Ndarë përmes lidhjeje","Shared with":"Ndarë me","Shared with me":"Ndarë me","Shared with others":"Ndarë me të tjerë","Shared with you":"Ndarë me ju",Shares:"Pjesë","Shares pages navigation":"Lëvizje në faqe pjesësh","Shares, versions and tags will not be copied.":"Pjesët, versionet dhe etiketat s’do të kopjohen.",Show:"Shfaqe","Show all":"Shfaqi krejt","Show context menu":"Shfaq menu konteksti","Show file extensions":"Shfaq zgjatime kartelash","Show hidden files":"Shfaq kartela të fshehura","Show invited people":"Shfaq persona të ftuar","Show less":"Shfaq më pak","Show links":"Shfaq lidhje","Show members":"Shfaqi anëtarët","Show more":"Shfaq më shumë","Showing up to %{searchLimit} results":"Po shfaqen deri në %{searchLimit} përfundime",Size:"Madhësi",Skip:"Anashkaloje",Smallest:"Më të voglave","Sort by: ":"Renditi sipas","Space has no deleted files":"Hapësira s’ka kartela të fshira","Space image was set successfully":"Figura e hapësirë u caktua me sukses","Space image was uploaded successfully":"Figura e hapësirë u ngarkua me sukses","Space manager capabilities":"Aftësi përgjegjësi hapësire","Space members":"Anëtarë hapësire","Space name":"Emër hapësire","Space was created successfully":"Hapësira u krijua me sukses",Spaces:"Hapësira",Status:"Gjendje",Subfolders:"Nëndosje","Switch to condensed table view":"Kalo te pamje e ngjeshur e tabelës","Switch to default table view":"Kalo te pamje parazgjedhje e tabelës","Switch to tiles view":"Kalo te pamja me kuadrate","Tag must not consist of blanks only":"Etiketa s’duhet të jetë vetëm hapësira të zbrazëta",Tags:"Etiketa","The “via folder” is shown next to a share, if access has already been given via a parent folder. Click on the “via folder” to edit the share on its parent folder.":"Në krah të një pjesë shfaqe “përmes dosjeje”, nëse është dhënë tashmë hyrje përmes një dosjeje mëmë. Klikoni mbi “përmes dosjeje”, që të përpunoni pjesën te dosja e vet mëmë.","The direct link has been copied to your clipboard.":"Lidhja e drejtpërdrejtë u kopjua në të papastrën tuaj.","The file type is unsupported":"Lloji i kartelës nuk mbulohet","The FUSE path has been copied to your clipboard.":"Shtegu FUSE u kopjua në të papastrën tuaj.",'The link "%{linkName}" has been copied to your clipboard.':"Lidhja “%{linkName}” u kopjua në të papastrën tuaj.","The link has been copied to your clipboard.":"Lidhja u kopjua te e papastra juaj.","The marked elements will be copied.":"Elementët me shenjë do të kopjohen.",'The name "%{name}" is already taken':"Emri “%{name}” është i zënë tashmë","The name cannot be empty":"Emri s’mund të jetë i zbrazët",'The name cannot be equal to ".."':"Emri s’mund të jetë i njëjtë me “..”",'The name cannot be equal to "."':"Emri s’mund të jetë i njëjtë me “.”",'The name cannot contain "/"':"Emri s’mund të përmbajë “/”","The name cannot end with whitespace":"Emri s’mund të përfundojë me një hapësirë të zbrazët","The private link has been copied to your clipboard.":"The private link has been copied to your clipboard.","The selected share was accepted successfully":["Pjesa e përzgjedhur u pranua me sukses","Pjesët e përzgjedhura u pranuan me sukses"],"The selected share was declined successfully":["Pjesa e përzgjedhur u hodh poshtë me sukses","Pjesët e përzgjedhura u hodhën poshtë me sukses"],"The selection exceeds the allowed archive size (max. %{maxSize})":"Përzgjedhja tejkalon madhësinë e lejuar të arkivit (maks. %{maxSize})","The Windows path has been copied to your clipboard.":"Shtegu Windows u kopjua në të papastrën tuaj.","There are no resources marked as favorite":"S’ka burime me shenjë si të parapëlqyer","There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files":"S’ka kuotë të mjaftueshme te %{spaceName}, ju duhen edhe %{missingSpace} që të ngarkoni këto kartela","This %{ resourceType } is owned by %{ ownerName }":"Ky %{ resourceType } është në pronësi të %{ ownerName }","This %{ resourceType } is shared via %{ linkCount } link":["Ky %{ resourceType } është ndarë përmes %{ linkCount } lidhjeje","Ky %{ resourceType } është ndarë përmes %{ linkCount } lidhjesh"],"This %{ resourceType } is shared via %{ shareCount } invite":["Ky %{ resourceType } është ndarë përmes %{ shareCount } ftese","Ky %{ resourceType } është ndarë përmes %{ shareCount } ftesash"],"This file has been shared.":"Kjo kartelë është ndarë me të tjerë.","This folder contains %{ amount } item.":["Kjo dosje përmban %{ amount } objekt.","Kjo dosje përmban %{ amount } objekte."],"This folder has been shared.":"Kjo dosje është ndarë me të tjerë.","This folder has no content.":"Kjo dosje s’ka lëndë.","This item is directly shared via links.":"Ky objekt ndahet drejtpërsëdrejti, përmes lidhjesh.","This item is directly shared with others.":"Ky objekt ndahet me të tjerët drejtpërsëdrejti.","This item is shared via links through one of the parent folders.":"Ky objekt ndahet përmes lidhjesh që nga një nga dosjet mëmë.","This item is shared with others through one of the parent folders.":"Ky objekt ndahet me të tjerë përmes njërës nga dosjet mëmë.","This link is password-protected":"Kjo lidhje është e mbrojtur me fjalëkalim","Tile size":"Madhësi kuadrati",'To search for service or secondary accounts prefix the username with "a:" (like "a:doe") and for guest accounts prefix the username with "l:" (like "l:doe").':"Që të kërkohet për një shërbim ose llogari dytësore, paraprijeni emrin e përdoruesit me “a:” (pra, “a:gimi”) dhe për llogari mysafire paraprijeni emrin e përdoruesit me “l:” (pra, “l:gimi”).","Trash overview":"Përmbledhje hedhurinash",Type:"Lloj",Upload:"Ngarkoni","Upload files or folders":"Ngarkoni kartela ose dosje","Use the input field to search for users and groups. Select them to share the item.":"Përdorni fusha dhënieje që të kërkoni për përdorues dhe grupe. Që të ndani me të tjerë objektin, përzgjidheni.",User:"Përdorues",Versions:"Versione",via:"përmes","We went looking everywhere, but were unable to find the selected resource.":"Kërkuam ngado, por s’qemë në gjendje të gjejmë burimin e përzgjedhur.","What are indirect links?":"Ç’janë lidhjet e tërthorta?","Windows Path":"Shteg Windows","Windows path copied":"Shtegu Windows u kopjua","You can't paste the selected file at this location because you can't paste an item into itself.":["S’mund të ngjitni në këtë vend kartelën e përzgjedhur, ngaqë s’mund të ngjitni një objekt te vetvetja.","S’mund të ngjitni në këtë vend kartelat e përzgjedhura, ngaqë s’mund të ngjitni një objekt te vetvetja."],"You do not have permission to create links":"S’keni leje të krijoni lidhje","You don't have access to any spaces":"S’keni hyrje te ndonjë hapësirë","You don't have access to any trashbins":"S’keni hyrje te ndonjë kosh hedhurinash","You don't have permission to share this file.":"S’keni leje të ndani këtë kartelë me të tjerë.","You don't have permission to share this folder.":"S’keni leje të ndani këtë dosje me të tjerë.","You have no accepted shares.":"S’keni ndarje të pranuara.","You have no declined shares.":"S’keni ndarje të papranuara.","You have no deleted files":"S’keni kartela të fshira","You have no permission to create new files!":"S’keni leje të krijoni kartela të reja!","You have no permission to paste files here!":"S’keni leje të ngjitni kartela këtu!","You have no permission to upload!":"S’keni leje të ngarkoni!","You have not shared any resource via link.":"S’keni ndarë ndonjë burim përmes lidhjeje.","You have not shared any resources with other people.":"S’keni ndarë ndonjë burim me persona të tjerë.","Z-A":"Z-A"},Wd={'"%{file}" was deleted successfully':'"%{file}" başarıyla silindi','"%{fileName}" was created successfully':'"%{fileName}" başarıyla oluşturuldu','"%{folderName}" was created successfully':'"%{folderName}" başarıyla oluşturuldu',"“via folder”":'"klasör aracılığıyla"',"(me)":"(ben)","%{ amount } item selected. Actions are available above the table.":["%{ amount } öge seçildi. Eylemler tablonun üzerinde mevcuttur.","%{ amount } öge seçildi. Eylemler tablonun üzerinde mevcuttur."],"%{ filesCount } file":["%{ filesCount } dosya","%{ filesCount } dosya"],"%{ foldersCount } folder":["%{ foldersCount } klasör","%{ foldersCount } klasör"],"%{ itemCount } item selected":["%{ itemCount } öge seçildi","%{ itemCount } öge seçildi"],"%{ itemsCount } item in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } öge toplamda (%{ filesStr}, %{foldersStr})","%{ itemsCount } öge toplamda (%{ filesStr}, %{foldersStr})"],"%{ itemsCount } item with %{ itemSize } in total (%{ filesStr}, %{foldersStr})":["%{ itemsCount } öge ile %{ itemSize } toplamda (%{ filesStr}, %{foldersStr})","%{ itemsCount } öge ile %{ itemSize } toplamda (%{ filesStr}, %{foldersStr})"],"%{collaboratorName} (me)":"%{collaboratorName} (ben)","%{count} item was copied successfully":["%{count} öge başarıyla kopyalandı","%{count} öge başarıyla kopyalandı"],"%{count} item was moved successfully":["%{count} öge başarıyla taşındı","%{count} öge başarıyla taşındı"],"%{count} member":["%{count} üye","%{count} üye"],"%{name} already exists":"%{name} zaten mevcut","%{owner} shared this folder with you for uploading":"%{owner} yüklemeden önce bu klasörü sizinle paylaştı","%{resource} was restored successfully":"%{resource} başarıyla yenilendi","%{resourceCount} files restored successfully":"%{resourceCount} dosya başarıyla yenilendi","⌘ + C":{"Keyboard shortcut for macOS for copying files":"⌘ + C"},"⌘ + V":{"Keyboard shortcut for macOS for pasting files":"⌘ + V"},"⌘ + X":{"Keyboard shortcut for macOS for cutting files":"⌘ + X"},Accept:"Onayla","Accept share":["Paylaşımı onayla","Paylaşımları onayla"],"Accepted shares":"Onaylanan paylaşımlar","Access denied":"Erişim reddedildi","Access details":"Erişim detayları","Access expires":"Erişim sona eriyor",'Account and login is required. Only people from the list "Invited people" can access.':'Hesap ve giriş gereklidir. Yalnızca "Davet edilen kişiler" listesindeki kişiler erişebilir.',Actions:"Aksiyonlar",Add:"Ekle","Add expiration date":"Son kullanma tarihi ekle","Add link":"Bağlantı ekle","Add members to this Space":"Bu Alana üyeler ekle","Add or edit tags":"Etiketler ekle veya düzenle","Add password":"Parola ekle","Add people":"Kişi ekle","Add to favorites":"Favorilere ekle","Additional info":"Ek bilgiler","All Actions":"Tüm Eylemler","All deleted files were removed":"Tüm silinen dosyalar kaldırıldı","All files":"Tüm dosyalar","All files and folders":"Tüm dosyalar ve klasörler","An error occurred while loading the public link":"Herkese açık bağlantı yüklenirken bir hata oluştu",Apply:"Uygula","Apply to all %{count} conflicts":"Tüm %{count} çakışmaya uygula","Are you sure you want to delete all selected resources?":"Seçilen tüm kaynakları silmek istediğinizden emin misiniz?","Are you sure you want to delete all selected resources? All their content will be permanently removed. This action cannot be undone.":"Seçilen tüm kaynakları silmek istediğinizden emin misiniz? Tüm içerikleri kalıcı olarak kaldırılacaktır. Bu işlem geri alınamaz.","Are you sure you want to delete this file?":"Bu dosyayı silmek istediğinizden emin misiniz?","Are you sure you want to delete this folder?":"Bu klasörü silmek istediğinizden emin misiniz?","Are you sure you want to delete this link? Recreating the same link again is not possible.":"Bu bağlantıyı silmek istediğinizden emin misiniz? Aynı bağlantıyı yeniden oluşturmak mümkün değildir.","Are you sure you want to remove this share?":"Bu paylaşımı kaldırmak istediğinizden emin misiniz?",Cancel:"İptal","Choose how access is granted":"Erişimin nasıl verileceğini seçin","Clear selection":"Seçimi temizle","Close filter":"Filtreyi kapat","Close sidebar to hide details":"Ayrıntıları gizlemek için kenar çubuğunu kapatın","Context menu of the share":"Paylaşımın içerik menüsü",Copied:"Kopyalandı","Copied to clipboard!":"Panoya kopyalandı!",Copy:{"Action in the files list row to initiate copying resources":"Kopyala","":"Kopyala"},"Copy direct link":"Direkt bağlantıyı kopyala","Copy here":"Buraya kopyala","Copy here?":"Buraya kopyalansın mı?","Copy link to clipboard":"Bağlantıyı panoya kopyala","Copy private link to clipboard":"Özel bağlantıyı panoya kopyala",Create:"Yarat","Create a new file":"Yeni bir dosya oluştur","Create a new folder":"Yeni bir klasör oluştur","Create a new space":"Yeni bir alan oluştur","Create link":"Bağlantı oluştur","Create new files or folders":"Yeni dosyalar veya klasörler oluştur","Creating share":"Paylaşım oluşturuluyor","Creating space failed…":"Alan oluşturma başarısız...","Ctrl + C":{"Keyboard shortcut for non-macOS systems for copying files":"Ctrl + C"},"Ctrl + V":{"Keyboard shortcut for non-macOS systems for pasting files":"Ctrl + V"},"Ctrl + X":{"Keyboard shortcut for non-macOS systems for cutting files":"Ctrl + X"},"Custom permissions":"Özel izinler",Cut:{"Action in the files list row to initiate cutting resources":"Kes"},"Cut to clipboard!":"Panodan kes!",Decline:"Reddet","Decline share":["Paylaşımı reddet","Paylaşımları reddet"],"Declined shares":"Reddedilen paylaşımlar",Delete:"Sil","Delete file %{name}":"%{name} dosyasını sil","Delete folder %{name}":"%{name} klasörünü sil","Delete link":"Bağlantıyı sil","Delete selected resource?":["Seçilen kaynağı sil?","Seçilen %{amount} kaynağı sil?"],Deleted:"Silindi","Deleted files":"Silinen dosyalar","Deny access":"Erişimi reddet","Deselect %{name}":"%{name}'yi seçme",Details:"Detaylar","Direct link":"Direkt bağlantı","Direct link copied":"Direkt bağlantı kopyalandı","Disabled spaces cannot be entered":"Devre dışı bırakılan alanlar girilemez","Display customization options of the files list":"Dosya listesinin özelleştirme seçeneklerini görüntüleyin",Download:"İndir",'Drag files and folders here or use the "New" or "Upload" buttons to add files':'Dosyaları ve klasörleri buraya sürükleyin veya dosya eklemek için "Yeni" veya "Yükle" düğmelerini kullanın',"Drop files here to upload or click to select file":"Dosyaları yüklemek için buraya bırakın veya dosya seçmek için tıklayın","Edit expiration date":"Son kullanma tarihini düzenle","Edit image":"Resmi düzenle","Edit name":"Adı düzenle","Edit password":"Parolayı düzenle","Empty trash bin":"Çöp kutusunu boşalt","Enter a name to add people or groups as members to this Space.":"Kişileri veya grupları bu Alana üye olarak eklemek için bir ad girin.","Error while editing the share.":"Paylaşım düzenlenirken hata.","Everyone with the link":"Bağlantıya sahip olan herkes","Expires %{expires}":"%{expires} sona eriyor","Failed to accept the selected share.":["Seçilen paylaşım kabul edilemedi.","Seçilen paylaşımlar kabul edilemedi."],"Failed to apply expiration date":"Son kullanma tarihi uygulanamadı","Failed to apply new permissions":"Yeni izinler uygulanamadı",'Failed to change favorite state of "%{file}"':'"%{file}" favori durumu değiştirilemedi','Failed to copy "%{name}"':'"%{name}" kopyalanamadı',"Failed to copy %{count} resources":"%{count} kaynak kopyalanamadı","Failed to create file":"Dosya oluşturma başarısız","Failed to create folder":"Klasör oluşturma başarısız","Failed to create link":"Bağlantı oluşturma başarısız","Failed to decline the selected share":["Seçilen paylaşım reddedilemedi","Seçilen paylaşımlar reddedilemedi"],'Failed to delete "%{file}"':'"%{file}" silinemedi','Failed to delete "%{file}" - the file is locked':'"%{file}" silinemedi - dosya kilitli',"Failed to delete link":"Bağlantı silinemedi","Failed to download the selected folder.":["Seçilen klasör indirilemedi.","Seçilen klasörler indirilemedi."],'Failed to move "%{name}"':'"%{name}" taşınamadı',"Failed to move %{count} resources":"%{count} kaynak taşınamadı","Failed to remove share":"Paylaşım kaldırılamadı",'Failed to rename "%{file}" to "%{newName}"':'"%{file}", "%{newName}" olarak yeniden adlandırılamadı','Failed to rename "%{file}" to "%{newName}" - the file is locked':'"%{file}", "%{newName}" olarak yeniden adlandırılamadı - dosya kilitli','Failed to restore "%{resource}"':'"%{resource}" geri yüklenemedi',"Failed to restore %{resourceCount} files":"%{resourceCount} dosya geri yüklenemedi","Failed to set space image":"Alan resmi ayarlanamadı","Failed to update link":"Bağlantı güncellenemedi","Failed to upload space image":"Alan resmi yüklenemedi","Favorite files":"Favori dosyalar",Favorites:"Favoriler",file:"dosya","File already exists":"Dosya zaten mevcut","File name":"Dosya adı","File name cannot be empty":"Dosya adı boş olamaz",'File name cannot be equal to ".."':'Dosya adı ".." olamaz','File name cannot be equal to "."':'Dosya adı "." olamaz','File name cannot contain "/"':'Dosya adı "/" içeremez',"File name cannot end with whitespace":"Dosya adı boşlukla bitemez",Files:"Dosyalar","Files shared via link":"Bağlantı aracılığıyla dosyalar paylaşıldı","Files shared with me":"Benimle paylaşılan dosyalar","Files shared with others":"Diğerleri ile paylaşılan dosyalar","Filter members":"Filtre üyeleri",folder:"klasör",Folder:"Klasör","Folder name":"Klasör adı","Folder name cannot be empty":"Klasör adı boş olamaz",'Folder name cannot be equal to ".."':'Klasör adı ".." olamaz','Folder name cannot be equal to "."':'Klasör adı "." olamaz','Folder name cannot contain "/"':'Klasör adı "/" içeremez',Folders:"Klasörler","Found %{totalResults}, showing the %{itemCount} best matching results":"%{totalResults} sonuç bulundu, en iyi eşleşen %{itemCount} tanesi gösteriliyor","Go to »Personal« page":"»Kişisel« sayfasına git","Go to »Spaces Overview«":"»Alanlara Genel Bakış«'a git",Group:"Grup",Guest:"Misafir","Guest user":"Misafir kullanıcı","Here you can add a description for this Space.":"Buraya bu Alan için bir açıklama ekleyebilirsiniz.",Hide:"Gizle","How to edit indirect links":"Dolaylı bağlantılar nasıl düzenlenir","If you share a folder, all of its contents and subfolders will be shared as well.":"Bir klasörü paylaşırsanız, tüm içeriği ve alt klasörleri de paylaşılacaktır.",Incognito:"Gizli","Indirect links (%{ count })":"Dolaylı bağlantılar (%{ count })","Indirect links are links giving access by a parent folder.":"Dolaylı bağlantılar, bir üst klasör tarafından erişim sağlayan bağlantılardır.","Indirect links can only be edited in their parent folder. Click on the folder icon below the link to navgate to the parent folder.":"Dolaylı bağlantılar yalnızca üst klasörlerinde düzenlenebilir. Ana klasöre gitmek için bağlantının altındaki klasör simgesine tıklayın.","Invited by":"Davet eden:","Items per page":"Sayfa başına öge","Keep both":"İkisini de tut","Last modified":"Son değiştirme",Link:"Bağlantı","Link name":"Bağlantı adı","Link was created successfully":"Bağlantı başarıyla oluşturuldu","Link was deleted successfully":"Bağlantı başarıyla silindi","Link was updated successfully":"Bağlantı başarıyla güncellendi","Loading list of shares":"Paylaşım listesi yükleniyor","Loading public link…":"Herkese açık bağlantı yükleniyor...",Members:"Üyeler",Merge:"Birleştir",Modified:"Değiştirildi",Name:"İsim","Navigate to '%{folder}'":"'%{folder}''e yönlendir","Navigate to parent folder":"Ana klasöre yönlendir","Navigate to the parent (%{folderName})":"(%{folderName}) üstte yönlendir",New:"Yeni","New file":"Yeni dosya","New folder":"Yeni klasör","New Folder":"Yeni Klasör","New space":"Yeni alan","New Space":"Yeni Alan",no:"yok","No information to display":"Gösterilecek bilgi yok","No items selected.":"Hiçbir öge seçilmedi.","No link":"Bağlantı yok",'No login required. Everyone with the link can access. If you share this link with people from the list "Invited people", they need to login so that their individual assigned permissions can take effect. If they are not logged-in, the permissions of the link take effect.':'Giriş gerekmez. Bağlantıya sahip olan herkes erişebilir. Bu bağlantıyı "Davet edilen kişiler" listesindeki kişilerle paylaşırsanız, kendilerine atanan bireysel izinlerin geçerli olabilmesi için giriş yapmaları gerekir. Oturum açmamışlarsa, bağlantının izinleri geçerli olur.',"No resources found":"Kaynaklar bulunamadı","No results found":"Sonuç bulunamadı","No users or groups found.":"Kullanıcılar veya gruplar bulunamadı.","No Versions available for this file":"Bu dosya için sürüm yok","Not enough quota":"Yeterli kota yok",Notification:"Bildirim","Only invited people can access":"Yalnızca davet edilen kişiler erişebilir","Open context menu and show members":"İçerik menüsünü aç ve üyeleri göster","Open folder":{"Action in the files list row to open a folder":"Klasörü aç"},"Open in %{ appName }":"%{ appName }'da Aç","Open in %{app}":"%{app}'da aç","Open sidebar to view details":"Detayları görüntülemek için kenar çubuğunu aç","Overview of the information about the selected file":"Seçilen dosya hakkındaki bilgilere genel bakış","Overview of the information about the selected files":"Seçilen klasör hakkındaki bilgilere genel bakış",Owner:"Sahip",Password:"Parola","Password can't be empty":"Parola boş olamaz","Password cannot be empty":"Parola boş olamaz","Passwords for links are required.":"Bağlantılar için parola gerekli.",Paste:{"Action in the files list row to initiate pasting resources":"Yapıştır"},"Paste here":"Buraya yapıştır","Pending shares":"Bekleyen paylaşımlar","Permanently delete file %{name}":"%{name} dosyasını kalıcı olarak sil","Permanently delete folder %{name}":"%{name} klasörünü kalıcı olarak sil","Permanently delete selected resource?":["Seçilen kaynak kalıcı olarak silinsin mi?","Seçilen %{amount} kaynak kalıcı olarak silinsin mi?"],"Person was added":"Kişi eklendi",Personal:"Kişisel","Private link":"Gizli bağlantı","Private link copied":"Özel bağlantı kopyalandı","Public file upload":"Herkese açık dosya yüklendi","Public link":"Herkese açık bağlantı","Reload public link":"Herkese açık bağlantıyı yeniden yükle","Remote user":"Uzaktan kullanıcı",Remove:"Kaldır","Remove expiration date":"Son kullanma tarihini kaldır","Remove from favorites":"Favorilerden kaldır","Remove password":"Parolayı kaldır","Remove share":"Paylaşımı kaldır",Rename:"Yeniden adlandır","Rename file %{name}":"%{name} dosyasını yeniden adlandır","Rename folder %{name}":"%{name} klasörünü yeniden adlandır",Replace:"Yer değiştir","Resource not found":"Kaynak bulunamadı",Restore:"Geri yükle",Save:"Kaydet",Search:"Ara","Search for service or secondary Account":"Servis veya ikincil Hesap ara","Search results":"Arama sonuçları","See all versions":"Tüm sürümleri gör","Select a file or folder to view details.":"Ayrıntıları görüntülemek için bir dosya veya klasör seçin.","Select all resources":"Tüm kaynakları seç","Select file":"Dosyayı seç","Select folder":"Klasörü seç","Select role for the invitation":"Davet için rol seç",Set:"Ayarla","Set as space image":"Alan resmi olarak ayarla","Set expiration date":"Son kullanma tarihini ayarla","Set password":"Parolayı ayarla",Share:"Paylaş","Share expires %{ expiryDateRelative } (%{ expiryDate })":"%{ expiryDateRelative } (%{ expiryDate }) tarihinde paylaşım süresi doluyor","Share receiver name: %{ displayName }":"Alıcı adını paylaş: %{ displayName }","Share receiver name: %{ displayName } (%{ additionalInfo })":"Alıcı adını paylaş: %{ displayName } (%{ additionalInfo })","Share receivers":"Alıcıları paylaş","Share via link":"Bağlantı aracılığıyla paylaş","Share via public link":"Herkese açık bağlantı aracılığıyla paylaş","Share was removed successfully":"Paylaşım başarıyla kaldırıldı","Share with people":"Kişilerle paylaş","Shared by":"Paylaşıldı","Shared on":"Şurada paylaşıldı:","Shared via":"Paylaşıldı:","Shared via link":"Bağlantı aracılığıyla paylaşıldı","Shared with":"Paylaşlaşılmış","Shared with me":"Benimle paylaşıldı","Shared with others":"Diğerleri ile paylaşılmış",Shares:"Paylaşımlar","Shares pages navigation":"Paylaşımlar sayfa yönlendirmesi",Show:"Göster","Show all":"Tümünü göster","Show context menu":"İçerik menüsünü göster","Show file extensions":"Dosya uzantılarını göster","Show hidden files":"Gizli dosyaları göster","Show invited people":"Davet edilen kişileri göster","Show less":"Daha az göster","Show links":"Bağlantıları göster","Show members":"Üyeleri göster","Show more":"Daha fazla göster","Showing up to %{searchLimit} results":"%{searchLimit} adede kadar sonuç gösteriliyor",Size:"Boyut",Skip:"Atla","Space has no deleted files":"Alanda silinmiş dosya yok","Space image was set successfully":"Alan resmi başarıyla ayarlandı","Space image was uploaded successfully":"Alan resmi başarıyla yüklendi","Space members":"Alan üyeleri","Space name":"Alan adı",Spaces:"Alanlar",Status:"Durum",Subfolders:"Alt klasörler","The “via folder” is shown next to a share, if access has already been given via a parent folder. Click on the “via folder” to edit the share on its parent folder.":'Erişim zaten bir üst klasör aracılığıyla verilmişse, bir paylaşımın yanında "klasör aracılığıyla" gösterilir. Paylaşımı üst klasöründe düzenlemek için “klasör aracılığıyla” tıklayın.',"The direct link has been copied to your clipboard.":"Direkt bağlantı panonuza kopyalandı.","The file type is unsupported":"Bu dosya türü desteklenmiyor",'The link "%{linkName}" has been copied to your clipboard.':'"%{linkName}" bağlantısı panonuza kopyalandı.','The name "%{name}" is already taken':'"%{name}" ismi zaten alındı',"The name cannot be empty":"İsim boş olamaz",'The name cannot be equal to ".."':'İsim ".." olamaz','The name cannot be equal to "."':'İsim "." olamaz','The name cannot contain "/"':'İsim "/" içeremez',"The name cannot end with whitespace":"İsim boşlukla bitemez","The private link has been copied to your clipboard.":"Özel bağlantı panonuza kopyalandı","The selected share was accepted successfully":["Seçilen paylaşım başarıyla kabul edildi","Seçilen paylaşımlar başarıyla kabul edildi"],"The selected share was declined successfully":["Seçilen paylaşım başarıyla reddedildi","Seçilen paylaşımlar başarıyla reddedildi"],"There are no resources marked as favorite":"Favori olarak işaretlenmiş kaynak yok","There is not enough quota on %{spaceName}, you need additional %{missingSpace} to upload these files":"%{spaceName} için yeterli kota yok, bu dosyaları yüklemek için ek %{missingSpace}'e ihtiyacınız var","This %{ resourceType } is owned by %{ ownerName }":"Bu %{ resourceType }, %{ OwnerName }'a aittir","This %{ resourceType } is shared via %{ linkCount } link":["Bu %{ resourceType }, %{ linkCount } bağlantısı aracılığıyla paylaşılıyor","Bu %{ resourceType }, %{ linkCount } bağlantıları aracılığıyla paylaşılıyor"],"This %{ resourceType } is shared via %{ shareCount } invite":["Bu %{ resourceType }, %{ shareCount } davetiyle paylaşılıyor","Bu %{ resourceType }, %{ shareCount } davetiyle paylaşılıyor"],"This file has been shared.":"Bu dosya paylaşıldı.","This folder contains %{ amount } item.":["Bu klasör %{ amount } öge içeriyor.","Bu klasör %{ amount } öge içeriyor."],"This folder has been shared.":"Bu klasör paylaşıldı.","This folder has no content.":"Bu klasörde içerik yok.","This item is directly shared via links.":"Bu öge doğrudan bağlantılar aracılığıyla paylaşılır.","This item is directly shared with others.":"Bu öge doğrudan başkalarıyla paylaşılır.","This item is shared via links through one of the parent folders.":"Bu öge, üst klasörlerden biri tarafından bağlantılar aracılığıyla paylaşılır.","This item is shared with others through one of the parent folders.":"Bu öge, üst klasörlerden biri aracılığıyla başkalarıyla paylaşılır.","This link is password-protected":"Bu bağlantı parola korumalı",'To search for service or secondary accounts prefix the username with "a:" (like "a:doe") and for guest accounts prefix the username with "l:" (like "l:doe").':'Hizmet veya ikincil hesapları aramak için kullanıcı adının önüne "a:" ("a:doe" gibi) ve misafir hesapları için kullanıcı adının önüne "l:" ("l:doe" gibi) gelir.',Type:"Tür",Upload:"Yükle","Upload files or folders":"Dosyaları veya klasörleri yükle",User:"Kullanıcı",Versions:"Sürümler",via:"aracılığıyla","We went looking everywhere, but were unable to find the selected resource.":"Her yere baktık, ancak seçilen kaynağı bulamadık.","What are indirect links?":"Dolaylı bağlantılar nedir?","You can't paste the selected file at this location because you can't paste an item into itself.":["Bir ögeyi kendi içine yapıştıramayacağınız için seçili dosyaları bu konuma yapıştıramazsınız.","Bir ögeyi kendi içine yapıştıramayacağınız için seçili dosyaları bu konuma yapıştıramazsınız."],"You don't have access to any spaces":"Hiçbir alana erişiminiz yok","You don't have permission to share this file.":"Bu dosyayı paylaşmak için izniniz yok.","You don't have permission to share this folder.":"Bu klasörü paylaşmak için izniniz yok.","You have no deleted files":"Silinen dosyanız yok","You have no permission to create new files!":"Yeni dosyalar oluşturmak için izniniz yok!","You have no permission to upload!":"Yükleme için izniniz yok!"},Gd={ar:Pd,bg:xd,cs:jd,de:Nd,es:Md,fr:zd,gl:Od,he:Bd,it:Ud,pl:qd,ru:Vd,sk:Hd,sq:Kd,tr:Wd},Yd={currentFolder:null,files:[],filesSearched:null,selectedIds:[],latestSelectedId:null,clipboardSpace:null,clipboardResources:[],clipboardAction:null,versions:[],ancestorMetaData:{},sharesLoading:!1,incomingShares:[],outgoingShares:[],areHiddenFilesShown:!0,areFileExtensionsShown:!0};function vi(e="",t=!1){const s=Ge(e,{leadingSlash:!0});if(s==="/")return[];const i=[],n=s.split("/");for(t&&i.push(s),n.pop();n.length>0;){if(!n.join("/")){n.pop();continue}i.push(n.join("/")),n.pop()}return i}const ti=async(e,t=!1)=>{const s=e.size||qe.Avatar;if(t)return Qd({...e,size:s});const i=[e.server,"remote.php/dav/avatars/",e.username,`/${s}.png`].join(""),{status:n,statusText:o}=await e.clientService.httpAuthenticated.head(i);if(n!==200)throw new Error(o);const{owncloudSdk:a}=e.clientService;return!a||typeof a.signUrl!="function"?i:a.signUrl(i)},Qd=async e=>{const t=ai.avatarUrl.get(e.username);if(t&&t.size===e.size)return t.src;try{const s=await ti(e);return ai.avatarUrl.set(e.username,{src:s,size:e.size},0).src}catch{}},qt=e=>ss(e,"capabilities.files_sharing.resharing",!0)&&ss(e,"capabilities.files_sharing.resharing_default",!0),Zd={loadFiles(e,{currentFolder:t,files:s}){t&&(t=It(t)),s=s.map(It),e.commit("LOAD_FILES",{currentFolder:t,files:s})},toggleFileSelection(e,t){e.state.selectedIds.includes(t.id)?e.commit("REMOVE_FILE_SELECTION",t):e.commit("ADD_FILE_SELECTION",t)},copySelectedFiles(e,t){const{$gettext:s}=t;e.commit("CLIPBOARD_SELECTED",t),e.commit("SET_CLIPBOARD_ACTION",bt.Copy),e.dispatch("showMessage",{title:s("Copied to clipboard!"),status:"success"},{root:!0})},cutSelectedFiles(e,t){const{$gettext:s}=t;e.commit("CLIPBOARD_SELECTED",t),e.commit("SET_CLIPBOARD_ACTION",bt.Cut),e.dispatch("showMessage",{title:s("Cut to clipboard!"),status:"success"},{root:!0})},clearClipboardFiles(e){e.commit("CLEAR_CLIPBOARD")},async pasteSelectedFiles(e,{targetSpace:t,clientService:s,loadingService:i,createModal:n,hideModal:o,showMessage:a,$gettext:c,$gettextInterpolate:l,$ngettext:u}){const p=new pa(e.state.clipboardSpace,e.state.clipboardResources,t,e.state.currentFolder,s,i,n,o,a,c,u,l);let m=[];e.state.clipboardAction===bt.Cut&&(m=await p.perform(ze.MOVE)),e.state.clipboardAction===bt.Copy&&(m=await p.perform(ze.COPY)),await i.addTask(()=>{e.commit("CLEAR_CLIPBOARD");const h=[],g=[];for(const f of m)h.push((async()=>{const v=await s.webdav.getFileInfo(t,f);g.push(v)})());return Promise.all(h).then(()=>{const f=e.getters.currentFolder;e.commit("UPSERT_RESOURCES",g),e.commit("LOAD_INDICATORS",f.path)})},{debounceTime:0})},resetFileSelection(e){e.commit("RESET_SELECTION")},markFavorite(e,t){const s=t.file,i=t.client,n=!s.starred;return i.files.favorite(s.webDavPath,n).then(()=>{e.commit("UPDATE_RESOURCE_FIELD",{id:s.id,field:"starred",value:n})}).catch(o=>{throw new Error(o)})},deleteFiles(e,t){const{$gettext:s,interpolate:i,space:n,files:o,clientService:a,loadingCallbackArgs:c,firstRun:l=!0}=t,{setProgress:u}=c,p=[],m=[];for(const[h,g]of o.entries()){const f=a.webdav.deleteFile(n,g).then(()=>{m.push(g)}).catch(v=>{let F=s('Failed to delete "%{file}"');if(v.statusCode===423){if(l)return e.dispatch("deleteFiles",{...t,space:n,files:[g],clientService:a,firstRun:!1});F=s('Failed to delete "%{file}" - the file is locked')}const S=i(F,{file:g.name},!0);e.dispatch("showMessage",{title:S,status:"danger"},{root:!0})}).finally(()=>{u({total:o.length,current:h+1})});p.push(f)}return Promise.all(p).then(()=>{e.commit("REMOVE_FILES",m),e.commit("REMOVE_FILES_FROM_SEARCHED",m),e.commit("RESET_SELECTION")})},clearTrashBin(e){e.commit("CLEAR_FILES"),e.commit("RESET_SELECTION"),e.commit("CLEAR_FILES_SEARCHED")},removeFilesFromTrashbin(e,t){e.commit("REMOVE_FILES",t),e.commit("REMOVE_FILES_FROM_SEARCHED",t),e.commit("RESET_SELECTION")},updateCurrentFileShareTypes({state:e,getters:t,commit:s}){var o;const i=t.highlightedFile;if(!i||he(i))return;s("UPDATE_RESOURCE_FIELD",{id:i.id,field:"shareTypes",value:Si(e.outgoingShares.filter(a=>!a.indirect))});const n=(o=e.ancestorMetaData[i.path])!=null?o:null;n&&s("UPDATE_ANCESTOR_FIELD",{path:n.path,field:"shareTypes",value:Si(e.outgoingShares.filter(a=>!a.indirect))})},async changeShare({commit:e,dispatch:t,getters:s,rootGetters:i},{$gettext:n,client:o,share:a,permissions:c,expirationDate:l,role:u}){if(!c&&!u)throw new Error("Nothing changed");try{const p=await o.shares.updateShare(a.id,{role:u.name,permissions:c,expireDate:l}),m=es(p.shareInfo,s.highlightedFile,qt(i));e("OUTGOING_SHARES_UPSERT",{...m,outgoing:!0})}catch{t("showMessage",{title:n("Error while editing the share."),status:"danger"},{root:!0})}},addShare(e,{$gettext:t,client:s,path:i,shareWith:n,shareType:o,permissions:a,role:c,expirationDate:l,storageId:u}){const p=o===B.group.value,m={permissions:a,role:c.name,expirationDate:l,spaceRef:u,remoteUser:void 0};p||(m.remoteUser=o===B.remote.value);const h=p?"shareFileWithGroup":"shareFileWithUser";return s.shares[h](i,n,m).then(async g=>{const f=es(g.shareInfo,e.getters.highlightedFile,qt(e.rootGetters));e.state.sharesLoading&&await Promise.resolve(e.state.sharesLoading),e.commit("OUTGOING_SHARES_UPSERT",{...f,outgoing:!0}),e.dispatch("updateCurrentFileShareTypes"),e.commit("LOAD_INDICATORS",i)}).catch(g=>{e.dispatch("showMessage",{title:t("Error while sharing."),desc:g,status:"danger"},{root:!0})})},deleteShare(e,{client:t,share:s,path:i,loadIndicators:n=!1}){return t.shares.deleteShare(s.id,{}).then(async()=>{e.state.sharesLoading&&await Promise.resolve(e.state.sharesLoading),e.commit("OUTGOING_SHARES_REMOVE",s),e.dispatch("updateCurrentFileShareTypes"),n&&e.commit("LOAD_INDICATORS",i)})},async loadShares(e,{client:t,path:s,storageId:i,useCached:n=!0}){e.state.sharesLoading&&await e.state.sharesLoading;let o;const a=new Promise(f=>{o=f});e.commit("SHARES_LOADING",a),a.then(()=>{e.commit("SHARES_LOADING",!1)});const c=s==="/"?["/"]:vi(s,!0),l=[...e.state.outgoingShares,...e.state.incomingShares],u=[],p=new xt({concurrency:2}),m=[],{highlightedFile:h}=e.getters,g=(f,v,F,S)=>{const E=S?Et:es,L=v||!h?{type:"folder"}:h,N=qt(e.rootGetters);return t.shares.getShares(f,F).then(x=>{x.forEach(O=>{u.push({...E(O.shareInfo,L,N),outgoing:S,indirect:v})})}).catch(x=>{console.error("SHARESTREE_ERROR",x)})};return s||m.push(g(s,!1,{reshares:!0,spaceRef:i},!0)),c.forEach(f=>{var E;const v=(E=e.state.ancestorMetaData[f])!=null?E:null,F=s!==f,S=F?v==null?void 0:v.id:i;if(n&&l.length){const L=l.filter(N=>N.path===f);if(L.length){u.push(...L.map(N=>({...N,indirect:F})));return}}m.push(p.add(()=>g(f,F,{reshares:!0,spaceRef:S},!0))),m.push(p.add(()=>g(f,F,{shared_with_me:!0,spaceRef:S},!1)))}),Promise.allSettled(m).then(()=>{e.commit("OUTGOING_SHARES_SET",u.filter(f=>f.outgoing)),e.commit("INCOMING_SHARES_SET",u.filter(f=>!f.outgoing)),o()})},async loadVersions(e,{client:t,fileId:s}){let i;try{i=await t.fileVersions.listVersions(s)}catch(n){console.error(n),i=[]}e.commit("SET_VERSIONS",i)},addLink({commit:e,dispatch:t,getters:s,rootGetters:i,state:n},{path:o,client:a,params:c,storageId:l}){return new Promise((u,p)=>{a.shares.shareFileWithLink(o,{...c,spaceRef:l}).then(async m=>{var f,v;const h=Et(m.shareInfo,null,qt(i));n.sharesLoading&&await Promise.resolve(n.sharesLoading);const g=!!((f=s.highlightedFile)!=null&&f.path)&&o!==s.highlightedFile.path&&!he(s.highlightedFile);if(e("OUTGOING_SHARES_UPSERT",{...h,outgoing:!0,indirect:g}),t("updateCurrentFileShareTypes"),g){const F=(v=n.ancestorMetaData[o])!=null?v:null;if(F){const{shareTypes:S}=F;S.includes(B.link.value)||e("UPDATE_ANCESTOR_FIELD",{path:F.path,field:"shareTypes",value:[...S,B.link.value]})}}e("LOAD_INDICATORS",o),u(h)}).catch(m=>{p(m)})})},updateLink(e,{id:t,client:s,params:i}){return new Promise((n,o)=>{s.shares.updateShare(t,i).then(a=>{const c=Et(a.shareInfo,null,qt(e.rootGetters));e.commit("OUTGOING_SHARES_UPSERT",{...c,outgoing:!0}),n(c)}).catch(a=>{o(a)})})},removeLink(e,{share:t,client:s,path:i,loadIndicators:n=!1}){return s.shares.deleteShare(t.id).then(async()=>{e.state.sharesLoading&&await Promise.resolve(e.state.sharesLoading),e.commit("OUTGOING_SHARES_REMOVE",t),e.dispatch("updateCurrentFileShareTypes"),n&&e.commit("LOAD_INDICATORS",i)})},loadAvatars({commit:e,rootGetters:t},{resource:s,clientService:i}){t.capabilities.files_sharing.user.profile_picture&&["sharedWith","owner"].forEach(n=>{(s[n]||[]).forEach((o,a)=>{xi(o,"avatar")&&ti({clientService:i,username:o.username,server:t.configuration.server},!0).then(c=>e("UPDATE_RESOURCE_FIELD",{id:s.id,field:`${n}.[${a}].avatar`,value:c}))})})},async loadPreview({commit:e},{previewService:t,space:s,resource:i,dimensions:n,type:o}){const a=await t.loadPreview({space:s,resource:i,dimensions:n},!0);a&&e("UPDATE_RESOURCE_FIELD",{id:i.id,field:o,value:a})},loadAncestorMetaData({commit:e,state:t},{folder:s,space:i,client:n}){var u;const o={[s.path]:{id:s.fileId,shareTypes:s.shareTypes,parentFolderId:s.parentFolderId,spaceId:i.id,path:s.path}},a=[],c=[$e.FileId,$e.ShareTypes,$e.FileParent],l=vi(s.path);for(const p of l){const m=(u=t.ancestorMetaData[p])!=null?u:null;if((m==null?void 0:m.spaceId)===i.id){o[p]=m;continue}a.push(n.listFiles(i,{path:p},{depth:0,davProperties:c}).then(({resource:h})=>{o[p]={id:h.fileId,shareTypes:h.shareTypes,parentFolderId:h.parentFolderId,spaceId:i.id,path:p}}))}return Promise.all(a).then(()=>{e("SET_ANCESTOR_META_DATA",o)})}};function Si(e){const t=new Set;return e.forEach(s=>{t.add(s.shareType)}),Array.from(t)}const Jd={LOAD_FILES(e,{currentFolder:t,files:s}){e.currentFolder=t,e.files=s},SET_CURRENT_FOLDER(e,t){e.currentFolder=t},CLEAR_FILES(e){e.files=[]},LOAD_FILES_SEARCHED(e,t){e.filesSearched=t},REMOVE_FILES_FROM_SEARCHED(e,t){e.filesSearched&&(e.filesSearched=e.filesSearched.filter(s=>!t.find(i=>i.id===s.id)))},CLEAR_FILES_SEARCHED(e){e.filesSearched=null},CLEAR_CLIPBOARD(e){e.clipboardSpace=null,e.clipboardResources=[],e.clipboardAction=null},CLIPBOARD_SELECTED(e,{space:t,resources:s}){e.clipboardSpace=t,e.clipboardResources=s},SET_CLIPBOARD_ACTION(e,t){e.clipboardAction=t},SET_LATEST_SELECTED_FILE_ID(e,t){e.latestSelectedId=t},SET_FILE_SELECTION(e,t){const s=t.find(i=>!e.selectedIds.includes(i.id));s&&(e.latestSelectedId=s.id),e.selectedIds=t.map(i=>i.id)},SET_SELECTED_IDS(e,t){const s=t.find(i=>!e.selectedIds.includes(i));s&&(e.latestSelectedId=s),e.selectedIds=t},ADD_FILE_SELECTION(e,t){const s=[...e.selectedIds],i=s.findIndex(n=>n===t.id);e.latestSelectedId=t.id,i===-1&&(s.push(t.id),e.selectedIds=s)},REMOVE_FILE_SELECTION(e,t){const s=[...e.selectedIds];if(e.latestSelectedId=t.id,s.length>1){e.selectedIds=s.filter(i=>t.id!==i);return}e.selectedIds=[]},RESET_SELECTION(e){e.selectedIds=[]},REMOVE_FILES(e,t){e.files=[...e.files].filter(s=>!t.find(i=>i.id===s.id))},OUTGOING_SHARES_SET(e,t){e.outgoingShares=t},OUTGOING_SHARES_REMOVE(e,t){e.outgoingShares=e.outgoingShares.filter(s=>t.id!==s.id)},OUTGOING_SHARES_UPSERT(e,t){const s=e.outgoingShares.findIndex(i=>i.id===t.id);s>=0?e.outgoingShares[s]=t:e.outgoingShares.push(t)},INCOMING_SHARES_SET(e,t){e.incomingShares=t},SHARES_LOADING(e,t){e.sharesLoading=t},PRUNE_SHARES(e){e.sharesLoading=!0,e.outgoingShares=[],e.incomingShares=[],e.sharesLoading=!1},CLEAR_CURRENT_FILES_LIST(e){e.currentFolder=null,e.selectedIds=[],e.files.forEach(t=>{t.previewUrl&&t.previewUrl.startsWith("blob:")&&window.URL.revokeObjectURL(t.previewUrl)}),e.files=[]},SET_VERSIONS(e,t){e.versions=t},LOAD_INDICATORS(e,t){const s=e.files.filter(i=>i.path.startsWith(t));for(const i of s){const n=Tt({resource:i,ancestorMetaData:e.ancestorMetaData});!n.length&&!i.indicators.length||this.commit("Files/UPDATE_RESOURCE_FIELD",{id:i.id,field:"indicators",value:n})}},UPSERT_RESOURCE(e,t){ki(e,t,!0)},UPSERT_RESOURCES(e,t){const s=e.files.filter(i=>!t.some(n=>n.id===i.id));e.files=[...s,...t]},UPDATE_RESOURCE(e,t){ki(e,t,!1)},UPDATE_RESOURCE_FIELD(e,t){var c;let s=e.filesSearched||e.files,i=s.findIndex(l=>l.id===t.id);if(i<0)if(((c=e.currentFolder)==null?void 0:c.id)===t.id)s=[e.currentFolder],i=0;else return;const n=s[i],o=xi(n,t.field),a=Ga(n,t.field,t.value);o||(s[i]=a)},SET_HIDDEN_FILES_VISIBILITY(e,t){e.areHiddenFilesShown=t,window.localStorage.setItem("oc_hiddenFilesShown",t)},SET_FILE_EXTENSIONS_VISIBILITY(e,t){e.areFileExtensionsShown=t,window.localStorage.setItem("oc_fileExtensionsShown",t)},SET_ANCESTOR_META_DATA(e,t){e.ancestorMetaData=t},UPDATE_ANCESTOR_FIELD(e,t){var i;const s=(i=e.ancestorMetaData[t.path])!=null?i:null;s&&(s[t.field]=t.value)}};function ki(e,t,s){const i=[...e.files];let n=i.findIndex(a=>a.id===t.id);t.webDavPath&&t.webDavPath.length&&n===-1&&(n=i.findIndex(a=>a.webDavPath===t.webDavPath));const o=n>-1;e.filesSearched=null,!(!o&&!s)&&(o?Object.assign(i[n],t):i.push(t),e.files=i)}const Xd={selectedFiles:(e,t)=>t.filesAll.filter(s=>e.selectedIds.includes(s.id)),files:e=>e.files,filesAll:e=>e.filesSearched||e.files,currentFolder:e=>e.currentFolder,ancestorMetaData:e=>e.ancestorMetaData,clipboardResources:e=>e.clipboardResources,clipboardAction:e=>e.clipboardAction,activeFiles:(e,t)=>{let s=[].concat(t.filesAll);return e.areHiddenFilesShown||(s=s.filter(i=>!i.name.startsWith("."))),s},totalFilesSize:(e,t)=>t.filesAll.map(s=>parseInt(s.size)).reduce((s,i)=>s+i,0),totalFilesCount:(e,t)=>{const s=t.filesAll.filter(o=>o.type==="file").length,i=t.filesAll.filter(o=>o.type==="folder").length,n=t.filesAll.filter(o=>he(o)).length;return{files:s,folders:i,spaces:n}},outgoingCollaborators:e=>e.outgoingShares.filter(t=>B.containsAnyValue(B.authenticated,[t.shareType])),incomingCollaborators:e=>e.incomingShares.filter(t=>B.containsAnyValue(B.authenticated,[t.shareType])),outgoingLinks:e=>e.outgoingShares.filter(t=>B.containsAnyValue(B.unauthenticated,[t.shareType])),sharesLoading:e=>e.sharesLoading,quota:e=>e.quota,highlightedFile:(e,t)=>t.selectedFiles.length>0?t.selectedFiles[0]:e.currentFolder,versions:e=>e.versions},eu=!0,tu={namespaced:eu,state:Yd,getters:Xd,actions:Zd,mutations:Jd},wi=new ht,su=W({props:{searchResult:{type:Object,default:function(){return{}}},provider:{type:Object,default:function(){return{}}}},setup(e){const t=Z(),s=_(()=>({...e.searchResult.data,...r(t)&&{thumbnail:r(t)}}));return{...st(),hasShareJail:we(),previewData:t,resource:s}},computed:{...ee(["configuration"]),...ee("runtime/spaces",["spaces"]),attrs(){return this.resource.isFolder?{to:this.createFolderLink(this.resource.path,this.resource.fileId)}:{}},listeners(){return this.resource.isFolder?{}:{click:()=>this.triggerDefaultAction({space:this.matchingSpace,resources:[this.resource]})}},matchingSpace(){const e=this.spaces.find(t=>t.id===this.resource.storageId);return e||Oe({shareId:this.resource.shareId,shareName:at(this.resource.shareRoot),serverUrl:Re.serverUrl})},defaultParentFolderName(){var e;return this.resource.shareId?this.resource.path==="/"?this.$gettext("Shared with me"):at(this.resource.shareRoot):this.hasShareJail?he(this.resource)?this.$gettext("Spaces"):((e=this.matchingSpace)==null?void 0:e.driveType)==="project"?this.matchingSpace.name:this.$gettext("Personal"):this.$gettext("All files and folders")},displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)&&!da(this.resource)},folderLink(){return this.createFolderLink(this.resource.path,this.resource.fileId)},parentFolderLink(){return this.resource.shareId&&this.resource.path==="/"?dt("files-shares-with-me"):he(this.resource)?be("files-spaces-projects"):this.createFolderLink(it(this.resource.path),this.resource.parentFolderId)}},mounted(){if(!this.displayThumbnails)return;const e=pt(async({unobserve:t})=>{t();const s=await this.$previewService.loadPreview({space:this.matchingSpace,resource:this.resource,dimensions:qe.Thumbnail},!0);s&&(this.previewData=s)},250);wi.observe(this.$el,{onEnter:e,onExit:e.cancel})},beforeUnmount(){wi.disconnect()},methods:{parentFolderClicked(){Y.publish("app.search.options-drop.hide")},createFolderLink(e,t){return this.matchingSpace?be("files-spaces-generic",Ee(this.matchingSpace,{path:e,fileId:t})):{}}}});function iu(e,t,s,i,n,o){const a=y("oc-resource"),c=y("oc-button");return d(),$(c,Be({type:e.resource.isFolder?"router-link":"button","justify-content":"left",class:"files-search-preview oc-flex oc-width-1-1",appearance:"raw"},e.attrs,Ya(e.listeners)),{default:A(()=>[w(a,{resource:e.resource,"is-path-displayed":!0,"is-resource-clickable":!1,"parent-folder-link":e.parentFolderLink,"parent-folder-name-default":e.defaultParentFolderName,"is-thumbnail-displayed":e.displayThumbnails,onParentFolderClicked:e.parentFolderClicked},null,8,["resource","parent-folder-link","parent-folder-name-default","is-thumbnail-displayed","onParentFolderClicked"])]),_:1},16,["type"])}const au=K(su,[["render",iu]]),nu=8;class ou{constructor(t,s,i){ie(this,"component");ie(this,"cache");ie(this,"router");ie(this,"store");ie(this,"clientService");ie(this,"projectSpaces");this.component=au,this.router=s,this.store=t,this.cache=new rn({ttl:1e4,capacity:100}),this.clientService=i,this.projectSpaces=_(()=>this.store.getters["runtime/spaces/spaces"].filter(n=>he(n)))}getMatchingSpace(t){return r(this.projectSpaces).find(s=>s.id===t)}async search(t){var a;if(!t)return{totalResults:null,values:[]};if(this.cache.has(t))return this.cache.get(t);const s=(a=this.store.state.Files)==null?void 0:a.areHiddenFilesShown,{range:i,results:n}=await this.clientService.owncloudSdk.files.search(t,nu,Gt.Default),o=n.reduce((c,l)=>{const u=this.getMatchingSpace(l.fileInfo[$e.FileParent]),p=u||It(l);return p.storageId||(p.storageId=this.store.getters.user.id),(!p.name.startsWith(".")||s)&&c.push({id:p.id,data:{...p}}),c},[]);return this.cache.set(t,{totalResults:i?parseInt(i==null?void 0:i.split("/")[1]):null,values:o})}get available(){return r(this.router.currentRoute).name!=="search-provider-list"}}const Ci=new ht,ru=W({components:{AppBar:ot,SideBar:ft,AppLoadingSpinner:tt,ContextActions:mt,ListInfo:At,Pagination:zt,NoContentMessage:nt,ResourceTable:Ft,FilesViewWrapper:rt},props:{searchResult:{type:Object,default:function(){return{totalResults:null,values:[]}}},loading:{type:Boolean,default:!1}},setup(){const e=q(),{y:t}=js();Qa(()=>{Y.publish("app.search.term.clear")});const s=i=>i.shareId?Oe({shareId:i.shareId,shareName:at(i.shareRoot),serverUrl:Re.serverUrl}):e.getters["runtime/spaces/spaces"].find(n=>n.id===i.storageId);return{...st({store:e}),..._t(),fileListHeaderY:t,getSpace:s}},computed:{...ee(["configuration"]),...ee("Files",["totalFilesCount","totalFilesSize"]),displayThumbnails(){var e,t;return!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.disablePreviews)},itemCount(){return this.totalFilesCount.files+this.totalFilesCount.folders},rangeSupported(){return this.searchResult.totalResults},searchResultExceedsLimit(){return!this.rangeSupported||this.searchResult.totalResults&&this.searchResult.totalResults>Cs},searchResultExceedsLimitText(){if(!this.rangeSupported){const t=this.$gettext("Showing up to %{searchLimit} results");return this.$gettextInterpolate(t,{searchLimit:Cs})}const e=this.$gettext("Found %{totalResults}, showing the %{itemCount} best matching results");return this.$gettextInterpolate(e,{itemCount:this.itemCount,totalResults:this.searchResult.totalResults})}},watch:{searchResult:{handler:async function(){this.searchResult&&(this.CLEAR_CURRENT_FILES_LIST(),this.LOAD_FILES({currentFolder:null,files:this.searchResult.values.length?this.searchResult.values.map(e=>e.data):[]}),await ls(),this.scrollToResourceFromRoute(this.paginatedResources))}}},beforeUnmount(){Ci.disconnect()},methods:{...xe("Files",["CLEAR_CURRENT_FILES_LIST","LOAD_FILES"]),...pe("Files",["loadPreview"]),rowMounted(e,t){if(!this.displayThumbnails)return;const s=pt(({unobserve:i})=>{i(),this.loadPreview({previewService:this.$previewService,space:this.getSpace(e),resource:e,dimensions:qe.Thumbnail,type:Ot.Thumbnail})},250);Ci.observe(t.$el,{onEnter:s,onExit:s.cancel})}}}),lu={class:"files-search-result oc-flex"},cu={class:"oc-text-muted"},du={key:0},uu={key:1},pu=["textContent"];function hu(e,t,s,i,n,o){const a=y("app-bar"),c=y("app-loading-spinner"),l=y("no-content-message"),u=y("context-actions"),p=y("pagination"),m=y("list-info"),h=y("resource-table"),g=y("files-view-wrapper"),f=y("side-bar"),v=ce("translate");return d(),k("div",lu,[w(g,null,{default:A(()=>[w(a,{"has-bulk-actions":!1,"side-bar-open":e.sideBarOpen},null,8,["side-bar-open"]),b(),e.loading?(d(),$(c,{key:0})):(d(),k(X,{key:1},[e.paginatedResources.length?(d(),$(h,{key:1,selectedIds:e.selectedResourcesIds,"onUpdate:selectedIds":t[0]||(t[0]=F=>e.selectedResourcesIds=F),class:oe(["files-table",{"files-table-squashed":!1}]),"header-position":e.fileListHeaderY,resources:e.paginatedResources,"are-paths-displayed":!0,"are-thumbnails-displayed":e.displayThumbnails,"has-actions":!0,"is-selectable":!1,"sort-by":e.sortBy,"sort-dir":e.sortDir,onFileClick:e.triggerDefaultAction,onRowMounted:e.rowMounted,onSort:e.handleSort},{contextMenu:A(({resource:F})=>[e.isResourceInSelection(F)?(d(),$(u,{key:0,"action-options":{space:e.getSpace(F),resources:e.selectedResources}},null,8,["action-options"])):I("",!0)]),footer:A(()=>[w(p,{pages:e.paginationPages,"current-page":e.paginationPage},null,8,["pages","current-page"]),b(),e.searchResultExceedsLimit?(d(),k("div",{key:0,class:"oc-text-nowrap oc-text-center oc-width-1-1 oc-my-s",textContent:D(e.searchResultExceedsLimitText)},null,8,pu)):e.paginatedResources.length>0?(d(),$(m,{key:1,class:"oc-width-1-1 oc-my-s",files:e.totalFilesCount.files,folders:e.totalFilesCount.folders,size:e.totalFilesSize},null,8,["files","folders","size"])):I("",!0)]),_:1},8,["selectedIds","header-position","resources","are-thumbnails-displayed","sort-by","sort-dir","onFileClick","onRowMounted","onSort"])):(d(),$(l,{key:0,class:"files-empty",icon:"search","icon-fill-type":"line"},{message:A(()=>[C("p",cu,[e.$route.query.term?V((d(),k("span",du,[b("No results found")])),[[v]]):V((d(),k("span",uu,[b("No search term entered")])),[[v]])])]),_:1}))],64))]),_:1}),b(),w(f,{open:e.sideBarOpen,"active-panel":e.sideBarActivePanel,space:e.selectedResourceSpace},null,8,["open","active-panel","space"])])}const mu=K(ru,[["render",hu]]),Cs=200;class fu{constructor(t,s){ie(this,"component");ie(this,"store");ie(this,"clientService");ie(this,"projectSpaces");this.component=mu,this.store=t,this.clientService=s,this.projectSpaces=_(()=>this.store.getters["runtime/spaces/spaces"].filter(i=>he(i)))}getMatchingSpace(t){return r(this.projectSpaces).find(s=>s.id===t)}async search(t){if(!t)return{totalResults:null,values:[]};const{range:s,results:i}=await this.clientService.owncloudSdk.files.search(t,Cs,Gt.Default);return{totalResults:s?parseInt(s==null?void 0:s.split("/")[1]):null,values:i.map(n=>{const o=this.getMatchingSpace(n.fileInfo[$e.FileParent]),a=o||It(n);return a.storageId||(a.storageId=this.store.getters.user.id),{id:a.id,data:a}})}}}class gu extends ln{constructor(s,i,n){super();ie(this,"id");ie(this,"displayName");ie(this,"previewSearch");ie(this,"listSearch");ie(this,"store");ie(this,"router");this.id="files.sdk",this.displayName="Files",this.previewSearch=new ou(s,i,n),this.listSearch=new fu(s,n),this.store=s,this.router=i}get available(){var s,i,n;return(n=(i=(s=this.store.getters.capabilities)==null?void 0:s.dav)==null?void 0:i.reports)==null?void 0:n.includes("search-files")}}class bu{constructor(t,s,i=[]){ie(this,"clientService");ie(this,"serverUrl");ie(this,"capability");this.clientService=t,this.serverUrl=s;const n=i.filter(o=>o.enabled).sort((o,a)=>Za(o.version,a.version));this.capability=n.length?n[0]:null}get available(){var t;return!!((t=this.capability)!=null&&t.version)}get fileIdsSupported(){var t;return si((t=this.capability)==null?void 0:t.version)>=2}async triggerDownload(t){var n,o;if(!this.available)throw new Ut("no archiver available");if((((n=t.fileIds)==null?void 0:n.length)||0)+(((o=t.files)==null?void 0:o.length)||0)===0)throw new Ut("requested archive with empty list of resources");const s=this.buildDownloadUrl({...t});if(!s)throw new Ut("download url could not be built");const i=t.publicToken?s:await this.clientService.owncloudSdk.signUrl(s);try{const a=await this.clientService.httpUnAuthenticated.get(i,{headers:{...!!t.publicLinkPassword&&{Authorization:"Basic "+Buffer.from(["public",t.publicLinkPassword].join(":")).toString("base64")}},responseType:"arraybuffer"}),c=new Blob([a.data],{type:"application/octet-stream"}),l=URL.createObjectURL(c),u=this.getFileNameFromResponseHeaders(a.headers);return ao(l,u),i}catch{throw new Ut("archive could not be fetched")}}buildDownloadUrl(t){const s=[];switch(t.publicToken&&s.push(`public-token=${t.publicToken}`),si(this.capability.version)){case 2:return s.push(...t.fileIds.map(n=>`id=${n}`)),this.url+"?"+s.join("&");case 1:{const n=Math.random().toString(36).substring(2);return s.push(`dir=${encodeURIComponent(t.dir)}`,...t.files.map(o=>`files[]=${encodeURIComponent(o)}`),`downloadStartSecret=${n}`),this.url+"?"+s.join("&")}default:return}}get url(){if(!this.available)throw new Ut("no archiver available");return/^https?:\/\//i.test(this.capability.archiver_url)?this.capability.archiver_url:Ge(Re.serverUrl,this.capability.archiver_url)}getFileNameFromResponseHeaders(t){var i;const s=(i=t["content-disposition"])==null?void 0:i.split('"')[1];return decodeURI(s)}}class Fs{}ie(Fs,"sdkSearch");const yu=W({name:"FileDetails",setup(){const e=q(),{$gettext:t}=J(),s=Z(!1),i=Z(!1),n=Z(!1),{copy:o,copied:a,isSupported:c}=rs({legacy:!0,copiedDuring:550}),l=de("resource"),u=de("space"),p=zi({store:e}),m=ne(),h=Mt(),g=Z(void 0),f=_(()=>r(p)?`${e.getters.configuration.server.replace(/\/+$/,"")}${r(l).downloadURL}`:`${e.getters.configuration.server}files/spaces${so(r(l).path)}`),v=()=>{o(r(l).path),i.value=r(a),e.dispatch("showMessage",{title:t("FUSE path copied"),desc:t("The FUSE path has been copied to your clipboard.")})},F=()=>{o(S(r(l).path)),n.value=r(a),e.dispatch("showMessage",{title:t("Windows path copied"),desc:t("The Windows path has been copied to your clipboard.")})},S=G=>{const T={user:"\\\\cernbox-smb\\eos\\user\\",project:"\\\\eosproject-smb\\eos\\project\\",public:"\\\\eospublic-smb\\eos\\",media:"\\\\eosmedia-smb\\eos\\"},P=G==null?void 0:G.split("/").filter(Boolean);if(P.length>1&&P[0]==="eos"){const j=T[P[1]];return j&&`${j}${P.slice(2).join("\\")}`}},E=()=>{o(r(f)),s.value=r(a),e.dispatch("showMessage",{title:t("Direct link copied"),desc:t("The direct link has been copied to your clipboard.")})},L=async()=>{const G=[];r(l).type==="file"&&!r(p)&&G.push(e.dispatch("Files/loadVersions",{client:m.owncloudSdk,fileId:r(l).id})),await Promise.all(G.map(T=>T.catch(P=>P)))},N=_(()=>r(l).isFolder),x=Ue(function*(G,T){r(N)||(g.value=yield h.loadPreview({space:r(u),resource:T,dimensions:qe.Preview}))}).restartable(),O=_(()=>r(N)?!1:x.isRunning||!x.last),Q=_(()=>e.getters["Files/ancestorMetaData"]),R=_(()=>Object.values(r(Q)).find(G=>G.path!==r(l).path&&B.containsAnyValue(B.authenticated,G.shareTypes)));return je(l,()=>{r(l)&&(L(),x.perform(r(l)))},{immediate:!0}),{copiedEos:i,copiedSamba:n,preview:g,copyEosPathToClipboard:v,copySambaPathToClipboard:F,getSambaPath:S,copiedDirect:s,copyDirectLinkToClipboard:E,isClipboardCopySupported:c,isPublicLinkContext:p,space:u,directLink:f,resource:l,hasTags:Is(),isPreviewLoading:O,ancestorMetaData:Q,sharedAncestor:R}},computed:{...ee("runtime/spaces",["spaces"]),...ee("Files",["versions"]),...ee(["user","configuration"]),matchingSpace(){return this.space||this.spaces.find(e=>e.id===this.resource.storageId)},runningOnEos(){var e,t;return!!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.runningOnEos)},cernFeatures(){var e,t;return!!((t=(e=this.configuration)==null?void 0:e.options)!=null&&t.cernFeatures)},hasContent(){return this.hasTimestamp||this.ownerDisplayName||this.showSize||this.showShares||this.showVersions},sharedViaTooltip(){return this.$gettext("Navigate to '%{folder}'",{folder:this.sharedAncestor.path||""},!0)},showSharedBy(){return this.showShares&&!this.ownedByCurrentUser&&this.sharedByDisplayName},showSharedVia(){return this.showShares&&this.sharedAncestor},sharedAncestorRoute(){return ma({resource:this.resource,sharedAncestor:this.sharedAncestor,matchingSpace:this.matchingSpace})},showShares(){return this.isPublicLinkContext?!1:this.hasAnyShares},detailSharingInformation(){return this.resource.type==="folder"?this.$gettext("This folder has been shared."):this.$gettext("This file has been shared.")},hasTimestamp(){var e;return((e=this.resource.mdate)==null?void 0:e.length)>0},ownerDisplayName(){var e;return this.resource.ownerDisplayName||this.resource.shareOwnerDisplayname||((e=this.resource.owner)==null?void 0:e[0].displayName)},ownerAdditionalInfo(){var e;return(e=this.resource.owner)==null?void 0:e[0].additionalInfo},copyDirectLinkLabel(){return this.$gettext("Copy direct link")},copyEosPathLabel(){return this.$gettext("Copy FUSE path")},copySambaPathLabel(){return this.$gettext("Copy Windows path")},resourceSize(){return us(this.resource.size,this.$language.current)},showSize(){return this.resourceSize!=="?"},showVersions(){if(!(this.resource.type==="folder"||this.isPublicLinkContext))return this.versions.length>0},seeVersionsLabel(){return this.$gettext("See all versions")},capitalizedTimestamp(){const e=Ln(this.resource.mdate,this.$language.current);return Ja(e)},showTags(){var e;return this.hasTags&&((e=this.resource.tags)==null?void 0:e.length)},hasAnyShares(){var e,t;return((e=this.resource.shareTypes)==null?void 0:e.length)>0||((t=this.resource.indicators)==null?void 0:t.length)>0||this.sharedAncestor},ownedByCurrentUser(){var e;return this.resource.ownerId===this.user.id||((e=this.resource.owner)==null?void 0:e[0].username)===this.user.id||this.resource.shareOwner===this.user.id},shareIndicators(){return Tt({resource:this.resource,ancestorMetaData:this.ancestorMetaData})},sharedByDisplayName(){var e,t;return(t=(e=this.resource.share)==null?void 0:e.fileOwner)==null?void 0:t.displayName},sambaPath(){return this.getSambaPath(this.resource.path)}},methods:{expandVersionsPanel(){Y.publish(_e.setActivePanel,"versions")},getTagLink(e){return Ms("files-common-search",{query:{term:`Tags:"${e}"`,provider:"files.sdk"}})},getTagComponentAttrs(e){return this.isPublicLinkContext?{}:{to:this.getTagLink(e)}}}});const vu={id:"oc-file-details-sidebar"},Su={key:0},ku={key:1,class:"details-icon-wrapper oc-width-1-1 oc-flex oc-flex-middle oc-flex-center oc-mb"},wu={key:"file-shares","data-testid":"sharingInfo",class:"oc-flex oc-flex-middle oc-my-m"},Cu=["textContent"],Fu=["aria-label"],_u={key:0,"data-testid":"timestamp"},Au=["textContent"],$u=["textContent"],Du={key:1,"data-testid":"shared-via"},Eu=["textContent"],Tu=["textContent"],Iu={key:2,"data-testid":"shared-by"},Ru=["textContent"],Lu=["textContent"],Pu={key:3,"data-testid":"ownerDisplayName"},xu=["textContent"],ju={class:"oc-m-rm"},Nu={key:0},Mu={key:1},zu={key:4,"data-testid":"sizeInfo"},Ou=["textContent"],Bu=["textContent"],Uu={key:5,"data-testid":"versionsInfo"},qu=["textContent"],Vu={key:6,"data-testid":"eosPath"},Hu=["textContent"],Ku={class:"oc-flex oc-flex-middle oc-flex-between oc-width-1-1"},Wu=["textContent"],Gu={key:7,"data-testid":"sambaPath"},Yu=["textContent"],Qu={class:"oc-flex oc-flex-middle oc-flex-between oc-width-1-1"},Zu=["textContent"],Ju={key:8,"data-testid":"eosDirectLink"},Xu=["textContent"],ep={class:"oc-flex oc-flex-middle oc-flex-between oc-width-1-1"},tp=["textContent"],sp={key:9,"data-testid":"tags"},ip=["textContent"],ap={key:0},np=["textContent"],op={key:0,class:"oc-mr-xs"},rp=["textContent"];function lp(e,t,s,i,n,o){const a=y("oc-spinner"),c=y("oc-resource-icon"),l=y("oc-status-indicators"),u=y("oc-button"),p=y("router-link"),m=y("oc-icon"),h=ce("oc-tooltip"),g=ce("translate");return d(),k("div",vu,[e.hasContent?(d(),k("div",Su,[e.isPreviewLoading||e.preview?(d(),k("div",{key:"file-thumbnail",style:Xa({"background-image":e.isPreviewLoading?"none":`url(${e.preview})`}),class:"details-preview oc-flex oc-flex-middle oc-flex-center oc-mb","data-testid":"preview"},[e.isPreviewLoading?(d(),$(a,{key:0})):I("",!0)],4)):(d(),k("div",ku,[w(c,{class:"details-icon",resource:e.resource,size:"xxxlarge"},null,8,["resource"])])),b(),!e.isPublicLinkContext&&e.shareIndicators.length?(d(),k("div",wu,[w(l,{resource:e.resource,indicators:e.shareIndicators},null,8,["resource","indicators"]),b(),C("p",{class:"oc-my-rm oc-mx-s",textContent:D(e.detailSharingInformation)},null,8,Cu)])):I("",!0),b(),C("table",{class:"details-table","aria-label":e.$gettext("Overview of the information about the selected file")},[e.hasTimestamp?(d(),k("tr",_u,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Last modified"))},null,8,Au),b(),C("td",null,[e.showVersions?V((d(),$(u,{key:0,appearance:"raw","aria-label":e.seeVersionsLabel,onClick:e.expandVersionsPanel,textContent:D(e.capitalizedTimestamp)},null,8,["aria-label","onClick","textContent"])),[[h,e.seeVersionsLabel]]):(d(),k("span",{key:1,textContent:D(e.capitalizedTimestamp)},null,8,$u))])])):I("",!0),b(),e.showSharedVia?(d(),k("tr",Du,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Shared via"))},null,8,Eu),b(),C("td",null,[w(p,{to:e.sharedAncestorRoute},{default:A(()=>[V(C("span",{textContent:D(e.sharedAncestor.path)},null,8,Tu),[[h,e.sharedViaTooltip]])]),_:1},8,["to"])])])):I("",!0),b(),e.showSharedBy?(d(),k("tr",Iu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Shared by"))},null,8,Ru),b(),C("td",null,[C("span",{textContent:D(e.sharedByDisplayName)},null,8,Lu)])])):I("",!0),b(),e.ownerDisplayName?(d(),k("tr",Pu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Owner"))},null,8,xu),b(),C("td",null,[C("p",ju,[b(D(e.ownerDisplayName)+" ",1),e.ownedByCurrentUser?V((d(),k("span",Nu,[b("(me)")])),[[g]]):I("",!0),b(),!e.ownedByCurrentUser&&e.ownerAdditionalInfo?(d(),k("span",Mu,"("+D(e.ownerAdditionalInfo)+")",1)):I("",!0)])])])):I("",!0),b(),e.showSize?(d(),k("tr",zu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Size"))},null,8,Ou),b(),C("td",{textContent:D(e.resourceSize)},null,8,Bu)])):I("",!0),b(),e.showVersions?(d(),k("tr",Uu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Versions"))},null,8,qu),b(),C("td",null,[V(w(u,{appearance:"raw","aria-label":e.seeVersionsLabel,onClick:e.expandVersionsPanel,textContent:D(e.versions.length)},null,8,["aria-label","onClick","textContent"]),[[h,e.seeVersionsLabel]])])])):I("",!0),b(),e.runningOnEos&&!e.isPublicLinkContext?(d(),k("tr",Vu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("FUSE Path"))},null,8,Hu),b(),C("td",null,[C("div",Ku,[V(C("p",{ref:"filePath",class:"oc-my-rm oc-text-truncate",textContent:D(e.resource.path)},null,8,Wu),[[h,e.resource.path]]),b(),e.isClipboardCopySupported?V((d(),$(u,{key:0,"aria-label":e.copyEosPathLabel,appearance:"raw",variation:e.copiedEos?"success":"passive",onClick:e.copyEosPathToClipboard},{default:A(()=>[e.copiedEos?(d(),$(m,{key:"oc-copy-to-clipboard-copied",name:"checkbox-circle",class:"_clipboard-success-animation"})):(d(),$(m,{key:"oc-copy-to-clipboard-copy",name:"clipboard"}))]),_:1},8,["aria-label","variation","onClick"])),[[h,e.copyEosPathLabel]]):I("",!0)])])])):I("",!0),b(),e.cernFeatures&&e.sambaPath&&!e.isPublicLinkContext?(d(),k("tr",Gu,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Windows Path"))},null,8,Yu),b(),C("td",null,[C("div",Qu,[V(C("p",{ref:"sambaFilePath",class:"oc-my-rm oc-text-truncate",textContent:D(e.sambaPath)},null,8,Zu),[[h,e.sambaPath]]),b(),V((d(),$(u,{"aria-label":e.copySambaPathLabel,appearance:"raw",variation:e.copiedSamba?"success":"passive",onClick:e.copySambaPathToClipboard},{default:A(()=>[e.copiedSamba?(d(),$(m,{key:"oc-copy-to-clipboard-copied",name:"checkbox-circle",class:"_clipboard-success-animation"})):(d(),$(m,{key:"oc-copy-to-clipboard-copy",name:"clipboard"}))]),_:1},8,["aria-label","variation","onClick"])),[[h,e.copySambaPathLabel]])])])])):I("",!0),b(),e.runningOnEos?(d(),k("tr",Ju,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Direct link"))},null,8,Xu),b(),C("td",null,[C("div",ep,[V(C("p",{class:"oc-my-rm oc-text-truncate",textContent:D(e.directLink)},null,8,tp),[[h,e.directLink]]),b(),e.isClipboardCopySupported?V((d(),$(u,{key:0,"aria-label":e.copyDirectLinkLabel,appearance:"raw",variation:e.copiedDirect?"success":"passive",onClick:e.copyDirectLinkToClipboard},{default:A(()=>[e.copiedDirect?(d(),$(m,{key:"oc-copy-to-clipboard-copied",name:"checkbox-circle",class:"_clipboard-success-animation"})):(d(),$(m,{key:"oc-copy-to-clipboard-copy",name:"clipboard"}))]),_:1},8,["aria-label","variation","onClick"])),[[h,e.copyDirectLinkLabel]]):I("",!0)])])])):I("",!0),b(),e.showTags?(d(),k("tr",sp,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.$gettext("Tags"))},null,8,ip),b(),C("td",null,[(d(!0),k(X,null,fe(e.resource.tags,(f,v)=>(d(),k("span",{key:f},[(d(),$(Ei(e.isPublicLinkContext?"span":"router-link"),en(tn(e.getTagComponentAttrs(f))),{default:A(()=>[v+1<e.resource.tags.length?(d(),k("span",ap,D(f),1)):(d(),k("span",{key:1,textContent:D(f)},null,8,np))]),_:2},1040)),v+1<e.resource.tags.length?(d(),k("span",op,",")):I("",!0)]))),128))])])):I("",!0)],8,Fu)])):(d(),k("p",{key:1,"data-testid":"noContentText",textContent:D(e.$gettext("No information to display"))},null,8,rp))])}const cp=K(yu,[["render",lp],["__scopeId","data-v-8cf27729"]]),dp=W({name:"FileDetailsMultiple",props:{showSpaceCount:{type:Boolean,default:!1}},computed:{...ee("Files",["selectedFiles"]),selectedFilesCount(){return this.selectedFiles.length},selectedFilesString(){return this.$gettextInterpolate(this.$ngettext("%{ itemCount } item selected","%{ itemCount } items selected",this.selectedFilesCount),{itemCount:this.selectedFilesCount})},sizeValue(){let e=0;return this.selectedFiles.forEach(t=>e+=parseInt(t.size)),us(e,this.$language.current)},sizeText(){return this.$gettext("Size")},filesCount(){return this.selectedFiles.filter(e=>e.type==="file").length},filesText(){return this.$gettext("Files")},foldersCount(){return this.selectedFiles.filter(e=>e.type==="folder").length},foldersText(){return this.$gettext("Folders")},spacesCount(){return this.selectedFiles.filter(e=>e.type==="space").length},spacesText(){return this.$gettext("Spaces")},detailsTableLabel(){return this.$gettext("Overview of the information about the selected files")}}});const up={id:"oc-file-details-multiple-sidebar"},pp={class:"files-preview oc-mb"},hp={class:"files-preview-body"},mp=["textContent"],fp=["aria-label"],gp={"data-testid":"filesCount"},bp=["textContent"],yp=["textContent"],vp={"data-testid":"foldersCount"},Sp=["textContent"],kp=["textContent"],wp={key:0,"data-testid":"spacesCount"},Cp=["textContent"],Fp=["textContent"],_p={"data-testid":"size"},Ap=["textContent"],$p=["textContent"];function Dp(e,t,s,i,n,o){const a=y("oc-icon");return d(),k("div",up,[C("div",pp,[C("div",hp,[w(a,{class:"preview-icon",size:"xxlarge",variation:"passive",name:"file-copy"}),b(),C("p",{class:"preview-text","data-testid":"selectedFilesText",textContent:D(e.selectedFilesString)},null,8,mp)])]),b(),C("div",null,[C("table",{class:"details-table","aria-label":e.detailsTableLabel},[C("tr",gp,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.filesText)},null,8,bp),b(),C("td",{textContent:D(e.filesCount)},null,8,yp)]),b(),C("tr",vp,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.foldersText)},null,8,Sp),b(),C("td",{textContent:D(e.foldersCount)},null,8,kp)]),b(),e.showSpaceCount?(d(),k("tr",wp,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.spacesText)},null,8,Cp),b(),C("td",{textContent:D(e.spacesCount)},null,8,Fp)])):I("",!0),b(),C("tr",_p,[C("th",{scope:"col",class:"oc-pr-s oc-font-semibold",textContent:D(e.sizeText)},null,8,Ap),b(),C("td",{textContent:D(e.sizeValue)},null,8,$p)])],8,fp)])])}const Ep=K(dp,[["render",Dp],["__scopeId","data-v-11c8de4f"]]),Tp=W({name:"FileActions",components:{ActionMenuItem:na},setup(){const e=de("resource"),t=de("space"),s=_(()=>[r(e)]),{getAllAvailableActions:i}=st(),n=_(()=>i({space:r(t),resources:r(s)}));return{space:t,resources:s,actions:n}}});function Ip(e,t,s,i,n,o){const a=y("action-menu-item"),c=y("oc-list");return d(),$(c,{id:"oc-files-actions-sidebar",class:"oc-mt-s"},{default:A(()=>[(d(!0),k(X,null,fe(e.actions,(l,u)=>(d(),$(a,{key:`action-${u}`,action:l,"action-options":{space:e.space,resources:e.resources},class:"oc-rounded"},null,8,["action","action-options"]))),128))]),_:1})}const Rp=K(Tp,[["render",Ip]]),Lp=W({name:"FileVersions",setup(){const e=Z(!1);return{...oa(),space:de("space"),resource:de("resource"),loading:e}},computed:{...ee("Files",["versions"]),hasVersion(){return this.versions.length>0},isRevertable(){var e;if(this.space&&St(this.space)||this.resource.isReceivedShare()){if(this.resource.permissions!==void 0)return this.resource.permissions.includes(cn.Updateable);if((e=this.resource.share)!=null&&e.role)return this.resource.share.role.hasPermission(Fe.update)}return!0}},watch:{resource(){this.resource&&this.fetchFileVersions()}},mounted(){this.fetchFileVersions()},methods:{...pe("Files",["loadVersions"]),...xe("Files",["UPDATE_RESOURCE_FIELD"]),currentVersionId(e){const t=e.name.split("/");return t[t.length-1]},async fetchFileVersions(){this.loading=!0,await this.loadVersions({client:this.$client,fileId:this.resource.fileId}),this.loading=!1},async revertVersion(e){const{fileId:t,id:s,path:i}=this.resource;await this.$client.fileVersions.restoreFileVersion(t,this.currentVersionId(e),i);const n=await this.$clientService.webdav.getFileInfo(this.space,this.resource),o=["size","mdate"];for(const a of o)this.resource[a]&&this.UPDATE_RESOURCE_FIELD({id:s,field:a,value:n[a]});this.fetchFileVersions()},downloadVersion(e){const t=this.currentVersionId(e);return this.downloadFile(this.resource,t)},formatVersionDate(e){return Pn(e.fileInfo[$e.LastModifiedDate],this.$language.current)},formatVersionFileSize(e){return us(e.fileInfo[$e.ContentLength],this.$language.current)}}});const Pp=e=>(sn("data-v-ccc2062c"),e=e(),an(),e),xp={id:"oc-file-versions-sidebar",class:"-oc-mt-s"},jp={key:1,class:"oc-m-rm oc-position-relative"},Np=Pp(()=>C("li",{class:"spacer oc-pb-l","aria-hidden":"true"},null,-1)),Mp={class:"version-details"},zp={class:"version-date oc-font-semibold","data-testid":"file-versions-file-last-modified-date"},Op={class:"version-filesize","data-testid":"file-versions-file-size"},Bp={key:0},Up={key:2},qp={"data-testid":"file-versions-no-versions"};function Vp(e,t,s,i,n,o){const a=y("oc-loader"),c=y("oc-icon"),l=y("oc-button"),u=y("oc-list"),p=ce("translate");return d(),k("div",xp,[e.loading?(d(),$(a,{key:0})):I("",!0),b(),!e.loading&&e.hasVersion?(d(),k("ul",jp,[Np,b(),(d(!0),k(X,null,fe(e.versions,(m,h)=>(d(),k("li",{key:h,class:"version-item oc-pb-m oc-position-relative"},[C("div",Mp,[C("span",zp,D(e.formatVersionDate(m)),1),b(`
          -
          `),C("span",Op,D(e.formatVersionFileSize(m)),1)]),b(),w(u,{id:"oc-file-versions-sidebar-actions",class:"oc-pt-xs"},{default:A(()=>[e.isRevertable?(d(),k("li",Bp,[w(l,{"data-testid":"file-versions-revert-button",appearance:"raw","aria-label":e.$gettext("Restore"),class:"version-action-item oc-width-1-1 oc-rounded oc-button-justify-content-left oc-button-gap-m oc-py-s oc-px-m oc-display-block",onClick:g=>e.revertVersion(m)},{default:A(()=>[w(c,{name:"history",class:"oc-icon-m oc-mr-s -oc-mt-xs","fill-type":"line"}),b(" "+D(e.$gettext("Restore")),1)]),_:2},1032,["aria-label","onClick"])])):I("",!0),b(),C("li",null,[w(l,{"data-testid":"file-versions-download-button",appearance:"raw","aria-label":e.$gettext("Download"),class:"version-action-item oc-width-1-1 oc-rounded oc-button-justify-content-left oc-button-gap-m oc-py-s oc-px-m oc-display-block",onClick:g=>e.downloadVersion(m)},{default:A(()=>[w(c,{name:"file-download",class:"oc-icon-m oc-mr-s","fill-type":"line"}),b(" "+D(e.$gettext("Download")),1)]),_:2},1032,["aria-label","onClick"])])]),_:2},1024)]))),128))])):(d(),k("div",Up,[V((d(),k("p",qp,[b("No Versions available for this file")])),[[p]])]))])}const Hp=K(Lp,[["render",Vp],["__scopeId","data-v-ccc2062c"]]);const Fi=e=>Zt({title:"Share with people",text:"Use the input field to search for users and groups. Select them to share the item.",list:[{text:"Subfolders",headline:!0},{text:"If you share a folder, all of its contents and subfolders will be shared as well."},{text:"Notification",headline:!0},{text:"People you share resources with will be notified via email or in-app notification."},{text:"Incognito",headline:!0},{text:"People you share resources with can not see who else has access."},{text:"“via folder”",headline:!0},{text:"The “via folder” is shown next to a share, if access has already been given via a parent folder. Click on the “via folder” to edit the share on its parent folder."}],readMoreLink:"https://doc.owncloud.com/webui/next/owncloud_web/web_for_users.html#sharing"},e),Kp=e=>Zt({title:"",list:[{text:"Search for service or secondary Account",headline:!0},{text:'To search for service or secondary accounts prefix the username with "a:" (like "a:doe") and for guest accounts prefix the username with "l:" (like "l:doe").'}]},e),Wp=e=>Zt({title:"Add members to this Space",text:"Enter a name to add people or groups as members to this Space.",list:[{text:"Member capabilities",headline:!0},{text:"Members are able to see who has access to this space and access all files in this space. Read or write permissions can be set by assigning a role."},{text:"Space manager capabilities",headline:!0},{text:"Members with the Manager role are able to edit all properties and content of a Space, such as adding or removing members, sharing subfolders with non-members, or creating links to share."}],readMoreLink:"https://doc.owncloud.com/webui/next/owncloud_web/web_for_users.html#sharing"},e),Gp=e=>Zt({title:"Choose how access is granted",list:[{text:"Only invited people can access",headline:!0},{text:'Account and login is required. Only people from the list "Invited people" can access.'},{text:"Everyone with the link",headline:!0},{text:'No login required. Everyone with the link can access. If you share this link with people from the list "Invited people", they need to login so that their individual assigned permissions can take effect. If they are not logged-in, the permissions of the link take effect.'}],readMoreLink:"https://doc.owncloud.com/webui/next/owncloud_web/web_for_users.html#sharing"},e),Yp=e=>Zt({title:"What are indirect links?",text:"Indirect links are links giving access by a parent folder.",list:[{text:"How to edit indirect links",headline:!0},{text:"Indirect links can only be edited in their parent folder. Click on the folder icon below the link to navgate to the parent folder."}],readMoreLink:"https://doc.owncloud.com/webui/next/owncloud_web/web_for_users.html#sharing"},e),Zt=(e,t)=>t.configurationManager.options.contextHelpersReadMore===!1?ts(e,"readMoreLink"):e,Qp=W({name:"DetailsAndEdit",props:{availableRoleOptions:{type:Array,required:!0},canRename:{type:Boolean,default:!1},expirationDate:{type:Object,default:()=>({}),required:!0},isFolderShare:{type:Boolean,default:!1},isModifiable:{type:Boolean,default:!1},isPasswordEnforced:{type:Boolean,default:!1},link:{type:Object,required:!0}},emits:["removePublicLink","updateLink"],setup(){return{space:de("space"),resource:de("resource")}},data(){return{newExpiration:this.link.expiration}},computed:{...ee("runtime/spaces",["spaces"]),currentLinkRole(){return yt.getByBitmask(this.link.permissions,this.isFolderShare)},currentLinkRoleDescription(){return this.currentLinkRole.description(!1)},currentLinkRoleLabel(){return this.currentLinkRole.longLabel!==""?this.$gettext(this.currentLinkRole.longLabel):this.$gettext(this.currentLinkRole.label)},editOptions(){const e=[];return this.canRename&&e.push({id:"rename",title:this.$gettext("Rename"),icon:"pencil",method:this.showRenameModal}),this.link.expiration?(e.push({id:"edit-expiration",title:this.$gettext("Edit expiration date"),method:this.updateLink,icon:"calendar-event",showDatepicker:!0}),this.expirationDate.enforced||e.push({id:"remove-expiration",title:this.$gettext("Remove expiration date"),icon:"calendar",method:()=>this.updateLink({link:{...this.link,expiration:""}})})):e.push({id:"add-expiration",title:this.$gettext("Add expiration date"),method:this.updateLink,icon:"calendar-event",showDatepicker:!0}),this.link.password&&(e.push({id:"edit-password",title:this.$gettext("Edit password"),icon:"lock-password",method:this.showPasswordModal}),this.isPasswordEnforced||e.push({id:"remove-password",title:this.$gettext("Remove password"),icon:"lock-unlock",method:()=>this.updateLink({link:{...this.link,password:""}})})),!this.isPasswordEnforced&&!this.link.password&&!this.isAliasLink&&e.push({id:"add-password",title:this.$gettext("Add password"),icon:"lock-password",method:this.showPasswordModal}),e},deleteOption(){return{id:"delete",title:this.$gettext("Delete link"),method:this.deleteLink,icon:"delete-bin-5",variation:"danger"}},viaRouterParams(){const e=this.space||this.spaces.find(t=>t.id===this.resource.storageId);return e?be("files-spaces-generic",Ee(e,{path:this.link.path,fileId:this.link.file.source})):{}},localExpirationDate(){return Ss(Ce.fromISO(this.link.expiration).endOf("day"),this.$language.current)},expirationDateRelative(){return Ns(Ce.fromISO(this.link.expiration).endOf("day"),this.$language.current)},expirationDateTooltip(){return this.$gettext("Expires %{timeToExpiry} (%{expiryDate})",{timeToExpiry:this.expirationDateRelative,expiryDate:this.localExpirationDate},!0)},viaTooltip(){return this.link.indirect?this.$gettextInterpolate(this.$gettext("Navigate to the parent (%{folderName})"),{folderName:at(this.link.path)},!0):null},passwortProtectionTooltip(){return this.$gettext("This link is password-protected")},isAliasLink(){return[As,dn].includes(this.currentLinkRole)}},watch:{newExpiration(e){this.updateLink({link:{...this.link,expiration:e}})}},methods:{...pe(["createModal","hideModal","setModalInputErrorMessage","setModalConfirmButtonDisabled"]),isSelectedRole(e){return this.link.permissions===e.bitmask(!1)},updateLink({link:e,dropRef:t=void 0,onSuccess:s=()=>{}}){e=e||this.link,t=t||this.$refs.editPublicLinkDropdown,this.$emit("updateLink",{link:e,onSuccess:s}),t.hide()},deleteLink(){this.$emit("removePublicLink",{link:this.link}),this.$refs.editPublicLinkDropdown.hide()},checkInputValue(e){if(e.length>255)return this.setModalInputErrorMessage(this.$gettext("Link name cannot exceed 255 characters"));this.setModalInputErrorMessage(null)},showRenameModal(){const e={variation:"passive",title:this.$gettext("Edit name"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Save"),hasInput:!0,inputValue:this.link.name,inputLabel:this.$gettext("Link name"),onCancel:this.hideModal,onInput:this.checkInputValue,onConfirm:t=>this.updateLink({link:{...this.link,name:t},onSuccess:()=>{this.hideModal()}})};this.createModal(e)},checkPassword(e){return e===""?(this.setModalConfirmButtonDisabled(!0),this.setModalInputErrorMessage(this.$gettext("Password can't be empty"))):e.length>72?(this.setModalConfirmButtonDisabled(!0),this.setModalInputErrorMessage(this.$gettext("Password can't exceed 72 characters"))):(this.setModalConfirmButtonDisabled(!1),this.setModalInputErrorMessage(null))},showPasswordModal(){const e={variation:"passive",title:this.link.password?this.$gettext("Edit password"):this.$gettext("Add password"),cancelText:this.$gettext("Cancel"),confirmText:this.link.password?this.$gettext("Apply"):this.$gettext("Set"),hasInput:!0,confirmDisabled:!0,inputLabel:this.$gettext("Password"),inputType:"password",onCancel:this.hideModal,onInput:t=>this.checkPassword(t),onConfirm:t=>{this.updateLink({link:{...this.link,password:t},onSuccess:()=>{this.hideModal()}})}};this.createModal(e)}}});const Zp={class:"link-details oc-flex oc-flex-between oc-flex-middle"},Jp={key:0},Xp=["textContent"],eh={class:"oc-flex oc-flex-middle"},th=["textContent"],sh={class:"oc-text-small"},ih={class:"oc-flex"},ah={key:1,class:"oc-my-rm"},nh=["textContent"],oh={key:3},rh=["textContent"],lh=["textContent"],ch={class:"oc-rounded oc-menu-item-hover"},dh=["textContent"];function uh(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-list"),u=y("oc-drop"),p=y("oc-datepicker"),m=ce("oc-tooltip");return d(),k("div",Zp,[e.isModifiable?(d(),k("div",Jp,[w(c,{id:`edit-public-link-role-dropdown-toggle-${e.link.id}`,appearance:"raw",class:"edit-public-link-role-dropdown-toggle oc-text-left","gap-size":"none"},{default:A(()=>[C("span",{class:"link-current-role",textContent:D(e.currentLinkRoleLabel)},null,8,Xp),b(),w(a,{name:"arrow-down-s"})]),_:1},8,["id"]),b(),w(u,{ref:"editPublicLinkRoleDropdown",class:"edit-public-link-role-dropdown","drop-id":"edit-public-link-role-dropdown",toggle:`#edit-public-link-role-dropdown-toggle-${e.link.id}`,"padding-size":"small",offset:"0",mode:"click"},{default:A(()=>[w(l,{class:"role-dropdown-list"},{default:A(()=>[(d(!0),k(X,null,fe(e.availableRoleOptions,h=>(d(),k("li",{key:`role-dropdown-${h.key}`},[w(c,{id:`files-role-${h.name}`,class:oe([{selected:e.isSelectedRole(h),"oc-background-primary-gradient":e.isSelectedRole(h)},"oc-p-s"]),appearance:e.isSelectedRole(h)?"raw-inverse":"raw",variation:e.isSelectedRole(h)?"primary":"passive","justify-content":"space-between",onClick:g=>e.updateLink({link:{...e.link,permissions:h.bitmask(!1)},dropRef:e.$refs.editPublicLinkRoleDropdown})},{default:A(()=>[C("span",eh,[w(a,{name:h.icon,class:"oc-pl-s oc-pr-m",variation:"inherit"},null,8,["name"]),b(),C("span",null,[C("span",{class:"oc-text-bold oc-display-block oc-width-1-1",textContent:D(e.$gettext(h.label))},null,8,th),b(),C("span",sh,D(e.$gettext(h.description(!1))),1)])]),b(),C("span",ih,[e.isSelectedRole(h)?(d(),$(a,{key:0,name:"check",variation:"inherit"})):I("",!0)])]),_:2},1032,["id","class","appearance","variation","onClick"])]))),128))]),_:1})]),_:1},8,["toggle"])])):(d(),k("p",ah,[V(C("span",{class:"link-current-role",textContent:D(e.$gettext(e.currentLinkRoleLabel))},null,8,nh),[[m,e.$gettext(e.currentLinkRoleDescription)]])])),b(),C("div",{class:oe([{"oc-pr-s":!e.isModifiable},"details-buttons"])},[e.link.indirect?V((d(),$(c,{key:0,"area-label":e.viaTooltip,type:"router-link",class:"oc-files-file-link-via",appearance:"raw",to:e.viaRouterParams},{default:A(()=>[w(a,{name:"folder-shared","fill-type":"line"})]),_:1},8,["area-label","to"])),[[m,e.viaTooltip]]):I("",!0),b(),e.link.password?V((d(),$(a,{key:1,name:"lock-password","fill-type":"line","aria-label":e.passwortProtectionTooltip},null,8,["aria-label"])),[[m,e.passwortProtectionTooltip]]):I("",!0),b(),e.link.expiration?V((d(),$(a,{key:2,class:"oc-files-public-link-expires oc-ml-xs","data-testid":`files-link-id-${e.link.id}-expiration-date`,"aria-label":e.expirationDateTooltip,name:"calendar-event","fill-type":"line"},null,8,["data-testid","aria-label"])),[[m,e.expirationDateTooltip]]):I("",!0),b(),e.isModifiable?(d(),k("div",oh,[w(c,{id:`edit-public-link-dropdown-toggl-${e.link.id}`,appearance:"raw",class:"edit-drop-trigger","data-testid":`files-link-id-${e.link.id}-btn-edit`},{default:A(()=>[w(a,{name:"more-2"})]),_:1},8,["id","data-testid"]),b(),w(u,{ref:"editPublicLinkDropdown","drop-id":"edit-public-link-dropdown",toggle:`#edit-public-link-dropdown-toggl-${e.link.id}`,"padding-size":"small",mode:"click"},{default:A(()=>[w(l,{class:"edit-public-link-dropdown-menu oc-files-context-actions-border oc-pb-s"},{default:A(()=>[(d(!0),k(X,null,fe(e.editOptions,(h,g)=>(d(),k("li",{key:`public-link-edit-option-${g}`,class:"oc-rounded oc-menu-item-hover"},[h.showDatepicker?(d(),$(p,{key:0,modelValue:e.newExpiration,"onUpdate:modelValue":t[0]||(t[0]=f=>e.newExpiration=f),class:"link-expiry-picker","min-date":e.expirationDate.min,"max-date":e.expirationDate.max,locale:e.$language.current,"is-required":e.expirationDate.enforce},{default:A(({togglePopover:f})=>[w(c,{"data-testid":`files-link-id-${e.link.id}-edit-${h.id}`,appearance:"raw",class:"oc-p-s action-menu-item",variation:h.variation,onClick:f},{default:A(()=>[w(a,{name:h.icon,"fill-type":"line",size:"medium"},null,8,["name"]),b(),C("span",{textContent:D(h.title)},null,8,rh)]),_:2},1032,["data-testid","variation","onClick"])]),_:2},1032,["modelValue","min-date","max-date","locale","is-required"])):(d(),$(c,{key:1,appearance:"raw",class:"oc-p-s action-menu-item","data-testid":`files-link-id-${e.link.id}-edit-${h.id}`,onClick:h.method},{default:A(()=>[w(a,{name:h.icon,"fill-type":"line",size:"medium"},null,8,["name"]),b(),C("span",{textContent:D(h.title)},null,8,lh)]),_:2},1032,["data-testid","onClick"]))]))),128))]),_:1}),b(),w(l,{class:"edit-public-link-dropdown-menu oc-pt-s"},{default:A(()=>[C("li",ch,[w(c,{appearance:"raw",class:"oc-p-s action-menu-item","data-testid":`files-link-id-${e.link.id}-edit-${e.deleteOption.id}`,onClick:e.deleteOption.method},{default:A(()=>[w(a,{name:e.deleteOption.icon,"fill-type":"line",size:"medium"},null,8,["name"]),b(),C("span",{textContent:D(e.deleteOption.title)},null,8,dh)]),_:1},8,["data-testid","onClick"])])]),_:1})]),_:1},8,["toggle"])])):I("",!0)],2)])}const ph=K(Qp,[["render",uh],["__scopeId","data-v-1ce9cd0a"]]),hh=W({name:"NameAndCopy",props:{link:{type:Object,required:!0}},setup(e){const{$gettext:t}=J(),s=q(),{copy:i,copied:n,isSupported:o}=rs({legacy:!0,copiedDuring:550});return{copied:n,copyLinkToClipboard:()=>{i(e.link.url),s.dispatch("showMessage",{title:e.link.quicklink?t("The link has been copied to your clipboard."):t('The link "%{linkName}" has been copied to your clipboard.',{linkName:e.link.name})})},isClipboardCopySupported:o}},computed:{linkName(){return this.link.name},copyBtnLabel(){return this.$gettext("Copy")},copyBtnHint(){return this.$gettext("Copy link to clipboard")},copiedLabel(){return this.$gettext("Copied")}}});const mh={class:"oc-mb-s oc-width-1-1"},fh=["textContent"],gh={class:"oc-flex oc-flex-middle oc-flex-between oc-width-1-1 oc-p-xs link-name-container"},bh={key:0,class:"oc-flex oc-flex-middle oc-text-truncate"},yh=["textContent"],vh={key:1,class:"oc-flex oc-flex-middle oc-text-truncate"},Sh=["textContent"];function kh(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("oc-tooltip");return d(),k("div",mh,[C("h4",{class:"oc-text-truncate oc-text-normal oc-files-file-link-name oc-m-rm",textContent:D(e.linkName)},null,8,fh),b(),C("div",gh,[e.copied?(d(),k("div",bh,[w(a,{variation:"success",name:"checkbox-circle"}),b(),C("p",{class:"oc-files-file-link-url url-copied oc-ml-s oc-my-rm",textContent:D(e.copiedLabel)},null,8,yh)])):(d(),k("div",vh,[w(a,{name:"link","fill-type":"line"}),b(),V(C("p",{class:"oc-files-file-link-url oc-ml-s oc-text-truncate oc-my-rm",textContent:D(e.link.url)},null,8,Sh),[[l,e.link.url]])])),b(),e.isClipboardCopySupported?V((d(),$(c,{key:2,"aria-label":e.copyBtnHint,size:"small",class:"oc-files-public-link-copy-url oc-ml-xs",onClick:e.copyLinkToClipboard,textContent:D(e.copyBtnLabel)},null,8,["aria-label","onClick","textContent"])),[[l,e.copyBtnHint]]):I("",!0)])])}const wh=K(hh,[["render",kh],["__scopeId","data-v-c9771256"]]),Ch=W({name:"CreateQuickLink",props:{expirationDate:{type:Object,default:()=>{},required:!0}},emits:["createPublicLink"],setup(e,{emit:t}){const{can:s}=Nt(),{$gettext:i}=J(),n=_(()=>s("create-all","PublicLink")),o=de("resource"),a=Ye(),c=Ui(),l=qi(),u=Ps(),p=En();return{createQuickLink:()=>{const h=r(n)?r(p)||is.name:As.name,g={link:{name:i("Link"),permissions:yt.getByName(h,r(o).isFolder,r(c),r(l),r(u)).bitmask(r(a)).toString(),expiration:e.expirationDate.enforced?e.expirationDate.default:null,quicklink:!0,password:!1}};t("createPublicLink",g)}}}}),Fh={class:"oc-mb-s oc-width-1-1 oc-mb-l"},_h=["textContent"],Ah={class:"oc-flex oc-flex-middle oc-flex-between oc-width-1-1 oc-p-xs link-name-container"},$h={class:"oc-flex oc-flex-middle oc-text-truncate"},Dh=["textContent"],Eh=["textContent"];function Th(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=ce("oc-tooltip");return d(),k("div",Fh,[C("h4",{class:"oc-text-truncate oc-text-normal oc-files-file-link-name oc-my-rm",textContent:D(e.$gettext("Link"))},null,8,_h),b(),C("div",Ah,[C("div",$h,[w(a,{name:"link","fill-type":"line"}),b(),C("p",{class:"oc-files-file-link-url oc-ml-s oc-text-truncate oc-my-rm",textContent:D(e.$gettext("No link"))},null,8,Dh)]),b(),V((d(),$(c,{class:"oc-ml-s",size:"small","aria-label":e.$gettext("Create link"),onClick:e.createQuickLink},{default:A(()=>[C("span",{textContent:D(e.$gettext("Create link"))},null,8,Eh)]),_:1},8,["aria-label","onClick"])),[[l,e.$gettext("Create link")]])])])}const Ih=K(Ch,[["render",Th]]),Rh=W({name:"FileLinks",components:{CreateQuickLink:Ih,DetailsAndEdit:ph,NameAndCopy:wh},setup(){const e=q(),{can:t}=Nt(),s=Ye(),i=de("space"),n=de("resource"),o=!e.getters.configuration.options.sidebar.shares.showAllOnLoad,a=Z(o),c=Z(o),{outgoingLinks:l}=Xs(),u=_(()=>r(l).filter(f=>!f.indirect&&!f.quicklink).sort((f,v)=>v.stime-f.stime).map(f=>({...f,key:"direct-link-"+f.id}))),p=_(()=>r(l).filter(f=>f.indirect).sort((f,v)=>v.stime-f.stime).map(f=>({...f,key:"indirect-link-"+f.id}))),m=_(()=>t("create-all","PublicLink")),h=_(()=>r(n).isReceivedShare()&&!r(s)||St(r(i))&&!r(s)||he(r(n))&&r(n).disabled?!1:r(n).canShare({user:e.getters.user})),g=({permissions:f})=>r(h)&&(t("create-all","PublicLink")||f===Fe.internal.bit);return{space:i,resource:n,incomingParentShare:de("incomingParentShare"),hasSpaces:jt(),hasShareJail:we(),hasPublicLinkEditing:Ui(),hasPublicLinkContribute:qi(),hasPublicLinkAliasSupport:Ps(),indirectLinkListCollapsed:c,linkListCollapsed:a,outgoingLinks:l,directLinks:u,indirectLinks:p,canCreatePublicLinks:m,configurationManager:Re,canCreateLinks:h,canEditLink:g}},computed:{...ee(["capabilities","configuration"]),collapseButtonTitle(){return this.linkListCollapsed?this.$gettext("Show all"):this.$gettext("Show less")},collapseButtonIcon(){return this.linkListCollapsed?"arrow-down-s":"arrow-up-s"},indirectCollapseButtonTitle(){return this.indirectLinkListCollapsed?this.$gettext("Show"):this.$gettext("Hide")},indirectCollapseButtonIcon(){return this.indirectLinkListCollapsed?"arrow-down-s":"arrow-up-s"},quicklink(){return this.outgoingLinks.find(e=>e.quicklink===!0&&!e.indirect)},expirationDate(){const e=this.capabilities.files_sharing.public.expire_date;let t=null,s=null;if(e.days){const i=parseInt(e.days);t=Ce.now().setLocale($t(this.$language.current)).plus({days:i}).toJSDate()}if(e.enforced){const i=parseInt(e.days);s=Ce.now().setLocale($t(this.$language.current)).plus({days:i}).toJSDate()}return{enforced:e.enforced,default:t,min:Ce.now().setLocale($t(this.$language.current)).toJSDate(),max:s}},passwordEnforced(){var e;return((e=this.capabilities.files_sharing.public.password)==null?void 0:e.enforced_for)||{read_only:!1,upload_only:!1,read_write:!1}},helpersEnabled(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.contextHelpers},viaLinkHelp(){return Gp({configurationManager:this.configurationManager})},indirectLinkHelp(){return Yp({configurationManager:this.configurationManager})},noResharePermsMessage(){return this.$gettext("You do not have permission to create links")},linksHeading(){return this.hasSpaces?this.$gettext("Share via link"):this.$gettext("Share via public link")},indirectLinksHeading(){const e=this.$gettext("Indirect links (%{ count })");return this.$gettextInterpolate(e,{count:this.indirectLinks.length})},displayLinks(){return this.directLinks.length>3&&this.linkListCollapsed?this.directLinks.slice(0,3):this.directLinks},displayIndirectLinks(){return this.indirectLinkListCollapsed?[]:this.indirectLinks},resourceIsSpace(){return this.resource.type==="space"},currentStorageId(){return this.resourceIsSpace?this.resource.id:this.space?this.space.id:null}},methods:{...pe("Files",["addLink","updateLink","removeLink"]),...pe(["showMessage","createModal","hideModal"]),...xe("Files",["REMOVE_FILES"]),toggleLinkListCollapsed(){this.linkListCollapsed=!this.linkListCollapsed},toggleIndirectLinkListCollapsed(){this.indirectLinkListCollapsed=!this.indirectLinkListCollapsed},isPasswordEnforcedFor(e){const t=e.indirect||this.resource.isFolder,s=yt.getByBitmask(parseInt(e.permissions),t);return this.passwordEnforced.read_only===!0&&s.name===is.name||this.passwordEnforced.upload_only===!0&&s.name===Ds.name||this.passwordEnforced.read_write===!0&&s.name===un.name||this.passwordEnforced.read_write_delete===!0&&s.name===pn.name},addNewLink(){this.checkLinkToCreate({link:{name:this.$gettext("Link"),permissions:this.canCreatePublicLinks?1:0,expiration:this.expirationDate.default,password:!1}})},checkLinkToCreate({link:e,onError:t=()=>{}}){const s=this.getParamsForLink(e);this.isPasswordEnforcedFor(e)?ws({...this.$language,store:this.$store},i=>{this.createLink({params:{...s,password:i},onError:t})}):this.createLink({params:s,onError:t})},checkLinkToUpdate({link:e,onSuccess:t=()=>{}}){const s=this.getParamsForLink(e);!e.password&&this.isPasswordEnforcedFor(e)?ws({...this.$language,store:this.$store},i=>{this.updatePublicLink({params:{...s,password:i},onSuccess:t})}):this.updatePublicLink({params:s,onSuccess:t})},getParamsForLink(e){let t="";e.expiration&&(t=(typeof e.expiration=="string"?Ce.fromISO(e.expiration):Ce.fromJSDate(e.expiration)).setLocale($t(this.$language.current)).endOf("day").toFormat("yyyy-MM-dd'T'HH:mm:ssZZZ"));let s;switch(e.password){case!1:s=void 0;break;case"":s="";break;case!0:s=void 0;break;default:s=e.password;break}return{expireDate:t,password:s,id:e.id,permissions:e.permissions.toString(),quicklink:e.quicklink,name:e.name,spaceRef:this.resource.fileId,...this.currentStorageId&&{storageId:this.currentStorageId}}},async createLink({params:e,onError:t=s=>{}}){let s=this.resource.path;this.hasShareJail&&s==="/"&&(s=`/${this.resource.name}`);try{await this.addLink({path:s,client:this.$client,storageId:this.resource.fileId||this.resource.id,params:e})}catch(i){t(i),console.error(i),this.showMessage({title:this.$gettext("Failed to create link"),status:"danger"});return}this.showMessage({title:this.$gettext("Link was created successfully")})},async updatePublicLink({params:e,onSuccess:t=()=>{},onError:s=i=>{}}){try{await this.updateLink({id:e.id,client:this.$client,params:e}).then(t)}catch(i){s(i),console.error(i),this.showMessage({title:this.$gettext("Failed to update link"),status:"danger"});return}this.showMessage({title:this.$gettext("Link was updated successfully")})},deleteLinkConfirmation({link:e}){const t={variation:"danger",title:this.$gettext("Delete link"),message:this.$gettext("Are you sure you want to delete this link? Recreating the same link again is not possible."),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Delete"),onCancel:this.hideModal,onConfirm:()=>this.deleteLink({client:this.$client,share:e,resource:this.resource})};this.createModal(t)},async deleteLink({client:e,share:t,resource:s}){this.hideModal();let i=s.path;this.hasShareJail&&i==="/"&&(i=`/${s.name}`);let n=this.outgoingLinks.length===1?this.outgoingLinks[0].id:void 0;const o=this.outgoingLinks.filter(a=>!a.indirect).length===1;try{await this.removeLink({client:e,share:t,path:i,loadIndicators:o}),this.showMessage({title:this.$gettext("Link was deleted successfully")}),n&&ue(this.$router,"files-shares-via-link")&&(this.resourceIsSpace&&(n=this.resource.id.toString()),this.REMOVE_FILES([{id:n}]))}catch(a){console.error(a),this.showMessage({title:this.$gettext("Failed to delete link"),status:"danger"})}},getAvailableRoleOptions(e){return this.incomingParentShare&&this.canCreateLinks?yt.filterByBitmask(this.incomingParentShare.permissions,this.resource.isFolder,this.hasPublicLinkEditing,this.hasPublicLinkContribute,this.hasPublicLinkAliasSupport,!!e.password,this.canCreatePublicLinks):yt.list(this.resource.isFolder,this.hasPublicLinkEditing,this.hasPublicLinkContribute,this.hasPublicLinkAliasSupport,!!e.password,this.canCreatePublicLinks)}}});const Lh={id:"oc-files-file-link",class:"oc-position-relative"},Ph={class:"oc-flex"},xh=["textContent"],jh=["textContent"],Nh={key:1,class:"oc-mt-m"},Mh=C("hr",{class:"oc-my-m"},null,-1),zh=["textContent"],Oh=["data-testid"],Bh={key:3,class:"oc-flex oc-flex-center"},Uh=["textContent"],qh={key:4,id:"indirect-link-list"},Vh=C("hr",{class:"oc-my-m"},null,-1),Hh={class:"oc-flex"},Kh={class:"oc-text-bold oc-m-rm oc-text-medium"},Wh=["textContent"],Gh=["data-testid"],Yh={class:"oc-flex oc-flex-center"},Qh=["textContent"];function Zh(e,t,s,i,n,o){const a=y("oc-contextual-helper"),c=y("name-and-copy"),l=y("create-quick-link"),u=y("details-and-edit"),p=y("oc-button"),m=y("oc-list"),h=y("oc-icon");return d(),k("div",Lh,[C("div",Ph,[C("h3",{class:"oc-text-bold oc-text-medium oc-m-rm",textContent:D(e.linksHeading)},null,8,xh),b(),e.helpersEnabled?(d(),$(a,Be({key:0,class:"oc-pl-xs"},e.viaLinkHelp),null,16)):I("",!0)]),b(),e.canCreateLinks?I("",!0):(d(),k("p",{key:0,"data-testid":"files-links-no-reshare-permissions-message",class:"oc-mt-m",textContent:D(e.noResharePermsMessage)},null,8,jh)),b(),e.quicklink||e.canCreateLinks?(d(),k("div",Nh,[e.quicklink?(d(),$(c,{key:0,link:e.quicklink},null,8,["link"])):e.canCreateLinks?(d(),$(l,{key:1,"expiration-date":e.expirationDate,onCreatePublicLink:e.checkLinkToCreate},null,8,["expiration-date","onCreatePublicLink"])):I("",!0),b(),e.quicklink?(d(),$(u,{key:2,"available-role-options":e.getAvailableRoleOptions(e.quicklink),"can-rename":!1,"expiration-date":e.expirationDate,"is-folder-share":e.resource.isFolder,"is-modifiable":e.canEditLink(e.quicklink),"is-password-enforced":e.isPasswordEnforcedFor(e.quicklink),link:e.quicklink,onUpdateLink:e.checkLinkToUpdate,onRemovePublicLink:e.deleteLinkConfirmation},null,8,["available-role-options","expiration-date","is-folder-share","is-modifiable","is-password-enforced","link","onUpdateLink","onRemovePublicLink"])):I("",!0),b(),Mh,b(),e.canCreateLinks?(d(),$(p,{key:3,id:"files-file-link-add",variation:"primary",appearance:"raw","data-testid":"files-link-add-btn",onClick:e.addNewLink},{default:A(()=>[C("span",{textContent:D(e.$gettext("Add link"))},null,8,zh)]),_:1},8,["onClick"])):I("",!0)])):I("",!0),b(),e.directLinks.length?(d(),$(m,{key:2,class:"oc-overflow-hidden oc-my-m"},{default:A(()=>[(d(!0),k(X,null,fe(e.displayLinks,g=>(d(),k("li",{key:g.key,class:"oc-py-s","data-testid":`files-link-id-${g.id}`},[w(c,{link:g},null,8,["link"]),b(),w(u,{"available-role-options":e.getAvailableRoleOptions(g),"can-rename":!0,"expiration-date":e.expirationDate,"is-folder-share":e.resource.isFolder,"is-modifiable":e.canEditLink(g),"is-password-enforced":e.isPasswordEnforcedFor(g),link:g,onUpdateLink:e.checkLinkToUpdate,onRemovePublicLink:e.deleteLinkConfirmation},null,8,["available-role-options","expiration-date","is-folder-share","is-modifiable","is-password-enforced","link","onUpdateLink","onRemovePublicLink"])],8,Oh))),128))]),_:1})):I("",!0),b(),e.directLinks.length>3?(d(),k("div",Bh,[w(p,{appearance:"raw",onClick:e.toggleLinkListCollapsed},{default:A(()=>[C("span",{textContent:D(e.collapseButtonTitle)},null,8,Uh),b(),w(h,{name:e.collapseButtonIcon,"fill-type":"line"},null,8,["name"])]),_:1},8,["onClick"])])):I("",!0),b(),e.indirectLinks.length?(d(),k("div",qh,[Vh,b(),C("div",Hh,[C("h3",Kh,[C("span",{textContent:D(e.indirectLinksHeading)},null,8,Wh)]),b(),e.helpersEnabled?(d(),$(a,Be({key:0,class:"oc-pl-xs"},e.indirectLinkHelp),null,16)):I("",!0)]),b(),e.indirectLinkListCollapsed?I("",!0):(d(),$(m,{key:0,class:"oc-overflow-hidden oc-my-m"},{default:A(()=>[(d(!0),k(X,null,fe(e.displayIndirectLinks,g=>(d(),k("li",{key:g.key,class:"oc-py-s","data-testid":`files-link-id-${g.id}`},[w(c,{link:g},null,8,["link"]),b(),w(u,{"available-role-options":e.getAvailableRoleOptions(g),"expiration-date":e.expirationDate,"is-folder-share":!0,"is-modifiable":!1,link:g},null,8,["available-role-options","expiration-date","link"])],8,Gh))),128))]),_:1})),b(),C("div",Yh,[w(p,{id:"indirect-link-list-toggle",appearance:"raw",onClick:e.toggleIndirectLinkListCollapsed},{default:A(()=>[C("span",{textContent:D(e.indirectCollapseButtonTitle)},null,8,Qh),b(),w(h,{name:e.indirectCollapseButtonIcon,"fill-type":"line"},null,8,["name"])]),_:1},8,["onClick"])])])):I("",!0)])}const Jh=K(Rh,[["render",Zh]]);function _i(e){const t=[];let s=0,i=-1,n=0,o;for(;s<e.length;){o=e.charAt(s);const a=!n&&o==="."||o>="0"&&o<="9";a!==n&&(i++,t[i]="",n=a),t[i]+=o,s++}return t}function Xh(e,t){const s=_i(e),i=_i(t);let n,o,a;for(n=0;s[n]&&i[n];n++)if(s[n]!==i[n])return o=Number(s[n]),a=Number(i[n]),o==s[n]&&a==i[n]?o-a:s[n].localeCompare(i[n],"en");return s.length-i.length}const Ai={naturalSortCompare:Xh},em={name:"AutocompleteItem",props:{item:{type:Object,required:!0}},data(){return{loading:!1}},computed:{shareType(){return B.getByValue(this.item.value.shareType)},isUser(){return this.shareType===B.user},isSpaceUser(){return this.shareType===B.spaceUser},isGuest(){return this.shareType===B.guest},isGroup(){return this.shareType===B.group},isSpaceGroup(){return this.shareType===B.spaceGroup},collaboratorClass(){return`files-collaborators-search-${this.shareType.key}`}}};const tm=["data-testid"],sm={class:"files-collaborators-autocomplete-user-text oc-text-truncate"},im=["textContent"],am=["textContent"],nm=["textContent"];function om(e,t,s,i,n,o){const a=y("avatar-image"),c=y("oc-icon");return d(),k("div",{"data-testid":`recipient-autocomplete-item-${s.item.label}`,class:oe(["oc-flex oc-flex-middle oc-py-xs",o.collaboratorClass])},[o.isUser||o.isSpaceUser?(d(),$(a,{key:0,class:"oc-mr-s",width:36,userid:s.item.value.shareWith,"user-name":s.item.label},null,8,["userid","user-name"])):o.isGuest?(d(),$(c,{key:"avatar-guest",class:"oc-mr-s files-recipient-suggestion-avatar",name:"global",size:"large","accessible-label":e.$gettext("Guest")},null,8,["accessible-label"])):o.isGroup||o.isSpaceGroup?(d(),$(c,{key:"avatar-group",class:"oc-mr-s files-recipient-suggestion-avatar",name:"group",size:"large","accessible-label":e.$gettext("Group")},null,8,["accessible-label"])):(d(),$(c,{key:"avatar-generic-person",class:"oc-mr-s files-recipient-suggestion-avatar",name:"person",size:"large","accessible-label":e.$gettext("User")},null,8,["accessible-label"])),b(),C("div",sm,[C("span",{class:"files-collaborators-autocomplete-username",textContent:D(s.item.label)},null,8,im),b(),s.item.value.shareWithAdditionalInfo?(d(),k("span",{key:0,class:"files-collaborators-autocomplete-additional-info",textContent:D(`(${s.item.value.shareWithAdditionalInfo})`)},null,8,am)):I("",!0),b(),C("div",{class:"files-collaborators-autocomplete-share-type",textContent:D(e.$gettext(o.shareType.label))},null,8,nm)])],10,tm)}const rm=K(em,[["render",om]]),lm=W({name:"RoleItem",props:{role:{type:Object,required:!0},allowSharePermission:{type:Boolean,required:!0}}});const cm=["id"],dm=["textContent"],um=["textContent"];function pm(e,t,s,i,n,o){return d(),k("span",{id:`files-role-${e.role.name}`,class:"roles-select-role-item"},[C("span",{class:"oc-text-bold oc-display-block oc-width-1-1",textContent:D(e.$gettext(e.role.label))},null,8,dm),b(),C("span",{class:"oc-m-rm oc-text-small oc-display-block",textContent:D(e.$gettext(e.role.description(e.allowSharePermission)))},null,8,um)],8,cm)}const hm=K(lm,[["render",pm],["__scopeId","data-v-15f41c06"]]),mm=W({name:"RoleDropdown",components:{RoleItem:hm},props:{existingRole:{type:Object,required:!1,default:void 0},existingPermissions:{type:Array,required:!1,default:()=>[]},domSelector:{type:String,required:!1,default:void 0},allowSharePermission:{type:Boolean,required:!0},mode:{type:String,required:!1,default:"create"}},emits:["optionChange"],setup(){const e=q();return{resource:de("resource"),incomingParentShare:de("incomingParentShare"),hasRoleDenyAccess:Vi(e),hasRoleCustomPermissions:Hi(e),resharingDefault:xs(e)}},data(){return{selectedRole:null,customPermissions:[]}},computed:{roleButtonId(){return this.domSelector?`files-collaborators-role-button-${this.domSelector}-${ut()}`:"files-collaborators-role-button-new"},rolesListAriaLabel(){return this.$gettext("Select role for the invitation")},inviteLabel(){return this.selectedRole.hasCustomPermissions?this.$gettext("Custom permissions"):this.selectedRole.permissions().includes(Fe.denied)?this.$gettext("Deny access"):this.$gettext(this.selectedRole.label)||""},customPermissionsRole(){return gt.custom(this.resource.isFolder)},resourceIsSharable(){return this.allowSharePermission&&this.resource.canShare()},availableRoles(){if(this.resourceIsSpace)return bs.list();if(this.incomingParentShare&&this.resourceIsSharable)return gt.filterByBitmask(this.incomingParentShare.permissions,this.resource.isFolder,this.allowSharePermission,this.hasRoleCustomPermissions);const e=this.resource.canDeny()&&this.hasRoleDenyAccess;return gt.list(this.resource.isFolder,this.hasRoleCustomPermissions,e)},availablePermissions(){return this.incomingParentShare&&this.resourceIsSharable?Fe.bitmaskToPermissions(this.incomingParentShare.permissions):this.customPermissionsRole.permissions(this.allowSharePermission)},resourceIsSpace(){return this.resource.type==="space"},defaultCustomPermissions(){return[...this.selectedRole.permissions(this.allowSharePermission&&this.resharingDefault)]}},created(){this.applyRoleAndPermissions()},beforeUnmount(){window.removeEventListener("keydown",this.cycleRoles)},mounted(){window.addEventListener("keydown",this.cycleRoles)},methods:{applyRoleAndPermissions(){if(this.existingRole)this.selectedRole=this.existingRole;else if(this.resourceIsSpace)this.selectedRole=bs.list()[0];else{const e=this.resource.canDeny()&&this.hasRoleDenyAccess;this.selectedRole=gt.list(this.resource.isFolder,this.hasRoleCustomPermissions,e)[0]}this.customPermissions=this.selectedRole.hasCustomPermissions?this.existingPermissions:this.defaultCustomPermissions},publishChange(){this.$emit("optionChange",{role:this.selectedRole,permissions:this.customPermissions})},selectRole(e){if(e.hasCustomPermissions){this.$refs.customPermissionsDrop.show();return}this.selectedRole=e,this.customPermissions=e.permissions(this.allowSharePermission&&this.resharingDefault),this.publishChange()},isSelectedRole(e){return this.selectedRole.name===e.name},isPermissionDisabled(e){return e.bit===Fe.read.bit},confirmCustomPermissions(){this.$refs.customPermissionsDrop.hide();const e=Fe.permissionsToBitmask(this.customPermissions);this.selectedRole=gt.getByBitmask(e,this.resource.isFolder,this.allowSharePermission&&this.resharingDefault),this.publishChange()},cancelCustomPermissions(){this.customPermissions=this.existingPermissions.length?this.existingPermissions:this.defaultCustomPermissions,this.$refs.customPermissionsDrop.hide(),this.$refs.rolesDrop.show()},cycleRoles(e){if(!ss(this.$refs.rolesDrop,"tippy.state.isShown",!1))return;const{keyCode:t}=e,s=t===38,i=t===40;if(!s&&!i)return;const n=this.$refs.roleSelect||[];if(n.length<=1)return;const o=n.find(l=>l.$el===document.activeElement)||n.find(l=>l.$el.classList.contains("selected"))||n[0],a=n.indexOf(o),c=l=>n[l].$el.focus();if(s&&a-1<0){c(n.length-1);return}if(i&&a+1>=n.length){c(0);return}c(a+(s?-1:1))}}});const fm={key:0,class:"oc-flex oc-flex-middle"},gm={key:0},bm=["textContent"],ym={key:1},vm=["textContent"],Sm=["textContent"],km={class:"oc-flex oc-flex-middle"},wm={class:"oc-flex"},Cm=["textContent"],Fm={class:"files-recipient-custom-permissions-drop-cancel-confirm-btns oc-px-m oc-py-s oc-mt-m oc-rounded-bottom"};function _m(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("role-item"),u=y("oc-list"),p=y("oc-drop"),m=y("oc-checkbox");return e.selectedRole?(d(),k("span",fm,[e.availableRoles.length===1?(d(),k("span",gm,[e.existingRole?(d(),k("span",ym,D(e.$gettext(e.selectedRole.label)),1)):(d(),k("span",{key:0,textContent:D(e.inviteLabel)},null,8,bm))])):(d(),$(c,{key:1,id:e.roleButtonId,class:"files-recipient-role-select-btn",appearance:"raw","gap-size":"none","aria-label":e.mode==="create"?e.$gettext("Select permission"):e.$gettext("Edit permission")},{default:A(()=>[e.existingRole?(d(),k("span",{key:1,class:"oc-text-truncate",textContent:D(e.$gettext(e.selectedRole.label))},null,8,Sm)):(d(),k("span",{key:0,class:"oc-text-truncate",textContent:D(e.inviteLabel)},null,8,vm)),b(),w(a,{name:"arrow-down-s"})]),_:1},8,["id","aria-label"])),b(),e.availableRoles.length>1?(d(),$(p,{key:2,ref:"rolesDrop",toggle:"#"+e.roleButtonId,mode:"click","padding-size":"small",class:"files-recipient-role-drop",offset:"0","close-on-click":""},{default:A(()=>[w(u,{class:"files-recipient-role-drop-list","aria-label":e.rolesListAriaLabel},{default:A(()=>[(d(!0),k(X,null,fe(e.availableRoles,h=>(d(),k("li",{key:h.key},[w(c,{id:`files-recipient-role-drop-btn-${h.name}`,ref_for:!0,ref:"roleSelect","justify-content":"space-between",class:oe(["files-recipient-role-drop-btn oc-p-s",{"oc-background-primary-gradient":e.isSelectedRole(h),selected:e.isSelectedRole(h)}]),appearance:e.isSelectedRole(h)?"raw-inverse":"raw",variation:e.isSelectedRole(h)?"primary":"passive",onClick:g=>e.selectRole(h)},{default:A(()=>[C("span",km,[w(a,{name:h.icon,class:"oc-pl-s oc-pr-m",variation:"inherit"},null,8,["name"]),b(),w(l,{role:h,"allow-share-permission":e.allowSharePermission&&e.resharingDefault},null,8,["role","allow-share-permission"])]),b(),C("span",wm,[e.isSelectedRole(h)?(d(),$(a,{key:0,name:"check",variation:"inherit"})):I("",!0)])]),_:2},1032,["id","class","appearance","variation","onClick"])]))),128))]),_:1},8,["aria-label"])]),_:1},8,["toggle"])):I("",!0),b(),e.availableRoles.length>1?(d(),$(p,{key:3,ref:"customPermissionsDrop",class:"files-recipient-custom-permissions-drop",mode:"manual",target:"#"+e.roleButtonId,"padding-size":"remove"},{default:A(()=>[C("h4",{class:"oc-text-bold oc-m-rm oc-px-m oc-pt-m oc-pb-s",textContent:D(e.$gettext(e.customPermissionsRole.label))},null,8,Cm),b(),w(u,null,{default:A(()=>[(d(!0),k(X,null,fe(e.availablePermissions,h=>(d(),k("li",{key:`files-collaborators-permission-${h.key}`,class:"oc-my-s oc-px-m"},[(d(),$(m,{id:`files-collaborators-permission-${h.key}`,key:`files-collaborators-permission-checkbox-${h.key}`,modelValue:e.customPermissions,"onUpdate:modelValue":t[0]||(t[0]=g=>e.customPermissions=g),size:"large","data-testid":`files-collaborators-permission-${h.key}`,label:e.$gettext(h.label),option:h,disabled:e.isPermissionDisabled(h),class:"oc-mr-xs files-collaborators-permission-checkbox"},null,8,["id","modelValue","data-testid","label","option","disabled"]))]))),128))]),_:1}),b(),C("div",Fm,[w(c,{size:"small",class:"files-recipient-custom-permissions-drop-cancel",onClick:e.cancelCustomPermissions,textContent:D(e.$gettext("Cancel"))},null,8,["onClick","textContent"]),w(c,{size:"small",variation:"primary",appearance:"filled",class:"files-recipient-custom-permissions-drop-confirm oc-ml-s",onClick:e.confirmCustomPermissions,textContent:D(e.$gettext("Apply"))},null,8,["onClick","textContent"])])]),_:1},8,["target"])):I("",!0)])):I("",!0)}const Ta=K(mm,[["render",_m],["__scopeId","data-v-a75485e2"]]),Am=W({props:{recipient:{type:Object,required:!0},deselect:{type:Function,required:!1,default:null}},data(){return{formattedRecipient:{name:this.recipient.label,icon:this.getRecipientIcon(),hasAvatar:[B.user.value,B.spaceUser.value].includes(this.recipient.value.shareType),isLoadingAvatar:!0}}},computed:{...ee(["configuration","capabilities"]),btnDeselectRecipientLabel(){const e=this.$gettext("Deselect %{name}");return this.$gettextInterpolate(e,{name:this.recipient.label})}},async created(){if(this.capabilities.files_sharing.user.profile_picture&&this.formattedRecipient.hasAvatar)try{this.formattedRecipient.avatar=await ti({clientService:this.$clientService,server:this.configuration.server,username:this.recipient.value.shareWith})}catch(e){console.error(e)}this.formattedRecipient.isLoadingAvatar=!1},methods:{getRecipientIcon(){switch(this.recipient.value.shareType){case B.group.value:return{name:B.group.icon,label:this.$gettext("Group")};case B.guest.value:return{name:B.guest.icon,label:this.$gettext("Guest user")};case B.remote.value:return{name:B.remote.icon,label:this.$gettext("Remote user")};default:return{name:B.user.icon,label:this.$gettext("User")}}}}});function $m(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-recipient");return d(),$(l,{"data-testid":`recipient-container-${e.formattedRecipient.name}`,class:"files-share-invite-recipient",recipient:e.formattedRecipient},{append:A(()=>[w(c,{class:"files-share-invite-recipient-btn-remove",appearance:"raw","aria-label":e.btnDeselectRecipientLabel,onClick:t[0]||(t[0]=lt(u=>e.deselect(e.recipient),["stop"]))},{default:A(()=>[w(a,{name:"close",size:"small"})]),_:1},8,["aria-label"])]),_:1},8,["data-testid","recipient"])}const Dm=K(Am,[["render",$m]]),Em=W({name:"DateCurrentpicker",props:{shareTypes:{type:Array,required:!1,default:()=>[]}},emits:["optionChange"],setup(e,{emit:t}){const s=cs().proxy,i=_(()=>s.$language),n=q(),o=_(()=>n.getters.capabilities),a=_(()=>{var v;return(v=o.value.files_sharing.user)==null?void 0:v.expire_date}),c=_(()=>{var v;return(v=o.value.files_sharing.group)==null?void 0:v.expire_date}),l=_(()=>a.value||c.value),u=_(()=>{var v,F;return((v=a.value)==null?void 0:v.enforced)||((F=c.value)==null?void 0:F.enforced)}),p=Ce.now().setLocale(i.value.current).toJSDate(),m=_(()=>{var N,x,O,Q;const v=e.shareTypes.includes(B.user.value),F=e.shareTypes.includes(B.group.value),S=parseInt((N=a.value)==null?void 0:N.days),E=parseInt((x=c.value)==null?void 0:x.days);if(!((O=a.value)!=null&&O.enabled||(Q=c.value)!=null&&Q.enabled))return null;let L=0;return S&&v&&E&&F?L=Math.min(S,E):S&&v?L=S:E&&F&&(L=E),L?Ce.now().setLocale($t(i.value.current)).plus({days:L}).toJSDate():null}),h=_(()=>u.value?m.value:null),g=nn((v,F)=>{let S=null;return{get(){return v(),S||m.value},set(E){S=E,F()}}}),f=_(()=>Ns(Ce.fromJSDate(g.value).endOf("day"),i.value.current));return je(g,v=>{const F=Ce.fromJSDate(v).setLocale($t(i.value.current)).endOf("day");t("optionChange",{expirationDate:F.isValid?F.toFormat("yyyy-MM-dd'T'HH:mm:ssZZZ"):null})}),je(h,v=>{!v||g.value<v||(g.value=v)}),{language:i,enforced:u,available:l,dateCurrent:g,dateMin:p,dateMax:h,dateExpire:f}}});const Tm={key:0,class:"oc-flex oc-flex-middle oc-flex-nowrap"},Im=["textContent"],Rm=["textContent"];function Lm(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-datepicker");return e.available?(d(),k("div",Tm,[w(l,{modelValue:e.dateCurrent,"onUpdate:modelValue":t[0]||(t[0]=u=>e.dateCurrent=u),"min-date":e.dateMin,"max-date":e.dateMax,locale:e.language.current,"is-required":e.enforced,class:"files-recipient-expiration-datepicker","data-testid":"recipient-datepicker"},{default:A(({togglePopover:u})=>[w(c,{class:"files-collaborators-expiration-button","data-testid":"recipient-datepicker-btn",appearance:"raw","gap-size":"none","aria-label":e.dateCurrent?e.$gettext("Edit expiration date"):e.$gettext("Set expiration date"),onClick:u},{default:A(()=>[e.dateCurrent?(d(),k("span",{key:"set-expiration-date-label",class:"oc-text-truncate",textContent:D(e.$gettextInterpolate(e.$gettext("Expires %{expires}"),{expires:e.dateExpire}))},null,8,Rm)):(d(),k("span",{key:"no-expiration-date-label",class:"oc-text-truncate",textContent:D(e.$gettext("Set expiration date"))},null,8,Im)),b(),e.dateCurrent?I("",!0):(d(),$(a,{key:2,name:"arrow-down-s"}))]),_:2},1032,["aria-label","onClick"])]),_:1},8,["modelValue","min-date","max-date","locale","is-required"]),b(),!e.enforced&&e.dateCurrent?(d(),$(c,{key:0,class:"recipient-edit-expiration-btn-remove",appearance:"raw","aria-label":e.$gettext("Remove expiration date"),onClick:t[1]||(t[1]=u=>e.dateCurrent=null)},{default:A(()=>[w(a,{name:"close"})]),_:1},8,["aria-label"])):I("",!0)])):I("",!0)}const Pm=K(Em,[["render",Lm],["__scopeId","data-v-900aac57"]]),xm=e=>e,jm=W({name:"InviteCollaboratorForm",components:{AutocompleteItem:rm,RoleDropdown:Ta,RecipientContainer:Dm,ExpirationDatepicker:Pm},props:{saveButtonLabel:{type:String,required:!1,default:()=>xm("Share")},inviteLabel:{type:String,required:!1,default:""}},setup(){const e=q(),t=ne();return{resource:de("resource"),hasResharing:Ye(e),resharingDefault:xs(e),hasShareJail:we(e),hasRoleCustomPermissions:Hi(e),hasRoleDenyAccess:Vi(e),clientService:t,...Xs()}},data(){return{autocompleteResults:[],announcement:"",searchInProgress:!1,selectedCollaborators:[],selectedRole:null,customPermissions:null,saving:!1,expirationDate:null,searchQuery:""}},computed:{...ee("runtime/spaces",["spaceMembers"]),...ee(["configuration","user","capabilities"]),$_announcementWhenCollaboratorAdded(){return this.$gettext("Person was added")},$_isValid(){return this.selectedCollaborators.length>0},minSearchLength(){return parseInt(this.user.capabilities.files_sharing.search_min_length,10)},selectedCollaboratorsLabel(){return this.inviteLabel||this.$gettext("Search")},resourceIsSpace(){return this.resource.type==="space"}},mounted(){if(this.fetchRecipients=pt(this.fetchRecipients,500),this.resourceIsSpace)this.selectedRole=bs.list()[0];else{const e=this.resource.canDeny()&&this.hasRoleDenyAccess;this.selectedRole=gt.list(this.resource.isFolder,this.hasRoleCustomPermissions,e)[0]}},methods:{...pe("Files",["addShare"]),...pe("runtime/spaces",["addSpaceMember"]),async fetchRecipients(e){var t,s;try{const i=await this.$client.shares.getRecipients(e,"folder",1,(s=(t=this.configuration)==null?void 0:t.options)==null?void 0:s.sharingRecipientsPerPage),n=i.exact.users.concat(i.users).filter(c=>c.value.shareWith!==this.user.id).map(c=>(this.resourceIsSpace&&(c.value.shareType=B.spaceUser.value),c)),o=i.exact.groups.concat(i.groups).map(c=>(this.resourceIsSpace&&(c.value.shareType=B.spaceGroup.value),c)),a=i.exact.remotes.concat(i.remotes);this.autocompleteResults=[...n,...o,...a].filter(c=>{const l=this.selectedCollaborators.find(m=>c.value.shareWith===m.value.shareWith&&parseInt(c.value.shareType)===parseInt(m.value.shareType)),p=(this.resourceIsSpace?this.spaceMembers:this.outgoingCollaborators.filter(m=>!m.indirect)).find(m=>{const h=m.collaborator.name||m.collaborator.displayName,g=c.value.shareWith===h,f=parseInt(c.value.shareType)===m.shareType;return g&&f});return l||p?!1:(this.announcement=this.$_announcementWhenCollaboratorAdded,!0)})}catch(i){console.error(i)}this.searchInProgress=!1},onSearch(e){if(this.autocompleteResults=[],this.searchQuery=e,e.length<this.minSearchLength){this.searchInProgress=!1;return}this.searchInProgress=!0,this.fetchRecipients(e)},filterRecipients(e,t){return e.length<1?[]:(t=t.split(":")[1]||t,e.filter(s=>s.value.shareType===B.remote.value||s.label.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1||s.value.shareWith.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1||(s.value.shareWithAdditionalInfo||"").toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1))},collaboratorRoleChanged({role:e,permissions:t}){this.selectedRole=e,this.customPermissions=t},collaboratorExpiryChanged({expirationDate:e}){this.expirationDate=e},async share(){this.saving=!0;const e=new xt({concurrency:4}),t=[];this.selectedCollaborators.forEach(s=>{t.push(e.add(()=>{const i=this.selectedRole.hasCustomPermissions?Fe.permissionsToBitmask(this.customPermissions):Fe.permissionsToBitmask(this.selectedRole.permissions(this.hasResharing&&this.resharingDefault||this.resourceIsSpace));let n=this.resource.path;this.hasShareJail&&n==="/"&&(n=`/${this.resource.name}`),(this.resourceIsSpace?this.addSpaceMember:this.addShare)({...this.$language,client:this.$client,graphClient:this.clientService.graphAuthenticated,path:n,shareWith:s.value.shareWith,displayName:s.label,shareType:s.value.shareType,permissions:i,role:this.selectedRole,expirationDate:this.expirationDate,storageId:this.resource.fileId||this.resource.id})}))}),await Promise.all(t),this.selectedCollaborators=[],this.saving=!1},resetFocusOnInvite(e){this.selectedCollaborators=e,this.autocompleteResults=[],this.$nextTick(()=>{document.getElementById("files-share-invite-input").focus()})}}});const Nm={id:"new-collaborators-form","data-testid":"new-collaborators-form"},Mm=["textContent"],zm=C("span",null,null,-1),Om={class:"oc-flex oc-flex-middle oc-flex-between oc-mb-l oc-mt-s"},Bm=["textContent"],Um=["textContent"];function qm(e,t,s,i,n,o){const a=y("autocomplete-item"),c=y("recipient-container"),l=y("oc-select"),u=y("role-dropdown"),p=y("expiration-datepicker"),m=y("oc-spinner"),h=y("oc-button"),g=y("oc-hidden-announcer");return d(),k("div",Nm,[w(l,{id:"files-share-invite-input",ref:"ocSharingAutocomplete","model-value":e.selectedCollaborators,options:e.autocompleteResults,loading:e.searchInProgress,multiple:!0,filter:e.filterRecipients,label:e.selectedCollaboratorsLabel,"aria-describedby":"files-share-invite-hint","dropdown-should-open":({open:f,search:v})=>f&&v.length>=e.minSearchLength&&!e.searchInProgress,"onSearch:input":e.onSearch,"onUpdate:modelValue":e.resetFocusOnInvite},{option:A(f=>[w(a,{item:f},null,8,["item"])]),"no-options":A(()=>[C("span",{textContent:D(e.$gettext("No users or groups found."))},null,8,Mm)]),"selected-option-container":A(({option:f,deselect:v})=>[(d(),$(c,{key:f.value.shareWith,recipient:f,deselect:v},null,8,["recipient","deselect"]))]),"open-indicator":A(()=>[zm]),_:1},8,["model-value","options","loading","filter","label","dropdown-should-open","onSearch:input","onUpdate:modelValue"]),b(),C("div",Om,[w(u,{"allow-share-permission":e.hasResharing||e.resourceIsSpace,mode:"create",class:"role-selection-dropdown",onOptionChange:e.collaboratorRoleChanged},null,8,["allow-share-permission","onOptionChange"]),b(),e.saving?I("",!0):(d(),$(p,{key:0,"share-types":e.selectedCollaborators.map(f=>f.value.shareType),onOptionChange:e.collaboratorExpiryChanged},null,8,["share-types","onOptionChange"])),b(),e.saving?(d(),$(h,{key:"new-collaborator-saving-button",disabled:!0},{default:A(()=>[w(m,{"aria-label":e.$gettext("Creating share"),size:"small"},null,8,["aria-label"]),b(),C("span",{"aria-hidden":!0,textContent:D(e.$gettext(e.saveButtonLabel))},null,8,Bm)]),_:1})):(d(),$(h,{id:"new-collaborators-form-create-button",key:"new-collaborator-save-button","data-testid":"new-collaborators-form-create-button",disabled:!e.$_isValid,variation:"primary",appearance:"filled",submit:"submit",onClick:e.share},{default:A(()=>[C("span",{textContent:D(e.$gettext(e.saveButtonLabel))},null,8,Um)]),_:1},8,["disabled","onClick"]))]),b(),w(g,{level:"assertive",announcement:e.announcement},null,8,["announcement"])])}const Ia=K(jm,[["render",qm]]),Vm=W({name:"EditDropdown",props:{expirationDate:{type:Date,required:!1,default:void 0},shareCategory:{type:String,required:!1,default:null,validator:function(e){return["user","group"].includes(e)||!e}},canEditOrDelete:{type:Boolean,required:!0}},emits:["expirationDateChanged","removeShare","showAccessDetails"],setup(){return{resource:de("resource")}},data:function(){return{enteredExpirationDate:null}},computed:{...ee(["capabilities"]),options(){const e=[];return this.isRemoveExpirationPossible&&e.push({title:this.$gettext("Remove expiration date"),method:this.removeExpirationDate,class:"remove-expiration-date",enabled:this.canEditOrDelete,icon:"calendar",additionalAttributes:{"data-testid":"collaborator-remove-expiration-btn"}}),[...e,{title:he(this.resource)?this.$gettext("Remove member"):this.$gettext("Remove share"),method:this.removeShare,class:"remove-share",enabled:this.canEditOrDelete,icon:"delete-bin-5",additionalAttributes:{"data-testid":"collaborator-remove-share-btn"}},{title:this.$gettext("Access details"),method:this.showAccessDetails,enabled:!0,icon:"information",class:"show-access-details"}]},editShareBtnId(){return io("files-collaborators-edit-button-")},shareEditOptions(){return this.$gettext("Context menu of the share")},editingUser(){return this.shareCategory==="user"},editingGroup(){return this.shareCategory==="group"},isExpirationSupported(){return this.editingUser&&this.userExpirationDate||this.editingGroup&&this.groupExpirationDate},isExpirationDateSet(){return!!this.expirationDate},isRemoveExpirationPossible(){return this.isExpirationSupported&&this.isExpirationDateSet&&!this.isExpirationDateEnforced},isDefaultExpirationEnabled(){return this.editingUser?this.userExpirationDate.enabled:this.editingGroup?this.groupExpirationDate.enabled:this.userExpirationDate.enabled||this.groupExpirationDate.enabled},userExpirationDate(){return this.capabilities.files_sharing.user.expire_date},groupExpirationDate(){var e;return(e=this.capabilities.files_sharing.group)==null?void 0:e.expire_date},defaultExpirationDate(){if(!this.isDefaultExpirationEnabled)return null;const e=parseInt(this.userExpirationDate.days),t=parseInt(this.groupExpirationDate.days);let s=0;this.editingUser?s=e:this.editingGroup?s=t:e&&t?s=Math.min(e,t):s=e||t;const i=new Date;return i.setDate(new Date().getDate()+s),i},isExpirationDateEnforced(){return this.editingUser?this.userExpirationDate.enforced:this.editingGroup?this.groupExpirationDate.enforced:this.userExpirationDate.enforced||this.groupExpirationDate.enforced},maxExpirationDate(){return this.isExpirationDateEnforced?this.defaultExpirationDate:null},minExpirationDate(){const e=new Date;return e.setDate(new Date().getDate()+1),e}},watch:{enteredExpirationDate:{handler:"updateExpirationDate"}},methods:{updateExpirationDate(){this.$emit("expirationDateChanged",{expirationDate:Ce.fromJSDate(this.enteredExpirationDate).endOf("day").toISO()}),this.$refs.expirationDateDrop.hide()},removeExpirationDate(){this.$emit("expirationDateChanged",{expirationDate:null}),this.$refs.expirationDateDrop.hide()},removeShare(){this.$emit("removeShare")},showAccessDetails(){this.$emit("showAccessDetails")}}});const Hm={class:"oc-flex oc-flex-middle"},Km={key:0,class:"oc-rounded oc-menu-item-hover"},Wm=["textContent"],Gm=["textContent"],Ym=["textContent"];function Qm(e,t,s,i,n,o){const a=y("oc-icon"),c=y("oc-button"),l=y("oc-datepicker"),u=y("oc-list"),p=y("oc-drop");return d(),k("span",Hm,[w(c,{id:e.editShareBtnId,class:"collaborator-edit-dropdown-options-btn",appearance:"raw"},{default:A(()=>[w(a,{name:"more-2"})]),_:1},8,["id"]),b(),w(p,{ref:"expirationDateDrop",toggle:"#"+e.editShareBtnId,mode:"click","padding-size":"small"},{default:A(()=>[w(u,{class:"collaborator-edit-dropdown-options-list","aria-label":e.shareEditOptions},{default:A(()=>[e.canEditOrDelete&&e.isExpirationSupported?(d(),k("li",Km,[w(l,{modelValue:e.enteredExpirationDate,"onUpdate:modelValue":t[0]||(t[0]=m=>e.enteredExpirationDate=m),"min-date":e.minExpirationDate,"max-date":e.maxExpirationDate,locale:e.$language.current,"is-required":e.isExpirationDateEnforced,class:"files-recipient-expiration-datepicker","data-testid":"recipient-datepicker"},{default:A(({togglePopover:m})=>[w(c,{class:"files-collaborators-expiration-button oc-p-s action-menu-item","data-testid":"recipient-datepicker-btn",appearance:"raw",onClick:m},{default:A(()=>[w(a,{name:"calendar-event","fill-type":"line",size:"medium",variation:"passive"}),b(),e.isExpirationDateSet?(d(),k("span",{key:0,textContent:D(e.$gettext("Edit expiration date"))},null,8,Wm)):(d(),k("span",{key:1,textContent:D(e.$gettext("Set expiration date"))},null,8,Gm))]),_:2},1032,["onClick"])]),_:1},8,["modelValue","min-date","max-date","locale","is-required"])])):I("",!0),b(),(d(!0),k(X,null,fe(e.options,(m,h)=>(d(),k("li",{key:h,class:"oc-rounded oc-menu-item-hover"},[m.enabled?(d(),$(c,Be({key:0,appearance:"raw",class:["oc-p-s action-menu-item",m.class]},m.additionalAttributes||{},{onClick:g=>m.method()}),{default:A(()=>[w(a,{name:m.icon,"fill-type":"line",size:"medium",variation:"passive"},null,8,["name"]),b(),C("span",{textContent:D(m.title)},null,8,Ym)]),_:2},1040,["class","onClick"])):I("",!0)]))),128))]),_:1},8,["aria-label"])]),_:1},8,["toggle"])])}const Zm=K(Vm,[["render",Qm]]),Jm=W({name:"ListItem",components:{EditDropdown:Zm,RoleDropdown:Ta},props:{share:{type:Object,required:!0},modifiable:{type:Boolean,default:!1},sharedParentRoute:{type:Object,default:null}},emits:["onDelete"],setup(e){const t=ne(),s=_(()=>{var i,n;return Xe((n=(i=e.sharedParentRoute)==null?void 0:i.params)==null?void 0:n.driveAliasAndItem).split("/").pop()});return{hasResharing:Ye(),resharingDefault:xs(),clientService:t,sharedParentDir:s}},computed:{...De(["user"]),shareType(){return B.getByValue(this.share.shareType)},shareTypeIcon(){return this.shareType.icon},shareTypeKey(){return this.shareType.key},shareDomSelector(){if(this.share.id)return ds(this.share.id)},isAnyUserShareType(){return[B.user,B.spaceUser].includes(this.shareType)},isAnySpaceShareType(){return[B.spaceUser,B.spaceGroup].includes(this.shareType)},shareTypeText(){return this.$gettext(this.shareType.label)},shareCategory(){return B.isIndividual(this.shareType)?"user":"group"},shareDisplayName(){return this.user.id===this.share.collaborator.name?this.$gettextInterpolate(this.$gettext("%{collaboratorName} (me)"),{collaboratorName:this.share.collaborator.displayName}):this.share.collaborator.displayName},shareAdditionalInfo(){return this.share.collaborator.additionalInfo},shareDisplayNameTooltip(){return this.shareDisplayName+(this.shareAdditionalInfo?`(${this.shareAdditionalInfo})`:"")},screenreaderShareDisplayName(){const e={displayName:this.share.collaborator.displayName,...this.share.collaborator.additionalInfo&&{additionalInfo:this.share.collaborator.additionalInfo}};let t=this.$gettext("Share receiver name: %{ displayName }");return this.shareAdditionalInfo&&(t=this.$gettext("Share receiver name: %{ displayName } (%{ additionalInfo })")),this.$gettextInterpolate(t,e)},screenreaderShareExpiration(){const e=this.$gettext("Share expires %{ expiryDateRelative } (%{ expiryDate })");return this.$gettextInterpolate(e,{expiryDateRelative:this.expirationDateRelative,expiryDate:this.expirationDate})},canEditOrDelete(){return this.modifiable},hasExpirationDate(){return this.share.expires},expirationDate(){return Ss(Ce.fromJSDate(this.share.expires).endOf("day"),this.$language.current)},expirationDateRelative(){return Ns(Ce.fromJSDate(this.share.expires).endOf("day"),this.$language.current)},editDropDownToggleId(){return ut()},shareDate(){return Ss(Ce.fromSeconds(parseInt(this.share.stime)),this.$language.current)},shareOwnerDisplayName(){return this.share.owner.displayName},shareOwnerAdditionalInfo(){return this.share.owner.additionalInfo},accessDetailsPropsSpace(){const e=[];return e.push({text:this.$gettext("Name"),headline:!0},{text:this.shareDisplayName}),this.shareAdditionalInfo&&e.push({text:this.$gettext("Additional info"),headline:!0},{text:this.shareAdditionalInfo}),e.push({text:this.$gettext("Type"),headline:!0},{text:this.shareTypeText}),{title:this.$gettext("Access details"),list:e}},accessDetailsProps(){const e=[];return e.push({text:this.$gettext("Name"),headline:!0},{text:this.shareDisplayName}),this.shareAdditionalInfo&&e.push({text:this.$gettext("Additional info"),headline:!0},{text:this.shareAdditionalInfo}),e.push({text:this.$gettext("Type"),headline:!0},{text:this.shareTypeText}),e.push({text:this.$gettext("Access expires"),headline:!0},{text:this.hasExpirationDate?this.expirationDate:this.$gettext("no")}),e.push({text:this.$gettext("Shared on"),headline:!0},{text:this.shareDate}),e.push({text:this.$gettext("Invited by"),headline:!0},{text:this.shareOwnerAdditionalInfo?`${this.shareOwnerDisplayName} (${this.shareOwnerAdditionalInfo})`:this.shareOwnerDisplayName}),{title:this.$gettext("Access details"),list:e}}},methods:{...pe(["showMessage"]),...pe("Files",["changeShare"]),...pe("runtime/spaces",["changeSpaceMember"]),removeShare(){this.$emit("onDelete",this.share)},showAccessDetails(){this.$refs.accessDetailsDrop.$refs.drop.show()},shareRoleChanged({role:e,permissions:t}){const s=this.share.expires;try{this.saveShareChanges({role:e,permissions:t,expirationDate:s})}catch(i){console.error(i),this.showMessage({title:this.$gettext("Failed to apply new permissions"),status:"danger"})}},shareExpirationChanged({expirationDate:e}){const t=this.share.role,s=this.share.customPermissions;try{this.saveShareChanges({role:t,permissions:s,expirationDate:e})}catch(i){console.error(i),this.showMessage({title:this.$gettext("Failed to apply expiration date"),status:"danger"})}},saveShareChanges({role:e,permissions:t,expirationDate:s}){const i=e.hasCustomPermissions?Fe.permissionsToBitmask(t):Fe.permissionsToBitmask(e.permissions(this.hasResharing&&this.resharingDefault||this.isAnySpaceShareType));(this.isAnySpaceShareType?this.changeSpaceMember:this.changeShare)({...this.$language,client:this.$client,graphClient:this.clientService.graphAuthenticated,share:this.share,permissions:i,expirationDate:s||"",role:e})}}});const Xm=["data-testid"],ef={class:"oc-width-1-1 oc-flex oc-flex-middle files-collaborators-collaborator-details"},tf={class:"oc-width-2-3 oc-flex oc-flex-middle"},sf={class:"oc-pl-s oc-text-truncate"},af={class:"oc-text-truncate"},nf=["textContent"],of=["textContent"],rf={key:0,class:"oc-flex oc-flex-nowrap oc-flex-middle"},lf={key:1},cf=["textContent"],df={class:"oc-flex flex-en oc-flex-middle oc-width-1-3",style:{"justify-content":"end"}},uf={key:0,class:"oc-resource-indicators oc-text-truncate"},pf=["textContent"],hf=["textContent"],mf={key:1},ff=["textContent"];function gf(e,t,s,i,n,o){const a=y("avatar-image"),c=y("oc-avatar-item"),l=y("role-dropdown"),u=y("oc-icon"),p=y("router-link"),m=y("edit-dropdown"),h=y("oc-info-drop"),g=ce("oc-tooltip");return d(),k("div",{"data-testid":`collaborator-${e.isAnyUserShareType?"user":"group"}-item-${e.share.collaborator.name}`,class:"files-collaborators-collaborator oc-py-xs"},[C("div",ef,[C("div",tf,[C("div",null,[e.isAnyUserShareType?(d(),$(a,{key:0,userid:e.share.collaborator.name,"user-name":e.share.collaborator.displayName,width:36,class:"files-collaborators-collaborator-indicator"},null,8,["userid","user-name"])):(d(),$(c,{key:1,width:36,"icon-size":"medium",icon:e.shareTypeIcon,name:e.shareTypeKey,class:"files-collaborators-collaborator-indicator"},null,8,["icon","name"]))]),b(),C("div",sf,[V((d(),k("div",af,[C("span",{"aria-hidden":"true",class:"files-collaborators-collaborator-name",textContent:D(e.shareDisplayName)},null,8,nf),b(),C("span",{class:"oc-invisible-sr",textContent:D(e.screenreaderShareDisplayName)},null,8,of)])),[[g,e.shareDisplayNameTooltip]]),b(),C("div",null,[e.canEditOrDelete?(d(),k("div",rf,[w(l,{"dom-selector":e.shareDomSelector,"existing-permissions":e.share.customPermissions,"existing-role":e.share.role,"allow-share-permission":e.hasResharing||e.isAnySpaceShareType,class:"files-collaborators-collaborator-role",mode:"edit",onOptionChange:e.shareRoleChanged},null,8,["dom-selector","existing-permissions","existing-role","allow-share-permission","onOptionChange"])])):e.share.role?(d(),k("div",lf,[V(C("span",{class:"oc-mr-xs",textContent:D(e.$gettext(e.share.role.label))},null,8,cf),[[g,e.$gettext(e.share.role.description(!1))]])])):I("",!0)])])]),b(),C("div",df,[e.sharedParentRoute?(d(),k("div",uf,[V((d(),$(p,{class:"parent-folder oc-text-truncate",to:e.sharedParentRoute},{default:A(()=>[C("span",{class:"text",textContent:D(e.$gettext("via"))},null,8,pf),b(),w(u,{name:"folder-2",size:"small","fill-type":"line",class:"oc-px-xs"}),b(),C("span",{class:"text oc-text-truncate",textContent:D(e.sharedParentDir)},null,8,hf)]),_:1},8,["to"])),[[g,e.$gettext("Navigate to parent folder")]])])):I("",!0),b(),e.hasExpirationDate?(d(),k("span",mf,[V(w(u,{class:"files-collaborators-collaborator-expiration","data-testid":"recipient-info-expiration-date","aria-label":e.expirationDate,name:"calendar-event","fill-type":"line"},null,8,["aria-label"]),[[g,e.expirationDate]]),b(),C("span",{class:"oc-invisible-sr",textContent:D(e.screenreaderShareExpiration)},null,8,ff)])):I("",!0),b(),w(m,{id:`edit-drop-down-${e.editDropDownToggleId}`,class:"files-collaborators-collaborator-edit","data-testid":"collaborator-edit","expiration-date":e.share.expires?e.share.expires:null,"share-category":e.shareCategory,"can-edit-or-delete":e.canEditOrDelete,onExpirationDateChanged:e.shareExpirationChanged,onRemoveShare:e.removeShare,onShowAccessDetails:e.showAccessDetails},null,8,["id","expiration-date","share-category","can-edit-or-delete","onExpirationDateChanged","onRemoveShare","onShowAccessDetails"]),b(),w(h,Be({ref:"accessDetailsDrop",class:"share-access-details-drop"},e.isAnySpaceShareType?e.accessDetailsPropsSpace:e.accessDetailsProps,{mode:"manual",target:`#edit-drop-down-${e.editDropDownToggleId}`}),null,16,["target"])])])],8,Xm)}const Ra=K(Jm,[["render",gf],["__scopeId","data-v-20efd323"]]),bf=W({name:"FileShares",components:{InviteCollaboratorForm:Ia,CollaboratorListItem:Ra},setup(){const e=q(),t=Z(!e.getters.configuration.options.sidebar.shares.showAllOnLoad),s=()=>{t.value=!r(t)},i=Z(!e.getters.configuration.options.sidebar.shares.showAllOnLoad),n=()=>{i.value=!r(i)},o=_(()=>{var u;const l=(u=e.getters.user)==null?void 0:u.id;return l?e.getters["runtime/spaces/spaceMembers"].some(p=>{var m;return((m=p.collaborator)==null?void 0:m.name)===l}):!1}),a=_(()=>e.getters["Files/ancestorMetaData"]),c=l=>Object.values(r(a)).find(u=>u.id===l);return{...Xs(),resource:de("resource"),space:de("space"),sharesListCollapsed:t,toggleShareListCollapsed:s,memberListCollapsed:i,toggleMemberListCollapsed:n,currentUserIsMemberOfSpace:o,hasProjectSpaces:Ts(),hasShareJail:we(),hasResharing:Ye(),getSharedAncestor:c,configurationManager:Re}},computed:{...ee(["configuration"]),...ee("runtime/spaces",["spaceMembers","spaces"]),...De(["user"]),inviteCollaboratorHelp(){var t,s;if(!!((s=(t=this.configuration)==null?void 0:t.options)!=null&&s.cernFeatures)){const i={configurationManager:this.configurationManager},n=Fi(i);return n.list=[...Kp(i).list,...n.list],n}return Fi({configurationManager:this.configurationManager})},helpersEnabled(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.contextHelpers},sharedWithLabel(){return this.$gettext("Shared with")},spaceMemberLabel(){return this.$gettext("Space members")},collapseButtonTitle(){return this.sharesListCollapsed?this.$gettext("Show more"):this.$gettext("Show less")},hasSharees(){return this.collaborators.length>0},collaborators(){return[...this.outgoingCollaborators].sort(this.collaboratorsComparator).map(e=>{const t={...e};return t.key="collaborator-"+t.id,t.owner.name!==t.fileOwner.name&&t.owner.name!==this.user.id&&(t.resharers=[t.owner]),t})},displayCollaborators(){return this.collaborators.length>3&&this.sharesListCollapsed?this.collaborators.slice(0,3):this.collaborators},displaySpaceMembers(){return this.spaceMembers.length>3&&this.memberListCollapsed?this.spaceMembers.slice(0,3):this.spaceMembers},showShareToggle(){return this.collaborators.length>3},showMemberToggle(){return this.spaceMembers.length>3},currentUserCanShare(){var t;return this.resource.isReceivedShare()&&!this.hasResharing||((t=this.space)==null?void 0:t.driveType)==="share"&&!this.hasResharing?!1:this.resource.canShare({user:this.user})},noResharePermsMessage(){const e=this.$gettext("You don't have permission to share this file."),t=this.$gettext("You don't have permission to share this folder.");return this.resource.type==="file"?e:t},showSpaceMembers(){var e;return((e=this.space)==null?void 0:e.driveType)==="project"&&this.resource.type!=="space"&&this.currentUserIsMemberOfSpace},matchingSpace(){return this.space||this.spaces.find(e=>e.id===this.resource.storageId)}},methods:{...pe("Files",["deleteShare"]),...pe(["createModal","hideModal","showMessage"]),...xe("Files",["REMOVE_FILES"]),collaboratorsComparator(e,t){const s=e.collaborator?e.collaborator.displayName:e.displayName,i=t.collaborator?t.collaborator.displayName:t.displayName,n=s.toLowerCase().trim(),o=i.toLowerCase().trim(),a=B.containsAnyValue(B.individuals,[e.shareType]),c=B.containsAnyValue(B.individuals,[t.shareType]),l=!e.indirect,u=!t.indirect;return a===c?l===u?n===o?Ai.naturalSortCompare(e.stime+"",t.stime+""):Ai.naturalSortCompare(n,o):l?-1:1:a?-1:1},$_ocCollaborators_deleteShare_trigger(e){const t={variation:"danger",title:this.$gettext("Remove share"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Remove"),message:this.$gettext("Are you sure you want to remove this share?"),hasInput:!1,onCancel:this.hideModal,onConfirm:()=>this.$_ocCollaborators_deleteShare(e)};this.createModal(t)},async $_ocCollaborators_deleteShare(e){let t=this.resource.path;this.hasShareJail&&t==="/"&&(t=`/${this.resource.name}`);const s=this.outgoingCollaborators.length===1?this.outgoingCollaborators[0].id:void 0,i=this.outgoingCollaborators.filter(n=>!n.indirect).length===1;try{await this.deleteShare({client:this.$client,share:e,path:t,loadIndicators:i}),this.hideModal(),this.showMessage({title:this.$gettext("Share was removed successfully")}),s&&ue(this.$router,"files-shares-with-others")&&this.REMOVE_FILES([{id:s}])}catch(n){console.error(n),this.showMessage({title:this.$gettext("Failed to remove share"),status:"danger"})}},getSharedParentRoute(e){if(!e.indirect)return null;const t=this.getSharedAncestor(e.itemSource);return t?ma({resource:this.resource,sharedAncestor:t,matchingSpace:this.matchingSpace}):null},isShareModifiable(e){var a;const t=!he(this.space),s=this.currentUserIsMemberOfSpace,i=e.indirect,n=!t,o=(a=this.space)==null?void 0:a.isManager(this.user);return!!(t&&s&&o||t&&!i||n&&o)}}});const yf={id:"oc-files-sharing-sidebar",class:"oc-position-relative"},vf={class:"oc-flex"},Sf={class:"oc-text-bold oc-text-medium oc-m-rm"},kf=["textContent"],wf={key:2,class:"avatars-wrapper oc-flex oc-flex-middle oc-flex-between"},Cf=["textContent"],Ff=["aria-label"],_f={key:0,class:"oc-flex oc-flex-center"},Af=["textContent"],$f=["aria-label"],Df={key:0,class:"oc-flex oc-flex-center"};function Ef(e,t,s,i,n,o){const a=y("oc-contextual-helper"),c=y("invite-collaborator-form"),l=y("collaborator-list-item"),u=y("oc-button"),p=ce("translate");return d(),k("div",yf,[C("div",vf,[V((d(),k("h3",Sf,[b("Share with people")])),[[p]]),b(),e.helpersEnabled?(d(),$(a,Be({key:0,class:"oc-pl-xs"},e.inviteCollaboratorHelp),null,16)):I("",!0)]),b(),e.currentUserCanShare?(d(),$(c,{key:"new-collaborator",class:"oc-my-s"})):(d(),k("p",{key:"no-reshare-permissions-message","data-testid":"files-collaborators-no-reshare-permissions-message",textContent:D(e.noResharePermsMessage)},null,8,kf)),b(),e.hasSharees?(d(),k("div",wf,[C("h4",{class:"oc-text-bold oc-my-rm",textContent:D(e.sharedWithLabel)},null,8,Cf)])):I("",!0),b(),e.hasSharees?(d(),k(X,{key:3},[C("ul",{id:"files-collaborators-list",class:oe(["oc-list oc-list-divider oc-overflow-hidden",{"oc-mb-l":e.showSpaceMembers,"oc-m-rm":!e.showSpaceMembers}]),"aria-label":e.$gettext("Share receivers")},[(d(!0),k(X,null,fe(e.displayCollaborators,m=>(d(),k("li",{key:m.key},[w(l,{share:m,modifiable:e.isShareModifiable(m),"shared-parent-route":e.getSharedParentRoute(m),onOnDelete:e.$_ocCollaborators_deleteShare_trigger},null,8,["share","modifiable","shared-parent-route","onOnDelete"])]))),128))],10,Ff),b(),e.showShareToggle?(d(),k("div",_f,[w(u,{appearance:"raw",class:"toggle-shares-list-btn",onClick:e.toggleShareListCollapsed,textContent:D(e.collapseButtonTitle)},null,8,["onClick","textContent"])])):I("",!0)],64)):I("",!0),b(),e.showSpaceMembers?(d(),k(X,{key:4},[C("h4",{class:"oc-text-bold oc-my-s",textContent:D(e.spaceMemberLabel)},null,8,Af),b(),C("ul",{id:"space-collaborators-list",class:"oc-list oc-list-divider oc-overflow-hidden oc-m-rm","aria-label":e.spaceMemberLabel},[(d(!0),k(X,null,fe(e.displaySpaceMembers,m=>(d(),k("li",{key:m.key},[w(l,{share:m,modifiable:!1},null,8,["share"])]))),128))],8,$f),b(),e.showMemberToggle?(d(),k("div",Df,[w(u,{appearance:"raw",onClick:e.toggleMemberListCollapsed,textContent:D(e.collapseButtonTitle)},null,8,["onClick","textContent"])])):I("",!0)],64)):I("",!0)])}const Tf=K(bf,[["render",Ef]]),If=W({name:"SpaceMembers",components:{CollaboratorListItem:Ra,InviteCollaboratorForm:Ia},setup(){return{clientService:ne(),configurationManager:Re,resource:de("resource")}},data:()=>({filterTerm:"",isFilterOpen:!1,markInstance:null}),computed:{...ee(["configuration"]),...ee("runtime/spaces",["spaceMembers"]),...De(["user"]),filteredSpaceMembers(){return this.filter(this.spaceMembers,this.filterTerm)},helpersEnabled(){var e,t;return(t=(e=this.configuration)==null?void 0:e.options)==null?void 0:t.contextHelpers},spaceAddMemberHelp(){return Wp({configurationManager:this.configurationManager})},hasCollaborators(){return this.spaceMembers.length>0},currentUserCanShare(){return!this.resource.disabled&&this.currentUserIsManager},currentUserIsManager(){return this.resource.isManager(this.user)}},watch:{isFilterOpen(){this.filterTerm=""},filterTerm(){this.$nextTick(()=>{this.$refs.collaboratorList&&(this.markInstance=new Li(this.$refs.collaboratorList),this.markInstance.unmark(),this.markInstance.mark(this.filterTerm,{element:"span",className:"highlight-mark"}))})}},methods:{...pe("runtime/spaces",["deleteSpaceMember"]),...pe(["createModal","hideModal","showMessage"]),filter(e,t){return(t||"").trim()?new Pi(e,{...Wi,keys:["collaborator.displayName","collaborator.name"]}).search(t).map(i=>i.item):e},toggleFilter(){this.isFilterOpen=!this.isFilterOpen},isModifiable(e){return this.currentUserCanShare?e.role.name!==ys.name?!0:this.spaceMembers.filter(s=>s.role.name===ys.name).length>1:!1},$_ocCollaborators_deleteShare_trigger(e){const t={variation:"danger",title:this.$gettext("Remove member"),cancelText:this.$gettext("Cancel"),confirmText:this.$gettext("Remove"),message:this.$gettext("Are you sure you want to remove this member?"),hasInput:!1,onCancel:this.hideModal,onConfirm:()=>this.$_ocCollaborators_deleteShare(e)};this.createModal(t)},async $_ocCollaborators_deleteShare(e){try{const t=e.collaborator.name===this.user.id;if(await this.deleteSpaceMember({client:this.$client,graphClient:this.clientService.graphAuthenticated,share:e,reloadSpace:!t}),this.showMessage({title:this.$gettext("Share was removed successfully")}),t)return se(this.$router,"files-spaces-projects")?this.$router.go(0):this.$router.push(be("files-spaces-projects"))}catch(t){console.error(t),this.showMessage({title:this.$gettext("Failed to remove share"),status:"danger"})}finally{this.hideModal()}}}});const Rf={id:"oc-files-sharing-sidebar",class:"oc-position-relative"},Lf={class:"oc-flex oc-flex-between oc-flex-center oc-flex-middle"},Pf={class:"oc-flex oc-py-s"},xf={class:"oc-text-bold oc-text-medium oc-m-rm"},jf={class:"oc-flex"},Nf={key:0,class:"oc-flex"},Mf=["aria-label"];function zf(e,t,s,i,n,o){const a=y("oc-contextual-helper"),c=y("oc-text-input"),l=y("oc-icon"),u=y("oc-button"),p=y("invite-collaborator-form"),m=y("collaborator-list-item"),h=ce("translate"),g=ce("oc-tooltip");return d(),k("div",Rf,[C("div",Lf,[C("div",Pf,[V((d(),k("h3",xf,[b("Members")])),[[h]]),b(),e.helpersEnabled?(d(),$(a,Be({key:0,class:"oc-pl-xs"},e.spaceAddMemberHelp),null,16)):I("",!0)]),b(),C("div",jf,[e.isFilterOpen?(d(),k("div",Nf,[w(c,{modelValue:e.filterTerm,"onUpdate:modelValue":t[0]||(t[0]=f=>e.filterTerm=f),class:"oc-text-truncate space-members-filter oc-mr-s",label:"",placeholder:e.$gettext("Filter members")},null,8,["modelValue","placeholder"]),b(),V((d(),$(u,{class:"close-filter-btn","aria-label":e.$gettext("Close filter"),appearance:"raw",onClick:e.toggleFilter},{default:A(()=>[w(l,{name:"close","fill-type":"line",size:"small"})]),_:1},8,["aria-label","onClick"])),[[g,e.$gettext("Close filter")]])])):V((d(),$(u,{key:1,class:"open-filter-btn","aria-label":e.$gettext("Filter members"),appearance:"raw",onClick:e.toggleFilter},{default:A(()=>[w(l,{name:"search","fill-type":"line",size:"small"})]),_:1},8,["aria-label","onClick"])),[[g,e.$gettext("Filter members")]])])]),b(),e.currentUserCanShare?(d(),$(p,{key:"new-collaborator","save-button-label":e.$gettext("Add"),"invite-label":e.$gettext("Search"),class:"oc-my-s"},null,8,["save-button-label","invite-label"])):I("",!0),b(),e.hasCollaborators?(d(),k("ul",{key:1,id:"files-collaborators-list",ref:"collaboratorList",class:"oc-list oc-list-divider oc-overflow-hidden oc-m-rm","aria-label":e.$gettext("Space members")},[(d(!0),k(X,null,fe(e.filteredSpaceMembers,f=>(d(),k("li",{key:f.key},[w(m,{share:f,modifiable:e.isModifiable(f),onOnDelete:v=>e.$_ocCollaborators_deleteShare_trigger(f)},null,8,["share","modifiable","onOnDelete"])]))),128))],8,Mf)):I("",!0)])}const Of=K(If,[["render",zf]]);function Bf(){const e=q(),t=ne(),s=Z(null),i=_(()=>e.getters["Files/incomingCollaborators"]),n=jt(e),o=Ue(function*(p,m){let h;const g=r(i).find(v=>v.itemSource===m.id);if(g){s.value=g;return}if(m.shareId&&(h=yield t.owncloudSdk.shares.getShare(m.shareId),h)){s.value=Et(h.shareInfo,m,!0);return}if(!c(m.id)){try{s.value=yield a(m)}catch{s.value=null;return}return}s.value=null}),a=async p=>{await e.dispatch("runtime/spaces/loadMountPoints",{graphClient:t.graphAuthenticated});let m=u(p.id);const h=m?[]:[p.name];let g=p;for(;!m;)g=await l(g.parentFolderId),m=u(g.id),m||h.unshift(g.name);const f=await t.owncloudSdk.shares.getShare(m.nodeId);return Et(f.shareInfo,g,!0)},c=p=>r(n)?e.getters["runtime/spaces/spaces"].find(m=>p.startsWith(m.id)):e.getters["runtime/spaces/spaces"].find(m=>Je(m)),l=async p=>{const m=Kt({id:p,webDavPath:vs(p)});return await t.webdav.getFileInfo(m,{},{davProperties:[$e.FileId,$e.FileParent,$e.Name,$e.ResourceType]})},u=p=>e.getters["runtime/spaces/spaces"].find(m=>{var h,g;return Tn(m)&&((g=(h=m.root)==null?void 0:h.remoteItem)==null?void 0:g.id)===p});return{loadIncomingParentShare:o,incomingParentShare:s}}const Uf=W({name:"SharesPanel",components:{FileLinks:Jh,FileShares:Tf,SpaceMembers:Of},props:{showSpaceMembers:{type:Boolean,default:!1},showLinks:{type:Boolean,default:!1}},emits:["scrollToElement"],setup(){const e=q(),t=_(()=>e.getters["Files/sharesLoading"]),{incomingParentShare:s,...i}=Bf();return Xt("incomingParentShare",s),{incomingParentShare:s,...i,sharesLoading:t,resource:de("resource"),activePanel:de("activePanel")}},watch:{sharesLoading:{handler:function(e,t){e||this.loadIncomingParentShare.perform(this.resource),!(!this.activePanel||!t)&&this.$nextTick(()=>{const[s,i]=this.activePanel.split("#");!i||!this.$refs[i]||this.$emit("scrollToElement",{element:this.$refs[i].$el,panelName:s})})},immediate:!0}}});function qf(e,t,s,i,n,o){const a=y("oc-loader"),c=y("space-members"),l=y("file-shares"),u=y("file-links");return d(),k("div",null,[e.sharesLoading?(d(),$(a,{key:0,"aria-label":e.$gettext("Loading list of shares")},null,8,["aria-label"])):(d(),k(X,{key:1},[e.showSpaceMembers?(d(),$(c,{key:0,ref:"peopleShares",class:"oc-background-highlight oc-p-m oc-mb-s"},null,512)):(d(),$(l,{key:1,ref:"peopleShares",class:"oc-background-highlight oc-p-m oc-mb-s"},null,512)),b(),e.showLinks?(d(),$(u,{key:2,ref:"linkShares",class:"oc-background-highlight oc-p-m"},null,512)):I("",!0)],64))])}const $i=K(Uf,[["render",qf]]),Di=100,Vf=W({name:"TagsPanel",components:{CompareSaveDialog:zn},setup(){const e=q(),t=ne(),{$gettext:s}=J(),i=de("resource"),n=_(()=>r(i)),o=Z([]),a=Z([]),c=Z(null),l=_(()=>[...r(n).tags.map(v=>({label:v}))]),u=Ue(function*(){const{data:{value:v=[]}}=yield t.graphAuthenticated.tags.getTags();a.value=[...v.map(F=>({label:F}))]}),p=()=>{o.value=r(l)},m=v=>v.trim().length?{label:v.toLowerCase().trim()}:{label:v.toLowerCase().trim(),error:s("Tag must not consist of blanks only"),selectable:!1},h=v=>r(o).length<=Di&&v.selectable!==!1,g=v=>!r(c).$refs.select.optionExists(v),f=async()=>{try{const{id:v,tags:F,fileId:S}=r(n),E=r(o).map(x=>x.label),L=ii(E,F),N=ii(F,E);L.length&&await t.graphAuthenticated.tags.assignTags({resourceId:S,tags:L}),N.length&&await t.graphAuthenticated.tags.unassignTags({resourceId:S,tags:N}),e.commit("Files/UPDATE_RESOURCE_FIELD",{id:v,field:"tags",value:[...E]}),Y.publish("sidebar.entity.saved")}catch(v){console.error(v),e.dispatch("showMessage",{title:s("Failed to edit tags"),status:"danger"})}};return je(n,()=>{var v;(v=r(n))!=null&&v.tags&&p()}),et(()=>{var v;(v=r(n))!=null&&v.tags&&(o.value=r(l)),u.perform()}),{loadAvailableTagsTask:u,availableTags:a,tagsMaxCount:Di,selectedTags:o,resource:n,tagSelect:c,currentTags:l,revertChanges:p,createOption:m,isOptionSelectable:h,showSelectNewLabel:g,save:f}}});const Hf={id:"tags-panel"},Kf={id:"tags-form",class:"oc-background-highlight oc-p-m"},Wf={class:"oc-flex oc-flex-center"},Gf={class:"oc-flex"},Yf=["textContent"],Qf={class:"oc-flex oc-flex-center"},Zf={key:0,class:"oc-text-input-danger"};function Jf(e,t,s,i,n,o){const a=y("oc-loader"),c=y("avatar-image"),l=y("oc-select"),u=y("compare-save-dialog");return d(),k("div",Hf,[C("div",Kf,[e.loadAvailableTagsTask.isRunning?(d(),$(a,{key:0})):(d(),$(l,{key:1,ref:"tagSelect",modelValue:e.selectedTags,"onUpdate:modelValue":t[0]||(t[0]=p=>e.selectedTags=p),class:"oc-mb-s",multiple:!0,options:e.availableTags,taggable:"","push-tags":"",label:e.$gettext("Add or edit tags"),"create-option":e.createOption,selectable:e.isOptionSelectable,"fix-message-line":!0},{"selected-option":A(({label:p})=>[C("span",Wf,[w(c,{class:"oc-flex oc-align-self-center oc-mr-s",width:16.8,userid:p,"user-name":p},null,8,["width","userid","user-name"]),b(),C("span",null,D(p),1)])]),option:A(({label:p,error:m})=>[C("div",Gf,[e.showSelectNewLabel({label:p})?(d(),k("span",{key:0,class:"oc-mr-s",textContent:D(e.$gettext("New"))},null,8,Yf)):I("",!0),b(),C("span",Qf,[w(c,{class:"oc-flex oc-align-self-center oc-mr-s",width:16.8,userid:p,"user-name":p},null,8,["width","userid","user-name"]),b(),C("span",null,D(p),1)])]),b(),m?(d(),k("div",Zf,D(m),1)):I("",!0)]),_:1},8,["modelValue","options","label","create-option","selectable"])),b(),w(u,{class:"edit-compare-save-dialog oc-mb-l","original-object":{tags:e.currentTags.map(p=>p.label)},"compare-object":{tags:e.selectedTags.map(p=>p.label)},onRevert:e.revertChanges,onConfirm:e.save},null,8,["original-object","compare-object","onRevert","onConfirm"])])])}const Xf=K(Vf,[["render",Jf]]),eg=W({name:"NoSelection",computed:{selectedFilesString(){return this.$gettext("Select a file or folder to view details.")}}}),tg={id:"oc-no-selection",class:"oc-text-center oc-mt-xl"},sg=["textContent"];function ig(e,t,s,i,n,o){const a=y("oc-icon");return d(),k("div",tg,[w(a,{size:"xxlarge",name:"drag-drop","fill-type":"line"}),b(),C("p",{"data-testid":"selectedFilesText",textContent:D(e.selectedFilesString)},null,8,sg)])}const ag=K(eg,[["render",ig]]),ng=W({name:"SpaceActions",components:{ActionMenuItem:na,QuotaModal:Ji,ReadmeContentModal:Da},setup(){const e=q(),t=Mt(),s=de("resource"),i=_(()=>({resources:[r(s)]})),n=Z(null),o=_(()=>t.getSupportedMimeTypes("image/").join(",")),{actions:a}=Xi({store:e}),{actions:c}=ea({store:e}),{actions:l}=sa({store:e}),{actions:u,modalOpen:p,closeModal:m}=ta({store:e}),{actions:h,modalOpen:g,closeModal:f}=la({store:e}),{actions:v}=ia({store:e}),{actions:F}=aa({store:e}),{actions:S,uploadImageSpace:E}=wa({store:e,spaceImageInput:n}),L=_(()=>[...r(v),...r(l),...r(S),...r(h),...r(u),...r(F),...r(a),...r(c)].filter(N=>N.isEnabled(r(i))));return{maxQuota:Oi(),actions:L,actionOptions:i,spaceImageInput:n,supportedSpaceImageMimeTypes:o,uploadImageActions:S,uploadImageSpace:E,readmeContentModalIsOpen:g,closeReadmeContentModal:f,quotaModalIsOpen:p,closeQuotaModal:m}}});const og=["accept"];function rg(e,t,s,i,n,o){const a=y("readme-content-modal"),c=y("quota-modal"),l=y("action-menu-item"),u=y("oc-list");return d(),k("div",null,[e.readmeContentModalIsOpen?(d(),$(a,{key:0,cancel:e.closeReadmeContentModal,space:e.actionOptions.resources[0]},null,8,["cancel","space"])):I("",!0),b(),e.quotaModalIsOpen?(d(),$(c,{key:1,cancel:e.closeQuotaModal,spaces:[e.actionOptions.resources[0]],"max-quota":e.maxQuota},null,8,["cancel","spaces","max-quota"])):I("",!0),b(),C("input",{id:"space-image-upload-input",ref:"spaceImageInput",type:"file",name:"file",tabindex:"-1",accept:e.supportedSpaceImageMimeTypes,onChange:t[0]||(t[0]=(...p)=>e.uploadImageSpace&&e.uploadImageSpace(...p))},null,40,og),b(),w(u,{id:"oc-spaces-actions-sidebar","class-name":"oc-mt-s"},{default:A(()=>[(d(!0),k(X,null,fe(e.actions,(p,m)=>(d(),$(l,{key:`action-${m}`,action:p,"action-options":e.actionOptions,class:"oc-rounded"},null,8,["action","action-options"]))),128))]),_:1})])}const lg=K(ng,[["render",rg]]);const cg=[({router:e,multipleSelection:t,rootFolder:s,resource:i})=>({app:"no-selection",icon:"questionnaire-line",title:"Details",component:ag,default:()=>!0,get enabled(){return!t&&!se(e,"files-spaces-projects")&&(!i||s&&(i==null?void 0:i.type)!=="space")}}),({router:e,resource:t,multipleSelection:s})=>({app:"no-selection",icon:"questionnaire-line",title:"Details",component:On,default:()=>!0,get enabled(){return se(e,"files-spaces-projects")&&!s&&!t}}),({router:e,multipleSelection:t,rootFolder:s,resource:i})=>({app:"details",icon:"questionnaire-line",title:"Details",component:cp,default:!me(e,"files-trash-generic"),get enabled(){return!!(!me(e,"files-trash-generic")&&!t&&!s&&i&&i.type!=="space")}}),({multipleSelection:e,router:t})=>({app:"details-multiple",icon:"questionnaire-line",title:"Details",component:Ep,componentAttrs:{get showSpaceCount(){return!se(t,"files-spaces-generic")&&!ue(t,"files-shares-with-me")&&!me(t,"files-trash-generic")}},default:()=>!0,get enabled(){return e&&!se(t,"files-spaces-projects")}}),({multipleSelection:e,selectedFiles:t,router:s})=>({app:"details-space-multiple",icon:"questionnaire-line",title:"Details",component:Bn,componentAttrs:{selectedSpaces:t},default:()=>!0,get enabled(){return e&&se(s,"files-spaces-projects")}}),({multipleSelection:e,resource:t})=>({app:"details-space",icon:"questionnaire-line",title:"Details",component:Un,default:()=>!0,get enabled(){return(t==null?void 0:t.type)==="space"&&!e}}),({router:e,multipleSelection:t,rootFolder:s,resource:i})=>({app:"actions",icon:"slideshow-3",title:"Actions",component:Rp,default:me(e,"files-trash-generic"),get enabled(){return!!(!t&&!s&&i&&i.type!=="space")}}),({multipleSelection:e,resource:t,router:s,user:i})=>({app:"space-actions",icon:"slideshow-3",title:"Actions",component:lg,get enabled(){return e||(t==null?void 0:t.type)!=="space"||!se(s,"files-spaces-projects")&&!se(s,"files-spaces-generic")?!1:!![...t.spaceRoles[ys.name],...t.spaceRoles[hn.name]].find(n=>n.id===i.uuid)}}),({capabilities:e,router:t,multipleSelection:s,rootFolder:i,resource:n})=>({app:"sharing",icon:"user-add",iconFillType:"line",title:"Shares",component:$i,componentAttrs:{showSpaceMembers:!1,get showLinks(){return e.files_sharing?e.files_sharing.public.enabled:!1}},get enabled(){return s||i||!n||n.type==="space"||me(t,"files-trash-generic")||Ae(t,"files-public-link")?!1:e.files_sharing?e.files_sharing.api_enabled:!1}}),({capabilities:e,resource:t,router:s,multipleSelection:i,rootFolder:n})=>({app:"tags",icon:"price-tag-3",iconFillType:"line",title:"Tags",component:Xf,componentAttrs:{},get enabled(){var o;return!((o=e==null?void 0:e.files)!=null&&o.tags)||i||n||!t||t.type==="space"||typeof t.canEditTags!="function"||!t.canEditTags()?!1:!(me(s,"files-trash-generic")||Ae(s,"files-public-link"))}}),({multipleSelection:e,resource:t,capabilities:s})=>({app:"space-share",icon:"group",title:"Members",component:$i,componentAttrs:{showSpaceMembers:!0,get showLinks(){return s.files_sharing?s.files_sharing.public.enabled:!1}},get enabled(){return(t==null?void 0:t.type)==="space"&&!e}}),({capabilities:e,resource:t,router:s,multipleSelection:i,rootFolder:n})=>({app:"versions",icon:"git-branch",title:"Versions",component:Hp,get enabled(){return i||n||me(s,"files-trash-generic")||Ae(s,"files-public-link")?!1:!!e.core&&t&&t.type!=="folder"&&t.type!=="space"}})];const Ze={name:"Files",id:"files",icon:"resource-type-folder",isFileEditor:!1,extensions:[],fileSideBars:cg},dg=e=>[{name(t){var s;return(s=t.spaces)!=null&&s.enabled?"Personal":"All files"},icon:Ze.icon,route:{path:`/${Ze.id}/spaces/personal`},enabled(t){var s,i;return(s=t.spaces)!=null&&s.enabled?!!((i=e==null?void 0:e.$store)!=null&&i.getters["runtime/spaces/spaces"].find(n=>Je(n))):!0}},{name:"Favorites",icon:"star",route:{path:`/${Ze.id}/favorites`},enabled(t){var s;return(s=t.files)==null?void 0:s.favorites}},{name:"Shares",icon:"share-forward",route:{path:`/${Ze.id}/shares`},activeFor:[{path:`/${Ze.id}/spaces/share`}],enabled(t){var s;return((s=t.files_sharing)==null?void 0:s.api_enabled)!==!1}},{name:"Spaces",icon:"layout-grid",route:{path:`/${Ze.id}/spaces/projects`},activeFor:[{path:`/${Ze.id}/spaces/project`}],enabled(t){var s;return(s=t.spaces)==null?void 0:s.projects}},{name:"Deleted files",icon:"delete-bin-5",route:{path:`/${Ze.id}/trash/overview`},activeFor:[{path:`/${Ze.id}/trash`}],enabled(t){var s;return((s=t.dav)==null?void 0:s.trashbin)==="1.0"}}],Ag={appInfo:Ze,store:tu,routes:bo({App:ho,Favorites:dl,FilesDrop:Pl,SearchResults:Zn,Shares:{SharedViaLink:Jl,SharedWithMe:Vl,SharedWithOthers:Gl},Spaces:{DriveResolver:fd,Projects:_d},Trash:{Overview:Ld}}),navItems:dg,quickActions:Wt,translations:Gd,ready({router:e,store:t,globalProperties:s}){const{$clientService:i}=s;Fs.sdkSearch=new gu(t,e,i),Y.publish("app.search.register.provider",Fs.sdkSearch),s.$archiverService=new bu(i,t.getters.configuration.server||window.location.origin,ss(t,"getters.capabilities.files.archivers",[{enabled:!0,version:"1.0.0",formats:["tar","zip"],archiver_url:`${t.getters.configuration.server}index.php/apps/files/ajax/download.php`}]))}};export{Ag as default};
